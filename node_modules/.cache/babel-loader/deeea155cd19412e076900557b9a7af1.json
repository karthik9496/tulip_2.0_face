{"ast":null,"code":"import _defineProperty from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By : \n */import{useState,useEffect}from\"react\";import{withRouter,useParams,useHistory}from\"react-router-dom\";import{useForm}from\"react-hook-form\";import axios from'axios';import*as yup from\"yup\";import{yupResolver}from'@hookform/resolvers/yup';import LiveSearch from'../utils/LiveSearch';import DatePicker from'react-datepicker';import\"react-datepicker/dist/react-datepicker.css\";import addDays from'date-fns/addDays';import Tabs from'react-bootstrap/Tabs';import Tab from'react-bootstrap/Tab';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var schema=yup.object({sectionName:yup.string().required('Required'),sectionGroup:yup.string().required('Required'),dakGroupDest:yup.string().required('Required'),dakGroupSrc:yup.string().required('Required'),dakEntry:yup.boolean().required('Required'),taskMarkingAtRsec:yup.boolean().required('Required'),auditorDate:yup.string().required('Required'),aaoDate:yup.string().required('Required'),aoDate:yup.string().required('Required'),recordStatus:yup.string().required('Required'),approved:yup.boolean().required('Required')});var SectionEdit=function SectionEdit(){var _errors$sectionName,_errors$sectionGroup,_errors$dakGroupDest,_errors$dakGroupSrc,_errors$dakEntry,_errors$taskMarkingAt,_errors$recordStatus,_errors$approved;var _useForm=useForm({resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,errors=_useForm.formState.errors,clearErrors=_useForm.clearErrors;var _useParams=useParams(),id=_useParams.id;//console.log(id);\nvar history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),serverErrors=_useState2[0],setServerErrors=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),entity=_useState4[0],setEntity=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),state=_useState6[0],setState=_useState6[1];var _useState7=useState('page1'),_useState8=_slicedToArray(_useState7,2),key=_useState8[0],setKey=_useState8[1];var _useState9=useState(new Date()),_useState10=_slicedToArray(_useState9,2),auditorDate=_useState10[0],setAuditorDate=_useState10[1];var _useState11=useState(new Date()),_useState12=_slicedToArray(_useState11,2),aaoDate=_useState12[0],setAaoDate=_useState12[1];var _useState13=useState(new Date()),_useState14=_slicedToArray(_useState13,2),aoDate=_useState14[0],setAoDate=_useState14[1];useEffect(function(){var isCancelled=false;console.log(id);if(id!=='new'){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var record,fields;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:record='';_context.next=3;return axios.get('/sections/'+id).then(function(response){record=response.data;}).catch(function(error){//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 3:fields=['id','sectionName','sectionGroup','dakGroupDest','dakGroupSrc','dakEntry','taskMarkingAtRsec','auditorDate','aaoDate','aoDate','recordStatus','approved'];fields.forEach(function(field){return setValue(field,record[field]);});if(!isCancelled){setEntity(record);setState(function(prev){return _objectSpread(_objectSpread({},prev),{},{state:record});});}case 6:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();return function(){isCancelled=true;};}},[id,setValue]);var onSubmit=function onSubmit(data,event){event.preventDefault();console.log(data);if(data.id){axios.put(\"/sections/\"+data.id,data).then(function(response){}).catch(function(error){//console.log(error.response.data);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nsetServerErrors(error.response.data);});}else{axios.post(\"/sections\",data).then(function(response){}).catch(function(error){//console.log(error.response.data);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nsetServerErrors(error.response.data);});}history.push(\"/sections\");};var onError=function onError(errors,e){return console.log(errors,e);};//All foreign keys. \n// XXXXXX Add search fields and adjust the values as necessary\nvar parentData={};//Callback for child components (Foreign Keys)\nvar callback=function callback(childData){//console.log(\"Parent Callback\");\nsetEntity(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},childData.fk,childData.entity));});setValue(childData.fk,childData.entity);//console.log(errors);\nclearErrors(childData.fk);};var errorCallback=function errorCallback(err){//console.log(err);\nsetServerErrors(err);};var handleInputChange=function handleInputChange(e){//console.log(e.target.value);\n};return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-xl mx-auto \",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full w-3/4  mx-auto \",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit,onError),children:[/*#__PURE__*/_jsxs(\"h1\",{children:[id==='new'?'Add':'Edit',\" Section \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:serverErrors}),/*#__PURE__*/_jsxs(Tabs,{id:\"GrievanceEdit\",activeKey:key,onSelect:function onSelect(k){return setKey(k);},className:\"mb-3\",children:[/*#__PURE__*/_jsx(Tab,{eventKey:\"page1\",title:\"Page 1\",className:\"h-120\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-0\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Section Name\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"sectionName\"},register(\"sectionName\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$sectionName=errors.sectionName)===null||_errors$sectionName===void 0?void 0:_errors$sectionName.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Section Group\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"sectionGroup\"},register(\"sectionGroup\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$sectionGroup=errors.sectionGroup)===null||_errors$sectionGroup===void 0?void 0:_errors$sectionGroup.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Dak Group Dest\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"dakGroupDest\"},register(\"dakGroupDest\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$dakGroupDest=errors.dakGroupDest)===null||_errors$dakGroupDest===void 0?void 0:_errors$dakGroupDest.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Dak Group Src\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"dakGroupSrc\"},register(\"dakGroupSrc\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$dakGroupSrc=errors.dakGroupSrc)===null||_errors$dakGroupSrc===void 0?void 0:_errors$dakGroupSrc.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Dak Entry\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"dakEntry\"},register(\"dakEntry\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$dakEntry=errors.dakEntry)===null||_errors$dakEntry===void 0?void 0:_errors$dakEntry.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Task Marking At Rsec\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"taskMarkingAtRsec\"},register(\"taskMarkingAtRsec\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$taskMarkingAt=errors.taskMarkingAtRsec)===null||_errors$taskMarkingAt===void 0?void 0:_errors$taskMarkingAt.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Auditor Date\"}),/*#__PURE__*/_jsx(DatePicker,_objectSpread(_objectSpread({type:\"text\",name:\"auditorDate\"},register(\"auditorDate\")),{},{selected:auditorDate,onChange:function onChange(date){return setAuditorDate(date);},dateFormat:\"dd/MM/yyyy\",className:\" -ml-2 pl-2 pr-6\"}))]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Aao Date\"}),/*#__PURE__*/_jsx(DatePicker,_objectSpread(_objectSpread({type:\"text\",name:\"aaoDate\"},register(\"aaoDate\")),{},{selected:aaoDate,onChange:function onChange(date){return setAaoDate(date);},dateFormat:\"dd/MM/yyyy\",className:\" -ml-2 pl-2 pr-6\"}))]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Ao Date\"}),/*#__PURE__*/_jsx(DatePicker,_objectSpread(_objectSpread({type:\"text\",name:\"aoDate\"},register(\"aoDate\")),{},{selected:aoDate,onChange:function onChange(date){return setAoDate(date);},dateFormat:\"dd/MM/yyyy\",className:\" -ml-2 pl-2 pr-6\"}))]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Record Status\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"recordStatus\"},register(\"recordStatus\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$recordStatus=errors.recordStatus)===null||_errors$recordStatus===void 0?void 0:_errors$recordStatus.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Approved\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"approved\"},register(\"approved\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$approved=errors.approved)===null||_errors$approved===void 0?void 0:_errors$approved.message})]})]})}),/*#__PURE__*/_jsx(Tab,{eventKey:\"page2\",title:\"Page 2\",className:\"h-120\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-0\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Add some fields here or delete this tab.\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save\"})})]})})});};export default withRouter(SectionEdit);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/SectionEdit.js"],"names":["useState","useEffect","withRouter","useParams","useHistory","useForm","axios","yup","yupResolver","LiveSearch","DatePicker","addDays","Tabs","Tab","schema","object","sectionName","string","required","sectionGroup","dakGroupDest","dakGroupSrc","dakEntry","boolean","taskMarkingAtRsec","auditorDate","aaoDate","aoDate","recordStatus","approved","SectionEdit","resolver","register","handleSubmit","setValue","errors","formState","clearErrors","id","history","serverErrors","setServerErrors","entity","setEntity","state","setState","key","setKey","Date","setAuditorDate","setAaoDate","setAoDate","isCancelled","console","log","fetchData","record","get","then","response","data","catch","error","Error","fields","forEach","field","prev","onSubmit","event","preventDefault","put","post","push","onError","e","parentData","callback","childData","fk","errorCallback","err","handleInputChange","k","message","date"],"mappings":"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","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By : \n */\n\nimport { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from 'axios';\nimport * as yup from \"yup\";\n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport LiveSearch from '../utils/LiveSearch';\n\nimport DatePicker  from 'react-datepicker';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport addDays from 'date-fns/addDays'\n\nimport Tabs from 'react-bootstrap/Tabs'\nimport Tab from 'react-bootstrap/Tab'\n\nconst schema = yup.object({\n      sectionName: yup.string().required('Required'),\n      sectionGroup: yup.string().required('Required'),\n      dakGroupDest: yup.string().required('Required'),\n      dakGroupSrc: yup.string().required('Required'),\n      dakEntry: yup.boolean().required('Required'),\n      taskMarkingAtRsec: yup.boolean().required('Required'),\n      auditorDate: yup.string().required('Required'),\n      aaoDate: yup.string().required('Required'),\n      aoDate: yup.string().required('Required'),\n      recordStatus: yup.string().required('Required'),\n      approved: yup.boolean().required('Required'),\n});\n\n\nconst SectionEdit = () => {\n\tconst { register, handleSubmit, setValue, formState: { errors }, clearErrors } = useForm({\n\t\tresolver: yupResolver(schema)\n\t});\n\n\tlet { id } = useParams();\n\t//console.log(id);\n\n\tlet history = useHistory();\n\tconst [serverErrors, setServerErrors] = useState([]);\n\tconst [entity, setEntity] = useState({});\n\tconst [state, setState] = useState({});\n\tconst [key, setKey] = useState('page1');\n\t\n    const [ auditorDate, setAuditorDate] = useState(new Date());\n    const [ aaoDate, setAaoDate] = useState(new Date());\n    const [ aoDate, setAoDate] = useState(new Date());\n\n\n\n\tuseEffect(() => {\n\t\tlet isCancelled = false;\n\t\tconsole.log(id);\n\t\tif (id !== 'new') {\n\t\t\tasync function fetchData() {\n\t\t\t\tlet record = '';\n\t\t\t\tawait axios.get('/sections/' + id)\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\trecord = response.data;\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t//console.log(error);\n\t\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\t\tif(error.response)\n\t\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t\t});\n\n\t\t\t\tconst fields = [\n\t\t\t\t'id'\n, 'sectionName', 'sectionGroup', 'dakGroupDest', 'dakGroupSrc', 'dakEntry', 'taskMarkingAtRsec', 'auditorDate', 'aaoDate', 'aoDate', 'recordStatus', 'approved'\t\t\t\t\n\t\t\t\t\t];\n\t\t\t\tfields.forEach(field => setValue(field, record[field]));\n\t\t\t\tif (!isCancelled) {\n\t\t\t\t\tsetEntity(record);\n\t\t\t\t\tsetState(prev => ({ ...prev, state: record }));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfetchData();\n\t\t\treturn () => {\n\t\t\t\tisCancelled = true;\n\t\t\t};\n\t\t}\n\n\t}, [id, setValue]);\n\n\n\tconst onSubmit = (data, event) => {\n\t\tevent.preventDefault();\n\t\tconsole.log(data);\n\t\tif (data.id) {\n\t\t\taxios.put(\"/sections/\" + data.id, data)\n\t\t\t\t.then((response) => { })\n\t\t\t\t.catch((error) => {\n\t\t\t\t\t//console.log(error.response.data);\n\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\tsetServerErrors(error.response.data)\n\t\t\t\t});\n\t\t} else {\n\t\t\taxios.post(\"/sections\", data)\n\t\t\t\t.then((response) => { })\n\t\t\t\t.catch((error) => {\n\t\t\t\t\t//console.log(error.response.data);\n\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\tsetServerErrors(error.response.data)\n\t\t\t\t});\n\t\t}\n\n\t\thistory.push(\"/sections\");\n\t}\n\n\tconst onError = (errors, e) => console.log(errors, e);\n\n\t//All foreign keys. \n\t// XXXXXX Add search fields and adjust the values as necessary\n\tconst parentData = {\n\t\n\t}\n\n\t//Callback for child components (Foreign Keys)\n\tconst callback = (childData) => {\n\t\t//console.log(\"Parent Callback\");\n\t\tsetEntity(prev => ({ ...prev, [childData.fk]: childData.entity }));\n\t\tsetValue(childData.fk, childData.entity);\n\t\t//console.log(errors);\n\t\tclearErrors(childData.fk);\n\t};\n\n\tconst errorCallback = (err) => {\n\t\t//console.log(err);\n\t\tsetServerErrors(err);\n\t}\n\n\tconst handleInputChange = (e) => {\n\t\t//console.log(e.target.value);\n\t};\n\n\treturn (\n\t\t<div className=\"max-w-xl mx-auto \">\n\t\t\t<div className=\"w-full w-3/4  mx-auto \" >\n\n\t\t\t\t<form onSubmit={handleSubmit(onSubmit, onError)}>\n\t\t\t\t\t<h1 >{id === 'new' ? 'Add' : 'Edit'} Section </h1>\n\t\t\t\t\t<div className=\"text-red-500\">{serverErrors}</div>\n\t\t\t\t\t<Tabs\n\t\t\t\t\t\tid=\"GrievanceEdit\"\n\t\t\t\t\t\tactiveKey={key}\n\t\t\t\t\t\tonSelect={(k) => setKey(k)}\n\t\t\t\t\t\tclassName=\"mb-3\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tab eventKey=\"page1\" title=\"Page 1\" className=\"h-120\">\n\t\t\t\t\t\t\t<div className=\"grid grid-cols-2 gap-0\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Section Name</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"sectionName\" {...register(\"sectionName\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.sectionName?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Section Group</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"sectionGroup\" {...register(\"sectionGroup\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.sectionGroup?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Dak Group Dest</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"dakGroupDest\" {...register(\"dakGroupDest\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.dakGroupDest?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Dak Group Src</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"dakGroupSrc\" {...register(\"dakGroupSrc\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.dakGroupSrc?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Dak Entry</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"dakEntry\" {...register(\"dakEntry\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.dakEntry?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Task Marking At Rsec</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"taskMarkingAtRsec\" {...register(\"taskMarkingAtRsec\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.taskMarkingAtRsec?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Auditor Date</label>\n\t\t\t\t\t\t\t\t\t<DatePicker type=\"text\" name=\"auditorDate\" {...register(\"auditorDate\")}\n\t\t\t\t\t\t\t\t\tselected={ auditorDate } onChange={(date) => setAuditorDate(date)} \n\t\t\t\t\t\t\t\t\tdateFormat=\"dd/MM/yyyy\"  \n\t\t\t\t\t\t\t\t\tclassName=\" -ml-2 pl-2 pr-6\"  />\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Aao Date</label>\n\t\t\t\t\t\t\t\t\t<DatePicker type=\"text\" name=\"aaoDate\" {...register(\"aaoDate\")}\n\t\t\t\t\t\t\t\t\tselected={ aaoDate } onChange={(date) => setAaoDate(date)} \n\t\t\t\t\t\t\t\t\tdateFormat=\"dd/MM/yyyy\"  \n\t\t\t\t\t\t\t\t\tclassName=\" -ml-2 pl-2 pr-6\"  />\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Ao Date</label>\n\t\t\t\t\t\t\t\t\t<DatePicker type=\"text\" name=\"aoDate\" {...register(\"aoDate\")}\n\t\t\t\t\t\t\t\t\tselected={ aoDate } onChange={(date) => setAoDate(date)} \n\t\t\t\t\t\t\t\t\tdateFormat=\"dd/MM/yyyy\"  \n\t\t\t\t\t\t\t\t\tclassName=\" -ml-2 pl-2 pr-6\"  />\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Record Status</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"recordStatus\" {...register(\"recordStatus\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.recordStatus?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Approved</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"approved\" {...register(\"approved\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.approved?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\n\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tab>\n\n\t\t\t\t\t\t<Tab eventKey=\"page2\" title=\"Page 2\" className=\"h-120\">\n\t\t\t\t\t\t\t<div className=\"grid grid-cols-2 gap-0\">\n\t\t\t\t\t\t\t<p>Add some fields here or delete this tab.</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tab>\n\t\t\t\t\t</Tabs>\n\t\t\t\t\t\t\n\t\t\t\t\t<div className=\"px-4\">\n\t\t\t\t\t\t<button type=\"submit\" >Save</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default withRouter(SectionEdit);"]},"metadata":{},"sourceType":"module"}