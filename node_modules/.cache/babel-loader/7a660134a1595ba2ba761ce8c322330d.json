{"ast":null,"code":"var _jsxFileName = \"/home/itsdcsec/falconws/falcon_face/src/components/NokEdit.js\";\nimport axios from \"axios\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport Table from \"../utils/Table\";\nimport { useLocation } from \"react-router-dom/cjs/react-router-dom.min\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction NokEdit() {\n  var _data$employee, _data$employee2, _data$relation, _data$bankAccount, _data$bankAccount2, _data$bankAccount2$ba, _data$bankAccount3, _data$bankAccount3$ba, _data$bankAccount4, _data$bankAccount4$ba, _data$bankAccount5, _data$bankAccount5$ba;\n\n  const searchParams = new URLSearchParams(document.location.search);\n  const dakid = searchParams.get(\"dakIdNo\") ? searchParams.get(\"dakIdNo\") : \"\";\n  const nok = {\n    employee: {\n      officerName: \"\",\n      cdaoNo: \"\"\n    },\n    nameOfMember: \"\",\n    dateOfBirth: \"\",\n    relation: {\n      id: \"\"\n    },\n    nokPercentage: \"\",\n    fromDate: \"\",\n    toDate: \"\",\n    pan: \"\",\n    address: \"\",\n    bankAccount: {\n      bankAccountNo: \"\",\n      bank: {\n        bankName: \"\",\n        bankBranch: \"\",\n        bankBranch: \"\",\n        bankStation: \"\",\n        ifsc: \"\"\n      }\n    },\n    dakidNo: \"\"\n  };\n  let {\n    id\n  } = useParams();\n  let {\n    state\n  } = useLocation();\n  let history = useHistory();\n  const [data, setData] = useState({ ...nok,\n    dakidNo: dakid\n  });\n  const [processedData, setProcessedData] = useState([]);\n  const [relations, setRelations] = useState([]);\n  const [cdaoNo, setCdaoNo] = useState(\"\");\n  const [ifscNo, setIfscNo] = useState(\"\");\n  const [readOnly, setReadonly] = useState(false);\n  const [err, setErr] = useState(\"\");\n  useEffect(() => {\n    if (id !== \"new\") {\n      let myData = {};\n      axios.get(`/noks/${id}`).then(response => {\n        console.log(\"testing \", response.data);\n        myData = response.data;\n\n        if (response.data.id) {\n          axios.get(`/bankAccounts/fkNokId/${response.data.id}`).then(res => {\n            console.log(\"bank Account detail of nok\", res.data);\n            myData = { ...myData,\n              bankAccount: res.data\n            };\n            console.log(myData);\n            setData(myData);\n          });\n        }\n\n        if ([\"submit\", \"approve\"].includes(response.data.action)) {\n          setReadonly(true);\n        } else {\n          setReadonly(false);\n        }\n\n        if (response.data.cdaoNo) {\n          axios.get(`/noks/byCdaoNo/${response.data.cdaoNo}`).then(res => {\n            console.log(res.data);\n            setProcessedData(res.data);\n          });\n        }\n      });\n    }\n  }, []);\n  useEffect(() => {\n    if ((cdaoNo === null || cdaoNo === void 0 ? void 0 : cdaoNo.length) !== 6) setData({ ...data,\n      employee: {\n        officerName: \"\",\n        cdaoNo: cdaoNo\n      }\n    });\n\n    if (cdaoNo && cdaoNo.length == 6) {\n      axios.get(`/employees/byCdaoNo/${cdaoNo}`).then(response => {\n        var _response$data;\n\n        console.log(\"employee >>>> \", response.data);\n\n        if ((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.cdaoNo) {\n          setData({ ...data,\n            employee: response.data\n          });\n        }\n      });\n      axios.get(`/noks`).then(response => {\n        console.log(response.data);\n      });\n    }\n  }, [cdaoNo]);\n  useEffect(() => {\n    axios.get(\"/relations\").then(response => {\n      console.log(\"relations>>>\", response.data);\n      setRelations(response.data);\n    });\n  }, []);\n  useEffect(() => {\n    setData({ ...data,\n      bankAccount: { ...data.bankAccount,\n        bank: {\n          bankName: \"\",\n          bankBranch: \"\",\n          bankBranch: \"\",\n          bankStation: \"\",\n          ifsc: ifscNo\n        }\n      }\n    });\n\n    function FetchBank(ifsc) {\n      axios.get(`/banks/ifsc/${ifsc}`).then(response => {\n        console.log(\"bank >>> \", response.data);\n\n        if (response.data.bankBranch) {\n          setData({ ...data,\n            bankAccount: { ...data.bankAccount,\n              bank: response.data\n            }\n          });\n        }\n      });\n    }\n\n    if (ifscNo) FetchBank(ifscNo);\n  }, [ifscNo]);\n\n  function HandleInputChange(e) {\n    let {\n      name,\n      value\n    } = e.target;\n    if (name == \"pan\") value = value.toUpperCase();\n    setData({ ...data,\n      [name]: value\n    });\n  }\n\n  function HandleRelation(e) {\n    console.log(\"e\", e.target.value);\n    let rel = {};\n    relations.map((item, index) => {\n      if (item.id == e.target.value) {\n        rel = item;\n      }\n    });\n    setData({ ...data,\n      relation: rel\n    });\n  }\n\n  function SubmitData() {\n    if (data.bankAccount.bank.id && data.bankAccount.bankAccountNo) {\n      if (id == \"new\") {\n        axios.post(`/noks`, data).then(response => {\n          console.log(response.data);\n\n          if (response.data == \"ok\") {\n            history.push(\"/noks\");\n          } else {\n            setErr(response.data);\n          }\n        });\n      } else {\n        axios.put(`/noks/${id}`, data).then(response => {\n          console.log(\" >>>\", response.data);\n\n          if (response.data == \"ok\") {\n            history.push(\"/noks\");\n          }\n        });\n      }\n    } else {\n      alert(\"please check bank detail\");\n    }\n  }\n\n  function Reject() {\n    axios.put(`/noks/rollBack/${id}`).then(response => {\n      console.log(response.data);\n\n      if (response.data == \"ok\") {\n        history.push(\"/noks\");\n      }\n    });\n  }\n\n  const columns = useMemo(() => [{\n    Header: \"CDAO No\",\n    accessor: \"cdaoNo\"\n  }, {\n    Header: \"Officer Name\",\n    accessor: \"employee.officerName\"\n  }, {\n    Header: \"Name of Member\",\n    accessor: \"nameOfMember\"\n  }, {\n    Header: \"Date of Birth\",\n    accessor: \"dateOfBirth\"\n  }, {\n    Header: \"Relation\",\n    accessor: \"relation.relationName\"\n  }, {\n    Header: \"Nomination percentage\",\n    accessor: \"nokPercentage\"\n  }, {\n    Header: \"Date of Approval\",\n    accessor: \"aoDate\"\n  }], [processedData]);\n  const inputStyling = {\n    width: \"240px\",\n    marginBottom: \"7px\",\n    padding: \"2px 10px\"\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col items-center pt-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"underline\",\n        children: [id != \"new\" ? \"Edit\" : \"Add\", \" NOK\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-9/12 flex flex-col items-center bg-gray-300 p-3 mt-3  rounded-lg\",\n      children: [data.dakidNo && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Dak Id\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 15\n          }, this), state && (state === null || state === void 0 ? void 0 : state.dakN), /*#__PURE__*/_jsxDEV(\"input\", {\n            style: { ...inputStyling\n            },\n            name: \"fkdak\",\n            value: searchParams.get(\"dakIdNo\"),\n            onChange: e => {//setCdaoNo(e.target.value);\n            },\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap justify-center\",\n        children: [err && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: err\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Cdao No\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              style: { ...inputStyling\n              },\n              name: \"cdaoNo\",\n              value: (_data$employee = data.employee) === null || _data$employee === void 0 ? void 0 : _data$employee.cdaoNo,\n              onChange: e => {\n                setCdaoNo(e.target.value);\n              },\n              readOnly: readOnly\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Officer Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              style: { ...inputStyling\n              },\n              name: \"officerName\",\n              value: (_data$employee2 = data.employee) === null || _data$employee2 === void 0 ? void 0 : _data$employee2.officerName,\n              readOnly: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Name of NOK\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              style: { ...inputStyling\n              },\n              name: \"nameOfMember\",\n              value: data.nameOfMember,\n              onChange: e => HandleInputChange(e),\n              readOnly: readOnly\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Relation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              style: { ...inputStyling\n              },\n              name: \"relation\",\n              value: (_data$relation = data.relation) === null || _data$relation === void 0 ? void 0 : _data$relation.id,\n              onChange: e => HandleRelation(e),\n              readOnly: readOnly,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                disabled: readOnly,\n                children: \"--Select--\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 17\n              }, this), relations.length > 1 && (relations === null || relations === void 0 ? void 0 : relations.map((item, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: item.id,\n                disabled: readOnly,\n                children: item.relationName\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 21\n              }, this)))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Percentage of NOK\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              style: { ...inputStyling\n              },\n              name: \"nokPercentage\",\n              type: \"number\",\n              value: data.nokPercentage,\n              onChange: e => HandleInputChange(e),\n              readOnly: readOnly\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"A/C Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              style: { ...inputStyling\n              },\n              name: \"bankAccountNo\",\n              value: data === null || data === void 0 ? void 0 : (_data$bankAccount = data.bankAccount) === null || _data$bankAccount === void 0 ? void 0 : _data$bankAccount.bankAccountNo,\n              onChange: e => {\n                const {\n                  name,\n                  value\n                } = e.target;\n                setData({ ...data,\n                  bankAccount: { ...data.bankAccount,\n                    [name]: value\n                  }\n                });\n              },\n              readOnly: readOnly\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"IFSC No\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              style: { ...inputStyling\n              },\n              name: \"ifsc\",\n              value: data === null || data === void 0 ? void 0 : (_data$bankAccount2 = data.bankAccount) === null || _data$bankAccount2 === void 0 ? void 0 : (_data$bankAccount2$ba = _data$bankAccount2.bank) === null || _data$bankAccount2$ba === void 0 ? void 0 : _data$bankAccount2$ba.ifsc,\n              onChange: e => {\n                setIfscNo(e.target.value.toUpperCase());\n              },\n              readOnly: readOnly\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Bank\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              style: { ...inputStyling\n              },\n              value: data === null || data === void 0 ? void 0 : (_data$bankAccount3 = data.bankAccount) === null || _data$bankAccount3 === void 0 ? void 0 : (_data$bankAccount3$ba = _data$bankAccount3.bank) === null || _data$bankAccount3$ba === void 0 ? void 0 : _data$bankAccount3$ba.bankName,\n              readOnly: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Bank Station\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              style: { ...inputStyling\n              },\n              value: data === null || data === void 0 ? void 0 : (_data$bankAccount4 = data.bankAccount) === null || _data$bankAccount4 === void 0 ? void 0 : (_data$bankAccount4$ba = _data$bankAccount4.bank) === null || _data$bankAccount4$ba === void 0 ? void 0 : _data$bankAccount4$ba.bankStation,\n              readOnly: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Branch\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              style: { ...inputStyling\n              },\n              value: data === null || data === void 0 ? void 0 : (_data$bankAccount5 = data.bankAccount) === null || _data$bankAccount5 === void 0 ? void 0 : (_data$bankAccount5$ba = _data$bankAccount5.bank) === null || _data$bankAccount5$ba === void 0 ? void 0 : _data$bankAccount5$ba.bankBranch,\n              readOnly: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"w-32 mx-2\",\n          onClick: () => {\n            console.log(\"data >>>> \", data);\n            SubmitData();\n          },\n          children: [!(data === null || data === void 0 ? void 0 : data.action) && \"Submit\", (data === null || data === void 0 ? void 0 : data.action) == \"submit\" && \"Submit\", (data === null || data === void 0 ? void 0 : data.action) == \"approve\" && \"Approve\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 11\n        }, this), (data === null || data === void 0 ? void 0 : data.action) == \"submit\" || (data === null || data === void 0 ? void 0 : data.action) == \"approve\" ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"w-32 mx-2 bg-red-600\",\n          onClick: () => {\n            Reject();\n          },\n          children: \"Send Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 13\n        }, this) : \"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => console.log(data),\n          children: \"Console log\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        data: processedData,\n        columns: columns\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 225,\n    columnNumber: 5\n  }, this);\n}\n\nexport default NokEdit;","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/NokEdit.js"],"names":["axios","useEffect","useMemo","useState","useParams","useHistory","Table","useLocation","NokEdit","searchParams","URLSearchParams","document","location","search","dakid","get","nok","employee","officerName","cdaoNo","nameOfMember","dateOfBirth","relation","id","nokPercentage","fromDate","toDate","pan","address","bankAccount","bankAccountNo","bank","bankName","bankBranch","bankStation","ifsc","dakidNo","state","history","data","setData","processedData","setProcessedData","relations","setRelations","setCdaoNo","ifscNo","setIfscNo","readOnly","setReadonly","err","setErr","myData","then","response","console","log","res","includes","action","length","FetchBank","HandleInputChange","e","name","value","target","toUpperCase","HandleRelation","rel","map","item","index","SubmitData","post","push","put","alert","Reject","columns","Header","accessor","inputStyling","width","marginBottom","padding","dakN","relationName"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport Table from \"../utils/Table\";\nimport { useLocation } from \"react-router-dom/cjs/react-router-dom.min\";\n\nfunction NokEdit() {\n  const searchParams = new URLSearchParams(document.location.search);\n  const dakid = searchParams.get(\"dakIdNo\") ? searchParams.get(\"dakIdNo\") : \"\";\n\n  const nok = {\n    employee: { officerName: \"\", cdaoNo: \"\" },\n    nameOfMember: \"\",\n    dateOfBirth: \"\",\n    relation: { id: \"\" },\n    nokPercentage: \"\",\n    fromDate: \"\",\n    toDate: \"\",\n    pan: \"\",\n    address: \"\",\n    bankAccount: {\n      bankAccountNo: \"\",\n      bank: {\n        bankName: \"\",\n        bankBranch: \"\",\n        bankBranch: \"\",\n        bankStation: \"\",\n        ifsc: \"\",\n      },\n    },\n    dakidNo: \"\",\n  };\n\n  let { id } = useParams();\n  let { state } = useLocation();\n  let history = useHistory();\n\n  const [data, setData] = useState({ ...nok, dakidNo: dakid });\n  const [processedData, setProcessedData] = useState([]);\n  const [relations, setRelations] = useState([]);\n  const [cdaoNo, setCdaoNo] = useState(\"\");\n  const [ifscNo, setIfscNo] = useState(\"\");\n  const [readOnly, setReadonly] = useState(false);\n  const [err, setErr] = useState(\"\");\n\n  useEffect(() => {\n    if (id !== \"new\") {\n      let myData = {};\n      axios.get(`/noks/${id}`).then((response) => {\n        console.log(\"testing \", response.data);\n        myData = response.data;\n\n        if (response.data.id) {\n          axios.get(`/bankAccounts/fkNokId/${response.data.id}`).then((res) => {\n            console.log(\"bank Account detail of nok\", res.data);\n            myData = { ...myData, bankAccount: res.data };\n            console.log(myData);\n            setData(myData);\n          });\n        }\n\n        if ([\"submit\", \"approve\"].includes(response.data.action)) {\n          setReadonly(true);\n        } else {\n          setReadonly(false);\n        }\n\n        if (response.data.cdaoNo) {\n          axios.get(`/noks/byCdaoNo/${response.data.cdaoNo}`).then((res) => {\n            console.log(res.data);\n            setProcessedData(res.data);\n          });\n        }\n      });\n    }\n  }, []);\n\n  useEffect(() => {\n    if (cdaoNo?.length !== 6)\n      setData({ ...data, employee: { officerName: \"\", cdaoNo: cdaoNo } });\n    if (cdaoNo && cdaoNo.length == 6) {\n      axios.get(`/employees/byCdaoNo/${cdaoNo}`).then((response) => {\n        console.log(\"employee >>>> \", response.data);\n        if (response.data?.cdaoNo) {\n          setData({ ...data, employee: response.data });\n        }\n      });\n      axios.get(`/noks`).then((response) => {\n        console.log(response.data);\n      });\n    }\n  }, [cdaoNo]);\n\n  useEffect(() => {\n    axios.get(\"/relations\").then((response) => {\n      console.log(\"relations>>>\", response.data);\n      setRelations(response.data);\n    });\n  }, []);\n\n  useEffect(() => {\n    setData({\n      ...data,\n      bankAccount: {\n        ...data.bankAccount,\n        bank: {\n          bankName: \"\",\n          bankBranch: \"\",\n          bankBranch: \"\",\n          bankStation: \"\",\n          ifsc: ifscNo,\n        },\n      },\n    });\n    function FetchBank(ifsc) {\n      axios.get(`/banks/ifsc/${ifsc}`).then((response) => {\n        console.log(\"bank >>> \", response.data);\n        if (response.data.bankBranch) {\n          setData({\n            ...data,\n            bankAccount: {\n              ...data.bankAccount,\n              bank: response.data,\n            },\n          });\n        }\n      });\n    }\n    if (ifscNo) FetchBank(ifscNo);\n  }, [ifscNo]);\n\n  function HandleInputChange(e) {\n    let { name, value } = e.target;\n    if (name == \"pan\") value = value.toUpperCase();\n    setData({ ...data, [name]: value });\n  }\n\n  function HandleRelation(e) {\n    console.log(\"e\", e.target.value);\n    let rel = {};\n    relations.map((item, index) => {\n      if (item.id == e.target.value) {\n        rel = item;\n      }\n    });\n\n    setData({ ...data, relation: rel });\n  }\n\n  function SubmitData() {\n    if (data.bankAccount.bank.id && data.bankAccount.bankAccountNo) {\n      if (id == \"new\") {\n        axios.post(`/noks`, data).then((response) => {\n          console.log(response.data);\n          if (response.data == \"ok\") {\n            history.push(\"/noks\");\n          } else {\n            setErr(response.data);\n          }\n        });\n      } else {\n        axios.put(`/noks/${id}`, data).then((response) => {\n          console.log(\" >>>\", response.data);\n          if (response.data == \"ok\") {\n            history.push(\"/noks\");\n          }\n        });\n      }\n    } else {\n      alert(\"please check bank detail\");\n    }\n  }\n\n  function Reject() {\n    axios.put(`/noks/rollBack/${id}`).then((response) => {\n      console.log(response.data);\n      if (response.data == \"ok\") {\n        history.push(\"/noks\");\n      }\n    });\n  }\n\n  const columns = useMemo(\n    () => [\n      {\n        Header: \"CDAO No\",\n        accessor: \"cdaoNo\",\n      },\n      {\n        Header: \"Officer Name\",\n        accessor: \"employee.officerName\",\n      },\n      {\n        Header: \"Name of Member\",\n        accessor: \"nameOfMember\",\n      },\n\n      {\n        Header: \"Date of Birth\",\n        accessor: \"dateOfBirth\",\n      },\n      {\n        Header: \"Relation\",\n        accessor: \"relation.relationName\",\n      },\n      {\n        Header: \"Nomination percentage\",\n        accessor: \"nokPercentage\",\n      },\n      {\n        Header: \"Date of Approval\",\n        accessor: \"aoDate\",\n      },\n    ],\n    [processedData]\n  );\n\n  const inputStyling = {\n    width: \"240px\",\n    marginBottom: \"7px\",\n    padding: \"2px 10px\",\n  };\n\n  return (\n    <div className=\"flex flex-col items-center pt-2\">\n      <div>\n        <h1 className=\"underline\">{id != \"new\" ? \"Edit\" : \"Add\"} NOK</h1>\n      </div>\n      <div className=\"w-9/12 flex flex-col items-center bg-gray-300 p-3 mt-3  rounded-lg\">\n        {data.dakidNo && (\n          <div>\n            <div>\n              <label>Dak Id</label>\n              {state && state?.dakN}\n              <input\n                style={{ ...inputStyling }}\n                name=\"fkdak\"\n                value={searchParams.get(\"dakIdNo\")}\n                onChange={(e) => {\n                  //setCdaoNo(e.target.value);\n                }}\n                readOnly={true}\n              />\n            </div>\n          </div>\n        )}\n        <div className=\"flex flex-wrap justify-center\">\n          {err && <div>{err}</div>}\n          <div>\n            <label>Cdao No</label>\n            <div>\n              <input\n                style={{ ...inputStyling }}\n                name=\"cdaoNo\"\n                value={data.employee?.cdaoNo}\n                onChange={(e) => {\n                  setCdaoNo(e.target.value);\n                }}\n                readOnly={readOnly}\n              />\n            </div>\n          </div>\n          <div>\n            <label>Officer Name</label>\n            <div>\n              <input\n                style={{ ...inputStyling }}\n                name=\"officerName\"\n                value={data.employee?.officerName}\n                readOnly\n              />\n            </div>\n          </div>\n          <div>\n            <label>Name of NOK</label>\n            <div>\n              <input\n                style={{ ...inputStyling }}\n                name=\"nameOfMember\"\n                value={data.nameOfMember}\n                onChange={(e) => HandleInputChange(e)}\n                readOnly={readOnly}\n              />\n            </div>\n          </div>\n          {/* <div>\n            <label>Nominee Date of Birth</label>\n            <div>\n              <input\n                style={{ ...inputStyling }}\n                name=\"dateOfBirth\"\n                type=\"date\"\n                value={data.dateOfBirth}\n                onChange={(e) => HandleInputChange(e)}\n                readOnly={readOnly}\n              />\n            </div>\n          </div> */}\n          <div>\n            <label>Relation</label>\n            <div>\n              <select\n                style={{ ...inputStyling }}\n                name=\"relation\"\n                value={data.relation?.id}\n                onChange={(e) => HandleRelation(e)}\n                readOnly={readOnly}\n              >\n                <option disabled={readOnly}>--Select--</option>\n                {relations.length > 1 &&\n                  relations?.map((item, index) => (\n                    <option key={index} value={item.id} disabled={readOnly}>\n                      {item.relationName}\n                    </option>\n                  ))}\n              </select>\n            </div>\n          </div>\n          <div>\n            <label>Percentage of NOK</label>\n            <div>\n              <input\n                style={{ ...inputStyling }}\n                name=\"nokPercentage\"\n                type=\"number\"\n                value={data.nokPercentage}\n                onChange={(e) => HandleInputChange(e)}\n                readOnly={readOnly}\n              />\n            </div>\n          </div>\n          {/* <div>\n            <label>Pan No</label>\n            <div>\n              <input\n                style={{ ...inputStyling }}\n                name=\"pan\"\n                value={data.pan}\n                onChange={(e) => HandleInputChange(e)}\n                readOnly={readOnly}\n              />\n            </div>\n          </div> */}\n          {/* <div>\n            <label>Address</label>\n            <div>\n              <input\n                style={{ ...inputStyling }}\n                name=\"address\"\n                value={data.address}\n                onChange={(e) => HandleInputChange(e)}\n                readOnly={readOnly}\n              />\n            </div>\n          </div> */}\n          <div>\n            <label>A/C Number</label>\n            <div>\n              <input\n                style={{ ...inputStyling }}\n                name=\"bankAccountNo\"\n                value={data?.bankAccount?.bankAccountNo}\n                onChange={(e) => {\n                  const { name, value } = e.target;\n                  setData({\n                    ...data,\n                    bankAccount: {\n                      ...data.bankAccount,\n                      [name]: value,\n                    },\n                  });\n                }}\n                readOnly={readOnly}\n              />\n            </div>\n          </div>\n          <div>\n            <label>IFSC No</label>\n            <div>\n              <input\n                style={{ ...inputStyling }}\n                name=\"ifsc\"\n                value={data?.bankAccount?.bank?.ifsc}\n                onChange={(e) => {\n                  setIfscNo(e.target.value.toUpperCase());\n                }}\n                readOnly={readOnly}\n              />\n            </div>\n          </div>\n          <div>\n            <label>Bank</label>\n            <div>\n              <input\n                style={{ ...inputStyling }}\n                value={data?.bankAccount?.bank?.bankName}\n                readOnly\n              />\n            </div>\n          </div>\n          <div>\n            <label>Bank Station</label>\n            <div>\n              <input\n                style={{ ...inputStyling }}\n                value={data?.bankAccount?.bank?.bankStation}\n                readOnly\n              />\n            </div>\n          </div>\n          <div>\n            <label>Branch</label>\n            <div>\n              <textarea\n                style={{ ...inputStyling }}\n                value={data?.bankAccount?.bank?.bankBranch}\n                readOnly\n              ></textarea>\n            </div>\n          </div>\n        </div>\n        <div className=\"flex justify-center\">\n          <button\n            className=\"w-32 mx-2\"\n            onClick={() => {\n              console.log(\"data >>>> \", data);\n              SubmitData();\n            }}\n          >\n            {!data?.action && \"Submit\"}\n            {data?.action == \"submit\" && \"Submit\"}\n            {data?.action == \"approve\" && \"Approve\"}\n          </button>\n          {data?.action == \"submit\" || data?.action == \"approve\" ? (\n            <button\n              className=\"w-32 mx-2 bg-red-600\"\n              onClick={() => {\n                Reject();\n              }}\n            >\n              Send Back\n            </button>\n          ) : (\n            \"\"\n          )}\n        </div>\n        <div>\n          <button onClick={() => console.log(data)}>Console log</button>\n        </div>\n      </div>\n      <div>\n        <Table data={processedData} columns={columns} />\n      </div>\n    </div>\n  );\n}\nexport default NokEdit;\n"]},"metadata":{},"sourceType":"module"}