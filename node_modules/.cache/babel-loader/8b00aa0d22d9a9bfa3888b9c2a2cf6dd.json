{"ast":null,"code":"var _jsxFileName = \"/home/itsdc3/Imp Tulip files/falconws160424/falconws/falcon_face/src/components/PmUploadControlEdit.js\";\n\n/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By :\n */\nimport { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { BasicLoadingIcon } from \"../utils/Icons\"; //import DatePicker  from 'react-datepicker';\n//import \"react-datepicker/dist/react-datepicker.css\";\n//import addDays from 'date-fns/addDays'\n\nimport Tabs from \"react-bootstrap/Tabs\";\nimport Tab from \"react-bootstrap/Tab\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object({});\n\nconst PmUploadControlEdit = () => {\n  var _errors$batchNo, _errors$pmSectionCode;\n\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    formState: {\n      errors\n    },\n    clearErrors\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  let {\n    id\n  } = useParams();\n  let history = useHistory();\n  const [serverErrors, setServerErrors] = useState();\n  const [key, setKey] = useState(\"page1\");\n  const [me, setMe] = useState(\"\");\n  const [disabled, setDisabled] = useState(false);\n  const [lightTheme, setLightTheme] = useState(true);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    const abortController = new AbortController();\n\n    async function getNcsExtractionStatus() {\n      try {\n        setServerErrors();\n        const response = await axios.get(`/pmUploadControls/pmNcsExtractionStatus`, {\n          signal: abortController.signal\n        });\n\n        if (response.data === \"active\") {\n          setServerErrors(\"PM Extraction Under Process.\");\n          setDisabled(true);\n        } else setDisabled(false);\n      } catch (error) {\n        setServerErrors(error.response.status + \" : \" + error.response.statusText + \". Please Contact EDP.\");\n        setDisabled(true);\n      }\n    }\n\n    getNcsExtractionStatus();\n    return () => {\n      abortController.abort();\n    };\n  }, []);\n\n  const onSubmit = (data, event) => {\n    event.preventDefault();\n    console.log(me);\n\n    if (me && !disabled) {\n      setDisabled(true);\n      setLoading(true);\n      axios.get(`/pmUploadControls/pmUploadFile/${me}`).then(response => {\n        if (response.data) {\n          window.open(`${process.env.REACT_APP_BASE_URL}/files/${response.data}`);\n          history.push(\"/pmUploadControls\");\n        }\n\n        setDisabled(false);\n        setLoading(false);\n      }).catch(error => {\n        setServerErrors(error.response.status + \" : \" + error.response.statusText + \" : \" + error.response.data);\n        setLoading(false);\n      });\n    }\n  };\n\n  const onError = (errors, e) => console.log(errors, e);\n\n  const handleInputChange = e => {\n    //console.log(e.target.value);\n    setMe(e.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-xl mx-auto \",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full mx-auto \",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: lightTheme ? \"theme-light\" : \"theme-dark\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit(onSubmit, onError),\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: [id === \"new\" ? \"Add\" : \"Edit\", \" Pm Upload File Generation \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-red-500 font-semibold ml-4\",\n            children: serverErrors\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: disabled ? {\n              pointerEvents: \"none\",\n              opacity: \"0.4\"\n            } : {},\n            children: [/*#__PURE__*/_jsxDEV(Tabs, {\n              id: \"PmUploadControlEdit\",\n              activeKey: key,\n              onSelect: k => setKey(k),\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(Tab, {\n                eventKey: \"page1\",\n                title: \"Page 1\",\n                className: \"h-120\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-2 gap-0\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Pm Month\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 138,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      name: \"me\",\n                      onChange: handleInputChange,\n                      placeholder: \"mmyyyy\",\n                      className: \"form-control py-0\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 139,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-red-500\",\n                      children: (_errors$batchNo = errors.batchNo) === null || _errors$batchNo === void 0 ? void 0 : _errors$batchNo.message\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 146,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 137,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Pm Section Code\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 152,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      name: \"pmSectionCode\",\n                      ...register(\"pmSectionCode\"),\n                      className: \"form-control py-0\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 153,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-red-500\",\n                      children: (_errors$pmSectionCode = errors.pmSectionCode) === null || _errors$pmSectionCode === void 0 ? void 0 : _errors$pmSectionCode.message\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 159,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 151,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                eventKey: \"page2\",\n                title: \"Page 2\",\n                className: \"h-120\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-2 gap-0\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"Add some fields here or delete this tab.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Tab, {\n                eventKey: \"help\",\n                title: \"Help\",\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  children: \"Help\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"list-disc\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"Point 1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"Point 2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 176,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"px-4\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                children: \"Generate PM File\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center items-center fixed top-1/3 w-full z-50 left-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mr-2 text-2xl text-green-600\",\n        children: \"Generating PM File\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(BasicLoadingIcon, {\n        className: \"ml-1 mt-1 h-10 w-10 animate-spin text-green-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }, this) : \"\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 5\n  }, this);\n};\n\nexport default withRouter(PmUploadControlEdit);","map":{"version":3,"sources":["/home/itsdc3/Imp Tulip files/falconws160424/falconws/falcon_face/src/components/PmUploadControlEdit.js"],"names":["useState","useEffect","withRouter","useParams","useHistory","useForm","axios","yup","yupResolver","BasicLoadingIcon","Tabs","Tab","schema","object","PmUploadControlEdit","register","handleSubmit","setValue","formState","errors","clearErrors","resolver","id","history","serverErrors","setServerErrors","key","setKey","me","setMe","disabled","setDisabled","lightTheme","setLightTheme","loading","setLoading","abortController","AbortController","getNcsExtractionStatus","response","get","signal","data","error","status","statusText","abort","onSubmit","event","preventDefault","console","log","then","window","open","process","env","REACT_APP_BASE_URL","push","catch","onError","e","handleInputChange","target","value","pointerEvents","opacity","k","batchNo","message","pmSectionCode"],"mappings":"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","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By :\n */\n\nimport { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport * as yup from \"yup\";\n\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { BasicLoadingIcon } from \"../utils/Icons\";\n\n//import DatePicker  from 'react-datepicker';\n//import \"react-datepicker/dist/react-datepicker.css\";\n//import addDays from 'date-fns/addDays'\n\nimport Tabs from \"react-bootstrap/Tabs\";\nimport Tab from \"react-bootstrap/Tab\";\n\nconst schema = yup.object({});\n\nconst PmUploadControlEdit = () => {\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    formState: { errors },\n    clearErrors,\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  let { id } = useParams();\n\n  let history = useHistory();\n  const [serverErrors, setServerErrors] = useState();\n  const [key, setKey] = useState(\"page1\");\n  const [me, setMe] = useState(\"\");\n  const [disabled, setDisabled] = useState(false);\n  const [lightTheme, setLightTheme] = useState(true);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    const abortController = new AbortController();\n\n    async function getNcsExtractionStatus() {\n      try {\n        setServerErrors();\n        const response = await axios.get(\n          `/pmUploadControls/pmNcsExtractionStatus`,\n          {\n            signal: abortController.signal,\n          }\n        );\n        if (response.data === \"active\") {\n          setServerErrors(\"PM Extraction Under Process.\");\n          setDisabled(true);\n        } else setDisabled(false);\n      } catch (error) {\n        setServerErrors(\n          error.response.status +\n            \" : \" +\n            error.response.statusText +\n            \". Please Contact EDP.\"\n        );\n        setDisabled(true);\n      }\n    }\n    getNcsExtractionStatus();\n\n    return () => {\n      abortController.abort();\n    };\n  }, []);\n\n  const onSubmit = (data, event) => {\n    event.preventDefault();\n    console.log(me);\n    if (me && !disabled) {\n      setDisabled(true);\n      setLoading(true);\n      axios\n        .get(`/pmUploadControls/pmUploadFile/${me}`)\n        .then((response) => {\n          if (response.data) {\n            window.open(\n              `${process.env.REACT_APP_BASE_URL}/files/${response.data}`\n            );\n            history.push(\"/pmUploadControls\");\n          }\n          setDisabled(false);\n          setLoading(false);\n        })\n        .catch((error) => {\n          setServerErrors(\n            error.response.status +\n              \" : \" +\n              error.response.statusText +\n              \" : \" +\n              error.response.data\n          );\n          setLoading(false);\n        });\n    }\n  };\n\n  const onError = (errors, e) => console.log(errors, e);\n\n  const handleInputChange = (e) => {\n    //console.log(e.target.value);\n    setMe(e.target.value);\n  };\n\n  return (\n    <div className=\"max-w-xl mx-auto \">\n      <div className=\"w-full mx-auto \">\n        <div className={lightTheme ? \"theme-light\" : \"theme-dark\"}>\n          <form onSubmit={handleSubmit(onSubmit, onError)}>\n            <h1>{id === \"new\" ? \"Add\" : \"Edit\"} Pm Upload File Generation </h1>\n            <p className=\"text-red-500 font-semibold ml-4\">{serverErrors}</p>\n            <div\n              style={disabled ? { pointerEvents: \"none\", opacity: \"0.4\" } : {}}\n            >\n              <Tabs\n                id=\"PmUploadControlEdit\"\n                activeKey={key}\n                onSelect={(k) => setKey(k)}\n                className=\"mb-3\"\n              >\n                <Tab eventKey=\"page1\" title=\"Page 1\" className=\"h-120\">\n                  <div className=\"grid grid-cols-2 gap-0\">\n                    <div>\n                      <label>Pm Month</label>\n                      <input\n                        type=\"text\"\n                        name=\"me\"\n                        onChange={handleInputChange}\n                        placeholder=\"mmyyyy\"\n                        className=\"form-control py-0\"\n                      />\n                      <div className=\"text-red-500\">\n                        {errors.batchNo?.message}\n                      </div>\n                    </div>\n\n                    <div>\n                      <label>Pm Section Code</label>\n                      <input\n                        type=\"text\"\n                        name=\"pmSectionCode\"\n                        {...register(\"pmSectionCode\")}\n                        className=\"form-control py-0\"\n                      />\n                      <div className=\"text-red-500\">\n                        {errors.pmSectionCode?.message}\n                      </div>\n                    </div>\n                  </div>\n                </Tab>\n\n                <Tab eventKey=\"page2\" title=\"Page 2\" className=\"h-120\">\n                  <div className=\"grid grid-cols-2 gap-0\">\n                    <p>Add some fields here or delete this tab.</p>\n                  </div>\n                </Tab>\n\n                <Tab eventKey=\"help\" title=\"Help\">\n                  <h1>Help</h1>\n                  <ul className=\"list-disc\">\n                    <li>Point 1</li>\n                    <li>Point 2</li>\n                  </ul>\n                </Tab>\n              </Tabs>\n\n              <div className=\"px-4\">\n                <button type=\"submit\">Generate PM File</button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n      {loading ? (\n        <div className=\"flex justify-center items-center fixed top-1/3 w-full z-50 left-0\">\n          <p className=\"mr-2 text-2xl text-green-600\">Generating PM File</p>\n          <BasicLoadingIcon className=\"ml-1 mt-1 h-10 w-10 animate-spin text-green-600\" />\n        </div>\n      ) : (\n        \"\"\n      )}\n    </div>\n  );\n};\n\nexport default withRouter(PmUploadControlEdit);\n"]},"metadata":{},"sourceType":"module"}