{"ast":null,"code":"var _jsxFileName = \"/home/itsdcsec/falconws/falcon_face/src/components/DgnEdit.js\";\nimport axios from \"axios\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { Link, useHistory, useParams } from \"react-router-dom/cjs/react-router-dom.min\";\nimport TableCopy from \"../utils/TableCopy\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction DgnEdit() {\n  var _usr$designation, _dgnInputObj$employee, _dgnInputObj$employee2, _dgnInputObj$employee3, _dgnInputObj$employee4, _dgnInputObj$employee5, _dgnInputObj$employee6, _dgnInputObj$employee7, _dgnInputObj$rank, _usr$designation2, _usr$designation4, _usr$designation5, _usr$designation6, _usr$designation7;\n\n  let {\n    dakId\n  } = useParams();\n  let history = useHistory();\n  const dgnObj = {\n    cdaoNo: \"\",\n    dak: {},\n    promotDate: \"\",\n    dgnDate: \"\",\n    dgnAuthority: \"\",\n    employee: {\n      icNo: \"\",\n      cdaoNo: \"\",\n      officerName: \"\",\n      rank: {\n        rankName: \"\"\n      }\n    },\n    rank: {},\n    action: \"\"\n  };\n  const [dak, setDak] = useState({});\n  const [dgnData, setDgnData] = useState([]);\n  const [dgnInputObj, setDgnInputObj] = useState(dgnObj);\n  const [rankOrder, setRankOrder] = useState([1, 2, 3, 4, 14, 5, 15, 6, 7, 8, 9, 11, 12, 13, 10]);\n  const [allRankList, setAllRankList] = useState();\n  const [rankList, setRankList] = useState([]);\n  const [usr, setUsr] = useState({});\n  useEffect(() => {\n    let user = JSON.parse(sessionStorage.getItem(\"usr\"));\n    console.log(\"usr >>> \", user);\n    setUsr(user);\n  }, []);\n  useEffect(() => {\n    if (dakId !== \"new\") {\n      console.log(\"dakId >>> \", dakId);\n      axios.get(`/daks/${dakId}`).then(response => {\n        var _response$data;\n\n        if ((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.dakidNo) {\n          console.log(\"dak data >>> \", response.data);\n          setDak(response.data);\n          setDgnInputObj({ ...dgnInputObj,\n            dak: response.data\n          });\n        }\n      });\n    }\n  }, [dakId]);\n  useEffect(() => {\n    var _dgnInputObj$dak;\n\n    if (((_dgnInputObj$dak = dgnInputObj.dak) === null || _dgnInputObj$dak === void 0 ? void 0 : _dgnInputObj$dak.id) && !(dak === null || dak === void 0 ? void 0 : dak.disposalApproved)) {\n      FetchDgnData();\n    }\n  }, [dgnInputObj.dak.id]);\n\n  async function FetchDgnData() {\n    await axios.get(`/dgn/fkdak/${dgnInputObj.dak.id}`).then(response => {\n      var _response$data2, _response$data3;\n\n      console.log((_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : _response$data2.length);\n\n      if (((_response$data3 = response.data) === null || _response$data3 === void 0 ? void 0 : _response$data3.length) > 0) {\n        var _response$data$;\n\n        setDgnData(response.data);\n        setDgnInputObj({ ...dgnObj,\n          dak: dgnInputObj.dak,\n          dgnAuthority: response.data[0].dgnAuthority,\n          dgnDate: (_response$data$ = response.data[0]) === null || _response$data$ === void 0 ? void 0 : _response$data$.dgnDate\n        });\n      }\n    });\n  }\n\n  useEffect(() => {\n    axios.get(`/ranks/allRanks`).then(response => {\n      console.log(\"ranks list >>> \", response.data);\n      setAllRankList(response.data);\n    });\n  }, []);\n\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setDgnInputObj({ ...dgnInputObj,\n      [name]: value\n    });\n  };\n\n  const handleIcNoInputChange = e => {\n    let {\n      name,\n      value\n    } = e.target;\n    value = value.toUpperCase();\n\n    if (value.length > 6 && value.length < 10) {\n      axios.get(`/employees/byIcNo/${value}`).then(response => {\n        if (response.data.icNo) {\n          var _response$data4, _response$data4$rank;\n\n          console.log(\"employee data >>> \", response.data);\n          setDgnInputObj({ ...dgnInputObj,\n            employee: response.data\n          });\n\n          if ((_response$data4 = response.data) === null || _response$data4 === void 0 ? void 0 : (_response$data4$rank = _response$data4.rank) === null || _response$data4$rank === void 0 ? void 0 : _response$data4$rank.rankCode) {\n            DeterminigPromotionRankList(response.data);\n          }\n        } else {\n          setDgnInputObj({ ...dgnInputObj,\n            employee: { ...dgnObj.employee,\n              [name]: value\n            }\n          });\n        }\n      });\n    } else {\n      setDgnInputObj({ ...dgnInputObj,\n        employee: { ...dgnObj.employee,\n          [name]: value\n        }\n      });\n    }\n  };\n\n  const handleCdaoNoInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n\n    if (value.length == 6) {\n      axios.get(`/employees/byCdaoNo/${value}`).then(response => {\n        if (response.data.cdaoNo) {\n          var _response$data5, _response$data5$rank;\n\n          console.log(\"employee data >>> \", response.data);\n          setDgnInputObj({ ...dgnInputObj,\n            employee: response.data\n          });\n\n          if ((_response$data5 = response.data) === null || _response$data5 === void 0 ? void 0 : (_response$data5$rank = _response$data5.rank) === null || _response$data5$rank === void 0 ? void 0 : _response$data5$rank.rankCode) {\n            DeterminigPromotionRankList(response.data);\n          }\n        } else {\n          setDgnInputObj({ ...dgnInputObj,\n            employee: { ...dgnObj.employee,\n              [name]: value\n            }\n          });\n        }\n      });\n    } else {\n      setDgnInputObj({ ...dgnInputObj,\n        employee: { ...dgnObj.employee,\n          [name]: value\n        }\n      });\n    }\n  };\n\n  function DeterminigPromotionRankList(emp) {\n    var _emp$rank;\n\n    let empRankCode = Number((_emp$rank = emp.rank) === null || _emp$rank === void 0 ? void 0 : _emp$rank.rankCode);\n    let orderArr = [];\n    let rankArr = [];\n    rankOrder.map((item, index) => {\n      if (item === empRankCode) {\n        if (empRankCode == 10) {\n          orderArr = [item];\n        } else if (empRankCode == 4 || empRankCode == 5 || empRankCode == 12) {\n          orderArr = [item, rankOrder[index + 1], rankOrder[index + 2]];\n        } else {\n          orderArr = [item, rankOrder[index + 1]];\n        }\n      }\n    });\n    orderArr.map((item, index) => {\n      allRankList.map((itm, indx) => {\n        if (item === Number(itm.rankCode)) {\n          rankArr = [...rankArr, itm];\n        }\n      });\n    });\n    setRankList(rankArr);\n  }\n\n  const AuditorSave = () => {\n    if (dgnInputObj.employee.officerName && dak.id) {\n      axios.post(`/dgn/audSave`, dgnInputObj).then(response => {\n        console.log(response.data);\n\n        if (response.data == \"ok\") {\n          window.location.reload(); // FetchDgnData();\n        }\n      });\n    }\n  };\n\n  const FinalSubmit = () => {\n    axios.put(`/dgn/submit/${dakId}`).then(response => {\n      console.log(response.data);\n\n      if (response.data == \"ok\") {\n        history.push(\"/dgnsNew/dakList\");\n      }\n    });\n  };\n\n  const RollBackDgnDak = () => {\n    axios.put(`/dgn/rollBack/${dakId}`).then(response => {\n      console.log(response.data);\n\n      if (response.data == \"ok\") {\n        history.push(\"/dgnsNew/dakList\");\n      }\n    });\n  };\n\n  const columns = useMemo(() => [{\n    Header: \"Action Aud\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"m-0 \",\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 11\n    }, this)\n  }, {\n    Header: \"Dgn Authority\",\n    accessor: \"dgnAuthority\"\n  }, {\n    Header: \"IC No\",\n    accessor: \"employee.icNo\"\n  }, {\n    Header: \"Cdao No\",\n    accessor: \"cdaoNo\"\n  }, {\n    Header: \"Officer Name\",\n    accessor: \"employee.officerName\"\n  }, {\n    Header: \"Promotion Rank\",\n    accessor: \"rank.rankName\"\n  }, {\n    Header: \"Promotion Date\",\n    accessor: \"promotDate\"\n  }, // {\n  //   Header: \"Dgn Date\",\n  //   accessor: \"dgnDate\",\n  // },\n  {\n    Header: \"Action AAO/AO\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"m-0 bg-red-500 hover:bg-red-700\",\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 11\n    }, this)\n  }], [dgnData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-center underline\",\n              children: [\"Dgn \", dakId == \"new\" ? \"Add\" : \"Edit\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-around\",\n            children: [(usr === null || usr === void 0 ? void 0 : (_usr$designation = usr.designation) === null || _usr$designation === void 0 ? void 0 : _usr$designation.designationLevel) < 30 && !(dak === null || dak === void 0 ? void 0 : dak.disposalApproved) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-green-200 px-3 py-3 rounded-xl flex flex-col justify-between m-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-0 \",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"DGN No\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 264,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-0\",\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"px-2 py-1\",\n                      name: \"dgnAuthority\",\n                      value: dgnInputObj.dgnAuthority,\n                      onChange: e => handleInputChange(e),\n                      disabled: dgnData.length > 0\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 266,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 265,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"DGN Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 276,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-0\",\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"w-full px-2 py-1\",\n                      name: \"dgnDate\",\n                      type: \"date\",\n                      value: dgnInputObj.dgnDate,\n                      onChange: e => handleInputChange(e),\n                      disabled: dgnData.length > 0\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 278,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 277,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"IC No\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 289,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-0\",\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"px-2 py-1\",\n                      maxLength: 8,\n                      name: \"icNo\",\n                      value: (_dgnInputObj$employee = dgnInputObj.employee) === null || _dgnInputObj$employee === void 0 ? void 0 : _dgnInputObj$employee.icNo,\n                      onChange: e => handleIcNoInputChange(e)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 291,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 290,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Cdao No\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 301,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-0\",\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"px-2 py-1\",\n                      maxLength: 6,\n                      name: \"cdaoNo\",\n                      value: (_dgnInputObj$employee2 = dgnInputObj.employee) === null || _dgnInputObj$employee2 === void 0 ? void 0 : _dgnInputObj$employee2.cdaoNo,\n                      onChange: e => handleCdaoNoInputChange(e)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 303,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 302,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Officer Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 313,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-0\",\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"px-2 py-1\",\n                      name: \"cdaoNo\",\n                      value: (_dgnInputObj$employee3 = dgnInputObj.employee) === null || _dgnInputObj$employee3 === void 0 ? void 0 : _dgnInputObj$employee3.officerName,\n                      readOnly: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 315,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 314,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 312,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Current Rank\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 324,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-0\",\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"px-2 py-1\",\n                      name: \"cdaoNo\",\n                      value: ((_dgnInputObj$employee4 = dgnInputObj.employee) === null || _dgnInputObj$employee4 === void 0 ? void 0 : (_dgnInputObj$employee5 = _dgnInputObj$employee4.rank) === null || _dgnInputObj$employee5 === void 0 ? void 0 : _dgnInputObj$employee5.rankCode) + \" \" + ((_dgnInputObj$employee6 = dgnInputObj.employee) === null || _dgnInputObj$employee6 === void 0 ? void 0 : (_dgnInputObj$employee7 = _dgnInputObj$employee6.rank) === null || _dgnInputObj$employee7 === void 0 ? void 0 : _dgnInputObj$employee7.rankName),\n                      readOnly: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 326,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 325,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Promoted Rank\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 339,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-0\",\n                    children: /*#__PURE__*/_jsxDEV(\"select\", {\n                      className: \"w-full bg-white px-2 py-1\",\n                      value: (_dgnInputObj$rank = dgnInputObj.rank) === null || _dgnInputObj$rank === void 0 ? void 0 : _dgnInputObj$rank.id,\n                      onChange: e => {\n                        allRankList.map((itm, indx) => {\n                          if (itm.id == e.target.value) {\n                            setDgnInputObj({ ...dgnInputObj,\n                              rank: itm\n                            });\n                          }\n                        });\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        children: \"--Select Rank--\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 352,\n                        columnNumber: 29\n                      }, this), rankList === null || rankList === void 0 ? void 0 : rankList.map((item, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: item.id,\n                        children: [item.rankCode, \" \", item.rankName]\n                      }, index, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 354,\n                        columnNumber: 31\n                      }, this))]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 341,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 340,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"Date of Promotion\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 362,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-0\",\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"w-full px-2 py-1\",\n                      name: \"promotDate\",\n                      type: \"date\",\n                      value: dgnInputObj.promotDate,\n                      onChange: e => handleInputChange(e)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 364,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 363,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => AuditorSave(),\n                    children: \"Save\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 374,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-32 flex justify-center items-center font-bold m-0 p-0\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-white px-3 py-2 m-0 p-0\",\n                  children: [\"Updated DGN Records: \", dgnData === null || dgnData === void 0 ? void 0 : dgnData.length]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"overflow-auto \",\n              style: {\n                maxHeight: \"80vh\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"\",\n                children: /*#__PURE__*/_jsxDEV(\"table\", {\n                  className: \" bg-white relative\",\n                  children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                    className: \" sticky top-0 bg-green-200 \",\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      className: \"\",\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"text-center px-2 py-1\",\n                        children: \"Sl No\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 390,\n                        columnNumber: 25\n                      }, this), !(dak === null || dak === void 0 ? void 0 : dak.disposalApproved) ? (usr === null || usr === void 0 ? void 0 : (_usr$designation2 = usr.designation) === null || _usr$designation2 === void 0 ? void 0 : _usr$designation2.designationLevel) < 30 && !(dak === null || dak === void 0 ? void 0 : dak.auditorDate) && /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"text-center px-4 py-1\",\n                        children: \"Action\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 394,\n                        columnNumber: 31\n                      }, this) : \"\", /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"text-center px-4 py-1\",\n                        children: \"DGN Authority\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 398,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"text-center px-4 py-1\",\n                        children: \"IC No\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 399,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"text-center px-4 py-1\",\n                        children: \"CDAO No\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 400,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"text-center px-4 py-1\",\n                        children: \"Officer Name\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 401,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"text-center px-4 py-1\",\n                        children: \"Promoted Rank\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 402,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"text-center px-4 py-1\",\n                        children: \"Promotion Date\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 403,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"text-center px-4 py-1\",\n                        children: \"Action\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 407,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 389,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 388,\n                    columnNumber: 21\n                  }, this), dgnData && dgnData.map((item, index) => {\n                    var _usr$designation3;\n\n                    return /*#__PURE__*/_jsxDEV(\"tr\", {\n                      className: \"bg-white border-l-2 border-r-2 border-b-2 border-gray-200\",\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"text-center px-2 py-2 \",\n                        children: index + 1\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 416,\n                        columnNumber: 27\n                      }, this), !(dak === null || dak === void 0 ? void 0 : dak.disposalApproved) ? (usr === null || usr === void 0 ? void 0 : (_usr$designation3 = usr.designation) === null || _usr$designation3 === void 0 ? void 0 : _usr$designation3.designationLevel) < 30 && !(dak === null || dak === void 0 ? void 0 : dak.auditorDate) && /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"text-center px-2 py-2\",\n                        children: /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"m-0 \",\n                          onClick: () => {\n                            setDgnInputObj(dgnData[index]);\n                          },\n                          children: \"Edit\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 423,\n                          columnNumber: 35\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 422,\n                        columnNumber: 33\n                      }, this) : \"\", /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"text-center px-2 py-2\",\n                        children: item.dgnAuthority\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 435,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"text-center px-2 py-2\",\n                        children: item.employee.icNo\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 438,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"text-center px-2 py-2\",\n                        children: item.employee.cdaoNo\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 441,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"text-left px-2 py-2\",\n                        children: [`(${item.employee.rank.rankCode})`, \" \", item.employee.rank.rankName, \" \", item.employee.officerName]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 444,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"text-center px-2 py-2\",\n                        children: [`(${item.rank.rankCode}) `, item.rank.rankName]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 449,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"text-center px-2 py-2\",\n                        children: item.promotDate\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 453,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"text-center px-2 py-2\",\n                        children: /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"m-0 bg-red-500 hover:bg-red-700\",\n                          onClick: () => {\n                            axios.put(`/dgn/delete/${item.id}`).then(response => {\n                              if (response.data == \"ok\") {\n                                window.location.reload();\n                              }\n                            });\n                          },\n                          children: \"Delete\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 460,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 459,\n                        columnNumber: 27\n                      }, this)]\n                    }, index, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 412,\n                      columnNumber: 25\n                    }, this);\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 17\n              }, this), dgnData.length > 0 && !(dak === null || dak === void 0 ? void 0 : dak.disposalApproved) && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-center mt-6\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-7/12 flex\",\n                  children: [(usr === null || usr === void 0 ? void 0 : (_usr$designation4 = usr.designation) === null || _usr$designation4 === void 0 ? void 0 : _usr$designation4.designationLevel) >= 30 && /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"m-2 bg-red-500\",\n                    onClick: () => RollBackDgnDak(),\n                    children: \"Roll Back\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 483,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"m-2\",\n                    onClick: () => FinalSubmit(),\n                    children: [(usr === null || usr === void 0 ? void 0 : (_usr$designation5 = usr.designation) === null || _usr$designation5 === void 0 ? void 0 : _usr$designation5.designationLevel) < 30 && \"Final Submit\", (usr === null || usr === void 0 ? void 0 : (_usr$designation6 = usr.designation) === null || _usr$designation6 === void 0 ? void 0 : _usr$designation6.designationLevel) == 30 && \"Submit\", (usr === null || usr === void 0 ? void 0 : (_usr$designation7 = usr.designation) === null || _usr$designation7 === void 0 ? void 0 : _usr$designation7.designationLevel) > 30 && \"Approve\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 490,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"m-2 bg-red-400\",\n                    onClick: () => history.push(\"/dgnsNew/dakList\"),\n                    children: \"Exit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 497,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 481,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 249,\n    columnNumber: 5\n  }, this);\n}\n\nexport default DgnEdit;","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/DgnEdit.js"],"names":["axios","useEffect","useMemo","useState","Link","useHistory","useParams","TableCopy","DgnEdit","dakId","history","dgnObj","cdaoNo","dak","promotDate","dgnDate","dgnAuthority","employee","icNo","officerName","rank","rankName","action","setDak","dgnData","setDgnData","dgnInputObj","setDgnInputObj","rankOrder","setRankOrder","allRankList","setAllRankList","rankList","setRankList","usr","setUsr","user","JSON","parse","sessionStorage","getItem","console","log","get","then","response","data","dakidNo","id","disposalApproved","FetchDgnData","length","handleInputChange","e","name","value","target","handleIcNoInputChange","toUpperCase","rankCode","DeterminigPromotionRankList","handleCdaoNoInputChange","emp","empRankCode","Number","orderArr","rankArr","map","item","index","itm","indx","AuditorSave","post","window","location","reload","FinalSubmit","put","push","RollBackDgnDak","columns","Header","Cell","row","accessor","designation","designationLevel","maxHeight","auditorDate"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,OAApB,EAA6BC,QAA7B,QAA6C,OAA7C;AACA,SACEC,IADF,EAEEC,UAFF,EAGEC,SAHF,QAIO,2CAJP;AAKA,OAAOC,SAAP,MAAsB,oBAAtB;;;AAEA,SAASC,OAAT,GAAmB;AAAA;;AACjB,MAAI;AAAEC,IAAAA;AAAF,MAAYH,SAAS,EAAzB;AACA,MAAII,OAAO,GAAGL,UAAU,EAAxB;AAEA,QAAMM,MAAM,GAAG;AACbC,IAAAA,MAAM,EAAE,EADK;AAEbC,IAAAA,GAAG,EAAE,EAFQ;AAGbC,IAAAA,UAAU,EAAE,EAHC;AAIbC,IAAAA,OAAO,EAAE,EAJI;AAKbC,IAAAA,YAAY,EAAE,EALD;AAMbC,IAAAA,QAAQ,EAAE;AAAEC,MAAAA,IAAI,EAAE,EAAR;AAAYN,MAAAA,MAAM,EAAE,EAApB;AAAwBO,MAAAA,WAAW,EAAE,EAArC;AAAyCC,MAAAA,IAAI,EAAE;AAAEC,QAAAA,QAAQ,EAAE;AAAZ;AAA/C,KANG;AAObD,IAAAA,IAAI,EAAE,EAPO;AAQbE,IAAAA,MAAM,EAAE;AARK,GAAf;AAWA,QAAM,CAACT,GAAD,EAAMU,MAAN,IAAgBpB,QAAQ,CAAC,EAAD,CAA9B;AACA,QAAM,CAACqB,OAAD,EAAUC,UAAV,IAAwBtB,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACuB,WAAD,EAAcC,cAAd,IAAgCxB,QAAQ,CAACQ,MAAD,CAA9C;AACA,QAAM,CAACiB,SAAD,EAAYC,YAAZ,IAA4B1B,QAAQ,CAAC,CACzC,CADyC,EACtC,CADsC,EACnC,CADmC,EAChC,CADgC,EAC7B,EAD6B,EACzB,CADyB,EACtB,EADsB,EAClB,CADkB,EACf,CADe,EACZ,CADY,EACT,CADS,EACN,EADM,EACF,EADE,EACE,EADF,EACM,EADN,CAAD,CAA1C;AAGA,QAAM,CAAC2B,WAAD,EAAcC,cAAd,IAAgC5B,QAAQ,EAA9C;AACA,QAAM,CAAC6B,QAAD,EAAWC,WAAX,IAA0B9B,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAAC+B,GAAD,EAAMC,MAAN,IAAgBhC,QAAQ,CAAC,EAAD,CAA9B;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACd,QAAImC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,OAAf,CAAuB,KAAvB,CAAX,CAAX;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBN,IAAxB;AACAD,IAAAA,MAAM,CAACC,IAAD,CAAN;AACD,GAJQ,EAIN,EAJM,CAAT;AAMAnC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIQ,KAAK,KAAK,KAAd,EAAqB;AACnBgC,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BjC,KAA1B;AACAT,MAAAA,KAAK,CAAC2C,GAAN,CAAW,SAAQlC,KAAM,EAAzB,EAA4BmC,IAA5B,CAAkCC,QAAD,IAAc;AAAA;;AAC7C,8BAAIA,QAAQ,CAACC,IAAb,mDAAI,eAAeC,OAAnB,EAA4B;AAC1BN,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BG,QAAQ,CAACC,IAAtC;AACAvB,UAAAA,MAAM,CAACsB,QAAQ,CAACC,IAAV,CAAN;AACAnB,UAAAA,cAAc,CAAC,EAAE,GAAGD,WAAL;AAAkBb,YAAAA,GAAG,EAAEgC,QAAQ,CAACC;AAAhC,WAAD,CAAd;AACD;AACF,OAND;AAOD;AACF,GAXQ,EAWN,CAACrC,KAAD,CAXM,CAAT;AAaAR,EAAAA,SAAS,CAAC,MAAM;AAAA;;AACd,QAAI,qBAAAyB,WAAW,CAACb,GAAZ,sEAAiBmC,EAAjB,KAAuB,EAACnC,GAAD,aAACA,GAAD,uBAACA,GAAG,CAAEoC,gBAAN,CAA3B,EAAmD;AACjDC,MAAAA,YAAY;AACb;AACF,GAJQ,EAIN,CAACxB,WAAW,CAACb,GAAZ,CAAgBmC,EAAjB,CAJM,CAAT;;AAMA,iBAAeE,YAAf,GAA8B;AAC5B,UAAMlD,KAAK,CAAC2C,GAAN,CAAW,cAAajB,WAAW,CAACb,GAAZ,CAAgBmC,EAAG,EAA3C,EAA8CJ,IAA9C,CAAoDC,QAAD,IAAc;AAAA;;AACrEJ,MAAAA,OAAO,CAACC,GAAR,oBAAYG,QAAQ,CAACC,IAArB,oDAAY,gBAAeK,MAA3B;;AACA,UAAI,oBAAAN,QAAQ,CAACC,IAAT,oEAAeK,MAAf,IAAwB,CAA5B,EAA+B;AAAA;;AAC7B1B,QAAAA,UAAU,CAACoB,QAAQ,CAACC,IAAV,CAAV;AACAnB,QAAAA,cAAc,CAAC,EACb,GAAGhB,MADU;AAEbE,UAAAA,GAAG,EAAEa,WAAW,CAACb,GAFJ;AAGbG,UAAAA,YAAY,EAAE6B,QAAQ,CAACC,IAAT,CAAc,CAAd,EAAiB9B,YAHlB;AAIbD,UAAAA,OAAO,qBAAE8B,QAAQ,CAACC,IAAT,CAAc,CAAd,CAAF,oDAAE,gBAAkB/B;AAJd,SAAD,CAAd;AAMD;AACF,KAXK,CAAN;AAYD;;AAEDd,EAAAA,SAAS,CAAC,MAAM;AACdD,IAAAA,KAAK,CAAC2C,GAAN,CAAW,iBAAX,EAA6BC,IAA7B,CAAmCC,QAAD,IAAc;AAC9CJ,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BG,QAAQ,CAACC,IAAxC;AACAf,MAAAA,cAAc,CAACc,QAAQ,CAACC,IAAV,CAAd;AACD,KAHD;AAID,GALQ,EAKN,EALM,CAAT;;AAOA,QAAMM,iBAAiB,GAAIC,CAAD,IAAO;AAC/B,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAkBF,CAAC,CAACG,MAA1B;AACA7B,IAAAA,cAAc,CAAC,EAAE,GAAGD,WAAL;AAAkB,OAAC4B,IAAD,GAAQC;AAA1B,KAAD,CAAd;AACD,GAHD;;AAKA,QAAME,qBAAqB,GAAIJ,CAAD,IAAO;AACnC,QAAI;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAkBF,CAAC,CAACG,MAAxB;AACAD,IAAAA,KAAK,GAAGA,KAAK,CAACG,WAAN,EAAR;;AACA,QAAIH,KAAK,CAACJ,MAAN,GAAe,CAAf,IAAoBI,KAAK,CAACJ,MAAN,GAAe,EAAvC,EAA2C;AACzCnD,MAAAA,KAAK,CAAC2C,GAAN,CAAW,qBAAoBY,KAAM,EAArC,EAAwCX,IAAxC,CAA8CC,QAAD,IAAc;AACzD,YAAIA,QAAQ,CAACC,IAAT,CAAc5B,IAAlB,EAAwB;AAAA;;AACtBuB,UAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCG,QAAQ,CAACC,IAA3C;AACAnB,UAAAA,cAAc,CAAC,EAAE,GAAGD,WAAL;AAAkBT,YAAAA,QAAQ,EAAE4B,QAAQ,CAACC;AAArC,WAAD,CAAd;;AACA,iCAAID,QAAQ,CAACC,IAAb,4EAAI,gBAAe1B,IAAnB,yDAAI,qBAAqBuC,QAAzB,EAAmC;AACjCC,YAAAA,2BAA2B,CAACf,QAAQ,CAACC,IAAV,CAA3B;AACD;AACF,SAND,MAMO;AACLnB,UAAAA,cAAc,CAAC,EACb,GAAGD,WADU;AAEbT,YAAAA,QAAQ,EAAE,EAAE,GAAGN,MAAM,CAACM,QAAZ;AAAsB,eAACqC,IAAD,GAAQC;AAA9B;AAFG,WAAD,CAAd;AAID;AACF,OAbD;AAcD,KAfD,MAeO;AACL5B,MAAAA,cAAc,CAAC,EACb,GAAGD,WADU;AAEbT,QAAAA,QAAQ,EAAE,EAAE,GAAGN,MAAM,CAACM,QAAZ;AAAsB,WAACqC,IAAD,GAAQC;AAA9B;AAFG,OAAD,CAAd;AAID;AACF,GAxBD;;AA0BA,QAAMM,uBAAuB,GAAIR,CAAD,IAAO;AACrC,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAkBF,CAAC,CAACG,MAA1B;;AACA,QAAID,KAAK,CAACJ,MAAN,IAAgB,CAApB,EAAuB;AACrBnD,MAAAA,KAAK,CAAC2C,GAAN,CAAW,uBAAsBY,KAAM,EAAvC,EAA0CX,IAA1C,CAAgDC,QAAD,IAAc;AAC3D,YAAIA,QAAQ,CAACC,IAAT,CAAclC,MAAlB,EAA0B;AAAA;;AACxB6B,UAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCG,QAAQ,CAACC,IAA3C;AACAnB,UAAAA,cAAc,CAAC,EAAE,GAAGD,WAAL;AAAkBT,YAAAA,QAAQ,EAAE4B,QAAQ,CAACC;AAArC,WAAD,CAAd;;AACA,iCAAID,QAAQ,CAACC,IAAb,4EAAI,gBAAe1B,IAAnB,yDAAI,qBAAqBuC,QAAzB,EAAmC;AACjCC,YAAAA,2BAA2B,CAACf,QAAQ,CAACC,IAAV,CAA3B;AACD;AACF,SAND,MAMO;AACLnB,UAAAA,cAAc,CAAC,EACb,GAAGD,WADU;AAEbT,YAAAA,QAAQ,EAAE,EAAE,GAAGN,MAAM,CAACM,QAAZ;AAAsB,eAACqC,IAAD,GAAQC;AAA9B;AAFG,WAAD,CAAd;AAID;AACF,OAbD;AAcD,KAfD,MAeO;AACL5B,MAAAA,cAAc,CAAC,EACb,GAAGD,WADU;AAEbT,QAAAA,QAAQ,EAAE,EAAE,GAAGN,MAAM,CAACM,QAAZ;AAAsB,WAACqC,IAAD,GAAQC;AAA9B;AAFG,OAAD,CAAd;AAID;AACF,GAvBD;;AAyBA,WAASK,2BAAT,CAAqCE,GAArC,EAA0C;AAAA;;AACxC,QAAIC,WAAW,GAAGC,MAAM,cAACF,GAAG,CAAC1C,IAAL,8CAAC,UAAUuC,QAAX,CAAxB;AACA,QAAIM,QAAQ,GAAG,EAAf;AACA,QAAIC,OAAO,GAAG,EAAd;AACAtC,IAAAA,SAAS,CAACuC,GAAV,CAAc,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC7B,UAAID,IAAI,KAAKL,WAAb,EAA0B;AACxB,YAAIA,WAAW,IAAI,EAAnB,EAAuB;AACrBE,UAAAA,QAAQ,GAAG,CAACG,IAAD,CAAX;AACD,SAFD,MAEO,IAAIL,WAAW,IAAI,CAAf,IAAoBA,WAAW,IAAI,CAAnC,IAAwCA,WAAW,IAAI,EAA3D,EAA+D;AACpEE,UAAAA,QAAQ,GAAG,CAACG,IAAD,EAAOxC,SAAS,CAACyC,KAAK,GAAG,CAAT,CAAhB,EAA6BzC,SAAS,CAACyC,KAAK,GAAG,CAAT,CAAtC,CAAX;AACD,SAFM,MAEA;AACLJ,UAAAA,QAAQ,GAAG,CAACG,IAAD,EAAOxC,SAAS,CAACyC,KAAK,GAAG,CAAT,CAAhB,CAAX;AACD;AACF;AACF,KAVD;AAWAJ,IAAAA,QAAQ,CAACE,GAAT,CAAa,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC5BvC,MAAAA,WAAW,CAACqC,GAAZ,CAAgB,CAACG,GAAD,EAAMC,IAAN,KAAe;AAC7B,YAAIH,IAAI,KAAKJ,MAAM,CAACM,GAAG,CAACX,QAAL,CAAnB,EAAmC;AACjCO,UAAAA,OAAO,GAAG,CAAC,GAAGA,OAAJ,EAAaI,GAAb,CAAV;AACD;AACF,OAJD;AAKD,KAND;AAOArC,IAAAA,WAAW,CAACiC,OAAD,CAAX;AACD;;AAED,QAAMM,WAAW,GAAG,MAAM;AACxB,QAAI9C,WAAW,CAACT,QAAZ,CAAqBE,WAArB,IAAoCN,GAAG,CAACmC,EAA5C,EAAgD;AAC9ChD,MAAAA,KAAK,CAACyE,IAAN,CAAY,cAAZ,EAA2B/C,WAA3B,EAAwCkB,IAAxC,CAA8CC,QAAD,IAAc;AACzDJ,QAAAA,OAAO,CAACC,GAAR,CAAYG,QAAQ,CAACC,IAArB;;AACA,YAAID,QAAQ,CAACC,IAAT,IAAiB,IAArB,EAA2B;AACzB4B,UAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GADyB,CAEzB;AACD;AACF,OAND;AAOD;AACF,GAVD;;AAYA,QAAMC,WAAW,GAAG,MAAM;AACxB7E,IAAAA,KAAK,CAAC8E,GAAN,CAAW,eAAcrE,KAAM,EAA/B,EAAkCmC,IAAlC,CAAwCC,QAAD,IAAc;AACnDJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,QAAQ,CAACC,IAArB;;AACA,UAAID,QAAQ,CAACC,IAAT,IAAiB,IAArB,EAA2B;AACzBpC,QAAAA,OAAO,CAACqE,IAAR,CAAa,kBAAb;AACD;AACF,KALD;AAMD,GAPD;;AASA,QAAMC,cAAc,GAAG,MAAM;AAC3BhF,IAAAA,KAAK,CAAC8E,GAAN,CAAW,iBAAgBrE,KAAM,EAAjC,EAAoCmC,IAApC,CAA0CC,QAAD,IAAc;AACrDJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,QAAQ,CAACC,IAArB;;AACA,UAAID,QAAQ,CAACC,IAAT,IAAiB,IAArB,EAA2B;AACzBpC,QAAAA,OAAO,CAACqE,IAAR,CAAa,kBAAb;AACD;AACF,KALD;AAMD,GAPD;;AASA,QAAME,OAAO,GAAG/E,OAAO,CACrB,MAAM,CACJ;AACEgF,IAAAA,MAAM,EAAE,YADV;AAEEC,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA;AAAF,KAAD,kBACJ;AAAK,MAAA,SAAS,EAAC,EAAf;AAAA,6BACE;AAAQ,QAAA,SAAS,EAAC,MAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAHJ,GADI,EAUJ;AACEF,IAAAA,MAAM,EAAE,eADV;AAEEG,IAAAA,QAAQ,EAAE;AAFZ,GAVI,EAcJ;AACEH,IAAAA,MAAM,EAAE,OADV;AAEEG,IAAAA,QAAQ,EAAE;AAFZ,GAdI,EAmBJ;AACEH,IAAAA,MAAM,EAAE,SADV;AAEEG,IAAAA,QAAQ,EAAE;AAFZ,GAnBI,EAwBJ;AACEH,IAAAA,MAAM,EAAE,cADV;AAEEG,IAAAA,QAAQ,EAAE;AAFZ,GAxBI,EA6BJ;AACEH,IAAAA,MAAM,EAAE,gBADV;AAEEG,IAAAA,QAAQ,EAAE;AAFZ,GA7BI,EAiCJ;AACEH,IAAAA,MAAM,EAAE,gBADV;AAEEG,IAAAA,QAAQ,EAAE;AAFZ,GAjCI,EAsCJ;AACA;AACA;AACA;AACA;AACEH,IAAAA,MAAM,EAAE,eADV;AAEEC,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA;AAAF,KAAD,kBACJ;AAAK,MAAA,SAAS,EAAC,EAAf;AAAA,6BACE;AAAQ,QAAA,SAAS,EAAC,iCAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAHJ,GA1CI,CADe,EAoDrB,CAAC5D,OAAD,CApDqB,CAAvB;AAuDA,sBACE;AAAK,IAAA,SAAS,EAAC,EAAf;AAAA,2BACE;AAAA,6BACE;AAAA,+BACE;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,MAAf;AAAA,mCACE;AAAI,cAAA,SAAS,EAAC,uBAAd;AAAA,iCACOf,KAAK,IAAI,KAAT,GAAiB,KAAjB,GAAyB,MADhC;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAME;AAAK,YAAA,SAAS,EAAC,qBAAf;AAAA,uBACG,CAAAyB,GAAG,SAAH,IAAAA,GAAG,WAAH,gCAAAA,GAAG,CAAEoD,WAAL,sEAAkBC,gBAAlB,IAAqC,EAArC,IACC,EAAC1E,GAAD,aAACA,GAAD,uBAACA,GAAG,CAAEoC,gBAAN,CADD,iBAEG;AAAK,cAAA,SAAS,EAAC,qEAAf;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAC,MAAf;AAAA,wCACE;AAAK,kBAAA,SAAS,EAAC,MAAf;AAAA,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AAAK,oBAAA,SAAS,EAAC,KAAf;AAAA,2CACE;AACE,sBAAA,SAAS,EAAC,WADZ;AAEE,sBAAA,IAAI,EAAC,cAFP;AAGE,sBAAA,KAAK,EAAEvB,WAAW,CAACV,YAHrB;AAIE,sBAAA,QAAQ,EAAGqC,CAAD,IAAOD,iBAAiB,CAACC,CAAD,CAJpC;AAKE,sBAAA,QAAQ,EAAE7B,OAAO,CAAC2B,MAAR,GAAiB;AAL7B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAaE;AAAK,kBAAA,SAAS,EAAC,MAAf;AAAA,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AAAK,oBAAA,SAAS,EAAC,KAAf;AAAA,2CACE;AACE,sBAAA,SAAS,EAAC,kBADZ;AAEE,sBAAA,IAAI,EAAC,SAFP;AAGE,sBAAA,IAAI,EAAC,MAHP;AAIE,sBAAA,KAAK,EAAEzB,WAAW,CAACX,OAJrB;AAKE,sBAAA,QAAQ,EAAGsC,CAAD,IAAOD,iBAAiB,CAACC,CAAD,CALpC;AAME,sBAAA,QAAQ,EAAE7B,OAAO,CAAC2B,MAAR,GAAiB;AAN7B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAbF,eA0BE;AAAK,kBAAA,SAAS,EAAC,MAAf;AAAA,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AAAK,oBAAA,SAAS,EAAC,KAAf;AAAA,2CACE;AACE,sBAAA,SAAS,EAAC,WADZ;AAEE,sBAAA,SAAS,EAAE,CAFb;AAGE,sBAAA,IAAI,EAAC,MAHP;AAIE,sBAAA,KAAK,2BAAEzB,WAAW,CAACT,QAAd,0DAAE,sBAAsBC,IAJ/B;AAKE,sBAAA,QAAQ,EAAGmC,CAAD,IAAOI,qBAAqB,CAACJ,CAAD;AALxC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBA1BF,eAsCE;AAAK,kBAAA,SAAS,EAAC,MAAf;AAAA,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AAAK,oBAAA,SAAS,EAAC,KAAf;AAAA,2CACE;AACE,sBAAA,SAAS,EAAC,WADZ;AAEE,sBAAA,SAAS,EAAE,CAFb;AAGE,sBAAA,IAAI,EAAC,QAHP;AAIE,sBAAA,KAAK,4BAAE3B,WAAW,CAACT,QAAd,2DAAE,uBAAsBL,MAJ/B;AAKE,sBAAA,QAAQ,EAAGyC,CAAD,IAAOQ,uBAAuB,CAACR,CAAD;AAL1C;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAtCF,eAkDE;AAAK,kBAAA,SAAS,EAAC,MAAf;AAAA,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AAAK,oBAAA,SAAS,EAAC,KAAf;AAAA,2CACE;AACE,sBAAA,SAAS,EAAC,WADZ;AAEE,sBAAA,IAAI,EAAC,QAFP;AAGE,sBAAA,KAAK,4BAAE3B,WAAW,CAACT,QAAd,2DAAE,uBAAsBE,WAH/B;AAIE,sBAAA,QAAQ;AAJV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAlDF,eA6DE;AAAK,kBAAA,SAAS,EAAC,MAAf;AAAA,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AAAK,oBAAA,SAAS,EAAC,KAAf;AAAA,2CACE;AACE,sBAAA,SAAS,EAAC,WADZ;AAEE,sBAAA,IAAI,EAAC,QAFP;AAGE,sBAAA,KAAK,EACH,2BAAAO,WAAW,CAACT,QAAZ,4GAAsBG,IAAtB,kFAA4BuC,QAA5B,IACA,GADA,8BAEAjC,WAAW,CAACT,QAFZ,qFAEA,uBAAsBG,IAFtB,2DAEA,uBAA4BC,QAF5B,CAJJ;AAQE,sBAAA,QAAQ;AARV;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBA7DF,eA4EE;AAAK,kBAAA,SAAS,EAAC,MAAf;AAAA,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AAAK,oBAAA,SAAS,EAAC,KAAf;AAAA,2CACE;AACE,sBAAA,SAAS,EAAC,2BADZ;AAEE,sBAAA,KAAK,uBAAEK,WAAW,CAACN,IAAd,sDAAE,kBAAkB4B,EAF3B;AAGE,sBAAA,QAAQ,EAAGK,CAAD,IAAO;AACfvB,wBAAAA,WAAW,CAACqC,GAAZ,CAAgB,CAACG,GAAD,EAAMC,IAAN,KAAe;AAC7B,8BAAID,GAAG,CAACtB,EAAJ,IAAUK,CAAC,CAACG,MAAF,CAASD,KAAvB,EAA8B;AAC5B5B,4BAAAA,cAAc,CAAC,EAAE,GAAGD,WAAL;AAAkBN,8BAAAA,IAAI,EAAEkD;AAAxB,6BAAD,CAAd;AACD;AACF,yBAJD;AAKD,uBATH;AAAA,8CAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAXF,EAYGtC,QAZH,aAYGA,QAZH,uBAYGA,QAAQ,CAAEmC,GAAV,CAAc,CAACC,IAAD,EAAOC,KAAP,kBACb;AAAQ,wBAAA,KAAK,EAAED,IAAI,CAACpB,EAApB;AAAA,mCACGoB,IAAI,CAACT,QADR,OACmBS,IAAI,CAAC/C,QADxB;AAAA,yBAA6BgD,KAA7B;AAAA;AAAA;AAAA;AAAA,8BADD,CAZH;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBA5EF,eAmGE;AAAK,kBAAA,SAAS,EAAC,MAAf;AAAA,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAEE;AAAK,oBAAA,SAAS,EAAC,KAAf;AAAA,2CACE;AACE,sBAAA,SAAS,EAAC,kBADZ;AAEE,sBAAA,IAAI,EAAC,YAFP;AAGE,sBAAA,IAAI,EAAC,MAHP;AAIE,sBAAA,KAAK,EAAE3C,WAAW,CAACZ,UAJrB;AAKE,sBAAA,QAAQ,EAAGuC,CAAD,IAAOD,iBAAiB,CAACC,CAAD;AALpC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAnGF,eA+GE;AAAA,yCACE;AAAQ,oBAAA,OAAO,EAAE,MAAMmB,WAAW,EAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBA/GF;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAoHE;AAAK,gBAAA,SAAS,EAAC,yDAAf;AAAA,uCACE;AAAK,kBAAA,SAAS,EAAC,4BAAf;AAAA,sDACwBhD,OADxB,aACwBA,OADxB,uBACwBA,OAAO,CAAE2B,MADjC;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBApHF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHN,eA8HE;AAAK,cAAA,SAAS,EAAC,gBAAf;AAAgC,cAAA,KAAK,EAAE;AAAEqC,gBAAAA,SAAS,EAAE;AAAb,eAAvC;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAC,EAAf;AAAA,uCAEE;AAAO,kBAAA,SAAS,EAAC,oBAAjB;AAAA,0CACE;AAAO,oBAAA,SAAS,EAAC,6BAAjB;AAAA,2CACE;AAAI,sBAAA,SAAS,EAAC,EAAd;AAAA,8CACE;AAAI,wBAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,EAEG,EAAC3E,GAAD,aAACA,GAAD,uBAACA,GAAG,CAAEoC,gBAAN,IACG,CAAAf,GAAG,SAAH,IAAAA,GAAG,WAAH,iCAAAA,GAAG,CAAEoD,WAAL,wEAAkBC,gBAAlB,IAAqC,EAArC,IACA,EAAC1E,GAAD,aAACA,GAAD,uBAACA,GAAG,CAAE4E,WAAN,CADA,iBAEE;AAAI,wBAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAHL,GAKG,EAPN,eASE;AAAI,wBAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BATF,eAUE;AAAI,wBAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAVF,eAWE;AAAI,wBAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAXF,eAYE;AAAI,wBAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAZF,eAaE;AAAI,wBAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAbF,eAcE;AAAI,wBAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAdF,eAkBE;AAAI,wBAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAlBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BADF,EAuBGjE,OAAO,IACNA,OAAO,CAAC2C,GAAR,CAAY,CAACC,IAAD,EAAOC,KAAP;AAAA;;AAAA,wCACV;AAEE,sBAAA,SAAS,EAAC,2DAFZ;AAAA,8CAIE;AAAI,wBAAA,SAAS,EAAC,wBAAd;AAAA,kCACGA,KAAK,GAAG;AADX;AAAA;AAAA;AAAA;AAAA,8BAJF,EAOG,EAACxD,GAAD,aAACA,GAAD,uBAACA,GAAG,CAAEoC,gBAAN,IACG,CAAAf,GAAG,SAAH,IAAAA,GAAG,WAAH,iCAAAA,GAAG,CAAEoD,WAAL,wEAAkBC,gBAAlB,IAAqC,EAArC,IACA,EAAC1E,GAAD,aAACA,GAAD,uBAACA,GAAG,CAAE4E,WAAN,CADA,iBAEE;AAAI,wBAAA,SAAS,EAAC,uBAAd;AAAA,+CACE;AACE,0BAAA,SAAS,EAAC,MADZ;AAEE,0BAAA,OAAO,EAAE,MAAM;AACb9D,4BAAAA,cAAc,CAACH,OAAO,CAAC6C,KAAD,CAAR,CAAd;AACD,2BAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,8BAHL,GAcG,EArBN,eAuBE;AAAI,wBAAA,SAAS,EAAC,uBAAd;AAAA,kCACGD,IAAI,CAACpD;AADR;AAAA;AAAA;AAAA;AAAA,8BAvBF,eA0BE;AAAI,wBAAA,SAAS,EAAC,uBAAd;AAAA,kCACGoD,IAAI,CAACnD,QAAL,CAAcC;AADjB;AAAA;AAAA;AAAA;AAAA,8BA1BF,eA6BE;AAAI,wBAAA,SAAS,EAAC,uBAAd;AAAA,kCACGkD,IAAI,CAACnD,QAAL,CAAcL;AADjB;AAAA;AAAA;AAAA;AAAA,8BA7BF,eAgCE;AAAI,wBAAA,SAAS,EAAC,qBAAd;AAAA,mCACI,IAAGwD,IAAI,CAACnD,QAAL,CAAcG,IAAd,CAAmBuC,QAAS,GADnC,EACuC,GADvC,EAEGS,IAAI,CAACnD,QAAL,CAAcG,IAAd,CAAmBC,QAFtB,EAEgC,GAFhC,EAGG+C,IAAI,CAACnD,QAAL,CAAcE,WAHjB;AAAA;AAAA;AAAA;AAAA;AAAA,8BAhCF,eAqCE;AAAI,wBAAA,SAAS,EAAC,uBAAd;AAAA,mCACI,IAAGiD,IAAI,CAAChD,IAAL,CAAUuC,QAAS,IAD1B,EAEGS,IAAI,CAAChD,IAAL,CAAUC,QAFb;AAAA;AAAA;AAAA;AAAA;AAAA,8BArCF,eAyCE;AAAI,wBAAA,SAAS,EAAC,uBAAd;AAAA,kCACG+C,IAAI,CAACtD;AADR;AAAA;AAAA;AAAA;AAAA,8BAzCF,eA+CE;AAAI,wBAAA,SAAS,EAAC,uBAAd;AAAA,+CACE;AACE,0BAAA,SAAS,EAAC,iCADZ;AAEE,0BAAA,OAAO,EAAE,MAAM;AACbd,4BAAAA,KAAK,CACF8E,GADH,CACQ,eAAcV,IAAI,CAACpB,EAAG,EAD9B,EAEGJ,IAFH,CAESC,QAAD,IAAc;AAClB,kCAAIA,QAAQ,CAACC,IAAT,IAAiB,IAArB,EAA2B;AACzB4B,gCAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD;AACF,6BANH;AAOD,2BAVH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,8BA/CF;AAAA,uBACOP,KADP;AAAA;AAAA;AAAA;AAAA,4BADU;AAAA,mBAAZ,CAxBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA,sBADF,EA+FG7C,OAAO,CAAC2B,MAAR,GAAiB,CAAjB,IAAsB,EAACtC,GAAD,aAACA,GAAD,uBAACA,GAAG,CAAEoC,gBAAN,CAAtB,iBACC;AAAK,gBAAA,SAAS,EAAC,0BAAf;AAAA,uCACE;AAAK,kBAAA,SAAS,EAAC,aAAf;AAAA,6BACG,CAAAf,GAAG,SAAH,IAAAA,GAAG,WAAH,iCAAAA,GAAG,CAAEoD,WAAL,wEAAkBC,gBAAlB,KAAsC,EAAtC,iBACC;AACE,oBAAA,SAAS,EAAC,gBADZ;AAEE,oBAAA,OAAO,EAAE,MAAMP,cAAc,EAF/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFJ,eASE;AAAQ,oBAAA,SAAS,EAAC,KAAlB;AAAwB,oBAAA,OAAO,EAAE,MAAMH,WAAW,EAAlD;AAAA,+BACG,CAAA3C,GAAG,SAAH,IAAAA,GAAG,WAAH,iCAAAA,GAAG,CAAEoD,WAAL,wEAAkBC,gBAAlB,IAAqC,EAArC,IACC,cAFJ,EAGG,CAAArD,GAAG,SAAH,IAAAA,GAAG,WAAH,iCAAAA,GAAG,CAAEoD,WAAL,wEAAkBC,gBAAlB,KAAsC,EAAtC,IAA4C,QAH/C,EAIG,CAAArD,GAAG,SAAH,IAAAA,GAAG,WAAH,iCAAAA,GAAG,CAAEoD,WAAL,wEAAkBC,gBAAlB,IAAqC,EAArC,IAA2C,SAJ9C;AAAA;AAAA;AAAA;AAAA;AAAA,0BATF,eAgBE;AACE,oBAAA,SAAS,EAAC,gBADZ;AAEE,oBAAA,OAAO,EAAE,MAAM7E,OAAO,CAACqE,IAAR,CAAa,kBAAb,CAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAhBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBAhGJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBA9HF;AAAA;AAAA;AAAA;AAAA;AAAA,kBANF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAyQD;;AACD,eAAevE,OAAf","sourcesContent":["import axios from \"axios\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport {\n  Link,\n  useHistory,\n  useParams,\n} from \"react-router-dom/cjs/react-router-dom.min\";\nimport TableCopy from \"../utils/TableCopy\";\n\nfunction DgnEdit() {\n  let { dakId } = useParams();\n  let history = useHistory();\n\n  const dgnObj = {\n    cdaoNo: \"\",\n    dak: {},\n    promotDate: \"\",\n    dgnDate: \"\",\n    dgnAuthority: \"\",\n    employee: { icNo: \"\", cdaoNo: \"\", officerName: \"\", rank: { rankName: \"\" } },\n    rank: {},\n    action: \"\",\n  };\n\n  const [dak, setDak] = useState({});\n  const [dgnData, setDgnData] = useState([]);\n  const [dgnInputObj, setDgnInputObj] = useState(dgnObj);\n  const [rankOrder, setRankOrder] = useState([\n    1, 2, 3, 4, 14, 5, 15, 6, 7, 8, 9, 11, 12, 13, 10,\n  ]);\n  const [allRankList, setAllRankList] = useState();\n  const [rankList, setRankList] = useState([]);\n  const [usr, setUsr] = useState({});\n\n  useEffect(() => {\n    let user = JSON.parse(sessionStorage.getItem(\"usr\"));\n    console.log(\"usr >>> \", user);\n    setUsr(user);\n  }, []);\n\n  useEffect(() => {\n    if (dakId !== \"new\") {\n      console.log(\"dakId >>> \", dakId);\n      axios.get(`/daks/${dakId}`).then((response) => {\n        if (response.data?.dakidNo) {\n          console.log(\"dak data >>> \", response.data);\n          setDak(response.data);\n          setDgnInputObj({ ...dgnInputObj, dak: response.data });\n        }\n      });\n    }\n  }, [dakId]);\n\n  useEffect(() => {\n    if (dgnInputObj.dak?.id && !dak?.disposalApproved) {\n      FetchDgnData();\n    }\n  }, [dgnInputObj.dak.id]);\n\n  async function FetchDgnData() {\n    await axios.get(`/dgn/fkdak/${dgnInputObj.dak.id}`).then((response) => {\n      console.log(response.data?.length);\n      if (response.data?.length > 0) {\n        setDgnData(response.data);\n        setDgnInputObj({\n          ...dgnObj,\n          dak: dgnInputObj.dak,\n          dgnAuthority: response.data[0].dgnAuthority,\n          dgnDate: response.data[0]?.dgnDate,\n        });\n      }\n    });\n  }\n\n  useEffect(() => {\n    axios.get(`/ranks/allRanks`).then((response) => {\n      console.log(\"ranks list >>> \", response.data);\n      setAllRankList(response.data);\n    });\n  }, []);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setDgnInputObj({ ...dgnInputObj, [name]: value });\n  };\n\n  const handleIcNoInputChange = (e) => {\n    let { name, value } = e.target;\n    value = value.toUpperCase();\n    if (value.length > 6 && value.length < 10) {\n      axios.get(`/employees/byIcNo/${value}`).then((response) => {\n        if (response.data.icNo) {\n          console.log(\"employee data >>> \", response.data);\n          setDgnInputObj({ ...dgnInputObj, employee: response.data });\n          if (response.data?.rank?.rankCode) {\n            DeterminigPromotionRankList(response.data);\n          }\n        } else {\n          setDgnInputObj({\n            ...dgnInputObj,\n            employee: { ...dgnObj.employee, [name]: value },\n          });\n        }\n      });\n    } else {\n      setDgnInputObj({\n        ...dgnInputObj,\n        employee: { ...dgnObj.employee, [name]: value },\n      });\n    }\n  };\n\n  const handleCdaoNoInputChange = (e) => {\n    const { name, value } = e.target;\n    if (value.length == 6) {\n      axios.get(`/employees/byCdaoNo/${value}`).then((response) => {\n        if (response.data.cdaoNo) {\n          console.log(\"employee data >>> \", response.data);\n          setDgnInputObj({ ...dgnInputObj, employee: response.data });\n          if (response.data?.rank?.rankCode) {\n            DeterminigPromotionRankList(response.data);\n          }\n        } else {\n          setDgnInputObj({\n            ...dgnInputObj,\n            employee: { ...dgnObj.employee, [name]: value },\n          });\n        }\n      });\n    } else {\n      setDgnInputObj({\n        ...dgnInputObj,\n        employee: { ...dgnObj.employee, [name]: value },\n      });\n    }\n  };\n\n  function DeterminigPromotionRankList(emp) {\n    let empRankCode = Number(emp.rank?.rankCode);\n    let orderArr = [];\n    let rankArr = [];\n    rankOrder.map((item, index) => {\n      if (item === empRankCode) {\n        if (empRankCode == 10) {\n          orderArr = [item];\n        } else if (empRankCode == 4 || empRankCode == 5 || empRankCode == 12) {\n          orderArr = [item, rankOrder[index + 1], rankOrder[index + 2]];\n        } else {\n          orderArr = [item, rankOrder[index + 1]];\n        }\n      }\n    });\n    orderArr.map((item, index) => {\n      allRankList.map((itm, indx) => {\n        if (item === Number(itm.rankCode)) {\n          rankArr = [...rankArr, itm];\n        }\n      });\n    });\n    setRankList(rankArr);\n  }\n\n  const AuditorSave = () => {\n    if (dgnInputObj.employee.officerName && dak.id) {\n      axios.post(`/dgn/audSave`, dgnInputObj).then((response) => {\n        console.log(response.data);\n        if (response.data == \"ok\") {\n          window.location.reload();\n          // FetchDgnData();\n        }\n      });\n    }\n  };\n\n  const FinalSubmit = () => {\n    axios.put(`/dgn/submit/${dakId}`).then((response) => {\n      console.log(response.data);\n      if (response.data == \"ok\") {\n        history.push(\"/dgnsNew/dakList\");\n      }\n    });\n  };\n\n  const RollBackDgnDak = () => {\n    axios.put(`/dgn/rollBack/${dakId}`).then((response) => {\n      console.log(response.data);\n      if (response.data == \"ok\") {\n        history.push(\"/dgnsNew/dakList\");\n      }\n    });\n  };\n\n  const columns = useMemo(\n    () => [\n      {\n        Header: \"Action Aud\",\n        Cell: ({ row }) => (\n          <div className=\"\">\n            <button className=\"m-0 \">Edit</button>\n          </div>\n        ),\n      },\n\n      {\n        Header: \"Dgn Authority\",\n        accessor: \"dgnAuthority\",\n      },\n      {\n        Header: \"IC No\",\n        accessor: \"employee.icNo\",\n      },\n\n      {\n        Header: \"Cdao No\",\n        accessor: \"cdaoNo\",\n      },\n\n      {\n        Header: \"Officer Name\",\n        accessor: \"employee.officerName\",\n      },\n\n      {\n        Header: \"Promotion Rank\",\n        accessor: \"rank.rankName\",\n      },\n      {\n        Header: \"Promotion Date\",\n        accessor: \"promotDate\",\n      },\n\n      // {\n      //   Header: \"Dgn Date\",\n      //   accessor: \"dgnDate\",\n      // },\n      {\n        Header: \"Action AAO/AO\",\n        Cell: ({ row }) => (\n          <div className=\"\">\n            <button className=\"m-0 bg-red-500 hover:bg-red-700\">Delete</button>\n          </div>\n        ),\n      },\n    ],\n    [dgnData]\n  );\n\n  return (\n    <div className=\"\">\n      <div>\n        <div>\n          <div>\n            <div className=\"mb-3\">\n              <h1 className=\"text-center underline\">\n                Dgn {dakId == \"new\" ? \"Add\" : \"Edit\"}\n              </h1>\n            </div>\n            <div className=\"flex justify-around\">\n              {usr?.designation?.designationLevel < 30 &&\n                !dak?.disposalApproved && (\n                  <div className=\"bg-green-200 px-3 py-3 rounded-xl flex flex-col justify-between m-0\">\n                    <div className=\"p-0 \">\n                      <div className=\"mt-3\">\n                        <label>DGN No</label>\n                        <div className=\"p-0\">\n                          <input\n                            className=\"px-2 py-1\"\n                            name=\"dgnAuthority\"\n                            value={dgnInputObj.dgnAuthority}\n                            onChange={(e) => handleInputChange(e)}\n                            disabled={dgnData.length > 0}\n                          />\n                        </div>\n                      </div>\n                      <div className=\"mt-3\">\n                        <label>DGN Date</label>\n                        <div className=\"p-0\">\n                          <input\n                            className=\"w-full px-2 py-1\"\n                            name=\"dgnDate\"\n                            type=\"date\"\n                            value={dgnInputObj.dgnDate}\n                            onChange={(e) => handleInputChange(e)}\n                            disabled={dgnData.length > 0}\n                          />\n                        </div>\n                      </div>\n                      <div className=\"mt-3\">\n                        <label>IC No</label>\n                        <div className=\"p-0\">\n                          <input\n                            className=\"px-2 py-1\"\n                            maxLength={8}\n                            name=\"icNo\"\n                            value={dgnInputObj.employee?.icNo}\n                            onChange={(e) => handleIcNoInputChange(e)}\n                          />\n                        </div>\n                      </div>\n                      <div className=\"mt-3\">\n                        <label>Cdao No</label>\n                        <div className=\"p-0\">\n                          <input\n                            className=\"px-2 py-1\"\n                            maxLength={6}\n                            name=\"cdaoNo\"\n                            value={dgnInputObj.employee?.cdaoNo}\n                            onChange={(e) => handleCdaoNoInputChange(e)}\n                          />\n                        </div>\n                      </div>\n                      <div className=\"mt-3\">\n                        <label>Officer Name</label>\n                        <div className=\"p-0\">\n                          <input\n                            className=\"px-2 py-1\"\n                            name=\"cdaoNo\"\n                            value={dgnInputObj.employee?.officerName}\n                            readOnly\n                          />\n                        </div>\n                      </div>\n                      <div className=\"mt-3\">\n                        <label>Current Rank</label>\n                        <div className=\"p-0\">\n                          <input\n                            className=\"px-2 py-1\"\n                            name=\"cdaoNo\"\n                            value={\n                              dgnInputObj.employee?.rank?.rankCode +\n                              \" \" +\n                              dgnInputObj.employee?.rank?.rankName\n                            }\n                            readOnly\n                          />\n                        </div>\n                      </div>\n                      <div className=\"mt-3\">\n                        <label>Promoted Rank</label>\n                        <div className=\"p-0\">\n                          <select\n                            className=\"w-full bg-white px-2 py-1\"\n                            value={dgnInputObj.rank?.id}\n                            onChange={(e) => {\n                              allRankList.map((itm, indx) => {\n                                if (itm.id == e.target.value) {\n                                  setDgnInputObj({ ...dgnInputObj, rank: itm });\n                                }\n                              });\n                            }}\n                          >\n                            <option>--Select Rank--</option>\n                            {rankList?.map((item, index) => (\n                              <option value={item.id} key={index}>\n                                {item.rankCode} {item.rankName}\n                              </option>\n                            ))}\n                          </select>\n                        </div>\n                      </div>\n                      <div className=\"mt-3\">\n                        <label>Date of Promotion</label>\n                        <div className=\"p-0\">\n                          <input\n                            className=\"w-full px-2 py-1\"\n                            name=\"promotDate\"\n                            type=\"date\"\n                            value={dgnInputObj.promotDate}\n                            onChange={(e) => handleInputChange(e)}\n                          />\n                        </div>\n                      </div>\n                      <div>\n                        <button onClick={() => AuditorSave()}>Save</button>\n                      </div>\n                    </div>\n                    <div className=\"h-32 flex justify-center items-center font-bold m-0 p-0\">\n                      <div className=\"bg-white px-3 py-2 m-0 p-0\">\n                        Updated DGN Records: {dgnData?.length}\n                      </div>\n                    </div>\n                  </div>\n                )}\n              <div className=\"overflow-auto \" style={{ maxHeight: \"80vh\" }}>\n                <div className=\"\">\n                  {/* <TableCopy data={dgnData} columns={columns} /> */}\n                  <table className=\" bg-white relative\">\n                    <thead className=\" sticky top-0 bg-green-200 \">\n                      <tr className=\"\">\n                        <th className=\"text-center px-2 py-1\">Sl No</th>\n                        {!dak?.disposalApproved\n                          ? usr?.designation?.designationLevel < 30 &&\n                            !dak?.auditorDate && (\n                              <th className=\"text-center px-4 py-1\">Action</th>\n                            )\n                          : \"\"}\n\n                        <th className=\"text-center px-4 py-1\">DGN Authority</th>\n                        <th className=\"text-center px-4 py-1\">IC No</th>\n                        <th className=\"text-center px-4 py-1\">CDAO No</th>\n                        <th className=\"text-center px-4 py-1\">Officer Name</th>\n                        <th className=\"text-center px-4 py-1\">Promoted Rank</th>\n                        <th className=\"text-center px-4 py-1\">\n                          Promotion Date\n                        </th>\n                        {/* <th className=\"text-center px-4 py-1\">DGN Date</th> */}\n                        <th className=\"text-center px-4 py-1\">Action</th>\n                      </tr>\n                    </thead>\n                    {dgnData &&\n                      dgnData.map((item, index) => (\n                        <tr\n                          key={index}\n                          className=\"bg-white border-l-2 border-r-2 border-b-2 border-gray-200\"\n                        >\n                          <td className=\"text-center px-2 py-2 \">\n                            {index + 1}\n                          </td>\n                          {!dak?.disposalApproved\n                            ? usr?.designation?.designationLevel < 30 &&\n                              !dak?.auditorDate && (\n                                <td className=\"text-center px-2 py-2\">\n                                  <button\n                                    className=\"m-0 \"\n                                    onClick={() => {\n                                      setDgnInputObj(dgnData[index]);\n                                    }}\n                                  >\n                                    Edit\n                                  </button>\n                                </td>\n                              )\n                            : \"\"}\n\n                          <td className=\"text-center px-2 py-2\">\n                            {item.dgnAuthority}\n                          </td>\n                          <td className=\"text-center px-2 py-2\">\n                            {item.employee.icNo}\n                          </td>\n                          <td className=\"text-center px-2 py-2\">\n                            {item.employee.cdaoNo}\n                          </td>\n                          <td className=\"text-left px-2 py-2\">\n                            {`(${item.employee.rank.rankCode})`}{\" \"}\n                            {item.employee.rank.rankName}{\" \"}\n                            {item.employee.officerName}\n                          </td>\n                          <td className=\"text-center px-2 py-2\">\n                            {`(${item.rank.rankCode}) `}\n                            {item.rank.rankName}\n                          </td>\n                          <td className=\"text-center px-2 py-2\">\n                            {item.promotDate}\n                          </td>\n                          {/* <td className=\"text-center px-2 py-2\">\n                            {item.dgnDate}\n                          </td> */}\n                          <td className=\"text-center px-2 py-2\">\n                            <button\n                              className=\"m-0 bg-red-500 hover:bg-red-700\"\n                              onClick={() => {\n                                axios\n                                  .put(`/dgn/delete/${item.id}`)\n                                  .then((response) => {\n                                    if (response.data == \"ok\") {\n                                      window.location.reload();\n                                    }\n                                  });\n                              }}\n                            >\n                              Delete\n                            </button>\n                          </td>\n                        </tr>\n                      ))}\n                  </table>\n                </div>\n                {dgnData.length > 0 && !dak?.disposalApproved && (\n                  <div className=\"flex justify-center mt-6\">\n                    <div className=\"w-7/12 flex\">\n                      {usr?.designation?.designationLevel >= 30 && (\n                        <button\n                          className=\"m-2 bg-red-500\"\n                          onClick={() => RollBackDgnDak()}\n                        >\n                          Roll Back\n                        </button>\n                      )}\n                      <button className=\"m-2\" onClick={() => FinalSubmit()}>\n                        {usr?.designation?.designationLevel < 30 &&\n                          \"Final Submit\"}\n                        {usr?.designation?.designationLevel == 30 && \"Submit\"}\n                        {usr?.designation?.designationLevel > 30 && \"Approve\"}\n                      </button>\n\n                      <button\n                        className=\"m-2 bg-red-400\"\n                        onClick={() => history.push(\"/dgnsNew/dakList\")}\n                      >\n                        Exit\n                      </button>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\nexport default DgnEdit;\n"]},"metadata":{},"sourceType":"module"}