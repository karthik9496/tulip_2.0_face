{"ast":null,"code":"import _regeneratorRuntime from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By :\n */import{useState,useEffect,useMemo}from\"react\";import{withRouter,useParams,useHistory,Link}from\"react-router-dom\";import{useForm}from\"react-hook-form\";import axios from\"axios\";import Table,{SelectColumnFilter}from\"../utils/Table\";//\nimport*as yup from\"yup\";import{yupResolver}from\"@hookform/resolvers/yup\";import addDays from\"date-fns/addDays\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var schema=yup.object({});var WebReports=function WebReports(){var _useForm=useForm({resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,errors=_useForm.formState.errors,clearErrors=_useForm.clearErrors;var _useParams=useParams(),id=_useParams.id;//console.log(id);\nvar history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),serverErrors=_useState4[0],setServerErrors=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),entity=_useState6[0],setEntity=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),state=_useState8[0],setState=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),me=_useState10[0],setMe=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),fileName=_useState14[0],setFileName=_useState14[1];var _useState15=useState(new Date()),_useState16=_slicedToArray(_useState15,2),fromDate=_useState16[0],setFromDate=_useState16[1];var _useState17=useState(new Date()),_useState18=_slicedToArray(_useState17,2),toDate=_useState18[0],setToDate=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),fromDateStr=_useState20[0],setFromDateStr=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),toDateStr=_useState22[0],setToDateStr=_useState22[1];var _useState23=useState(true),_useState24=_slicedToArray(_useState23,2),lightTheme=_useState24[0],setLightTheme=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),disabled=_useState26[0],setDisabled=_useState26[1];var onError=function onError(errors,e){return console.log(errors,e);};//All foreign keys.\n// XXXXXX Add search fields and adjust the values as necessary\nvar errorCallback=function errorCallback(err){//console.log(err);\nsetServerErrors(err);};var handleInputFromDateChange=function handleInputFromDateChange(e){console.log(e.target.value);//setFromDate(e.target.value);\nsetFromDateStr(e.target.value);};var handleInputToDateChange=function handleInputToDateChange(e){console.log(e.target.value);//setToDate(e.target.value);\nsetToDateStr(e.target.value);};var generateCsv=function generateCsv(){console.log(\"ritesh kumar\");setDisabled(true);var saving=false;//console.log(\">>>>>>From Date--:\" + fromDate);\n//\tconsole.log(\">>>>>>To Date--:\" + toDate);\nfunction csvFile(){return _csvFile.apply(this,arguments);}function _csvFile(){_csvFile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!saving)console.log(\">>>>>>From Date--:\"+fromDate);console.log(\">>>>>>To Date--:\"+toDate);axios.get(\"/reports/dak/\".concat(fromDateStr,\"/\").concat(toDateStr,\"/webReports\")).then(function(response){console.log(\"List of CSV Files\",response.data);var fileList=response.data;/* const url = window.open(\n            `${process.env.REACT_APP_BASE_URL}/files/${response.data}`\n          ); */fileList.map(function(file){return window.open(\"\".concat(process.env.REACT_APP_BASE_URL,\"/files/\").concat(file));});setDisabled(false);}).catch(function(error){setDisabled(false);//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 3:case\"end\":return _context.stop();}}},_callee);}));return _csvFile.apply(this,arguments);}csvFile();return function(){saving=true;};};return/*#__PURE__*/_jsx(\"div\",{style:disabled?{pointerEvents:\"none\",opacity:\"0.4\"}:{},children:/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 text-gray-900 pt-12 pl-6\",children:/*#__PURE__*/_jsx(\"main\",{className:\"max-w-xl pl-6 \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col my-2 shadow px-4 pb-4 space-y-2 justify-start max-w-xs border-2 border-green-500\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold mt-4 mb-2 text-green-700\",children:\"Download Website CSV\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"FromDate\",placeholder:\"dd-mm-yyyy\",onChange:function onChange(e){return handleInputFromDateChange(e);},className:\"form-control py-1 my-2 shadow border-2\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"ToDate\",placeholder:\"dd-mm-yyyy\",onChange:function onChange(e){return handleInputToDateChange(e);},className:\"form-control py-1 my-2 shadow border-2\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:generateCsv,className:\"ml-2 p-1 bg-gradient-to-r from-blue-500 to-green-500  w-32\",children:\"Generate CSV\"})]})})})});};export default withRouter(WebReports);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/WebReports.js"],"names":["useState","useEffect","useMemo","withRouter","useParams","useHistory","Link","useForm","axios","Table","SelectColumnFilter","yup","yupResolver","addDays","schema","object","WebReports","resolver","register","handleSubmit","setValue","errors","formState","clearErrors","id","history","data","setData","serverErrors","setServerErrors","entity","setEntity","state","setState","me","setMe","loading","setLoading","fileName","setFileName","Date","fromDate","setFromDate","toDate","setToDate","fromDateStr","setFromDateStr","toDateStr","setToDateStr","lightTheme","setLightTheme","disabled","setDisabled","onError","e","console","log","errorCallback","err","handleInputFromDateChange","target","value","handleInputToDateChange","generateCsv","saving","csvFile","get","then","response","fileList","map","file","window","open","process","env","REACT_APP_BASE_URL","catch","error","Error","pointerEvents","opacity"],"mappings":"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","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By :\n */\n\nimport { useState, useEffect, useMemo } from \"react\";\nimport { withRouter, useParams, useHistory, Link } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport Table, { SelectColumnFilter } from \"../utils/Table\"; //\n\nimport * as yup from \"yup\";\n\nimport { yupResolver } from \"@hookform/resolvers/yup\";\n\nimport addDays from \"date-fns/addDays\";\n\nconst schema = yup.object({});\n\nconst WebReports = () => {\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    formState: { errors },\n    clearErrors,\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  let { id } = useParams();\n  //console.log(id);\n\n  let history = useHistory();\n\n  const [data, setData] = useState([]);\n  const [serverErrors, setServerErrors] = useState([]);\n  const [entity, setEntity] = useState({});\n  const [state, setState] = useState({});\n\n  const [me, setMe] = useState(\"\");\n\n  const [loading, setLoading] = useState(true);\n  const [fileName, setFileName] = useState(\"\");\n  const [fromDate, setFromDate] = useState(new Date());\n  const [toDate, setToDate] = useState(new Date());\n  const [fromDateStr, setFromDateStr] = useState(\"\");\n  const [toDateStr, setToDateStr] = useState(\"\");\n  const [lightTheme, setLightTheme] = useState(true);\n  const [disabled, setDisabled] = useState(false);\n\n  const onError = (errors, e) => console.log(errors, e);\n\n  //All foreign keys.\n  // XXXXXX Add search fields and adjust the values as necessary\n\n  const errorCallback = (err) => {\n    //console.log(err);\n    setServerErrors(err);\n  };\n\n  const handleInputFromDateChange = (e) => {\n    console.log(e.target.value);\n    //setFromDate(e.target.value);\n    setFromDateStr(e.target.value);\n  };\n\n  const handleInputToDateChange = (e) => {\n    console.log(e.target.value);\n    //setToDate(e.target.value);\n    setToDateStr(e.target.value);\n  };\n\n  const generateCsv = () => {\n    console.log(\"ritesh kumar\");\n    setDisabled(true);\n\n    let saving = false;\n    //console.log(\">>>>>>From Date--:\" + fromDate);\n    //\tconsole.log(\">>>>>>To Date--:\" + toDate);\n    async function csvFile() {\n      if (!saving) console.log(\">>>>>>From Date--:\" + fromDate);\n      console.log(\">>>>>>To Date--:\" + toDate);\n      axios\n        .get(`/reports/dak/${fromDateStr}/${toDateStr}/webReports`)\n        .then((response) => {\n          console.log(\"List of CSV Files\", response.data);\n          let fileList = response.data;\n          /* const url = window.open(\n            `${process.env.REACT_APP_BASE_URL}/files/${response.data}`\n          ); */\n          fileList.map((file) =>\n            window.open(`${process.env.REACT_APP_BASE_URL}/files/${file}`)\n          );\n          setDisabled(false);\n        })\n        .catch((error) => {\n          setDisabled(false);\n          //console.log(error);\n          //console.log(error.response.status);\n          //console.log(error.response.headers);\n          if (error.response) setServerErrors(error.response.data.error);\n          else setServerErrors(error.Error);\n        });\n    }\n    csvFile();\n\n    return () => {\n      saving = true;\n    };\n  };\n\n  return (\n    <div\n      style={disabled ? { pointerEvents: \"none\", opacity: \"0.4\" } : {}}\n    >\n      <div className=\"min-h-screen bg-gray-100 text-gray-900 pt-12 pl-6\">\n        <main className=\"max-w-xl pl-6 \">\n          <div className=\"flex flex-col my-2 shadow px-4 pb-4 space-y-2 justify-start max-w-xs border-2 border-green-500\" >\n            <h1 className=\"text-xl font-semibold mt-4 mb-2 text-green-700\">Download Website CSV</h1>\n\n            <div>\n              <input\n                type=\"date\"\n                name=\"FromDate\"\n                placeholder=\"dd-mm-yyyy\"\n                onChange={(e) => handleInputFromDateChange(e)}\n                className=\"form-control py-1 my-2 shadow border-2\"\n              />\n            </div>\n\n            <div>\n              <input\n                type=\"date\"\n                name=\"ToDate\"\n                placeholder=\"dd-mm-yyyy\"\n                onChange={(e) => handleInputToDateChange(e)}\n                className=\"form-control py-1 my-2 shadow border-2\"\n              />\n            </div>\n\n            <div className=\"\" />\n            <button\n              type=\"submit\"\n              onClick={generateCsv}\n              className=\"ml-2 p-1 bg-gradient-to-r from-blue-500 to-green-500  w-32\"\n            >\n              Generate CSV\n            </button>\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(WebReports);\n"]},"metadata":{},"sourceType":"module"}