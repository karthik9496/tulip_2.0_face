{"ast":null,"code":"var _jsxFileName = \"/home/itsdcsec/falconws/falcon_face/src/components/DakEdit.js\";\n\n/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By :\n */\nimport { useState, useEffect, useRef } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport LiveSearch from \"../utils/LiveSearch\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport addDays from \"date-fns/addDays\";\nimport Tabs from \"react-bootstrap/Tabs\";\nimport Tab from \"react-bootstrap/Tab\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object({\n  dakType: yup.object().required(\"Required\"),\n  //section: yup.object().required(\"Required\"),\n  referenceNo: yup.string().required(\"Required\").test(\"Length Ok\", \"Field length exceeding 25\", val => val.length <= 30),\n  referenceDate: yup.string().required(\"Required\")\n});\n\nconst DakEdit = () => {\n  var _errors$employee, _errors$referenceNo, _errors$section, _errors$referenceNo2, _errors$referenceDate, _errors$amount, _errors$subject;\n\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    formState: {\n      errors\n    },\n    clearErrors\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  let {\n    id\n  } = useParams(); //console.log(id);\n\n  let history = useHistory();\n  const [serverErrors, setServerErrors] = useState([]);\n  const [entity, setEntity] = useState({});\n  const [state, setState] = useState({});\n  const [dakMsg, setDakMsg] = useState(\"\");\n  const [secId, setSecId] = useState();\n  const [dakTypeData, setDakTypeData] = useState([]);\n  const [dakTypeItems, setDakTypeItems] = useState([]);\n  const [dakTypeItem, setDakTypeItem] = useState();\n  const [loading, setLoading] = useState(true);\n  const [sectionGroup, setSectionGroup] = useState(\"\");\n  const [sectionGroupList, setSectionGroupList] = useState([]);\n  const [sectionGroupItems, setSectionGroupItems] = useState([]);\n  const [empId, setEmpId] = useState(0);\n  const [secName, setSecName] = useState(\"\");\n  const [key, setKey] = useState(\"Page1\");\n  const [dakTypeDesc, setDakTypeDesc] = useState(\"\");\n  const [taskInfo, setTaskInfo] = useState(\"\");\n  const [dakTypeLetters, setDakTypeLetters] = useState(false);\n  const [vendorId, setVendorId] = useState(\"\");\n  const [lic, setLic] = useState(false);\n  const [sectionList, setSectionList] = useState([]);\n  const [sectionListItems, setSectionListItems] = useState([]);\n  const [sectionSelected, setSectionSelected] = useState('');\n  const [te, setTe] = useState(false);\n  useEffect(() => {\n    let isCancelled = false;\n    console.log(id);\n\n    if (id !== \"new\") {\n      async function fetchData() {\n        let record = \"\";\n        await axios.get(\"/daks/\" + id).then(response => {\n          record = response.data;\n        }).catch(error => {\n          //console.log(error);\n          //console.log(error.response.status);\n          //console.log(error.response.headers);\n          if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n        });\n        const fields = [\"id\", \"dakidNo\", \"dakYear\", \"dakType\", \"unit\", \"section\", \"employee\", \"cdaoNo\", \"checkDigit\", \"amount\", \"referenceNo\", \"referenceDate\", \"subject\", \"billNo\", \"billDate\", \"disposalDate\", \"disposalDate\", \"disposalSummary\", \"taskUsr\", \"reason\", \"aaoDate\", \"auditorDate\", \"aoDate\", \"recordStatus\", \"approved\", \"vendor\", \"courseBill\"];\n        setSectionGroup(record[\"section\"].sectionGroup);\n        setSecName(record[\"section\"].sectionName);\n        setSecId(record[\"section\"].id);\n        fields.forEach(field => setValue(field, record[field]));\n\n        if (!isCancelled) {\n          setEntity(record);\n          setState(prev => ({ ...prev,\n            state: record\n          }));\n        }\n      }\n\n      fetchData();\n      return () => {\n        isCancelled = true;\n      };\n    }\n  }, [id, setValue]);\n  useEffect(() => {\n    let fetching = false;\n    let unmounted = false;\n\n    async function fetchSectionGroup() {\n      if (!fetching) //console.log(secId);\n        await axios.get(`/sections/999/sectionGroup`).then(response => {\n          console.log(\"response>>\" + response.data);\n          setSectionGroupList(response.data);\n\n          if (!unmounted) {\n            setLoading(false);\n          }\n        }).catch(error => {\n          //console.log(error);\n          //console.log(error.response.status);\n          //console.log(error.response.headers);\n          if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n        });\n    }\n\n    fetchSectionGroup();\n    return () => {\n      fetching = true;\n      unmounted = true;\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n  useEffect(() => {\n    let fetching = false;\n    let unmounted = false;\n    console.log(\"daktype\");\n\n    async function fetchSectionData() {\n      console.log(empId);\n\n      if (!fetching && empId > 0 && sectionGroup.length > 2) {\n        console.log(\"fetching section \" + empId + \"--\" + sectionGroup);\n        await axios.get(`/employees/${empId}/sections/${sectionGroup}`).then(response => {\n          console.log(\"response>> section>>\" + response.data[0].sectionName + \"--\" + response.data[1] + \"--\" + response.data[2]);\n          setValue(\"section\", response.data[0]);\n          setSecId(response.data[0].id);\n          setSecName(response.data[0].sectionName);\n          setTaskInfo(\"Task No-\" + response.data[1] + \" User \" + response.data[2]); //setDakTypeData(response.data);\n\n          if (!unmounted) {\n            setLoading(false);\n          }\n        }).catch(error => {\n          //console.log(error);\n          //console.log(error.response.status);\n          //console.log(error.response.headers);\n          if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n        });\n      }\n    }\n\n    fetchSectionData();\n    return () => {\n      fetching = true;\n      unmounted = true;\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [empId]);\n\n  async function fetchSection() {\n    console.log(secId);\n    if (sectionGroup) //console.log(secId);\n      await axios.get(`/sections/sectionGroup/${sectionGroup}`).then(response => {\n        console.log(\"response>>\" + response.data.sectionName);\n        setValue(\"section\", response.data);\n        setSecId(response.data.id);\n        setSecName(response.data.sectionName);\n      }).catch(error => {\n        //console.log(error);\n        //console.log(error.response.status);\n        //console.log(error.response.headers);\n        if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n      });\n  }\n\n  useEffect(() => {\n    let fetching = false;\n    let unmounted = false;\n    console.log(\"daktype\");\n\n    async function fetchDakTypeData() {\n      console.log(secId);\n      if (!fetching && sectionGroup) //console.log(secId);\n        await axios.get(`/dakTypes/${sectionGroup}/sectionGroup`).then(response => {\n          console.log(\"response>>\" + response.data);\n          setDakTypeData(response.data);\n\n          if (!unmounted) {\n            setDakTypeItems(response.data.map(({\n              id,\n              description\n            }) => ({\n              id: id,\n              label: description,\n              value: id\n            })));\n            setLoading(false);\n          }\n        }).catch(error => {\n          //console.log(error);\n          //console.log(error.response.status);\n          //console.log(error.response.headers);\n          if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n        });\n    }\n\n    fetchDakTypeData();\n    return () => {\n      fetching = true;\n      unmounted = true;\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [sectionGroup]);\n\n  async function fetchSectionList() {\n    if (sectionGroup.length > 2) {\n      await axios.get(`/sections/sectionList/${sectionGroup}`).then(response => {\n        setSectionList(response.data);\n      }).catch(error => {\n        //console.log(error);\n        //console.log(error.response.status);\n        //console.log(error.response.headers);\n        if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n      });\n    }\n  }\n\n  const onSubmit = (data, event) => {\n    event.preventDefault();\n    console.log(data);\n    console.log(\"data id--------------\" + data.id);\n\n    if (data.id) {\n      axios.put(\"/daks/\" + data.id, data).then(response => {}).catch(error => {\n        //console.log(error.response.data);\n        console.log(\"response--------\" + error.response.status);\n        if (error.response.status === 200) history.push(\"/daks\"); //console.log(error.response.headers);\n\n        setServerErrors(error.response.data);\n      });\n    } else {\n      console.log(\"&&&&&&&&&&&&&&&&&&&&:\" + data);\n      axios.post(\"/daks\", data).then(response => {\n        console.log(\"reponse status--------------\" + response.status + \"--\" + response.statusText + \"----\" + \"-h--\" + response.headers + \"--\" + response.data);\n\n        if (response.status === 201) {\n          setDakMsg(response.data); //history.push(\"/daks/view/\"+response.data);\n          //history.replace({pathname:'/daks/new/'+response.data});\n\n          setValue(\"referenceNo\", \"\");\n          setValue(\"referenceDate\", \"\");\n          setValue(\"section\", \"\");\n          setSecName(\"\");\n          setSecId();\n          setValue(\"employee\", \"\");\n          setValue(\"entity.employee\", \"\");\n          setValue(\"amount\", \"\");\n          setValue(\"subject\", \"\");\n          setDakTypeItem(\"\");\n        }\n      }).catch(error => {\n        //console.log(error.response.data);\n        // console.log(\"response--------\" + error.response.status);\n        //if(error.response.status!==201)\n        //history.push(\"/daks\");\n        //console.log(error.response.headers);\n        if (error.response) setServerErrors(error.response.data);else setServerErrors(error);\n      });\n    } //history.push(\"/daks\");\n\n  };\n\n  const onError = (errors, e) => console.log(errors, e); //All foreign keys.\n  // XXXXXX Add search fields and adjust the values as necessary\n\n\n  const parentData = {\n    unit: {\n      title: \"Unit\",\n      url: \"units\",\n      searchList: [\"unitCode\", \"unitName\"],\n      //XXXXXXXXX Add search fields\n      fkEntity: \"unit\",\n      preload: false //XXXXXX Set this to true for small tables like designations\n\n    },\n    section: {\n      title: \"Section\",\n      url: \"sections\",\n      searchList: [\"sectionName\"],\n      //XXXXXXXXX Add search fields\n      fkEntity: \"section\",\n      preload: false //XXXXXX Set this to true for small tables like designations\n\n    },\n    employee: {\n      title: \"CDA A/c No\",\n      url: \"employees\",\n      searchList: [\"cdaoNo\", \"officerName\", \"icNo\"],\n      //XXXXXXXXX Add search fields\n      fkEntity: \"employee\",\n      preload: false //XXXXXX Set this to true for small tables like designations\n\n    },\n    vendor: {\n      title: \"Vendor Name\",\n      url: \"vendors\",\n      searchList: [\"vendorName\"],\n      //XXXXXXXXX Add search fields\n      fkEntity: \"vendor\",\n      preload: false //XXXXXX Set this to true for small tables like designations\n\n    },\n    dakType: {\n      title: \"DakType\",\n      url: \"dakTypes\",\n      searchList: [\"description\"],\n      //XXXXXXXXX Add search fields\n      fkEntity: \"dakType\",\n      preload: false //XXXXXX Set this to true for small tables like designations\n\n    }\n  }; //Callback for child components (Foreign Keys)\n\n  const callback = childData => {\n    setEntity(prev => ({ ...prev,\n      [childData.fk]: childData.entity\n    }));\n    setValue(childData.fk, childData.entity); //console.log(errors);\n    // console.log(childData.fk+\"--\"+childData.entity.id);\n\n    if (childData.fk === \"section\") setSecId(childData.entity.id);\n    if (childData.fk === \"employee\") setEmpId(childData.entity.id);\n    clearErrors(childData.fk);\n  };\n\n  const errorCallback = err => {\n    //console.log(err);\n    setServerErrors(err);\n  };\n\n  const handleButtonClick = e => {\n    history.push(\"/daks\");\n  };\n\n  const handleGroupChange = e => {\n    setSectionGroup(sectionGroupList[e.target.selectedIndex]); //console.log(sectionGroupList[e.target.selectedIndex]);\n  };\n\n  const handleSectionChange = e => {\n    console.log(sectionList[e.target.selectedIndex]); //setValue(\"section\",sectionList[e.target.selectedIndex]);\n\n    setSectionSelected(sectionList[e.target.selectedIndex]); //  setValue(\"section\",e.target.selectedIndex);\n    //console.log(sectionGroupList[e.target.selectedIndex]);\n  };\n\n  const handleInputChange = e => {\n    console.log(e.target.value); //\tconsole.log(\"handle input change\");\n  };\n\n  const handleDakTypeChange = e => {\n    console.log(\">>>\" + e.target.value);\n    console.log(e.target.selectedIndex - 1);\n    console.log(dakTypeData[e.target.selectedIndex - 1].description);\n    setDakTypeDesc(dakTypeData[e.target.selectedIndex - 1].description);\n    setDakTypeItem(e.target.value);\n    setValue(\"dakType\", dakTypeData[e.target.selectedIndex - 1]);\n\n    if (dakTypeData[e.target.selectedIndex - 1].description === \"Commission FormA\" || dakTypeData[e.target.selectedIndex - 1].description.includes(\"Goi Letter\")) {\n      setEmpId(999);\n      fetchSection();\n    }\n\n    if (dakTypeData[e.target.selectedIndex - 1].description === \"Letters\") setDakTypeLetters(true);\n    if (dakTypeData[e.target.selectedIndex - 1].description.includes(\"Konkan\")) fetchSection();\n\n    if (dakTypeData[e.target.selectedIndex - 1].description === \"Lic Mro\") {\n      setLic(true);\n      fetchSection();\n    }\n\n    if (dakTypeData[e.target.selectedIndex - 1].description.includes(\"Exten\") || dakTypeData[e.target.selectedIndex - 1].description.includes(\"Stipend\")) fetchSection();\n\n    if (dakTypeData[e.target.selectedIndex - 1].description.includes(\"Transfer Entry\")) {\n      fetchSection();\n      setTe(true);\n    } //console.log(\"entit---\" + entity.description + \"--\" + entity.dakType + \" \" + entity.description + \"--\" + entity.id);\n\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-xl mx-auto \",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full w-3/4  mx-auto \",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(onSubmit, onError),\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [id === \"new\" ? \"Add\" : \"Edit\", \" Dak\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-red-500\",\n          children: serverErrors\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-blue-500\",\n          children: dakMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-2 gap-0 \",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Section Group\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-control py-0\",\n              disabled: loading,\n              value: sectionGroup,\n              onChange: handleGroupChange,\n              children: sectionGroupList.map((item, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: item.toString(),\n                children: [\" \", item.toString(), \" \"]\n              }, item, true, {\n                fileName: _jsxFileName,\n                lineNumber: 501,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Dak Types\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 510,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-control py-0\",\n              disabled: loading,\n              value: dakTypeItem,\n              onChange: handleDakTypeChange,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: 0,\n                children: \"---select---\"\n              }, 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 17\n              }, this), dakTypeItems.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: item.value,\n                children: [\" \", item.label, \" \"]\n              }, item.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 511,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 13\n          }, this), lic === false && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(LiveSearch, {\n              name: \"employee\",\n              onChange: handleInputChange,\n              parentData: parentData.employee,\n              parentCallback: callback,\n              fkEntity: entity.employee,\n              errCallback: errorCallback\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-red-500 \",\n              children: (_errors$employee = errors.employee) === null || _errors$employee === void 0 ? void 0 : _errors$employee.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 15\n          }, this), te === false && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Section\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 544,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"section\",\n              value: secName,\n              readOnly: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-red-500\",\n              children: (_errors$referenceNo = errors.referenceNo) === null || _errors$referenceNo === void 0 ? void 0 : _errors$referenceNo.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 543,\n            columnNumber: 13\n          }, this), te === true && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(LiveSearch, {\n              name: \"section\",\n              onChange: handleInputChange,\n              parentData: parentData.section,\n              parentCallback: callback,\n              fkEntity: entity.section,\n              errCallback: errorCallback\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 552,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-red-500 \",\n              children: (_errors$section = errors.section) === null || _errors$section === void 0 ? void 0 : _errors$section.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 560,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 551,\n            columnNumber: 14\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Task No\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 566,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"taskInfo\",\n              value: taskInfo,\n              readOnly: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Reference No\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 571,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"referenceNo\",\n              ...register(\"referenceNo\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-red-500\",\n              children: (_errors$referenceNo2 = errors.referenceNo) === null || _errors$referenceNo2 === void 0 ? void 0 : _errors$referenceNo2.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 577,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Reference Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"referenceDate\",\n              ...register(\"referenceDate\"),\n              className: \"form-control py-0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 582,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-red-500\",\n              children: (_errors$referenceDate = errors.referenceDate) === null || _errors$referenceDate === void 0 ? void 0 : _errors$referenceDate.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 588,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 580,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Amount\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 594,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"amount\",\n              ...register(\"amount\"),\n              className: \"form-control py-0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 595,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-red-500\",\n              children: (_errors$amount = errors.amount) === null || _errors$amount === void 0 ? void 0 : _errors$amount.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 601,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 13\n          }, this), [\"TADA Final Claim\"].includes(dakTypeDesc) ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              ...register(\"courseBill\"),\n              className: \"w-4 h-4 mt-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"inline ml-1\",\n              children: \"Course Bill\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 604,\n            columnNumber: 15\n          }, this) : \"\", dakTypeLetters && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Subject\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 617,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              type: \"text\",\n              name: \"subject\",\n              ...register(\"subject\"),\n              className: \"form-control py-0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 618,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-red-500\",\n              children: (_errors$subject = errors.subject) === null || _errors$subject === void 0 ? void 0 : _errors$subject.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 624,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 616,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-2 gap-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-2\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 630,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 629,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-2\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleButtonClick,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 634,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 633,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 628,\n          columnNumber: 14\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 484,\n    columnNumber: 5\n  }, this);\n};\n\nexport default withRouter(DakEdit);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/DakEdit.js"],"names":["useState","useEffect","useRef","withRouter","useParams","useHistory","useForm","axios","yup","yupResolver","LiveSearch","DatePicker","addDays","Tabs","Tab","schema","object","dakType","required","referenceNo","string","test","val","length","referenceDate","DakEdit","register","handleSubmit","setValue","formState","errors","clearErrors","resolver","id","history","serverErrors","setServerErrors","entity","setEntity","state","setState","dakMsg","setDakMsg","secId","setSecId","dakTypeData","setDakTypeData","dakTypeItems","setDakTypeItems","dakTypeItem","setDakTypeItem","loading","setLoading","sectionGroup","setSectionGroup","sectionGroupList","setSectionGroupList","sectionGroupItems","setSectionGroupItems","empId","setEmpId","secName","setSecName","key","setKey","dakTypeDesc","setDakTypeDesc","taskInfo","setTaskInfo","dakTypeLetters","setDakTypeLetters","vendorId","setVendorId","lic","setLic","sectionList","setSectionList","sectionListItems","setSectionListItems","sectionSelected","setSectionSelected","te","setTe","isCancelled","console","log","fetchData","record","get","then","response","data","catch","error","Error","fields","sectionName","forEach","field","prev","fetching","unmounted","fetchSectionGroup","fetchSectionData","fetchSection","fetchDakTypeData","map","description","label","value","fetchSectionList","onSubmit","event","preventDefault","put","status","push","post","statusText","headers","onError","e","parentData","unit","title","url","searchList","fkEntity","preload","section","employee","vendor","callback","childData","fk","errorCallback","err","handleButtonClick","handleGroupChange","target","selectedIndex","handleSectionChange","handleInputChange","handleDakTypeChange","includes","item","index","toString","message","amount","subject"],"mappings":"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","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By :\n */\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport * as yup from \"yup\";\n\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport LiveSearch from \"../utils/LiveSearch\";\n\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport addDays from \"date-fns/addDays\";\n\nimport Tabs from \"react-bootstrap/Tabs\";\nimport Tab from \"react-bootstrap/Tab\";\n\nconst schema = yup.object({\n  dakType: yup.object().required(\"Required\"),\n  //section: yup.object().required(\"Required\"),\n  referenceNo: yup\n    .string()\n    .required(\"Required\")\n    .test(\"Length Ok\", \"Field length exceeding 25\", (val) => val.length <= 30),\n  referenceDate: yup.string().required(\"Required\"),\n});\n\nconst DakEdit = () => {\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    formState: { errors },\n    clearErrors,\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  let { id } = useParams();\n  //console.log(id);\n\n  let history = useHistory();\n\n  const [serverErrors, setServerErrors] = useState([]);\n  const [entity, setEntity] = useState({});\n  const [state, setState] = useState({});\n  const [dakMsg, setDakMsg] = useState(\"\");\n  const [secId, setSecId] = useState();\n  const [dakTypeData, setDakTypeData] = useState([]);\n  const [dakTypeItems, setDakTypeItems] = useState([]);\n  const [dakTypeItem, setDakTypeItem] = useState();\n  const [loading, setLoading] = useState(true);\n  const [sectionGroup, setSectionGroup] = useState(\"\");\n  const [sectionGroupList, setSectionGroupList] = useState([]);\n  const [sectionGroupItems, setSectionGroupItems] = useState([]);\n  const [empId, setEmpId] = useState(0);\n  const [secName, setSecName] = useState(\"\");\n  const [key, setKey] = useState(\"Page1\");\n  const [dakTypeDesc, setDakTypeDesc] = useState(\"\");\n  const [taskInfo, setTaskInfo] = useState(\"\");\n  const [dakTypeLetters, setDakTypeLetters] = useState(false);\n  const [vendorId, setVendorId] = useState(\"\");\n  const [lic, setLic] = useState(false);\n  const [sectionList,setSectionList]=useState([]);\n  const [sectionListItems, setSectionListItems] = useState([]);\n  const [sectionSelected,setSectionSelected]=useState('')\n  const [te,setTe]=useState(false);\n\n  useEffect(() => {\n    let isCancelled = false;\n    console.log(id);\n    if (id !== \"new\") {\n      async function fetchData() {\n        let record = \"\";\n        await axios.get(\"/daks/\" + id)\n          .then((response) => {\n            record = response.data;\n          })\n          .catch((error) => {\n            //console.log(error);\n            //console.log(error.response.status);\n            //console.log(error.response.headers);\n            if (error.response) setServerErrors(error.response.data.error);\n            else setServerErrors(error.Error);\n          });\n\n        const fields = [\n          \"id\",\n          \"dakidNo\",\n          \"dakYear\",\n          \"dakType\",\n          \"unit\",\n          \"section\",\n          \"employee\",\n          \"cdaoNo\",\n          \"checkDigit\",\n          \"amount\",\n          \"referenceNo\",\n          \"referenceDate\",\n          \"subject\",\n          \"billNo\",\n          \"billDate\",\n          \"disposalDate\",\n          \"disposalDate\",\n          \"disposalSummary\",\n          \"taskUsr\",\n          \"reason\",\n          \"aaoDate\",\n          \"auditorDate\",\n          \"aoDate\",\n          \"recordStatus\",\n          \"approved\",\n          \"vendor\",\n          \"courseBill\",\n        ];\n        setSectionGroup(record[\"section\"].sectionGroup);\n        setSecName(record[\"section\"].sectionName);\n        setSecId(record[\"section\"].id);\n        fields.forEach((field) => setValue(field, record[field]));\n        if (!isCancelled) {\n          setEntity(record);\n          setState((prev) => ({ ...prev, state: record }));\n        }\n      }\n\n      fetchData();\n      return () => {\n        isCancelled = true;\n      };\n    }\n  }, [id, setValue]);\n\n  useEffect(() => {\n    let fetching = false;\n    let unmounted = false;\n\n    async function fetchSectionGroup() {\n      if (!fetching)\n        //console.log(secId);\n        await axios.get(`/sections/999/sectionGroup`)\n          .then((response) => {\n            console.log(\"response>>\" + response.data);\n            setSectionGroupList(response.data);\n            if (!unmounted) {\n              setLoading(false);\n            }\n          })\n          .catch((error) => {\n            //console.log(error);\n            //console.log(error.response.status);\n            //console.log(error.response.headers);\n            if (error.response) setServerErrors(error.response.data.error);\n            else setServerErrors(error.Error);\n          });\n    }\n    fetchSectionGroup();\n\n    return () => {\n      fetching = true;\n      unmounted = true;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  useEffect(() => {\n    let fetching = false;\n    let unmounted = false;\n    console.log(\"daktype\");\n    async function fetchSectionData() {\n      console.log(empId);\n      if (!fetching && empId > 0 && sectionGroup.length > 2) {\n        console.log(\"fetching section \" + empId + \"--\" + sectionGroup);\n        await axios.get(`/employees/${empId}/sections/${sectionGroup}`)\n          .then((response) => {\n            console.log(\n              \"response>> section>>\" +\n                response.data[0].sectionName +\n                \"--\" +\n                response.data[1] +\n                \"--\" +\n                response.data[2]\n            );\n            setValue(\"section\", response.data[0]);\n\n            setSecId(response.data[0].id);\n            setSecName(response.data[0].sectionName);\n            setTaskInfo(\n              \"Task No-\" + response.data[1] + \" User \" + response.data[2]\n            );\n            //setDakTypeData(response.data);\n            if (!unmounted) {\n              setLoading(false);\n            }\n          })\n          .catch((error) => {\n            //console.log(error);\n            //console.log(error.response.status);\n            //console.log(error.response.headers);\n            if (error.response) setServerErrors(error.response.data.error);\n            else setServerErrors(error.Error);\n          });\n      }\n    }\n    fetchSectionData();\n\n    return () => {\n      fetching = true;\n      unmounted = true;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [empId]);\n\n  async function fetchSection() {\n    console.log(secId);\n    if (sectionGroup)\n      //console.log(secId);\n      await axios.get(`/sections/sectionGroup/${sectionGroup}`)\n        .then((response) => {\n          console.log(\"response>>\" + response.data.sectionName);\n          setValue(\"section\", response.data);\n\n          setSecId(response.data.id);\n          setSecName(response.data.sectionName);\n        })\n        .catch((error) => {\n          //console.log(error);\n          //console.log(error.response.status);\n          //console.log(error.response.headers);\n          if (error.response) setServerErrors(error.response.data.error);\n          else setServerErrors(error.Error);\n        });\n  }\n\n  useEffect(() => {\n    let fetching = false;\n    let unmounted = false;\n    console.log(\"daktype\");\n    async function fetchDakTypeData() {\n      console.log(secId);\n      if (!fetching && sectionGroup)\n        //console.log(secId);\n        await axios\n          .get(`/dakTypes/${sectionGroup}/sectionGroup`)\n          .then((response) => {\n            console.log(\"response>>\" + response.data);\n            setDakTypeData(response.data);\n            if (!unmounted) {\n              setDakTypeItems(\n                response.data.map(({ id, description }) => ({\n                  id: id,\n                  label: description,\n                  value: id,\n                }))\n              );\n              setLoading(false);\n            }\n          })\n          .catch((error) => {\n            //console.log(error);\n            //console.log(error.response.status);\n            //console.log(error.response.headers);\n            if (error.response) setServerErrors(error.response.data.error);\n            else setServerErrors(error.Error);\n          });\n    }\n    fetchDakTypeData();\n\n    return () => {\n      fetching = true;\n      unmounted = true;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [sectionGroup]);\n  \n   \n     \n    async function fetchSectionList() {\n       if (sectionGroup.length > 2) {\n         await axios.get(`/sections/sectionList/${sectionGroup}`)\n          .then((response) => {\n            setSectionList(response.data);\n            \n            \n          })\n          .catch((error) => {\n            //console.log(error);\n            //console.log(error.response.status);\n            //console.log(error.response.headers);\n            if (error.response) setServerErrors(error.response.data.error);\n            else setServerErrors(error.Error);\n          });\n      }\n    }\n    \n     \n\n\n  const onSubmit = (data, event) => {\n    event.preventDefault();\n    console.log(data);\n    console.log(\"data id--------------\" + data.id);\n    if (data.id) {\n      axios\n        .put(\"/daks/\" + data.id, data)\n        .then((response) => {})\n        .catch((error) => {\n          //console.log(error.response.data);\n          console.log(\"response--------\" + error.response.status);\n          if (error.response.status === 200) history.push(\"/daks\");\n          //console.log(error.response.headers);\n          setServerErrors(error.response.data);\n        });\n    } else {\n\tconsole.log(\"&&&&&&&&&&&&&&&&&&&&:\"+data);\n      axios.post(\"/daks\", data)\n        .then((response) => {\n          console.log(\n            \"reponse status--------------\" +\n              response.status +\n              \"--\" +\n              response.statusText +\n              \"----\" +\n              \"-h--\" +\n              response.headers +\n              \"--\" +\n              response.data\n          );\n          if (response.status === 201) {\n            setDakMsg(response.data);\n            //history.push(\"/daks/view/\"+response.data);\n            //history.replace({pathname:'/daks/new/'+response.data});\n            setValue(\"referenceNo\", \"\");\n            setValue(\"referenceDate\", \"\");\n            setValue(\"section\", \"\");\n            setSecName(\"\");\n            setSecId();\n            setValue(\"employee\", \"\");\n            setValue(\"entity.employee\", \"\");\n            setValue(\"amount\", \"\");\n            setValue(\"subject\", \"\");\n            setDakTypeItem(\"\");\n          }\n        })\n        .catch((error) => {\n          //console.log(error.response.data);\n         // console.log(\"response--------\" + error.response.status);\n          //if(error.response.status!==201)\n          //history.push(\"/daks\");\n          //console.log(error.response.headers);\n          if (error.response) setServerErrors(error.response.data);\n          else setServerErrors(error);\n        });\n    }\n\n    //history.push(\"/daks\");\n  };\n\n  const onError = (errors, e) => console.log(errors, e);\n\n  //All foreign keys.\n  // XXXXXX Add search fields and adjust the values as necessary\n  const parentData = {\n    unit: {\n      title: \"Unit\",\n      url: \"units\",\n      searchList: [\"unitCode\", \"unitName\"], //XXXXXXXXX Add search fields\n      fkEntity: \"unit\",\n      preload: false, //XXXXXX Set this to true for small tables like designations\n    },\n    section: {\n      title: \"Section\",\n      url: \"sections\",\n      searchList: [\"sectionName\"], //XXXXXXXXX Add search fields\n      fkEntity: \"section\",\n      preload: false, //XXXXXX Set this to true for small tables like designations\n    },\n    employee: {\n      title: \"CDA A/c No\",\n      url: \"employees\",\n      searchList: [\"cdaoNo\", \"officerName\",\"icNo\"], //XXXXXXXXX Add search fields\n      fkEntity: \"employee\",\n      preload: false, //XXXXXX Set this to true for small tables like designations\n    },\n\n    vendor: {\n      title: \"Vendor Name\",\n      url: \"vendors\",\n      searchList: [\"vendorName\"], //XXXXXXXXX Add search fields\n      fkEntity: \"vendor\",\n      preload: false, //XXXXXX Set this to true for small tables like designations\n    },\n\n    dakType: {\n      title: \"DakType\",\n      url: \"dakTypes\",\n      searchList: [\"description\"], //XXXXXXXXX Add search fields\n      fkEntity: \"dakType\",\n      preload: false, //XXXXXX Set this to true for small tables like designations\n    },\n  };\n\n  //Callback for child components (Foreign Keys)\n\n  const callback = (childData) => {\n    setEntity((prev) => ({ ...prev, [childData.fk]: childData.entity }));\n    setValue(childData.fk, childData.entity);\n    //console.log(errors);\n    // console.log(childData.fk+\"--\"+childData.entity.id);\n    if (childData.fk === \"section\") setSecId(childData.entity.id);\n    if (childData.fk === \"employee\") setEmpId(childData.entity.id);\n\n    clearErrors(childData.fk);\n  };\n\n  const errorCallback = (err) => {\n    //console.log(err);\n    setServerErrors(err);\n  };\n\n  const handleButtonClick = (e) => {\n    history.push(\"/daks\");\n  };\n\n  const handleGroupChange = (e) => {\n    setSectionGroup(sectionGroupList[e.target.selectedIndex]);\n    //console.log(sectionGroupList[e.target.selectedIndex]);\n  };\n  \n   const handleSectionChange = (e) => {\n\tconsole.log(sectionList[e.target.selectedIndex]);\n\t//setValue(\"section\",sectionList[e.target.selectedIndex]);\n    setSectionSelected(sectionList[e.target.selectedIndex]);\n    \n  //  setValue(\"section\",e.target.selectedIndex);\n    //console.log(sectionGroupList[e.target.selectedIndex]);\n  };\n\n  const handleInputChange = (e) => {\n    console.log(e.target.value);\n    //\tconsole.log(\"handle input change\");\n  };\n  const handleDakTypeChange = (e) => {\n    console.log(\">>>\" + e.target.value);\n    console.log(e.target.selectedIndex - 1);\n    console.log(dakTypeData[e.target.selectedIndex - 1].description);\n    setDakTypeDesc(dakTypeData[e.target.selectedIndex - 1].description);\n    setDakTypeItem(e.target.value);\n    setValue(\"dakType\", dakTypeData[e.target.selectedIndex - 1]);\n    if (\n      dakTypeData[e.target.selectedIndex - 1].description ===\n        \"Commission FormA\" ||\n      dakTypeData[e.target.selectedIndex - 1].description.includes(\"Goi Letter\")\n    ){\n      setEmpId(999);\n      fetchSection();\n      }\n    if (dakTypeData[e.target.selectedIndex - 1].description === \"Letters\")\n      setDakTypeLetters(true);\n    if (dakTypeData[e.target.selectedIndex - 1].description.includes(\"Konkan\"))\n      fetchSection();\n    if (dakTypeData[e.target.selectedIndex - 1].description === \"Lic Mro\") {\n      setLic(true);\n      fetchSection();\n    }\n    if (dakTypeData[e.target.selectedIndex - 1].description.includes(\"Exten\") ||  dakTypeData[e.target.selectedIndex - 1].description.includes(\"Stipend\"))\n      fetchSection();\n      \n      if (dakTypeData[e.target.selectedIndex - 1].description.includes(\"Transfer Entry\")){\n      fetchSection(); \n      setTe(true);\n      }\n\n    //console.log(\"entit---\" + entity.description + \"--\" + entity.dakType + \" \" + entity.description + \"--\" + entity.id);\n  };\n\n  return (\n    <div className=\"max-w-xl mx-auto \">\n      <div className=\"w-full w-3/4  mx-auto \">\n        <form onSubmit={handleSubmit(onSubmit, onError)}>\n          <h1>{id === \"new\" ? \"Add\" : \"Edit\"} Dak</h1>\n          <div className=\"text-red-500\">{serverErrors}</div>\n          <div className=\"text-blue-500\">{dakMsg}</div>\n\n          <div className=\"grid grid-cols-2 gap-0 \">\n            <div>\n              <b>Section Group</b>\n              <select\n                className=\"form-control py-0\"\n                disabled={loading}\n                value={sectionGroup}\n                onChange={handleGroupChange}\n              >\n                {sectionGroupList.map((item, index) => (\n                  <option key={item} value={item.toString()}>\n                    {\" \"}\n                    {item.toString()}{\" \"}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <b>Dak Types</b>\n              <select\n                className=\"form-control py-0\"\n                disabled={loading}\n                value={dakTypeItem}\n                onChange={handleDakTypeChange}\n              >\n                <option key={0} value={0}>\n                  ---select---\n                </option>\n                {dakTypeItems.map((item) => (\n                  <option key={item.id} value={item.value}>\n                    {\" \"}\n                    {item.label}{\" \"}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {lic === false && (\n              <div>\n                <LiveSearch\n                  name=\"employee\"\n                  onChange={handleInputChange}\n                  parentData={parentData.employee}\n                  parentCallback={callback}\n                  fkEntity={entity.employee}\n                  errCallback={errorCallback}\n                />\n                <div className=\"text-red-500 \">{errors.employee?.message}</div>\n              </div>\n            )}\n\t\t\t{te===false &&\n            <div>\n              <label>Section</label>\n              <input type=\"text\" name=\"section\" value={secName} readOnly />\n              <div className=\"text-red-500\">{errors.referenceNo?.message}</div>\n            </div>\n            }\n            \n            {te===true &&\n             <div>\n                <LiveSearch\n                  name=\"section\"\n                  onChange={handleInputChange}\n                  parentData={parentData.section}\n                  parentCallback={callback}\n                  fkEntity={entity.section}\n                  errCallback={errorCallback}\n                />\n                <div className=\"text-red-500 \">{errors.section?.message}</div>\n              </div>\n            \n            \n            }\n            <div>\n              <label>Task No</label>\n              <input type=\"text\" name=\"taskInfo\" value={taskInfo} readOnly />\n            </div>\n\n            <div>\n              <label>Reference No</label>\n              <input\n                type=\"text\"\n                name=\"referenceNo\"\n                {...register(\"referenceNo\")}\n              />\n              <div className=\"text-red-500\">{errors.referenceNo?.message}</div>\n            </div>\n\n            <div>\n              <label>Reference Date</label>\n              <input\n                type=\"date\"\n                name=\"referenceDate\"\n                {...register(\"referenceDate\")}\n                className=\"form-control py-0\"\n              />\n              <div className=\"text-red-500\">\n                {errors.referenceDate?.message}\n              </div>\n            </div>\n\n            <div>\n              <label>Amount</label>\n              <input\n                type=\"text\"\n                name=\"amount\"\n                {...register(\"amount\")}\n                className=\"form-control py-0\"\n              />\n              <div className=\"text-red-500\">{errors.amount?.message}</div>\n            </div>\n             {[\"TADA Final Claim\"].includes(dakTypeDesc) ? (\n              <div>\n                <input\n                  type=\"checkbox\"\n                  {...register(\"courseBill\")}\n                  className=\"w-4 h-4 mt-2\"\n                ></input>\n                <label className=\"inline ml-1\">Course Bill</label>\n              </div>\n            ) : (\n              \"\"\n            )}\n            {dakTypeLetters && (\n              <div>\n                <label>Subject</label>\n                <textarea\n                  type=\"text\"\n                  name=\"subject\"\n                  {...register(\"subject\")}\n                  className=\"form-control py-0\"\n                />\n                <div className=\"text-red-500\">{errors.subject?.message}</div>\n              </div>\n            )}\n             </div>\n             <div className=\"grid grid-cols-2 gap-0\">\n            <div className=\"px-2\">\n              <button type=\"submit\">Save</button>\n            </div>\n\n            <div className=\"px-2\">\n              <button type=\"button\" onClick={handleButtonClick}>\n                Cancel\n              </button>\n           \n          </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(DakEdit);\n"]},"metadata":{},"sourceType":"module"}