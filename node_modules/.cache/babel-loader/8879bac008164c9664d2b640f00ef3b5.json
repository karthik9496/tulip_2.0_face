{"ast":null,"code":"import _defineProperty from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By : \n */import{useState,useEffect}from\"react\";import{withRouter,useParams,useHistory}from\"react-router-dom\";import{useForm}from\"react-hook-form\";import axios from'axios';import*as yup from\"yup\";import{yupResolver}from'@hookform/resolvers/yup';import LiveSearch from'../utils/LiveSearch';//import DatePicker  from 'react-datepicker';\n//import \"react-datepicker/dist/react-datepicker.css\";\n//import addDays from 'date-fns/addDays'\nimport Tabs from'react-bootstrap/Tabs';import Tab from'react-bootstrap/Tab';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var schema=yup.object({});var LicDemandTransactionEdit=function LicDemandTransactionEdit(){var _errors$employee,_errors$policyNo,_errors$premiumAmount,_errors$gstOnPremiumA;var _useForm=useForm({resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,errors=_useForm.formState.errors,clearErrors=_useForm.clearErrors;var _useParams=useParams(),id=_useParams.id;var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),serverErrors=_useState2[0],setServerErrors=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),entity=_useState4[0],setEntity=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),state=_useState6[0],setState=_useState6[1];var _useState7=useState('page1'),_useState8=_slicedToArray(_useState7,2),key=_useState8[0],setKey=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),dakId=_useState10[0],setDakId=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),mesg=_useState12[0],setMesg=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),me=_useState14[0],setMe=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),dakidNo=_useState16[0],setDakidNo=_useState16[1];useEffect(function(){var isCancelled=false;console.log(id);if(id!=='new'){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var record;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:record='';_context.next=3;return axios.get('/licDemandTransactions/'+id).then(function(response){record=response.data;var fields=['id','dak','employee','cdaoNo','checkDigit','policyNo','premiumAmount','premiumDueMe','monthEnding','auditor','aao','ao','auditorDate','aaoDate','aoDate','approved','gstOnPremiumAmount','recordStatus','reason','remarks'];setDakidNo(record.dak.dakidNo);console.log(\">>>>---:\"+dakidNo);fields.forEach(function(field){return setValue(field,record[field]);});}).catch(function(error){//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 3:if(!isCancelled){setEntity(record);setState(function(prev){return _objectSpread(_objectSpread({},prev),{},{state:record});});}case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();return function(){isCancelled=true;};}},[]);useEffect(function(){var fetching=false;var unmounted=false;function fetchMe(){return _fetchMe.apply(this,arguments);}function _fetchMe(){_fetchMe=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(fetching){_context2.next=3;break;}_context2.next=3;return axios.get(\"/licDemandTransactions/licDemand/getCurrentMe\").then(function(response){setMe(response.data);}).catch(function(error){//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchMe.apply(this,arguments);}fetchMe();return function(){fetching=true;unmounted=true;};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);var onSubmit=function onSubmit(data,event){event.preventDefault();console.log(data);if(data.id){axios.put(\"/licDemandTransactions/\"+data.id,data).then(function(response){setMesg(response.data);}).catch(function(error){console.log(error);//\tconsole.log(error.response.status);\n//\tconsole.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});}};var onError=function onError(errors,e){return console.log(errors,e);};//All foreign keys. \n// XXXXXX Add search fields and adjust the values as necessary\nvar parentData={dak:{title:\"Dak\",url:\"daks\",searchList:['id'],//XXXXXXXXX Add search fields\nfkEntity:\"dak\",preload:false//XXXXXX Set this to true for small tables like designations\n},employee:{title:\"Employee\",url:\"employees/all/effective\",searchList:['cdaoNo','checkDigit','officerName'],//XXXXXXXXX Add search fields\nfkEntity:\"employee\",preload:false//XXXXXX Set this to true for small tables like designations\n}};//Callback for child components (Foreign Keys)\nvar callback=function callback(childData){//console.log(\"Parent Callback\");\nsetEntity(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},childData.fk,childData.entity));});setValue(childData.fk,childData.entity);//console.log(errors);\nconsole.log(\">>>\"+childData.fk);clearErrors(childData.fk);};var errorCallback=function errorCallback(err){//console.log(err);\nsetServerErrors(err);};var handleInputChange=function handleInputChange(e){//console.log(e.target.value);\n};var handleButtonClick=function handleButtonClick(e){history.push(\"/licDemandTransactions\");};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 text-gray-900\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit,onError),children:[/*#__PURE__*/_jsxs(\"h1\",{children:[id==='new'?'Add':'Edit',\" Lic Demand Transaction \"]}),/*#__PURE__*/_jsx(\"h2\",{children:mesg}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:serverErrors}),/*#__PURE__*/_jsx(Tabs,{id:\"LicDemandTransactionEdit\",activeKey:key,onSelect:function onSelect(k){return setKey(k);},className:\"mb-3\",children:/*#__PURE__*/_jsx(Tab,{eventKey:\"page1\",title:\"Lic Demand\",className:\"h-120\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-0\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Month\"}),me]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\" Dak Id\"}),dakidNo]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LiveSearch,{name:\"employee\",onChange:handleInputChange,parentData:parentData.employee,parentCallback:callback,fkEntity:entity.employee,errCallback:errorCallback}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 \",children:(_errors$employee=errors.employee)===null||_errors$employee===void 0?void 0:_errors$employee.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Policy Number\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"policyNo\"},register(\"policyNo\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$policyNo=errors.policyNo)===null||_errors$policyNo===void 0?void 0:_errors$policyNo.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Premium Amount\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"premiumAmount\"},register(\"premiumAmount\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$premiumAmount=errors.premiumAmount)===null||_errors$premiumAmount===void 0?void 0:_errors$premiumAmount.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Gst On Premium Amount\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"gstOnPremiumAmount\"},register(\"gstOnPremiumAmount\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$gstOnPremiumA=errors.gstOnPremiumAmount)===null||_errors$gstOnPremiumA===void 0?void 0:_errors$gstOnPremiumA.message})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-2\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-2\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleButtonClick,children:\"Cancel\"})})]})})})]})})});};export default withRouter(LicDemandTransactionEdit);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/LicDemandTransactionEdit.js"],"names":["useState","useEffect","withRouter","useParams","useHistory","useForm","axios","yup","yupResolver","LiveSearch","Tabs","Tab","schema","object","LicDemandTransactionEdit","resolver","register","handleSubmit","setValue","errors","formState","clearErrors","id","history","serverErrors","setServerErrors","entity","setEntity","state","setState","key","setKey","dakId","setDakId","mesg","setMesg","me","setMe","dakidNo","setDakidNo","isCancelled","console","log","fetchData","record","get","then","response","data","fields","dak","forEach","field","catch","error","Error","prev","fetching","unmounted","fetchMe","onSubmit","event","preventDefault","put","onError","e","parentData","title","url","searchList","fkEntity","preload","employee","callback","childData","fk","errorCallback","err","handleInputChange","handleButtonClick","push","k","message","policyNo","premiumAmount","gstOnPremiumAmount"],"mappings":"gwBAAA;AACA;AACA;AACA;AACA;AACA;AACA,GAEA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,UAAT,CAAqBC,SAArB,CAAgCC,UAAhC,KAAkD,kBAAlD,CACA,OAASC,OAAT,KAAwB,iBAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,KAArB,CAEA,OAASC,WAAT,KAA4B,yBAA5B,CACA,MAAOC,CAAAA,UAAP,KAAuB,qBAAvB,CAEA;AACA;AACA;AAEA,MAAOC,CAAAA,IAAP,KAAiB,sBAAjB,CACA,MAAOC,CAAAA,GAAP,KAAgB,qBAAhB,C,wFAEA,GAAMC,CAAAA,MAAM,CAAGL,GAAG,CAACM,MAAJ,CAAW,EAAX,CAAf,CAOA,GAAMC,CAAAA,wBAAwB,CAAG,QAA3BA,CAAAA,wBAA2B,EAAM,gGAC2CT,OAAO,CAAC,CACxFU,QAAQ,CAAEP,WAAW,CAACI,MAAD,CADmE,CAAD,CADlD,CAC9BI,QAD8B,UAC9BA,QAD8B,CACpBC,YADoB,UACpBA,YADoB,CACNC,QADM,UACNA,QADM,CACiBC,MADjB,UACIC,SADJ,CACiBD,MADjB,CAC2BE,WAD3B,UAC2BA,WAD3B,gBAKzBlB,SAAS,EALgB,CAKhCmB,EALgC,YAKhCA,EALgC,CAOtC,GAAIC,CAAAA,OAAO,CAAGnB,UAAU,EAAxB,CAPsC,cAQEJ,QAAQ,CAAC,EAAD,CARV,wCAQ/BwB,YAR+B,eAQjBC,eARiB,8BASVzB,QAAQ,CAAC,EAAD,CATE,yCAS/B0B,MAT+B,eASvBC,SATuB,8BAUZ3B,QAAQ,CAAC,EAAD,CAVI,yCAU/B4B,KAV+B,eAUxBC,QAVwB,8BAWhB7B,QAAQ,CAAC,OAAD,CAXQ,yCAW/B8B,GAX+B,eAW1BC,MAX0B,8BAaZ/B,QAAQ,CAAC,CAAD,CAbI,0CAa/BgC,KAb+B,gBAaxBC,QAbwB,gCAejBjC,QAAQ,CAAC,EAAD,CAfS,2CAe/BkC,IAf+B,gBAe1BC,OAf0B,gCAgBrBnC,QAAQ,CAAC,EAAD,CAhBa,2CAgB/BoC,EAhB+B,gBAgB5BC,KAhB4B,gCAiBXrC,QAAQ,CAAC,EAAD,CAjBG,2CAiB/BsC,OAjB+B,gBAiBvBC,UAjBuB,gBAsBtCtC,SAAS,CAAC,UAAM,CACf,GAAIuC,CAAAA,WAAW,CAAG,KAAlB,CACAC,OAAO,CAACC,GAAR,CAAYpB,EAAZ,EACA,GAAIA,EAAE,GAAK,KAAX,CAAkB,SACFqB,CAAAA,SADE,qIACjB,8IACKC,MADL,CACc,EADd,uBAEOtC,CAAAA,KAAK,CAACuC,GAAN,CAAU,0BAA4BvB,EAAtC,EACJwB,IADI,CACC,SAACC,QAAD,CAAc,CACnBH,MAAM,CAAGG,QAAQ,CAACC,IAAlB,CACA,GAAMC,CAAAA,MAAM,CAAG,CACd,IADc,CACR,KADQ,CACD,UADC,CACW,QADX,CACqB,YADrB,CACmC,UADnC,CAEd,eAFc,CAEG,cAFH,CAEmB,aAFnB,CAEkC,SAFlC,CAE6C,KAF7C,CAEmD,IAFnD,CAGd,aAHc,CAGC,SAHD,CAGY,QAHZ,CAGsB,UAHtB,CAGkC,oBAHlC,CAIb,cAJa,CAIK,QAJL,CAIe,SAJf,CAAf,CAMAV,UAAU,CAACK,MAAM,CAACM,GAAP,CAAWZ,OAAZ,CAAV,CACAG,OAAO,CAACC,GAAR,CAAY,WAAYJ,OAAxB,EACAW,MAAM,CAACE,OAAP,CAAe,SAAAC,KAAK,QAAIlC,CAAAA,QAAQ,CAACkC,KAAD,CAAQR,MAAM,CAACQ,KAAD,CAAd,CAAZ,EAApB,EAGA,CAdI,EAgBJC,KAhBI,CAgBE,SAACC,KAAD,CAAW,CACjB;AACA;AACA;AACA,GAAIA,KAAK,CAACP,QAAV,CACCtB,eAAe,CAAC6B,KAAK,CAACP,QAAN,CAAeC,IAAf,CAAoBM,KAArB,CAAf,CADD,IAGC7B,CAAAA,eAAe,CAAC6B,KAAK,CAACC,KAAP,CAAf,CACD,CAxBI,CAFP,QA6BC,GAAI,CAACf,WAAL,CAAkB,CACjBb,SAAS,CAACiB,MAAD,CAAT,CACAf,QAAQ,CAAC,SAAA2B,IAAI,wCAAUA,IAAV,MAAgB5B,KAAK,CAAEgB,MAAvB,IAAL,CAAR,CACA,CAhCF,sDADiB,4CAoCjBD,SAAS,GACT,MAAO,WAAM,CACZH,WAAW,CAAG,IAAd,CACA,CAFD,CAGA,CAED,CA7CQ,CA6CN,EA7CM,CAAT,CA+CCvC,SAAS,CAAC,UAAM,CAChB,GAAIwD,CAAAA,QAAQ,CAAG,KAAf,CACA,GAAIC,CAAAA,SAAS,CAAG,KAAhB,CAFgB,QAGDC,CAAAA,OAHC,+HAGhB,2IAGOF,QAHP,iDAISnD,CAAAA,KAAK,CAACuC,GAAN,kDACJC,IADI,CACC,SAACC,QAAD,CAAc,CACnBV,KAAK,CAACU,QAAQ,CAACC,IAAV,CAAL,CAEA,CAJI,EAKJK,KALI,CAKE,SAACC,KAAD,CAAW,CACjB;AACA;AACA;AACA,GAAIA,KAAK,CAACP,QAAV,CACCtB,eAAe,CAAC6B,KAAK,CAACP,QAAN,CAAeC,IAAf,CAAoBM,KAArB,CAAf,CADD,IAGC7B,CAAAA,eAAe,CAAC6B,KAAK,CAACC,KAAP,CAAf,CACD,CAbI,CAJT,yDAHgB,0CAsBhBI,OAAO,GAEP,MAAO,WAAM,CAAEF,QAAQ,CAAG,IAAX,CAAiBC,SAAS,CAAG,IAAZ,CAAmB,CAAnD,CACA;AACA,CA1BS,CA0BP,EA1BO,CAAT,CA6BD,GAAME,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACZ,IAAD,CAAOa,KAAP,CAAiB,CACjCA,KAAK,CAACC,cAAN,GACArB,OAAO,CAACC,GAAR,CAAYM,IAAZ,EACA,GAAIA,IAAI,CAAC1B,EAAT,CAAa,CACZhB,KAAK,CAACyD,GAAN,CAAU,0BAA4Bf,IAAI,CAAC1B,EAA3C,CAA+C0B,IAA/C,EACEF,IADF,CACO,SAACC,QAAD,CAAc,CACnBZ,OAAO,CAACY,QAAQ,CAACC,IAAV,CAAP,CAEA,CAJF,EAKEK,KALF,CAKQ,SAACC,KAAD,CAAW,CACjBb,OAAO,CAACC,GAAR,CAAYY,KAAZ,EACA;AACA;AACA,GAAIA,KAAK,CAACP,QAAV,CACCtB,eAAe,CAAC6B,KAAK,CAACP,QAAN,CAAeC,IAAf,CAAoBM,KAArB,CAAf,CADD,IAGC7B,CAAAA,eAAe,CAAC6B,KAAK,CAACC,KAAP,CAAf,CACD,CAbF,EAcA,CAGD,CArBD,CAuBA,GAAMS,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAAC7C,MAAD,CAAS8C,CAAT,QAAexB,CAAAA,OAAO,CAACC,GAAR,CAAYvB,MAAZ,CAAoB8C,CAApB,CAAf,EAAhB,CAEA;AACA;AACA,GAAMC,CAAAA,UAAU,CAAG,CAElBhB,GAAG,CAAE,CACJiB,KAAK,CAAE,KADH,CAEJC,GAAG,CAAG,MAFF,CAGJC,UAAU,CAAG,CAAC,IAAD,CAHT,CAGiB;AACrBC,QAAQ,CAAE,KAJN,CAKJC,OAAO,CAAE,KAAO;AALZ,CAFa,CASjBC,QAAQ,CAAE,CACVL,KAAK,CAAE,UADG,CAEVC,GAAG,CAAE,yBAFK,CAGVC,UAAU,CAAE,CAAC,QAAD,CAAW,YAAX,CAAyB,aAAzB,CAHF,CAG2C;AACrDC,QAAQ,CAAE,UAJA,CAKVC,OAAO,CAAE,KAAO;AALN,CATO,CAAnB,CAmBA;AACA,GAAME,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,SAAD,CAAe,CAC/B;AACA/C,SAAS,CAAC,SAAA6B,IAAI,wCAAUA,IAAV,wBAAiBkB,SAAS,CAACC,EAA3B,CAAgCD,SAAS,CAAChD,MAA1C,IAAL,CAAT,CACAR,QAAQ,CAACwD,SAAS,CAACC,EAAX,CAAeD,SAAS,CAAChD,MAAzB,CAAR,CACA;AACAe,OAAO,CAACC,GAAR,CAAY,MAAMgC,SAAS,CAACC,EAA5B,EAEAtD,WAAW,CAACqD,SAAS,CAACC,EAAX,CAAX,CACA,CARD,CAUA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,GAAD,CAAS,CAC9B;AACApD,eAAe,CAACoD,GAAD,CAAf,CACA,CAHD,CAKA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACb,CAAD,CAAO,CAChC;AACA,CAFD,CAKA,GAAMc,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACd,CAAD,CAAM,CAC/B1C,OAAO,CAACyD,IAAR,CAAa,wBAAb,EACA,CAFD,CAIA,mBACC,YAAK,SAAS,CAAC,wCAAf,uBACC,YAAK,SAAS,CAAC,6CAAf,uBAEC,cAAM,QAAQ,CAAE/D,YAAY,CAAC2C,QAAD,CAAWI,OAAX,CAA5B,wBACC,sBAAM1C,EAAE,GAAK,KAAP,CAAe,KAAf,CAAuB,MAA7B,8BADD,cAEC,oBAAKY,IAAL,EAFD,cAGC,YAAK,SAAS,CAAC,cAAf,UAA+BV,YAA/B,EAHD,cAKC,KAAC,IAAD,EACC,EAAE,CAAC,0BADJ,CAEC,SAAS,CAAEM,GAFZ,CAGC,QAAQ,CAAE,kBAACmD,CAAD,QAAOlD,CAAAA,MAAM,CAACkD,CAAD,CAAb,EAHX,CAIC,SAAS,CAAC,MAJX,uBAMA,KAAC,GAAD,EAAK,QAAQ,CAAC,OAAd,CAAsB,KAAK,CAAC,YAA5B,CAAyC,SAAS,CAAC,OAAnD,uBACA,aAAK,SAAS,CAAC,wBAAf,wBAEE,oCACE,gCADF,CAEI7C,EAFJ,GAFF,cAOI,oCACF,kCADE,CAEDE,OAFC,GAPJ,cAWE,oCACA,aADA,cAEA,aAFA,GAXF,cAeE,oCACA,aADA,cAEA,aAFA,GAfF,cAoBE,oCACE,KAAC,UAAD,EAAY,IAAI,CAAC,UAAjB,CAA4B,QAAQ,CAAEwC,iBAAtC,CACC,UAAU,CAAEZ,UAAU,CAACM,QADxB,CACkC,cAAc,CAAEC,QADlD,CAEC,QAAQ,CAAE/C,MAAM,CAAC8C,QAFlB,CAE4B,WAAW,CAAEI,aAFzC,EADF,cAIE,YAAK,SAAS,CAAC,eAAf,4BAAgCzD,MAAM,CAACqD,QAAvC,2CAAgC,iBAAiBU,OAAjD,EAJF,GApBF,cA2BG,oCACC,wCADD,cAEC,0CAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,UAAxB,EAAuClE,QAAQ,CAAC,UAAD,CAA/C,MACC,SAAS,CAAC,mBADX,GAFD,cAKC,YAAK,SAAS,CAAC,cAAf,4BAA+BG,MAAM,CAACgE,QAAtC,2CAA+B,iBAAiBD,OAAhD,EALD,GA3BH,cAkCE,oCACE,yCADF,cAEE,0CAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,eAAxB,EAA4ClE,QAAQ,CAAC,eAAD,CAApD,MACC,SAAS,CAAC,mBADX,GAFF,cAKE,YAAK,SAAS,CAAC,cAAf,iCAA+BG,MAAM,CAACiE,aAAtC,gDAA+B,sBAAsBF,OAArD,EALF,GAlCF,cA0CG,oCACC,gDADD,cAEC,0CAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,oBAAxB,EAAiDlE,QAAQ,CAAC,oBAAD,CAAzD,MACC,SAAS,CAAC,mBADX,GAFD,cAKC,YAAK,SAAS,CAAC,cAAf,iCAA+BG,MAAM,CAACkE,kBAAtC,gDAA+B,sBAA2BH,OAA1D,EALD,GA1CH,cAmDA,YAAK,SAAS,CAAC,MAAf,uBACC,eAAQ,IAAI,CAAC,QAAb,kBADD,EAnDA,cAsDA,YAAK,SAAS,CAAC,MAAf,uBACA,eAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAEH,iBAA/B,oBADA,EAtDA,GADA,EANA,EALD,GAFD,EADD,EADD,CAkFA,CA3PD,CA6PA,cAAe7E,CAAAA,UAAU,CAACY,wBAAD,CAAzB","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By : \n */\n\nimport { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from 'axios';\nimport * as yup from \"yup\";\n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport LiveSearch from '../utils/LiveSearch';\n\n//import DatePicker  from 'react-datepicker';\n//import \"react-datepicker/dist/react-datepicker.css\";\n//import addDays from 'date-fns/addDays'\n\nimport Tabs from 'react-bootstrap/Tabs'\nimport Tab from 'react-bootstrap/Tab'\n\nconst schema = yup.object({\n\t \n\n});\n\n\n\nconst LicDemandTransactionEdit = () => {\n\tconst { register, handleSubmit, setValue, formState: { errors }, clearErrors } = useForm({\n\t\tresolver: yupResolver(schema)\n\t});\n\n\tlet { id } = useParams();\n\n\tlet history = useHistory();\n\tconst [serverErrors, setServerErrors] = useState([]);\n\tconst [entity, setEntity] = useState({});\n\tconst [state, setState] = useState({}); \n\tconst [key, setKey] = useState('page1');\n\t \n\tconst [dakId, setDakId] = useState(0);\n\t \n\tconst [mesg,setMesg]=useState('');\n\tconst [me,setMe]=useState('');\n\tconst [dakidNo,setDakidNo]=useState('');\n\t \n\n\n\n\tuseEffect(() => {\n\t\tlet isCancelled = false;\n\t\tconsole.log(id);\n\t\tif (id !== 'new') {\n\t\t\tasync function fetchData() {\n\t\t\t\tlet record = '';\n\t\t\t\tawait axios.get('/licDemandTransactions/' + id)\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\trecord = response.data;\n\t\t\t\t\t\tconst fields = [\n\t\t\t\t\t\t\t'id', 'dak', 'employee', 'cdaoNo', 'checkDigit', 'policyNo', \n\t\t\t\t\t\t\t'premiumAmount', 'premiumDueMe', 'monthEnding', 'auditor', 'aao','ao',\n\t\t\t\t\t\t\t'auditorDate', 'aaoDate', 'aoDate', 'approved', 'gstOnPremiumAmount' , \n\t\t\t\t\t\t\t 'recordStatus',   'reason', 'remarks'\n\t\t\t\t\t\t];\n\t\t\t\t\t\tsetDakidNo(record.dak.dakidNo);\n\t\t\t\t\t\tconsole.log(\">>>>---:\"+ dakidNo);\n\t\t\t\t\t\tfields.forEach(field => setValue(field, record[field]));\n\t\t\t\t\t\t \n\n\t\t\t\t\t})\n\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t//console.log(error);\n\t\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\t\tif (error.response)\n\t\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t\t});\n\n\n\t\t\t\tif (!isCancelled) {\n\t\t\t\t\tsetEntity(record);\n\t\t\t\t\tsetState(prev => ({ ...prev, state: record }));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfetchData();\n\t\t\treturn () => {\n\t\t\t\tisCancelled = true;\n\t\t\t};\n\t\t}\n\n\t}, []);\n\n \tuseEffect(() => {\n\t\tlet fetching = false;\n\t\tlet unmounted = false;\n\t\tasync function fetchMe() {\n\t\t\t \n\t\t\t \n\t\t\t\tif (!fetching)\n\t\t\t\t\tawait axios.get(`/licDemandTransactions/licDemand/getCurrentMe`)\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\tsetMe(response.data);\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\t//console.log(error);\n\t\t\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\t\t\tif (error.response)\n\t\t\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t\t\t})\n\t\t}\n\t\tfetchMe();\n\t\t \n\t\treturn () => { fetching = true; unmounted = true; }\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n \n\n\tconst onSubmit = (data, event) => {\n\t\tevent.preventDefault();\n\t\tconsole.log(data);\n\t\tif (data.id) {\n\t\t\taxios.put(\"/licDemandTransactions/\" + data.id, data)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetMesg(response.data);\n\t\t\t\t\t \n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t//\tconsole.log(error.response.status);\n\t\t\t\t\t//\tconsole.log(error.response.headers);\n\t\t\t\t\tif (error.response)\n\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\telse\n\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t})\n\t\t} \n\n\t\t \n\t}\n\n\tconst onError = (errors, e) => console.log(errors, e);\n\n\t//All foreign keys. \n\t// XXXXXX Add search fields and adjust the values as necessary\n\tconst parentData = {\n\n\t\tdak: {\n\t\t\ttitle: \"Dak\",\n\t\t\turl : \"daks\",\n\t\t\tsearchList : ['id'], //XXXXXXXXX Add search fields\n\t\t\tfkEntity: \"dak\",\n\t\t\tpreload: false, //XXXXXX Set this to true for small tables like designations\n\t\t},\n\t\t\temployee: {\n\t\t\ttitle: \"Employee\",\n\t\t\turl: \"employees/all/effective\",\n\t\t\tsearchList: ['cdaoNo', 'checkDigit', 'officerName'], //XXXXXXXXX Add search fields\n\t\t\tfkEntity: \"employee\",\n\t\t\tpreload: false, //XXXXXX Set this to true for small tables like designations\n\t\t},\n\t\t \n\t}\n\n\t//Callback for child components (Foreign Keys)\n\tconst callback = (childData) => {\n\t\t//console.log(\"Parent Callback\");\n\t\tsetEntity(prev => ({ ...prev, [childData.fk]: childData.entity }));\n\t\tsetValue(childData.fk, childData.entity);\n\t\t//console.log(errors);\n\t\tconsole.log(\">>>\"+childData.fk);\n\t\t \n\t\tclearErrors(childData.fk);\n\t};\n\n\tconst errorCallback = (err) => {\n\t\t//console.log(err);\n\t\tsetServerErrors(err);\n\t}\n\n\tconst handleInputChange = (e) => {\n\t\t//console.log(e.target.value);\n\t};\n\t \n\t \n\tconst handleButtonClick = (e) =>{\n\t\thistory.push(\"/licDemandTransactions\");\n\t}\n\n\treturn (\n\t\t<div className=\"min-h-screen bg-gray-100 text-gray-900\">\n\t\t\t<div className=\"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\">\n\t\t\t\t\n\t\t\t\t<form onSubmit={handleSubmit(onSubmit, onError)}>\n\t\t\t\t\t<h1 >{id === 'new' ? 'Add' : 'Edit'} Lic Demand Transaction </h1>\n\t\t\t\t\t<h2>{mesg}</h2>\n\t\t\t\t\t<div className=\"text-red-500\">{serverErrors}</div>\n\n\t\t\t\t\t<Tabs\n\t\t\t\t\t\tid=\"LicDemandTransactionEdit\"\n\t\t\t\t\t\tactiveKey={key}\n\t\t\t\t\t\tonSelect={(k) => setKey(k)}\n\t\t\t\t\t\tclassName=\"mb-3\">\n\t\t\t\t\t\t\n\t\t\t\t\t<Tab eventKey=\"page1\" title=\"Lic Demand\" className=\"h-120\">\n\t\t\t\t\t<div className=\"grid grid-cols-2 gap-0\">\n\t\t\t\t\t\t \n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Month</label>\n\t\t\t\t\t\t\t\t\t {me}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t <div>\n\t\t\t\t\t\t <label> Dak Id</label>\n\t\t\t\t\t\t {dakidNo}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t</div>\n\t \n\t\t\t\t\t\t\t<div >\n\t\t\t\t\t\t\t\t\t<LiveSearch name=\"employee\" onChange={handleInputChange}\n\t\t\t\t\t\t\t\t\t\tparentData={parentData.employee} parentCallback={callback}\n\t\t\t\t\t\t\t\t\t\tfkEntity={entity.employee} errCallback={errorCallback} />\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500 \">{errors.employee?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Policy Number</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"policyNo\" {...register(\"policyNo\")} \n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.policyNo?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Premium Amount</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"premiumAmount\" {...register(\"premiumAmount\")} \n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.premiumAmount?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Gst On Premium Amount</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"gstOnPremiumAmount\" {...register(\"gstOnPremiumAmount\")} \n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.gstOnPremiumAmount?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t \n\n\t\t\t\t\t<div className=\"px-2\">\n\t\t\t\t\t\t<button type=\"submit\" >Save</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"px-2\">\n\t\t\t\t\t<button type=\"button\" onClick={handleButtonClick} >Cancel</button>\n\t\t\t\t\t\t</div>\n</div>\n</Tab>\n \n\t\t\t\t\t\n</Tabs>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default withRouter(LicDemandTransactionEdit);"]},"metadata":{},"sourceType":"module"}