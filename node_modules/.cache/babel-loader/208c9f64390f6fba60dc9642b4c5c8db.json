{"ast":null,"code":"import _defineProperty from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By :\n */import{useState,useEffect}from\"react\";import{withRouter,useParams,useHistory}from\"react-router-dom\";import{useForm}from\"react-hook-form\";import axios from\"axios\";import*as yup from\"yup\";import{yupResolver}from\"@hookform/resolvers/yup\";import LiveSearch from\"../utils/LiveSearch\";//import DatePicker  from 'react-datepicker';\n//import \"react-datepicker/dist/react-datepicker.css\";\n//import addDays from 'date-fns/addDays'\nimport Tabs from\"react-bootstrap/Tabs\";import Tab from\"react-bootstrap/Tab\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var schema=yup.object({});var PmUploadControlEdit=function PmUploadControlEdit(){var _errors$batchNo,_errors$pmSectionCode;var _useForm=useForm({resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,errors=_useForm.formState.errors,clearErrors=_useForm.clearErrors;var _useParams=useParams(),id=_useParams.id;var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),serverErrors=_useState2[0],setServerErrors=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),entity=_useState4[0],setEntity=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),state=_useState6[0],setState=_useState6[1];var _useState7=useState(\"page1\"),_useState8=_slicedToArray(_useState7,2),key=_useState8[0],setKey=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),me=_useState10[0],setMe=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),disabled=_useState12[0],setDisabled=_useState12[1];var _useState13=useState(true),_useState14=_slicedToArray(_useState13,2),lightTheme=_useState14[0],setLightTheme=_useState14[1];var onSubmit=function onSubmit(data,event){setDisabled(true);event.preventDefault();console.log(me);if(me){axios.get(\"/pmUploadControls/pmUploadFile/\".concat(me)).then(function(response){if(response.data){window.open(\"\".concat(process.env.REACT_APP_BASE_URL,\"/files/\").concat(response.data));history.push(\"/pmUploadControls\");}setDisabled(false);}).catch(function(error){//console.log(error.response.data);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nsetServerErrors(error.response.data);});}};var onError=function onError(errors,e){return console.log(errors,e);};//All foreign keys.\n// XXXXXX Add search fields and adjust the values as necessary\n//Callback for child components (Foreign Keys)\nvar callback=function callback(childData){//console.log(\"Parent Callback\");\nsetEntity(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},childData.fk,childData.entity));});setValue(childData.fk,childData.entity);//console.log(errors);\nclearErrors(childData.fk);};var errorCallback=function errorCallback(err){//console.log(err);\nsetServerErrors(err);};var handleInputChange=function handleInputChange(e){//console.log(e.target.value);\nsetMe(e.target.value);};return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-xl mx-auto \",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full w-3/4  mx-auto \",children:/*#__PURE__*/_jsx(\"div\",{className:lightTheme?\"theme-light\":\"theme-dark\",style:disabled?{pointerEvents:\"none\",opacity:\"0.4\"}:{},children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit,onError),children:[/*#__PURE__*/_jsxs(\"h1\",{children:[id===\"new\"?\"Add\":\"Edit\",\" Pm Upload File Generation \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:serverErrors}),/*#__PURE__*/_jsxs(Tabs,{id:\"PmUploadControlEdit\",activeKey:key,onSelect:function onSelect(k){return setKey(k);},className:\"mb-3\",children:[/*#__PURE__*/_jsx(Tab,{eventKey:\"page1\",title:\"Page 1\",className:\"h-120\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-0\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Pm Month\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"me\",onChange:handleInputChange,placeholder:\"mmyyyy\",className:\"form-control py-0\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$batchNo=errors.batchNo)===null||_errors$batchNo===void 0?void 0:_errors$batchNo.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Pm Section Code\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"pmSectionCode\"},register(\"pmSectionCode\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$pmSectionCode=errors.pmSectionCode)===null||_errors$pmSectionCode===void 0?void 0:_errors$pmSectionCode.message})]})]})}),/*#__PURE__*/_jsx(Tab,{eventKey:\"page2\",title:\"Page 2\",className:\"h-120\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-0\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Add some fields here or delete this tab.\"})})}),/*#__PURE__*/_jsxs(Tab,{eventKey:\"help\",title:\"Help\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Help\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Point 1\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Point 2\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save\"})})]})})})});};export default withRouter(PmUploadControlEdit);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/PmUploadControlEdit.js"],"names":["useState","useEffect","withRouter","useParams","useHistory","useForm","axios","yup","yupResolver","LiveSearch","Tabs","Tab","schema","object","PmUploadControlEdit","resolver","register","handleSubmit","setValue","errors","formState","clearErrors","id","history","serverErrors","setServerErrors","entity","setEntity","state","setState","key","setKey","me","setMe","disabled","setDisabled","lightTheme","setLightTheme","onSubmit","data","event","preventDefault","console","log","get","then","response","window","open","process","env","REACT_APP_BASE_URL","push","catch","error","onError","e","callback","childData","prev","fk","errorCallback","err","handleInputChange","target","value","pointerEvents","opacity","k","batchNo","message","pmSectionCode"],"mappings":"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","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By :\n */\n\nimport { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport * as yup from \"yup\";\n\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport LiveSearch from \"../utils/LiveSearch\";\n\n//import DatePicker  from 'react-datepicker';\n//import \"react-datepicker/dist/react-datepicker.css\";\n//import addDays from 'date-fns/addDays'\n\nimport Tabs from \"react-bootstrap/Tabs\";\nimport Tab from \"react-bootstrap/Tab\";\n\nconst schema = yup.object({});\n\nconst PmUploadControlEdit = () => {\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    formState: { errors },\n    clearErrors,\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  let { id } = useParams();\n\n  let history = useHistory();\n  const [serverErrors, setServerErrors] = useState([]);\n  const [entity, setEntity] = useState({});\n  const [state, setState] = useState({});\n  const [key, setKey] = useState(\"page1\");\n  const [me, setMe] = useState(\"\");\n  const [disabled, setDisabled] = useState(false);\n  const [lightTheme, setLightTheme] = useState(true);\n\n  const onSubmit = (data, event) => {\n    setDisabled(true);\n    event.preventDefault();\n    console.log(me);\n    if (me) {\n      axios\n        .get(`/pmUploadControls/pmUploadFile/${me}`)\n        .then((response) => {\n          if(response.data){\n            window.open(\n              `${process.env.REACT_APP_BASE_URL}/files/${response.data}`\n            );\n            history.push(\"/pmUploadControls\");\n          }\n          setDisabled(false);\n           \n          \n        })\n        .catch((error) => {\n          //console.log(error.response.data);\n          //console.log(error.response.status);\n          //console.log(error.response.headers);\n          setServerErrors(error.response.data);\n        });\n    }\n  };\n\n  const onError = (errors, e) => console.log(errors, e);\n\n  //All foreign keys.\n  // XXXXXX Add search fields and adjust the values as necessary\n\n  //Callback for child components (Foreign Keys)\n  const callback = (childData) => {\n    //console.log(\"Parent Callback\");\n    setEntity((prev) => ({ ...prev, [childData.fk]: childData.entity }));\n    setValue(childData.fk, childData.entity);\n    //console.log(errors);\n    clearErrors(childData.fk);\n  };\n\n  const errorCallback = (err) => {\n    //console.log(err);\n    setServerErrors(err);\n  };\n\n  const handleInputChange = (e) => {\n    //console.log(e.target.value);\n    setMe(e.target.value);\n  };\n\n  return (\n    <div className=\"max-w-xl mx-auto \">\n      <div className=\"w-full w-3/4  mx-auto \">\n        <div\n          className={lightTheme ? \"theme-light\" : \"theme-dark\"}\n          style={disabled ? { pointerEvents: \"none\", opacity: \"0.4\" } : {}}\n        >\n          <form onSubmit={handleSubmit(onSubmit, onError)}>\n            <h1>{id === \"new\" ? \"Add\" : \"Edit\"} Pm Upload File Generation </h1>\n            <div className=\"text-red-500\">{serverErrors}</div>\n            <Tabs\n              id=\"PmUploadControlEdit\"\n              activeKey={key}\n              onSelect={(k) => setKey(k)}\n              className=\"mb-3\"\n            >\n              <Tab eventKey=\"page1\" title=\"Page 1\" className=\"h-120\">\n                <div className=\"grid grid-cols-2 gap-0\">\n                  <div>\n                    <label>Pm Month</label>\n                    <input\n                      type=\"text\"\n                      name=\"me\"\n                      onChange={handleInputChange}\n                      placeholder=\"mmyyyy\"\n                      className=\"form-control py-0\"\n                    />\n                    <div className=\"text-red-500\">\n                      {errors.batchNo?.message}\n                    </div>\n                  </div>\n\n                  <div>\n                    <label>Pm Section Code</label>\n                    <input\n                      type=\"text\"\n                      name=\"pmSectionCode\"\n                      {...register(\"pmSectionCode\")}\n                      className=\"form-control py-0\"\n                    />\n                    <div className=\"text-red-500\">\n                      {errors.pmSectionCode?.message}\n                    </div>\n                  </div>\n                </div>\n              </Tab>\n\n              <Tab eventKey=\"page2\" title=\"Page 2\" className=\"h-120\">\n                <div className=\"grid grid-cols-2 gap-0\">\n                  <p>Add some fields here or delete this tab.</p>\n                </div>\n              </Tab>\n\n              <Tab eventKey=\"help\" title=\"Help\">\n                <h1>Help</h1>\n                <ul className=\"list-disc\">\n                  <li>Point 1</li>\n                  <li>Point 2</li>\n                </ul>\n              </Tab>\n            </Tabs>\n\n            <div className=\"px-4\">\n              <button type=\"submit\">Save</button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(PmUploadControlEdit);\n"]},"metadata":{},"sourceType":"module"}