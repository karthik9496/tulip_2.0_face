{"ast":null,"code":"var _jsxFileName = \"/home/itsdcsec/falconws/falcon_face/src/components/WithholdEdit.js\";\nimport { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport LiveSearch from \"../utils/LiveSearch\";\nimport { clippingParents } from \"@popperjs/core\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object({\n  //toDate:yup.number().required('Required'),\n  withholdPercentage: yup.number().required('Required'),\n  withholdPercentage: yup.number().min(1).max(100)\n});\n\nconst WithholdEdit = () => {\n  var _errors$employee, _errors$fromDate, _errors$toDate, _errors$withholdPerce, _errors$remarks;\n\n  const {\n    register,\n    handleSubmit,\n    getValues,\n    setValue,\n    formState: {\n      errors\n    },\n    clearErrors\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  let {\n    id\n  } = useParams();\n  let history = useHistory();\n  const [serverErrors, setServerErrors] = useState([]);\n  const [entity, setEntity] = useState({});\n  const [state, setState] = useState({});\n  const [key, setKey] = useState(\"page1\");\n  const [readAble, setReadAble] = useState(false);\n  useEffect(() => {\n    let isCancelled = false;\n    console.log(id);\n\n    if (id !== \"new\") {\n      setReadAble(true);\n\n      async function fetchData() {\n        let record = \"\";\n        await axios.get(\"/withholdPay/\" + id).then(response => {\n          record = response.data;\n          const fields = [\"id\", \"cdaoNo\", \"checkDigit\", \"fkAuditCage\", \"basicPay\", \"da\", \"msp\", \"fromDate\", \"toDate\", \"fkAao\", \"fkAo\", \"fkAuditor\", \"auditorDate\", \"aaoDate\", \"aoDate\", \"recordStatus\", \"createdAt\", \"employee\", \"approved\", \"remarks\", \"withholdPercentage\"];\n          fields.forEach(field => setValue(field, record[field]));\n        }).catch(error => {\n          if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n        });\n\n        if (!isCancelled) {\n          setEntity(record);\n          setState(prev => ({ ...prev,\n            state: record\n          }));\n        }\n      }\n\n      fetchData();\n      return () => {\n        isCancelled = true;\n      };\n    }\n  }, [id, setValue]); //rahul: new function ---------------------------\n\n  const onSubmit = (value, event) => {\n    event.preventDefault();\n    console.log(\"iddddddd\", id);\n    console.log(\"value ache\", value);\n\n    if (id === \"new\") {\n      axios.post(\"/withholdPay/new\", value).then(response => {\n        if (response.status = 200) history.push(\"/withholdPay\");\n      }).catch(error => {\n        //console.log(error.response.data);\n        //console.log(error.response.status);\n        //console.log(error.response.headers);\n        if (error.response.status == 400) setServerErrors('Not Allowed');else setServerErrors('Error');\n      });\n    } else {\n      axios.post(`/withholdPay/${id}/edit`, value).then(response => {\n        if (response.status = 200) history.push(\"/withholdPay\");\n      }).catch(error => {\n        if (error.response.status == 400) setServerErrors(error.response.data);else setServerErrors('Error');\n        console.log(\"errror\", error.response);\n      });\n    }\n  };\n\n  const onError = (errors, e) => console.log(errors, e); //All foreign keys.\n  // XXXXXX Add search fields and adjust the values as necessary\n\n\n  const parentData = {\n    employee: {\n      title: \"Employee\",\n      url: \"employees\",\n      searchList: [\"cdaoNo\", \"officerName\"],\n      //XXXXXXXXX Add search fields here and also in the corresponding repository\n      fkEntity: \"employee\"\n    }\n  }; //Callback for child components (Foreign Keys)\n\n  const callback = childData => {\n    //console.log(\"Parent Callback\");\n    setEntity(prev => ({ ...prev,\n      [childData.fk]: childData.entity\n    }));\n    setValue(childData.fk, childData.entity); //console.log(errors);\n\n    clearErrors(childData.fk);\n  };\n\n  const errorCallback = err => {\n    //console.log(err);\n    setServerErrors(err);\n  };\n\n  const handleCheckBox = index => e => {\n    console.log(e.target.checked);\n    /* let item = data[index];\n    item['select'] = e.target.checked;\n    let newData = [...data];\n    newData[index] = item;\n    setData(newData);\n    console.log(data);\t*/\n  };\n\n  const handleInputChange = e => {//console.log(e.target.value);\n  };\n\n  const handleButtonClick = e => {\n    history.push(\"/withholdPay\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-2xl mx-auto\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full w-3/4  mx-auto \",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(onSubmit, onError),\n        className: \"bg-gray-100 rounded-lg py-10 px-10\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [id === \"new\" ? \"Add\" : \"Edit\", \" Withhold \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-red-500\",\n          children: serverErrors\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-2 gap-0 my-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(LiveSearch, {\n              name: \"employee\",\n              onChange: handleInputChange,\n              parentData: parentData.employee,\n              parentCallback: callback,\n              fkEntity: entity.employee,\n              errCallback: errorCallback,\n              readOnly: readAble\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-red-500 \",\n              children: (_errors$employee = errors.employee) === null || _errors$employee === void 0 ? void 0 : _errors$employee.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"From Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"fromDate\",\n              ...register(\"fromDate\"),\n              readOnly: readAble,\n              disabled: readAble\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-red-500\",\n              children: (_errors$fromDate = errors.fromDate) === null || _errors$fromDate === void 0 ? void 0 : _errors$fromDate.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"my-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"To Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"toDate\",\n              ...register(\"toDate\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-red-500\",\n              children: (_errors$toDate = errors.toDate) === null || _errors$toDate === void 0 ? void 0 : _errors$toDate.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"my-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Withhold Percentage\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              name: \"withholdPercentage\",\n              ...register(\"withholdPercentage\"),\n              readOnly: readAble,\n              disabled: readAble\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-red-500\",\n              children: (_errors$withholdPerce = errors.withholdPercentage) === null || _errors$withholdPerce === void 0 ? void 0 : _errors$withholdPerce.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-3 my-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Basic Pay\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"w-6 h-6\",\n                type: \"checkbox\",\n                disabled: readAble,\n                ...register(\"basicPay\"),\n                onChange: handleCheckBox\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mx-4 \",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"DA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                disabled: readAble,\n                className: \"w-6 h-6 \",\n                type: \"checkbox\",\n                ...register(\"da\"),\n                //checked={lightTheme}\n                onChange: handleCheckBox\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mx-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"MSP\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                disabled: readAble,\n                className: \"w-6 h-6\",\n                type: \"checkbox\",\n                ...register(\"msp\"),\n                //checked={lightTheme}\n                onChange: handleCheckBox\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Remarks\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"w-full h-24 px-2 mt-1\",\n            type: \"text\",\n            name: \"remarks\",\n            ...register(\"remarks\"),\n            readOnly: readAble,\n            disabled: readAble\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-red-500\",\n            children: (_errors$remarks = errors.remarks) === null || _errors$remarks === void 0 ? void 0 : _errors$remarks.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-2 gap-0 \",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-2\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-2\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleButtonClick,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 194,\n    columnNumber: 5\n  }, this);\n};\n\nexport default withRouter(WithholdEdit);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/WithholdEdit.js"],"names":["useState","useEffect","withRouter","useParams","useHistory","useForm","axios","yup","yupResolver","LiveSearch","clippingParents","schema","object","withholdPercentage","number","required","min","max","WithholdEdit","register","handleSubmit","getValues","setValue","formState","errors","clearErrors","resolver","id","history","serverErrors","setServerErrors","entity","setEntity","state","setState","key","setKey","readAble","setReadAble","isCancelled","console","log","fetchData","record","get","then","response","data","fields","forEach","field","catch","error","Error","prev","onSubmit","value","event","preventDefault","post","status","push","onError","e","parentData","employee","title","url","searchList","fkEntity","callback","childData","fk","errorCallback","err","handleCheckBox","index","target","checked","handleInputChange","handleButtonClick","message","fromDate","toDate","remarks"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport * as yup from \"yup\";\n\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport LiveSearch from \"../utils/LiveSearch\";\nimport { clippingParents } from \"@popperjs/core\";\n\n\n\nconst schema = yup.object({\n  //toDate:yup.number().required('Required'),\n withholdPercentage:yup.number().required('Required'),\n withholdPercentage:yup.number().min(1).max(100),\n});\n\nconst WithholdEdit = () => {\n  const {\n    register,\n    handleSubmit,\n    getValues,\n    setValue,\n    formState: { errors },\n    clearErrors,\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  let { id } = useParams();\n\n  let history = useHistory();\n  const [serverErrors, setServerErrors] = useState([]);\n  const [entity, setEntity] = useState({});\n  const [state, setState] = useState({});\n  const [key, setKey] = useState(\"page1\");\n  const [readAble,setReadAble] =useState(false);\n\n  useEffect(() => {\n    let isCancelled = false;\n    console.log(id);\n    if (id !== \"new\") {\n      setReadAble(true);\n      async function fetchData() {\n        let record = \"\";\n        await axios\n          .get(\"/withholdPay/\" + id)\n          .then((response) => {\n            record = response.data;\n\n            const fields = [\n              \"id\",\n              \"cdaoNo\",\n              \"checkDigit\",\n              \"fkAuditCage\",\n              \"basicPay\",\n              \"da\",\n              \"msp\",\n              \"fromDate\",\n              \"toDate\",\n              \"fkAao\",\n              \"fkAo\",\n              \"fkAuditor\",\n              \"auditorDate\",\n              \"aaoDate\",\n              \"aoDate\",\n              \"recordStatus\",\n              \"createdAt\",\n              \"employee\",\n              \"approved\",\n              \"remarks\",\n              \"withholdPercentage\",\n            ];\n\n            fields.forEach((field) => setValue(field, record[field]));\n\n\n          })\n          .catch((error) => {\n            if (error.response) setServerErrors(error.response.data.error);\n            else setServerErrors(error.Error);\n          });\n\n        if (!isCancelled) {\n          setEntity(record);\n          setState((prev) => ({ ...prev, state: record }));\n        }\n      }\n\n      fetchData();\n      return () => {\n        isCancelled = true;\n      };\n    }\n  }, [id, setValue]);\n\n\n//rahul: new function ---------------------------\n  \n  \n\n\n  const onSubmit = (value, event) => {\n    event.preventDefault();\n    console.log(\"iddddddd\",id)\n    console.log(\"value ache\",value); \n    if (id===\"new\") {\n      axios\n        .post(\"/withholdPay/new\", value)\n        .then((response) => {\n          if (response.status=200) \n          history.push(\"/withholdPay\");\n         \n        })\n        .catch((error) => {\n          //console.log(error.response.data);\n          //console.log(error.response.status);\n          //console.log(error.response.headers);\n          if(error.response.status==400)\n          setServerErrors('Not Allowed');\n           else\n          setServerErrors('Error');\n        });\n    } \n    else  {\n      axios\n        .post(`/withholdPay/${id}/edit`, value)\n        .then((response) => {\n          if (response.status=200) \n          history.push(\"/withholdPay\");\n  \n        })\n        .catch((error) => {\n          if(error.response.status==400)\n          setServerErrors(error.response.data);\n           else\n          setServerErrors('Error');\n        console.log(\"errror\",error.response)\n        });\n    } \n\n    \n  };\n\n  const onError = (errors, e) => console.log(errors, e);\n\n  //All foreign keys.\n  // XXXXXX Add search fields and adjust the values as necessary\n  const parentData = {\n    employee: {\n      title: \"Employee\",\n      url: \"employees\",\n      searchList: [\"cdaoNo\", \"officerName\"], //XXXXXXXXX Add search fields here and also in the corresponding repository\n      fkEntity: \"employee\",\n    },\n  };\n\n  //Callback for child components (Foreign Keys)\n  const callback = (childData) => {\n    //console.log(\"Parent Callback\");\n    setEntity((prev) => ({ ...prev, [childData.fk]: childData.entity }));\n    setValue(childData.fk, childData.entity);\n    //console.log(errors);\n    clearErrors(childData.fk);\n  };\n\n  const errorCallback = (err) => {\n    //console.log(err);\n    setServerErrors(err);\n  };\n\n  const handleCheckBox = index => (e) =>{\n    console.log(e.target.checked);\n    /* let item = data[index];\n  \n item['select'] = e.target.checked;\n let newData = [...data];\n newData[index] = item;\n setData(newData);\n console.log(data);\t*/\n  \n}\n\n  const handleInputChange = (e) => {\n    //console.log(e.target.value);\n  };\n\n  const handleButtonClick = (e) => {\n    history.push(\"/withholdPay\");\n  };\n\n  return (\n    <div className=\"max-w-2xl mx-auto\">\n      <div className=\"w-full w-3/4  mx-auto \">\n        <form onSubmit={handleSubmit(onSubmit, onError)} className=\"bg-gray-100 rounded-lg py-10 px-10\">\n          <h1>{id === \"new\" ? \"Add\" : \"Edit\"} Withhold </h1>\n          <div className=\"text-red-500\">{serverErrors}</div>\n\n          <div className=\"grid grid-cols-2 gap-0 my-2\">\n            <div >\n              <LiveSearch\n                name=\"employee\"\n                onChange={handleInputChange}\n                parentData={parentData.employee}\n                parentCallback={callback}\n                fkEntity={entity.employee}\n                errCallback={errorCallback}\n                readOnly={readAble}\n              />\n              <div className=\"text-red-500 \">{errors.employee?.message}</div>\n            </div>\n\n            <div >\n              <label>From Date</label>\n              <input\n                type=\"date\"\n                name=\"fromDate\"\n                {...register(\"fromDate\")}\n                readOnly = {readAble}\n                disabled={readAble}\n              />\n              <div className=\"text-red-500\">{errors.fromDate?.message}</div>\n            </div>\n\n\n            <div className=\"my-3\">\n              <label>To Date</label>\n              <input\n                type=\"date\"\n                name=\"toDate\"\n                {...register(\"toDate\")}\n              />\n              <div className=\"text-red-500\">{errors.toDate?.message}</div>\n            </div>\n\n            <div className=\"my-3\">\n              <label>Withhold Percentage</label>\n              <input\n                type=\"number\"\n                name=\"withholdPercentage\"\n                {...register(\"withholdPercentage\")}\n                readOnly = {readAble}\n                disabled  ={readAble}\n              \n              />\n              <div className=\"text-red-500\">{errors.withholdPercentage?.message}</div>\n            </div>\n\n            \n           \n            <div className=\"grid grid-cols-3 my-3\">\n            <div>\n                <label>Basic Pay</label>\n                <input\n                className=\"w-6 h-6\"\n\t\t\t        \ttype=\"checkbox\"\n                disabled = {readAble}\n                {...register(\"basicPay\")}\n\t\t\t\t\n                onChange={handleCheckBox}\n\t\t\t/></div>\n\n            <div className=\"mx-4 \">\n                <label>DA</label>\n                <input\n                disabled = {readAble}\n                className=\"w-6 h-6 \"\n\t\t\t\ttype=\"checkbox\"\n                {...register(\"da\")}\n\t\t\t\t//checked={lightTheme}\n                onChange={handleCheckBox}\n\t\t\t/></div>\n\n            <div className=\"mx-4\">\n                <label>MSP</label>\n                <input\n                disabled = {readAble}\n                className=\"w-6 h-6\"\n\t\t\t\ttype=\"checkbox\"\n                {...register(\"msp\")}\n\t\t\t\t//checked={lightTheme}\n                onChange={handleCheckBox}\n\t\t\t/></div>\n            </div>\n            \n           \t\t \n          </div>\n          <div >\n              <label>Remarks</label>\n              <textarea\n              className=\"w-full h-24 px-2 mt-1\"\n                type=\"text\"\n                name=\"remarks\"\n                {...register(\"remarks\")}\n                readOnly = {readAble}\n                disabled={readAble}\n              />\n              <div className=\"text-red-500\">\n                {errors.remarks?.message}\n              </div>\n            </div>\n          <div className=\"grid grid-cols-2 gap-0 \">\n            <div className=\"px-2\">\n              <button type=\"submit\">Save</button>\n            </div>\n\n            <div className=\"px-2\">\n              <button type=\"button\" onClick={handleButtonClick}>\n                Cancel\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\nexport default withRouter(WithholdEdit);"]},"metadata":{},"sourceType":"module"}