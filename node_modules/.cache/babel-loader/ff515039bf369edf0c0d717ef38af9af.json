{"ast":null,"code":"import _regeneratorRuntime from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By :\n */import{useState,useEffect,useRef}from\"react\";import{withRouter,useParams,useHistory}from\"react-router-dom\";import{useForm}from\"react-hook-form\";import axios from\"axios\";import*as yup from\"yup\";import{yupResolver}from\"@hookform/resolvers/yup\";import LiveSearch from\"../utils/LiveSearch\";import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";import addDays from\"date-fns/addDays\";import Tabs from\"react-bootstrap/Tabs\";import Tab from\"react-bootstrap/Tab\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var schema=yup.object({employee:yup.object().required(\"Required\")//\tdemandDate:yup.date().required('Required'),\n});var ManualDtsSettlementOption=function ManualDtsSettlementOption(){var _useForm=useForm({resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors,clearErrors=_useForm.clearErrors;var _useParams=useParams(),id=_useParams.id;console.log(\">>>>>>>>>>Dts Reference Id---:\"+id);var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),serverErrors=_useState2[0],setServerErrors=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),entity=_useState4[0],setEntity=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),state=_useState6[0],setState=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),value=_useState10[0],setValue=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),action=_useState12[0],setAction=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),dtsData=_useState14[0],setDtsData=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),dts=_useState16[0],setDts=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),status=_useState18[0],setStatus=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),refId=_useState20[0],setRefId=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),option=_useState22[0],setOption=_useState22[1];useEffect(function(){var isCancelled=false;var fetching=false;var unmounted=false;function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var record,fields;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:record=\"\";console.log(\">>>>>>>>>>Dts Reference Id before call ---:\"+id);_context.next=4;return axios.get(\"/demandRegisters/manualDtsSettlementOption/\".concat(id)).then(function(response){console.log(\">>>>> Data DTS----:\"+response.data[0].status);console.log(\">>>>> Data DTS-Id For Ref---:\"+response.data[0].dtsIdForReference);setRefId(response.data[0].dtsIdForReference);setStatus(response.data[0].status);setDtsData(response.data);}).catch(function(error){//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 4:fields=[\"dtsLossToGovt\",\"dtsRecoveryFromPay\"];fields.forEach(function(field){return setValue(field,record[field]);});if(!isCancelled){setEntity(record);setState(function(prev){return _objectSpread(_objectSpread({},prev),{},{state:record});});}case 7:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();return function(){fetching=true;unmounted=true;};},[id]);var onSubmit=function onSubmit(data,event){event.preventDefault();console.log(\"777777777:\"+data);if(data.id){axios.put(\"/demandRegisters/manualDtsSettle/\"+data.id,data).then(function(response){history.push(\"/manualDtsSettlement\");}).catch(function(error){//console.log(error.response.data);\n//console.log(\"response--------\"+error.response.status);\nsetServerErrors(error.response.data[\"reason\"]);});}};var onError=function onError(errors,e){return console.log(errors,e);};var errorCallback=function errorCallback(err){//console.log(err);\nsetServerErrors(err);};var handleLossChange=function handleLossChange(event){console.log(\">>>>>>>Loss to Govt----:\"+event.target.value);setDts(event.target.value);if(event.target.value===\"loss\")setValue(\"dtsLossToGovt\",true);setOption(\"loss\");};var handleRecoverChange=function handleRecoverChange(event){setDts(event.target.value);setValue(\"dtsRecoveryFromPay\",event.target.value);setOption(\"recover\");};var resetRadioState=function resetRadioState(){setDts(\"\");};function submitManDts(_x){return _submitManDts.apply(this,arguments);}/*\tasync function approveManDts(id) {\n\t\tawait axios.put(`/demandRegisters/${id}/approveManualDts`)\n\t\t\t.then((response) => {\n\t\t\t\t//console.log(data);\n\t\t\t\t//let updatedRecords = [...data].filter((i) => i.id !== id);\n\t\t\t\t//console.log(updatedRecords);\n\t\t\t\t//setData(updatedRecords);\n\t\t\t\t//setUpdate(!update);\n\t\t\t\thistory.push({ pathname: '/manualDtsSettlement', state: response.data });\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.log(error);\n\t\t\t\t//console.log(error.response.status);\n\t\t\t\t//console.log(error.response.headers);\n\t\t\t\tif (error.response)\n\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\telse\n\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t});\n\t}*/function _submitManDts(){_submitManDts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(refId){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\">>>>>>Option id is---:\"+refId);_context2.next=3;return axios.put(\"/demandRegisters/submitDts/\".concat(refId,\"/\").concat(option,\"/manualDtsSettle\")).then(function(response){console.log(\"response from controller\");//let updatedRecords = [...data].filter((i) => i.id !== id);\n//\tconsole.log(updatedRecords);\n//setData(updatedRecords);\n//setUpdate(!update);\nhistory.push(\"/manualDtsSettlement\");//history.push(\"/cbillTadaLtcs\");\n}).catch(function(error){console.log(error);//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _submitManDts.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 text-gray-900\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-10xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit,onError),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"h1\",{class:\"text-blue-600\",align:\"center\",children:[\"Transaction ID Details for corresponding Reference ID\",\" \"]}),/*#__PURE__*/_jsx(\"table\",{className:\"table table-striped table-bordered\",children:/*#__PURE__*/_jsxs(\"thead\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"CDAO_No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Advance_Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Journey_Start_Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Journey_End_Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Journey_Station_From\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Journey_Station_To\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Transaction_Id\"})]}),dtsData&&dtsData.map(function(tt){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:tt.cdaoNo}),/*#__PURE__*/_jsx(\"td\",{children:tt.demandType}),/*#__PURE__*/_jsx(\"td\",{children:tt.transAmount}),/*#__PURE__*/_jsx(\"td\",{children:tt.journeyFromDate}),/*#__PURE__*/_jsx(\"td\",{children:tt.journeyToDate}),/*#__PURE__*/_jsx(\"td\",{children:tt.journeyStationFrom}),/*#__PURE__*/_jsx(\"td\",{children:tt.journeyStationTo}),/*#__PURE__*/_jsx(\"td\",{children:tt.transactionId})]},tt.cdaoNo);})]})}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"h1\",{class:\"text-blue-600\",align:\"center\",children:[\"Reference ID Details for the Cancelled Transaction\",\" \"]}),/*#__PURE__*/_jsx(\"table\",{class:\"table-bordered w-full\",children:/*#__PURE__*/_jsxs(\"thead\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"CDAO_No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Advance_Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Journey_Start_Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Journey_End_Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Journey_Station_From\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Journey_Station_To\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Reference_Id/Reference_Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cancellation_charges/Cancellation_ground/Cancellation_remarks\"})]}),dtsData&&dtsData.map(function(tr){return/*#__PURE__*/_jsxs(\"tr\",{class:\"bg-green-50 border text-left\",children:[/*#__PURE__*/_jsx(\"td\",{children:tr.cdaoNo}),/*#__PURE__*/_jsx(\"td\",{children:tr.demandType}),/*#__PURE__*/_jsx(\"td\",{children:tr.refAmount}),/*#__PURE__*/_jsx(\"td\",{children:tr.journeyFromDate}),/*#__PURE__*/_jsx(\"td\",{children:tr.journeyToDate}),/*#__PURE__*/_jsx(\"td\",{children:tr.journeyStationFrom}),/*#__PURE__*/_jsx(\"td\",{children:tr.journeyStationTo}),/*#__PURE__*/_jsxs(\"td\",{children:[\"Reference_Id:\",tr.referenceId,/*#__PURE__*/_jsx(\"br\",{}),\"Reference_Amount:\",tr.referenceAmount]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"Cancellation_charges:\",tr.cancellationCharges,/*#__PURE__*/_jsx(\"br\",{}),\"Cancellation_ground:\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"font-extrabold text-blue-600\",children:tr.cancellationGround}),/*#__PURE__*/_jsx(\"br\",{}),\"Cancellation_remarks:\",tr.cancellationRemarks,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-blue-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\" Select Mode Of Recovery:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:tr.cancellationGround===\"Official\"&&/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"loss\",checked:dts===\"loss\",onChange:handleLossChange}),\" \",\"Loss To Government Exchequer\"]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:\"recover\",checked:dts===\"recover\",onChange:handleRecoverChange}),\" \",\"Recovery From Pay Of The Officer\"]})})]})]})]},tr.cdaoNo);})]})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"reset\",onClick:resetRadioState})})}),/*#__PURE__*/_jsxs(\"div\",{align:\"center\",children:[\" \",status!=null&&status.includes(\"audSubmit\")&&/*#__PURE__*/_jsxs(\"button\",{className:\"w-16 m-0 p-0 bg-red-500 hover:bg-red-700 \",onClick:function onClick(){return submitManDts(refId);},children:[\" \",\"Submit\",\" \"]})]})]})})});};export default withRouter(ManualDtsSettlementOption);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/ManualDtsSettlementOption.js"],"names":["useState","useEffect","useRef","withRouter","useParams","useHistory","useForm","axios","yup","yupResolver","LiveSearch","DatePicker","addDays","Tabs","Tab","schema","object","employee","required","ManualDtsSettlementOption","resolver","register","handleSubmit","errors","formState","clearErrors","id","console","log","history","serverErrors","setServerErrors","entity","setEntity","state","setState","loading","setLoading","value","setValue","action","setAction","dtsData","setDtsData","dts","setDts","status","setStatus","refId","setRefId","option","setOption","isCancelled","fetching","unmounted","fetchData","record","get","then","response","data","dtsIdForReference","catch","error","Error","fields","forEach","field","prev","onSubmit","event","preventDefault","put","push","onError","e","errorCallback","err","handleLossChange","target","handleRecoverChange","resetRadioState","submitManDts","map","tt","cdaoNo","demandType","transAmount","journeyFromDate","journeyToDate","journeyStationFrom","journeyStationTo","transactionId","tr","refAmount","referenceId","referenceAmount","cancellationCharges","cancellationGround","cancellationRemarks","includes"],"mappings":"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","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By :\n */\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\n\nimport axios from \"axios\";\nimport * as yup from \"yup\";\n\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport LiveSearch from \"../utils/LiveSearch\";\n\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport addDays from \"date-fns/addDays\";\n\nimport Tabs from \"react-bootstrap/Tabs\";\nimport Tab from \"react-bootstrap/Tab\";\n\nconst schema = yup.object({\n  employee: yup.object().required(\"Required\"),\n  //\tdemandDate:yup.date().required('Required'),\n});\n\nconst ManualDtsSettlementOption = () => {\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    clearErrors,\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  let { id } = useParams();\n  console.log(\">>>>>>>>>>Dts Reference Id---:\" + id);\n\n  let history = useHistory();\n\n  const [serverErrors, setServerErrors] = useState([]);\n  const [entity, setEntity] = useState({});\n  const [state, setState] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [value, setValue] = useState(\"\");\n\n  const [action, setAction] = useState(\"\");\n  const [dtsData, setDtsData] = useState([]);\n  const [dts, setDts] = useState(false);\n  const [status, setStatus] = useState(\"\");\n  const [refId, setRefId] = useState(0);\n  const [option, setOption] = useState(\"\");\n\n  useEffect(() => {\n    let isCancelled = false;\n    let fetching = false;\n    let unmounted = false;\n    async function fetchData() {\n      let record = \"\";\n      console.log(\">>>>>>>>>>Dts Reference Id before call ---:\" + id);\n\n      await axios\n        .get(`/demandRegisters/manualDtsSettlementOption/${id}`)\n        .then((response) => {\n          console.log(\">>>>> Data DTS----:\" + response.data[0].status);\n          console.log(\n            \">>>>> Data DTS-Id For Ref---:\" + response.data[0].dtsIdForReference\n          );\n          setRefId(response.data[0].dtsIdForReference);\n          setStatus(response.data[0].status);\n          setDtsData(response.data);\n        })\n        .catch((error) => {\n          //console.log(error);\n          //console.log(error.response.status);\n          //console.log(error.response.headers);\n          if (error.response) setServerErrors(error.response.data.error);\n          else setServerErrors(error.Error);\n        });\n\n      const fields = [\"dtsLossToGovt\", \"dtsRecoveryFromPay\"];\n      fields.forEach((field) => setValue(field, record[field]));\n      if (!isCancelled) {\n        setEntity(record);\n\n        setState((prev) => ({ ...prev, state: record }));\n      }\n    }\n\n    fetchData();\n    return () => {\n      fetching = true;\n      unmounted = true;\n    };\n  }, [id]);\n\n  const onSubmit = (data, event) => {\n    event.preventDefault();\n    console.log(\"777777777:\" + data);\n    if (data.id) {\n      axios\n        .put(\"/demandRegisters/manualDtsSettle/\" + data.id, data)\n        .then((response) => {\n          history.push(\"/manualDtsSettlement\");\n        })\n        .catch((error) => {\n          //console.log(error.response.data);\n          //console.log(\"response--------\"+error.response.status);\n\n          setServerErrors(error.response.data[\"reason\"]);\n        });\n    }\n  };\n\n  const onError = (errors, e) => console.log(errors, e);\n\n  const errorCallback = (err) => {\n    //console.log(err);\n    setServerErrors(err);\n  };\n\n  const handleLossChange = (event) => {\n    console.log(\">>>>>>>Loss to Govt----:\" + event.target.value);\n    setDts(event.target.value);\n    if (event.target.value === \"loss\") setValue(\"dtsLossToGovt\", true);\n    setOption(\"loss\");\n  };\n\n  const handleRecoverChange = (event) => {\n    setDts(event.target.value);\n    setValue(\"dtsRecoveryFromPay\", event.target.value);\n    setOption(\"recover\");\n  };\n\n  const resetRadioState = () => {\n    setDts(\"\");\n  };\n\n  async function submitManDts(refId) {\n    console.log(\">>>>>>Option id is---:\" + refId);\n    await axios\n      .put(`/demandRegisters/submitDts/${refId}/${option}/manualDtsSettle`)\n\n      .then((response) => {\n        console.log(\"response from controller\");\n        //let updatedRecords = [...data].filter((i) => i.id !== id);\n        //\tconsole.log(updatedRecords);\n        //setData(updatedRecords);\n        //setUpdate(!update);\n        history.push(\"/manualDtsSettlement\");\n        //history.push(\"/cbillTadaLtcs\");\n      })\n      .catch((error) => {\n        console.log(error);\n        //console.log(error.response.status);\n        //console.log(error.response.headers);\n        if (error.response) setServerErrors(error.response.data.error);\n        else setServerErrors(error.Error);\n      });\n  }\n  /*\tasync function approveManDts(id) {\n\t\tawait axios.put(`/demandRegisters/${id}/approveManualDts`)\n\t\t\t.then((response) => {\n\t\t\t\t//console.log(data);\n\t\t\t\t//let updatedRecords = [...data].filter((i) => i.id !== id);\n\t\t\t\t//console.log(updatedRecords);\n\t\t\t\t//setData(updatedRecords);\n\t\t\t\t//setUpdate(!update);\n\t\t\t\thistory.push({ pathname: '/manualDtsSettlement', state: response.data });\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.log(error);\n\t\t\t\t//console.log(error.response.status);\n\t\t\t\t//console.log(error.response.headers);\n\t\t\t\tif (error.response)\n\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\telse\n\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t});\n\t}*/\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 text-gray-900\">\n      <div className=\"max-w-10xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\">\n        <form onSubmit={handleSubmit(onSubmit, onError)}>\n          <div className=\"container\">\n            <h1 class=\"text-blue-600\" align=\"center\">\n              Transaction ID Details for corresponding Reference ID{\" \"}\n            </h1>\n            <table className=\"table table-striped table-bordered\">\n              <thead>\n                <tr>\n                  <th>CDAO_No</th>\n                  <th>Advance_Type</th>\n                  <th>Amount</th>\n                  <th>Journey_Start_Date</th>\n                  <th>Journey_End_Date</th>\n                  <th>Journey_Station_From</th>\n                  <th>Journey_Station_To</th>\n                  <th>Transaction_Id</th>\n                </tr>\n                {dtsData &&\n                  dtsData.map((tt) => (\n                    <tr key={tt.cdaoNo}>\n                      <td>{tt.cdaoNo}</td>\n                      <td>{tt.demandType}</td>\n                      <td>{tt.transAmount}</td>\n                      <td>{tt.journeyFromDate}</td>\n                      <td>{tt.journeyToDate}</td>\n                      <td>{tt.journeyStationFrom}</td>\n                      <td>{tt.journeyStationTo}</td>\n                      <td>{tt.transactionId}</td>\n                    </tr>\n                  ))}\n              </thead>\n            </table>\n            <br />\n          </div>\n\n          <div className=\"container\">\n            <h1 class=\"text-blue-600\" align=\"center\">\n              Reference ID Details for the Cancelled Transaction{\" \"}\n            </h1>\n\n            <table class=\"table-bordered w-full\">\n              <thead>\n                <tr>\n                  <th>CDAO_No</th>\n                  <th>Advance_Type</th>\n                  <th>Amount</th>\n                  <th>Journey_Start_Date</th>\n                  <th>Journey_End_Date</th>\n                  <th>Journey_Station_From</th>\n                  <th>Journey_Station_To</th>\n                  <th>Reference_Id/Reference_Amount</th>\n                  <th>\n                    Cancellation_charges/Cancellation_ground/Cancellation_remarks\n                  </th>\n                </tr>\n                {dtsData &&\n                  dtsData.map((tr) => (\n                    <tr key={tr.cdaoNo} class=\"bg-green-50 border text-left\">\n                      <td>{tr.cdaoNo}</td>\n                      <td>{tr.demandType}</td>\n                      <td>{tr.refAmount}</td>\n                      <td>{tr.journeyFromDate}</td>\n                      <td>{tr.journeyToDate}</td>\n                      <td>{tr.journeyStationFrom}</td>\n                      <td>{tr.journeyStationTo}</td>\n                      <td>\n                        Reference_Id:{tr.referenceId}\n                        <br />\n                        Reference_Amount:{tr.referenceAmount}\n                      </td>\n                      <td>\n                        Cancellation_charges:{tr.cancellationCharges}\n                        <br />\n                        Cancellation_ground:{\" \"}\n                        <span className=\"font-extrabold text-blue-600\">\n                          {tr.cancellationGround}\n                        </span>\n                        <br />\n                        Cancellation_remarks:{tr.cancellationRemarks}\n                        <br />\n                        <br />\n                        <div className=\"text-blue-600\">\n                          <strong> Select Mode Of Recovery:</strong>\n                          <br />\n                          <br />\n                          <div>\n                            {tr.cancellationGround === \"Official\" && (\n                              <label>\n                                <input\n                                  type=\"radio\"\n                                  value=\"loss\"\n                                  checked={dts === \"loss\"}\n                                  onChange={handleLossChange}\n                                />{\" \"}\n                                Loss To Government Exchequer\n                              </label>\n                            )}\n                          </div>\n                          <br />\n                          <br />\n\n                          <div>\n                            <label>\n                              <input\n                                type=\"radio\"\n                                value=\"recover\"\n                                checked={dts === \"recover\"}\n                                onChange={handleRecoverChange}\n                              />{\" \"}\n                              Recovery From Pay Of The Officer\n                            </label>\n                          </div>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n              </thead>\n            </table>\n          </div>\n\n          <br />\n          <br />\n          <div>\n            {/* <strong> Select Mode Of Recovery:</strong>\n            <br />\n            <br />\n            <div>\n              <label>\n                <input\n                  type=\"radio\"\n                  value=\"loss\"\n                  checked={dts === \"loss\"}\n                  onChange={handleLossChange}\n                />{\" \"}\n                Loss To Government Exchequer\n              </label>\n            </div>\n            <br />\n            <br />\n\n            <div>\n              <label>\n                <input\n                  type=\"radio\"\n                  value=\"recover\"\n                  checked={dts === \"recover\"}\n                  onChange={handleRecoverChange}\n                />{\" \"}\n                Recovery From Pay Of The Officer\n              </label>\n            </div> */}\n\n            <div>\n              <button type=\"reset\" onClick={resetRadioState} />\n            </div>\n          </div>\n          <div align=\"center\">\n            {\" \"}\n            {status != null && status.includes(\"audSubmit\") && (\n              <button\n                className=\"w-16 m-0 p-0 bg-red-500 hover:bg-red-700 \"\n                onClick={() => submitManDts(refId)}\n              >\n                {\" \"}\n                Submit{\" \"}\n              </button>\n            )}\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(ManualDtsSettlementOption);\n"]},"metadata":{},"sourceType":"module"}