{"ast":null,"code":"var _jsxFileName = \"/home/itsdcsec/falconws/falcon_face/src/components/LetterList.js\";\nimport { useState, useEffect, useMemo, useCallback } from \"react\";\nimport Table, { SelectColumnFilter } from \"../utils/Table\"; //\n\nimport axios from \"axios\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport useDebouncedSearch from \"../utils/useDebouncedSearch\";\nimport { set } from \"lodash\";\nimport { BasicLoadingIcon } from \"../utils/Icons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction LetterList() {\n  const [data, setData] = useState([]);\n  const [update, setUpdate] = useState(false);\n  const [serverErrors, setServerErrors] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [ssUser, setSSUser] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [user, setUser] = useState();\n  const [inputText, setInputText] = useState(\"\");\n  useEffect(() => {\n    const controller = new AbortController();\n\n    async function fetchData() {\n      setLoading(true);\n\n      try {\n        const response = await axios.get(\"/letters?search=\" + search, {\n          signal: controller.signal\n        });\n        setData(response.data);\n      } catch (error) {\n        console.log(error.Error);\n        if (error.response) setServerErrors(error.response.status + \" -- \" + error.response.statusText + \". Please Contact EDP\");\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchData();\n    return () => {\n      controller.abort();\n    };\n  }, [update, search]);\n  useEffect(() => {\n    function isSSUser() {\n      let usr = JSON.parse(sessionStorage.getItem(\"usr\"));\n      setUser(usr);\n\n      if ((usr === null || usr === void 0 ? void 0 : usr.usrName) === \"SysAdmin\") {\n        setSSUser(true);\n      } else {\n        var _usr$sectionList;\n\n        usr === null || usr === void 0 ? void 0 : (_usr$sectionList = usr.sectionList) === null || _usr$sectionList === void 0 ? void 0 : _usr$sectionList.forEach(section => {\n          if (section.sectionName === \"LWSSAUDIT\" || section.sectionName === \"TSS\") {\n            setSSUser(true);\n          }\n        });\n      }\n    }\n\n    isSSUser();\n  }, []);\n  const columns = useMemo(() => [{\n    Header: \"Action\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [row.original.recordStatus === \"V\" ? /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/letter/\" + row.original.id,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"rounded-full h-10  w-20 m-1 p-0 \",\n          children: [\" \", \"Review\", \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }, this) : \"\", row.original.recordStatus != \"V\" ? /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/letter/\" + row.original.id,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"rounded-full h-7  w-20 m-1 p-0 \",\n          children: [\" \", \"Edit\", \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 15\n      }, this) : \"\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }, this)\n  }, {\n    Header: \"Section\",\n    accessor: \"section.sectionName\",\n    Filter: SelectColumnFilter\n  }, {\n    Header: \"Task\",\n    accessor: \"taskNo\",\n    Filter: SelectColumnFilter\n  }, {\n    Header: \"Cdao No\",\n    accessor: \"cdaoNo\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [row.original.cdaoNo, row.original.checkDigit]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }, this)\n  }, {\n    Header: \"Name\",\n    accessor: \"employee.officerName\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [row.original.employee.rank.rankName, \" \", row.original.employee.officerName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }, this)\n  }, {\n    Header: \"Letter Date\",\n    accessor: \"letterDate\"\n  }, {\n    Header: \"Subject\",\n    accessor: \"subject\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"break-normal whitespace-normal w-96 text-sm \",\n        children: row.original.subject\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }, this)\n  }, {\n    Header: \"Submitted By\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-sm text-gray-900\",\n      children: row.original.reason\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }, this)\n  }], [data]);\n\n  const handleKeyPress = event => {\n    if (event.keyCode === 13 || event.which === 13) {\n      setSearch(inputText);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-full max-h-full  text-gray-900\",\n    children: /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-full mx-auto px-4 sm:px-6 lg:px-8 pt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 \",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"-ml-4 mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-2xl font-semibold \",\n            children: \"Letter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), serverErrors ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-2xl text-red-500 font-semibold pb-2\",\n            children: serverErrors\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 15\n          }, this) : \"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flexContainer\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"search\",\n              placeholder: \"CDAO No, Name, Subject\",\n              onChange: e => setInputText(e.target.value),\n              onKeyDown: handleKeyPress,\n              className: \"pl-2 -ml-6 inputField flex-initial rounded-full mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              onClick: () => setSearch(inputText),\n              className: \"w-16 m-0 p-0 rounded-full\",\n              children: \"Search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/letterProcessed\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \" w-36 ml-4 p-0 h-6 -mt-2 bg-red-500 rounded-full\",\n                children: [\" \", \"Processed Letter\", \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-semibold text-blue-500\",\n              children: [\"Total Pending Letters : \", data.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center items-center fixed top-1/4 w-full z-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mr-2 text-2xl text-green-600\",\n          children: \"Fetching Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(BasicLoadingIcon, {\n          className: \"ml-1 mt-1 h-10 w-10 animate-spin text-green-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 max-h-1\",\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          columns: columns,\n          data: data //maxWidth=\"60VW\"\n          //tableHeading=\"Pending Grievances\"\n          ,\n          className: \"table-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 5\n  }, this);\n}\n\nexport default withRouter(LetterList);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/LetterList.js"],"names":["useState","useEffect","useMemo","useCallback","Table","SelectColumnFilter","axios","withRouter","Link","useDebouncedSearch","set","BasicLoadingIcon","LetterList","data","setData","update","setUpdate","serverErrors","setServerErrors","search","setSearch","ssUser","setSSUser","loading","setLoading","user","setUser","inputText","setInputText","controller","AbortController","fetchData","response","get","signal","error","console","log","Error","status","statusText","abort","isSSUser","usr","JSON","parse","sessionStorage","getItem","usrName","sectionList","forEach","section","sectionName","columns","Header","Cell","row","original","recordStatus","id","accessor","Filter","cdaoNo","checkDigit","employee","rank","rankName","officerName","subject","reason","handleKeyPress","event","keyCode","which","e","target","value","length"],"mappings":"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","sourcesContent":["import { useState, useEffect, useMemo, useCallback } from \"react\";\nimport Table, { SelectColumnFilter } from \"../utils/Table\"; //\nimport axios from \"axios\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport useDebouncedSearch from \"../utils/useDebouncedSearch\";\nimport { set } from \"lodash\";\nimport { BasicLoadingIcon } from \"../utils/Icons\";\n\nfunction LetterList() {\n  const [data, setData] = useState([]);\n  const [update, setUpdate] = useState(false);\n  const [serverErrors, setServerErrors] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [ssUser, setSSUser] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [user, setUser] = useState();\n  const [inputText, setInputText] = useState(\"\");\n\n  useEffect(() => {\n    const controller = new AbortController();\n    async function fetchData() {\n      setLoading(true);\n      try {\n        const response = await axios.get(\"/letters?search=\" + search, {\n          signal: controller.signal,\n        });\n        setData(response.data);\n      } catch (error) {\n        console.log(error.Error);\n        if (error.response)\n          setServerErrors(\n            error.response.status +\n              \" -- \" +\n              error.response.statusText +\n              \". Please Contact EDP\"\n          );\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchData();\n    return () => {\n      controller.abort();\n    };\n  }, [update, search]);\n\n  useEffect(() => {\n    function isSSUser() {\n      let usr = JSON.parse(sessionStorage.getItem(\"usr\"));\n      setUser(usr);\n      if (usr?.usrName === \"SysAdmin\") {\n        setSSUser(true);\n      } else {\n        usr?.sectionList?.forEach((section) => {\n          if (\n            section.sectionName === \"LWSSAUDIT\" ||\n            section.sectionName === \"TSS\"\n          ) {\n            setSSUser(true);\n          }\n        });\n      }\n    }\n    isSSUser();\n  }, []);\n\n  const columns = useMemo(\n    () => [\n      {\n        Header: \"Action\",\n        Cell: ({ row }) => (\n          <div>\n            {row.original.recordStatus === \"V\" ? (\n              <Link to={\"/letter/\" + row.original.id}>\n                <button className=\"rounded-full h-10  w-20 m-1 p-0 \">\n                  {\" \"}\n                  Review{\" \"}\n                </button>\n              </Link>\n            ) : (\n              \"\"\n            )}\n            {row.original.recordStatus != \"V\" ? (\n              <Link to={\"/letter/\" + row.original.id}>\n                <button className=\"rounded-full h-7  w-20 m-1 p-0 \">\n                  {\" \"}\n                  Edit{\" \"}\n                </button>\n              </Link>\n            ) : (\n              \"\"\n            )}\n          </div>\n        ),\n      },\n      {\n        Header: \"Section\",\n        accessor: \"section.sectionName\",\n        Filter: SelectColumnFilter,\n      },\n      {\n        Header: \"Task\",\n        accessor: \"taskNo\",\n        Filter: SelectColumnFilter,\n      },\n\n      {\n        Header: \"Cdao No\",\n        accessor: \"cdaoNo\",\n        Cell: ({ row }) => (\n          <div>\n            <label>\n              {row.original.cdaoNo}\n              {row.original.checkDigit}\n            </label>\n          </div>\n        ),\n      },\n\n      {\n        Header: \"Name\",\n        accessor: \"employee.officerName\",\n        Cell: ({ row }) => (\n          <div>\n            <label>\n              {row.original.employee.rank.rankName}{\" \"}\n              {row.original.employee.officerName}\n            </label>\n          </div>\n        ),\n      },\n\n      {\n        Header: \"Letter Date\",\n        accessor: \"letterDate\",\n      },\n      {\n        Header: \"Subject\",\n        accessor: \"subject\",\n\n        Cell: ({ row }) => (\n          <div>\n            <label className=\"break-normal whitespace-normal w-96 text-sm \">\n              {row.original.subject}\n            </label>\n          </div>\n        ),\n      },\n      {\n        Header: \"Submitted By\",\n        Cell: ({ row }) => (\n          <div className=\"text-sm text-gray-900\">{row.original.reason}</div>\n        ),\n      },\n    ],\n    [data]\n  );\n\n  const handleKeyPress = (event) => {\n    if (event.keyCode === 13 || event.which === 13) {\n      setSearch(inputText);\n    }\n  };\n\n  return (\n    <div className=\"min-h-full max-h-full  text-gray-900\">\n      <main className=\"max-w-full mx-auto px-4 sm:px-6 lg:px-8 pt-4\">\n        <div className=\"mt-2 \">\n          <div className=\"-ml-4 mb-2\">\n            <h1 className=\"text-2xl font-semibold \">Letter</h1>\n            {serverErrors ? (\n              <p className=\"text-2xl text-red-500 font-semibold pb-2\">\n                {serverErrors}\n              </p>\n            ) : (\n              \"\"\n            )}\n          </div>\n          <div className=\"flexContainer\">\n            <div>\n              <input\n                type=\"text\"\n                name=\"search\"\n                placeholder=\"CDAO No, Name, Subject\"\n                onChange={(e) => setInputText(e.target.value)}\n                onKeyDown={handleKeyPress}\n                className=\"pl-2 -ml-6 inputField flex-initial rounded-full mr-2\"\n              />\n              <button\n                type=\"submit\"\n                onClick={() => setSearch(inputText)}\n                className=\"w-16 m-0 p-0 rounded-full\"\n              >\n                Search\n              </button>\n            </div>\n            <div>\n              <Link to={\"/letterProcessed\"}>\n                <button className=\" w-36 ml-4 p-0 h-6 -mt-2 bg-red-500 rounded-full\">\n                  {\" \"}\n                  Processed Letter{\" \"}\n                </button>\n              </Link>\n            </div>\n            <div>\n              <p className=\"font-semibold text-blue-500\">\n                Total Pending Letters : {data.length}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {loading ? (\n          <div className=\"flex justify-center items-center fixed top-1/4 w-full z-50\">\n            <p className=\"mr-2 text-2xl text-green-600\">Fetching Data</p>\n            <BasicLoadingIcon className=\"ml-1 mt-1 h-10 w-10 animate-spin text-green-600\" />\n          </div>\n        ) : (\n          <div className=\"mt-2 max-h-1\">\n            <Table\n              columns={columns}\n              data={data}\n              //maxWidth=\"60VW\"\n              //tableHeading=\"Pending Grievances\"\n              className=\"table-auto\"\n            />\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n\nexport default withRouter(LetterList);\n"]},"metadata":{},"sourceType":"module"}