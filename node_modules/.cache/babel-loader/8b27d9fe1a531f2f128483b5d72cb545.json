{"ast":null,"code":"import _regeneratorRuntime from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import{withRouter}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DtsRailCredit=function DtsRailCredit(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),serverErrors=_useState2[0],setServerErrors=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),me=_useState4[0],setMe=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),disabled=_useState6[0],setDisabled=_useState6[1];var handleInputChange=function handleInputChange(e){console.log(e.target.value);setMe(e.target.value);};var dtsRailCredit=function dtsRailCredit(){setDisabled(true);function generateCsv(){return _generateCsv.apply(this,arguments);}function _generateCsv(){_generateCsv=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:axios.get(\"/dtsRailTransactions/dtsRailCredit/download?me=\".concat(me)).then(function(response){setDisabled(false);console.log(response.data);window.open(\"\".concat(process.env.REACT_APP_BASE_URL,\"/files/\").concat(response.data));}).catch(function(error){if(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 1:case\"end\":return _context.stop();}}},_callee);}));return _generateCsv.apply(this,arguments);}generateCsv();};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 text-gray-900\",style:disabled?{pointerEvents:\"none\",opacity:\"0.4\"}:{},children:/*#__PURE__*/_jsx(\"main\",{className:\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\" \",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold ml-4\",children:\"Download DTS Credit Csv\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"flexContainer mt-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"search\",placeholder:\"Month(mm/yyyy)\",onChange:function onChange(e){return handleInputChange(e);},className:\"pl-2 ml-2 inputField flex-initial\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:dtsRailCredit,className:\"w-32 m-0 p-0\",children:\"Generate\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:/*#__PURE__*/_jsx(\"i\",{children:\"**Utility for EDP only\"})})]})})});};export default withRouter(DtsRailCredit);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/DtsRailCredit.js"],"names":["useState","withRouter","axios","DtsRailCredit","serverErrors","setServerErrors","me","setMe","disabled","setDisabled","handleInputChange","e","console","log","target","value","dtsRailCredit","generateCsv","get","then","response","data","window","open","process","env","REACT_APP_BASE_URL","catch","error","Error","pointerEvents","opacity"],"mappings":"2cAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,eACcH,QAAQ,CAAC,EAAD,CADtB,wCACnBI,YADmB,eACLC,eADK,8BAGNL,QAAQ,CAAC,EAAD,CAHF,yCAGnBM,EAHmB,eAGfC,KAHe,8BAKMP,QAAQ,CAAC,KAAD,CALd,yCAKnBQ,QALmB,eAKTC,WALS,eAO1B,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,CAAD,CAAO,CAC/BC,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,MAAF,CAASC,KAArB,EACAR,KAAK,CAACI,CAAC,CAACG,MAAF,CAASC,KAAV,CAAL,CACD,CAHD,CAKA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC1BP,WAAW,CAAC,IAAD,CAAX,CAD0B,QAEXQ,CAAAA,WAFW,2IAE1B,mIACEf,KAAK,CACFgB,GADH,0DACyDZ,EADzD,GAEGa,IAFH,CAEQ,SAACC,QAAD,CAAc,CAClBX,WAAW,CAAC,KAAD,CAAX,CACAG,OAAO,CAACC,GAAR,CAAYO,QAAQ,CAACC,IAArB,EACAC,MAAM,CAACC,IAAP,WACKC,OAAO,CAACC,GAAR,CAAYC,kBADjB,mBAC6CN,QAAQ,CAACC,IADtD,GAGD,CARH,EASGM,KATH,CASS,SAACC,KAAD,CAAW,CAChB,GAAIA,KAAK,CAACR,QAAV,CAAoBf,eAAe,CAACuB,KAAK,CAACR,QAAN,CAAeC,IAAf,CAAoBO,KAArB,CAAf,CAApB,IACKvB,CAAAA,eAAe,CAACuB,KAAK,CAACC,KAAP,CAAf,CACN,CAZH,EADF,sDAF0B,8CAiB1BZ,WAAW,GACZ,CAlBD,CAoBA,mBACE,YACE,SAAS,CAAC,wCADZ,CAEE,KAAK,CAAET,QAAQ,CAAG,CAAEsB,aAAa,CAAE,MAAjB,CAAyBC,OAAO,CAAE,KAAlC,CAAH,CAA+C,EAFhE,uBAIE,aAAM,SAAS,CAAC,6CAAhB,uBACE,aAAK,SAAS,CAAC,GAAf,wBACE,WAAI,SAAS,CAAC,4BAAd,qCADF,cAEJ,aAFI,cAGE,aAAK,SAAS,CAAC,oBAAf,wBACE,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,QAFP,CAGE,WAAW,CAAC,gBAHd,CAIE,QAAQ,CAAE,kBAACpB,CAAD,QAAOD,CAAAA,iBAAiB,CAACC,CAAD,CAAxB,EAJZ,CAKE,SAAS,CAAC,mCALZ,EADF,cAQE,eACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAEK,aAFX,CAGE,SAAS,CAAC,cAHZ,sBARF,GAHF,cAmBE,YAAK,SAAS,CAAC,cAAf,uBAA8B,6CAA9B,EAnBF,GADF,EAJF,EADF,CA8BD,CA9DD,CAgEA,cAAef,CAAAA,UAAU,CAACE,aAAD,CAAzB","sourcesContent":["import { useState } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport axios from \"axios\";\n\nconst DtsRailCredit = () => {\n  const [serverErrors, setServerErrors] = useState([]);\n\n  const [me, setMe] = useState(\"\");\n\n  const [disabled, setDisabled] = useState(false);\n\n  const handleInputChange = (e) => {\n    console.log(e.target.value);\n    setMe(e.target.value);\n  };\n\n  const dtsRailCredit = () => {\n    setDisabled(true);\n    async function generateCsv() {\n      axios\n        .get(`/dtsRailTransactions/dtsRailCredit/download?me=${me}`)\n        .then((response) => {\n          setDisabled(false);\n          console.log(response.data);\n          window.open(\n            `${process.env.REACT_APP_BASE_URL}/files/${response.data}`\n          );\n        })\n        .catch((error) => {\n          if (error.response) setServerErrors(error.response.data.error);\n          else setServerErrors(error.Error);\n        });\n    }\n    generateCsv();\n  };\n\n  return (\n    <div\n      className=\"min-h-screen bg-gray-100 text-gray-900\"\n      style={disabled ? { pointerEvents: \"none\", opacity: \"0.4\" } : {}}\n    >\n      <main className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\">\n        <div className=\" \">\n          <h1 className=\"text-xl font-semibold ml-4\">Download DTS Credit Csv</h1>\n\t\t  <hr/>\n          <div className=\"flexContainer mt-2\">\n            <input\n              type=\"text\"\n              name=\"search\"\n              placeholder=\"Month(mm/yyyy)\"\n              onChange={(e) => handleInputChange(e)}\n              className=\"pl-2 ml-2 inputField flex-initial\"\n            />\n            <button\n              type=\"submit\"\n              onClick={dtsRailCredit}\n              className=\"w-32 m-0 p-0\"\n            >\n              Generate\n            </button>\n          </div>\n          <div className=\"text-red-500\"><i>**Utility for EDP only</i></div>\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default withRouter(DtsRailCredit);\n"]},"metadata":{},"sourceType":"module"}