{"ast":null,"code":"var _jsxFileName = \"/home/itsdc3/Imp Tulip files/falconws160424/falconws/falcon_face/src/components/CbillTadaLtcSectionTransfer.js\";\nimport axios from \"axios\";\nimport { useState, useEffect, useMemo } from \"react\";\nimport Table, { SelectColumnFilter } from \"../utils/Table\";\nimport Modal from \"../utils/Modal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CbillTadaLtcSectionTransfer = () => {\n  var _loggedInUsr$designat;\n\n  const [search, setSearch] = useState(\"\");\n  const [inputText, setInputText] = useState(\"\");\n  const [loggedInUsr, setLoggedInUsr] = useState({});\n  const [responseText, setResponseText] = useState(\"\");\n  const [bills, setBills] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [update, setUpdate] = useState(false);\n  useEffect(() => {\n    setLoggedInUsr(JSON.parse(sessionStorage.getItem(\"usr\")));\n  }, []);\n  useEffect(() => {\n    async function fetchData() {\n      setLoading(true);\n\n      try {\n        const response = await axios.get(\"/cbillTadaLtcs/transfer?search=\" + search);\n        console.log(response.data);\n        setBills(response.data);\n      } catch (error) {\n        console.log(error.response);\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    if (search && search != \"\") fetchData();\n    return () => {};\n  }, [update, search]);\n\n  const handleSubmit = () => {\n    setSearch(inputText);\n  };\n\n  const handleKeyPress = event => {\n    if (event.keyCode === 13 || event.which === 13) {\n      handleSubmit(event);\n    }\n  };\n\n  const handleBillTransfer = async id => {\n    try {\n      const response = await axios.put(`/cbillTadaLtcs/transfer/${id}`);\n      setResponseText(response.data);\n      setShowModal(true);\n    } catch (error) {\n      console.log(error.response);\n      setResponseText(error.response.data);\n      setShowModal(true);\n    } finally {}\n  };\n\n  const columns = useMemo(() => [{\n    Header: \"Action\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"w-44 m-0 p-1 bg-red-500 hover:bg-red-700 \",\n        onClick: () => handleBillTransfer(row.original.id),\n        children: row.original.section.sectionName === \"T-COURSE\" ? \"Transfer To Section\" : \"Transfer to T-Course\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }, this)\n  }, {\n    Header: \"Dak\",\n    accessor: \"dak.dakidNo\",\n    //Filter: SelectColumnFilter,\n    filter: \"includes\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"m-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Dak : \", row.original.dak.dakidNo]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Sec : \", row.original.section.sectionName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Task : \", row.original.taskNo]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }, this)\n  }, {\n    Header: \"Bill Type\",\n    accessor: \"billType.description\",\n    // Filter: SelectColumnFilter,\n    filter: \"billType\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"DakType : \", row.original.dak.dakType.description]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: row.original.billType && /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Bill Type : \", row.original.billType.description]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }, this)\n  }, {\n    Header: \"Officer Name\",\n    accessor: \"employee.cdaoNo\",\n    // Filter: SelectColumnFilter,\n    filter: \"includes\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: row.original.employee !== null && /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [row.original.employee.rank.rankName, \" \", row.original.employee.officerName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: row.original.employee !== null && /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\" \", row.original.employee.cdaoNo, row.original.employee.checkDigit]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }, this)\n  }, {\n    Header: \"Amount Claimed\",\n    accessor: \"amountClaimed\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: row.original.amountClaimed\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }, this)\n  }], [bills]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen  text-gray-900\",\n    children: [/*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-green-500 underline text-center\",\n        children: [\"T- Course \", `<==>`, \" Section Bill Transfer\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), (loggedInUsr === null || loggedInUsr === void 0 ? void 0 : (_loggedInUsr$designat = loggedInUsr.designation) === null || _loggedInUsr$designat === void 0 ? void 0 : _loggedInUsr$designat.designationLevel) >= 30 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"-ml-2 mr-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"search\",\n            placeholder: \"CDAO No,Dak Id No\",\n            onChange: e => setInputText(e.target.value),\n            onKeyPress: handleKeyPress,\n            className: \"pl-2 -ml-2 inputField flex-initial\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            onClick: handleSubmit,\n            className: \"w-16 ml-1 mt-0 p-0\",\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 13\n        }, this), bills.length > 0 ? /*#__PURE__*/_jsxDEV(Table, {\n          data: bills,\n          columns: columns\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 33\n        }, this) : \"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-red-500 text-center my-8\",\n          children: [\" \", \"Bill Transfer Facility is available only to AAO / AO /SAO.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col justify-center items-center \",\n      children: showModal && /*#__PURE__*/_jsxDEV(Modal, {\n        setOpenModal: setShowModal,\n        heading: responseText,\n        onContinueClick: () => {\n          setShowModal(false);\n          setUpdate(value => !value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 5\n  }, this);\n};\n\nexport default CbillTadaLtcSectionTransfer;","map":{"version":3,"sources":["/home/itsdc3/Imp Tulip files/falconws160424/falconws/falcon_face/src/components/CbillTadaLtcSectionTransfer.js"],"names":["axios","useState","useEffect","useMemo","Table","SelectColumnFilter","Modal","CbillTadaLtcSectionTransfer","search","setSearch","inputText","setInputText","loggedInUsr","setLoggedInUsr","responseText","setResponseText","bills","setBills","loading","setLoading","showModal","setShowModal","update","setUpdate","JSON","parse","sessionStorage","getItem","fetchData","response","get","console","log","data","error","handleSubmit","handleKeyPress","event","keyCode","which","handleBillTransfer","id","put","columns","Header","Cell","row","original","section","sectionName","accessor","filter","dak","dakidNo","taskNo","dakType","description","billType","employee","rank","rankName","officerName","cdaoNo","checkDigit","amountClaimed","designation","designationLevel","e","target","value","length"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { useState, useEffect, useMemo } from \"react\";\nimport Table, { SelectColumnFilter } from \"../utils/Table\";\nimport Modal from \"../utils/Modal\";\n\nconst CbillTadaLtcSectionTransfer = () => {\n  const [search, setSearch] = useState(\"\");\n  const [inputText, setInputText] = useState(\"\");\n  const [loggedInUsr, setLoggedInUsr] = useState({});\n  const [responseText, setResponseText] = useState(\"\");\n  const [bills, setBills] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [update, setUpdate] = useState(false);\n\n  useEffect(() => {\n    setLoggedInUsr(JSON.parse(sessionStorage.getItem(\"usr\")));\n  }, []);\n\n  useEffect(() => {\n    async function fetchData() {\n      setLoading(true);\n      try {\n        const response = await axios.get(\n          \"/cbillTadaLtcs/transfer?search=\" + search\n        );\n        console.log(response.data);\n        setBills(response.data);\n      } catch (error) {\n        console.log(error.response);\n      } finally {\n        setLoading(false);\n      }\n    }\n    if (search && search != \"\") fetchData();\n\n    return () => {};\n  }, [update, search]);\n\n  const handleSubmit = () => {\n    setSearch(inputText);\n  };\n\n  const handleKeyPress = (event) => {\n    if (event.keyCode === 13 || event.which === 13) {\n      handleSubmit(event);\n    }\n  };\n\n  const handleBillTransfer = async (id) => {\n    try {\n      const response = await axios.put(`/cbillTadaLtcs/transfer/${id}`);\n      setResponseText(response.data);\n      setShowModal(true);\n    } catch (error) {\n      console.log(error.response);\n      setResponseText(error.response.data);\n      setShowModal(true);\n    } finally {\n    }\n  };\n\n  const columns = useMemo(\n    () => [\n      {\n        Header: \"Action\",\n        Cell: ({ row }) => (\n          <div>\n            <button\n              className=\"w-44 m-0 p-1 bg-red-500 hover:bg-red-700 \"\n              onClick={() => handleBillTransfer(row.original.id)}\n            >\n              {row.original.section.sectionName === \"T-COURSE\"\n                ? \"Transfer To Section\"\n                : \"Transfer to T-Course\"}\n            </button>\n          </div>\n        ),\n      },\n\n      {\n        Header: \"Dak\",\n        accessor: \"dak.dakidNo\",\n        //Filter: SelectColumnFilter,\n        filter: \"includes\",\n        Cell: ({ row }) => (\n          <div className=\"m-0\">\n            <div>\n              <label>Dak : {row.original.dak.dakidNo}</label>\n            </div>\n            <div>\n              <label>Sec : {row.original.section.sectionName}</label>\n            </div>\n            <div>\n              <label>Task : {row.original.taskNo}</label>\n            </div>\n          </div>\n        ),\n      },\n\n      {\n        Header: \"Bill Type\",\n        accessor: \"billType.description\",\n        // Filter: SelectColumnFilter,\n        filter: \"billType\",\n        Cell: ({ row }) => (\n          <div>\n            <div>\n              <label>DakType : {row.original.dak.dakType.description}</label>\n            </div>\n            <div>\n              {row.original.billType && (\n                <label>Bill Type : {row.original.billType.description}</label>\n              )}\n            </div>\n          </div>\n        ),\n      },\n\n      {\n        Header: \"Officer Name\",\n        accessor: \"employee.cdaoNo\",\n        // Filter: SelectColumnFilter,\n        filter: \"includes\",\n        Cell: ({ row }) => (\n          <div>\n            <div>\n              {row.original.employee !== null && (\n                <label>\n                  {row.original.employee.rank.rankName}{\" \"}\n                  {row.original.employee.officerName}\n                </label>\n              )}\n            </div>\n            <div>\n              {row.original.employee !== null && (\n                <label>\n                  {\" \"}\n                  {row.original.employee.cdaoNo}\n                  {row.original.employee.checkDigit}\n                </label>\n              )}\n            </div>\n          </div>\n        ),\n      },\n\n      {\n        Header: \"Amount Claimed\",\n        accessor: \"amountClaimed\",\n        Cell: ({ row }) => (\n          <div>\n            <div>\n              <label>{row.original.amountClaimed}</label>\n            </div>\n          </div>\n        ),\n      },\n    ],\n    [bills]\n  );\n\n  return (\n    <div className=\"min-h-screen  text-gray-900\">\n      <main className=\"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\">\n        <h1 className=\"text-green-500 underline text-center\">\n          T- Course {`<==>`} Section Bill Transfer\n        </h1>\n\n        {loggedInUsr?.designation?.designationLevel >= 30 ? (\n          <div>\n            <div className=\"-ml-2 mr-2\">\n              <input\n                type=\"text\"\n                name=\"search\"\n                placeholder=\"CDAO No,Dak Id No\"\n                onChange={(e) => setInputText(e.target.value)}\n                onKeyPress={handleKeyPress}\n                className=\"pl-2 -ml-2 inputField flex-initial\"\n              />\n              <button\n                type=\"submit\"\n                onClick={handleSubmit}\n                className=\"w-16 ml-1 mt-0 p-0\"\n              >\n                Search\n              </button>\n            </div>\n            {bills.length > 0 ? <Table data={bills} columns={columns} /> : \"\"}\n          </div>\n        ) : (\n          <div>\n            <h1 className=\"text-red-500 text-center my-8\">\n              {\" \"}\n              Bill Transfer Facility is available only to AAO / AO /SAO.\n            </h1>\n          </div>\n        )}\n      </main>\n      <div className=\"flex flex-col justify-center items-center \">\n        {showModal && (\n          <Modal\n            setOpenModal={setShowModal}\n            heading={responseText}\n            onContinueClick={() => {\n              setShowModal(false);\n              setUpdate((value) => !value);\n            }}\n          ></Modal>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CbillTadaLtcSectionTransfer;\n"]},"metadata":{},"sourceType":"module"}