{"ast":null,"code":"import _regeneratorRuntime from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 18 April 2022\n *\n * Modified By : \n */import{useState,useEffect,useMemo}from'react';import Table,{SelectColumnFilter}from'../utils/Table';// \nimport axios from\"axios\";import{format}from'date-fns';import{withRouter,Link}from\"react-router-dom\";import{Modal,Button}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function AuditCageList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),update=_useState4[0],setUpdate=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),serverErrors=_useState6[0],setServerErrors=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],setSearch=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),inputText=_useState10[0],setInputText=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),desc=_useState12[0],setDesc=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),descSearch=_useState14[0],setDescSearch=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),loading=_useState16[0],setLoading=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),acaList=_useState18[0],setAcaList=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),showModal=_useState20[0],setShowModal=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),modalHeading=_useState22[0],setModalHeading=_useState22[1];useEffect(function(){var fetching=false;function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(fetching){_context.next=3;break;}_context.next=3;return axios.get('/auditCages?search='+search+'&desc='+descSearch).then(function(response){console.log(response.data);setData(response.data);//setLoading(false);\n}).catch(function(error){//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 3:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();return function(){fetching=true;};},[update,search,descSearch]);function viewAllowance(_x){return _viewAllowance.apply(this,arguments);}function _viewAllowance(){_viewAllowance=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"/auditCages/auditCageAllowances/\".concat(id)).then(function(res){console.log(res.data);if(res.data){setAcaList(res.data);setShowModal(true);}}).catch(function(error){console.log(error);//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _viewAllowance.apply(this,arguments);}var ShowAca=function ShowAca(){return/*#__PURE__*/_jsx(\"div\",{className:\"-mt-2 max-h-0 py-0 ml-0\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-bordered\",children:[/*#__PURE__*/_jsxs(\"thead\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Desc\"}),/*#__PURE__*/_jsx(\"th\",{children:\"From Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PayCode\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amt\"})]}),/*#__PURE__*/_jsx(\"tbody\",{children:acaList&&acaList.map(function(aca,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:aca.do2.occurrenceCode}),/*#__PURE__*/_jsx(\"td\",{children:aca.auditCage&&aca.auditCage.fromDate&&format(new Date(aca.auditCage.fromDate.toString()),'dd/MM/yyyy')}),/*#__PURE__*/_jsx(\"td\",{children:aca.payCode.payCode}),/*#__PURE__*/_jsx(\"td\",{children:aca.amount})]},aca.id);})})]})});};var columns=useMemo(function(){return[{Header:'Action',Cell:function Cell(_ref){var row=_ref.row;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"w-18 m-0 p-0 bg-red-500 hover:bg-red-700 \",onClick:function onClick(){return viewAllowance(row.original.id);},children:\" Allowance  \"})});}},{Header:\"Officer\",accessor:'cdaono',Cell:function Cell(_ref2){var row=_ref2.row;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[row.original.cdaono,/*#__PURE__*/_jsx(\"br\",{}),row.original.officerName]})});}},{Header:\"Do2\",accessor:'occurrencecode'// Change this\n},{Header:\"Qe\",accessor:'qe'},{Header:\"From Date\",accessor:'fromdate',Cell:function Cell(_ref3){var row=_ref3.row;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"label\",{children:row.original.fromdate!==null&&format(new Date(row.original.fromdate.toString()),'dd/MM/yyyy')})})});}},{Header:\"To Date\",accessor:'todate',Cell:function Cell(_ref4){var row=_ref4.row;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"label\",{children:row.original.todate!==null&&format(new Date(row.original.todate.toString()),'dd/MM/yyyy')})})});}},{Header:\"Basic Pay\",accessor:'basicpay'},{Header:\"Pay Level\",accessor:'paylevel'},{Header:\"Dp\",accessor:'dp'},{Header:\"Grade Pay\",accessor:'gradepay'},{Header:\"Ms Pay\",accessor:'mspay'},{Header:\"Da\",accessor:'da'},{Header:\"Transport\",accessor:'tpta'},{Header:\"Pay Stopped\",accessor:'absentflag',Cell:function Cell(_ref5){var row=_ref5.row;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:row.original.absentflag&&row.original.absentflag===true?'Y':'N'})});}},{Header:\"Deputation Flag\",accessor:'deputationflag',Cell:function Cell(_ref6){var row=_ref6.row;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:row.original.deputationflag&&row.original.deputationflag===true?'Y':'N'})});}},{Header:\"Old Basic Pay\",accessor:'oldbasicpay'},{Header:\"Record Status\",accessor:'recordstatus'},{Header:\"Effective\",accessor:'effective',Cell:function Cell(_ref7){var row=_ref7.row;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:row.original.effective&&row.original.effective===true?'Y':'N'})});}},{Header:\"Old Grade Pay\",accessor:'oldgradepay'}/*\n\t\t{\n\t\t\tHeader: \"Login Name\",\n\t\t\taccessor: 'loginName',\n\t\t\tFilter: SelectColumnFilter,  // new\n\t\t\tfilter: 'includes',\n\t\t},\n\t\t*/];},[data]);var handleSubmit=function handleSubmit(event){event.preventDefault();console.log(inputText);setSearch(inputText);setDescSearch(desc);};var handleKeyPress=function handleKeyPress(event){// look for the `Enter` keyCode\nif(event.keyCode===13||event.which===13){handleSubmit(event);}};var initModal=function initModal(){setShowModal(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 text-gray-900\",children:/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 ml-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold\",children:\"Audit Cages\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flexContainer\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"search\",placeholder:\"army no\",onChange:function onChange(e){return setInputText(e.target.value);},onKeyPress:handleKeyPress,className:\"pl-2 -ml-2 inputField flex-initial\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"descSearch\",placeholder:\"desc\",onChange:function onChange(e){return setDesc(e.target.value);},onKeyPress:handleKeyPress,className:\"pl-2 -ml-2 inputField flex-initial\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handleSubmit,className:\"w-16 m-0 p-0\",children:\"Search\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"-mt-2 max-h-1 py-0\",children:[loading&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})})}),/*#__PURE__*/_jsx(Table,{columns:columns,data:data,className:\"table-auto\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col justify-center items-center \",children:showModal&&/*#__PURE__*/_jsxs(Modal,{show:showModal,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,onClick:initModal,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Allowances\"})}),/*#__PURE__*/_jsx(Modal.Body,{className:\"modal-body\",children:/*#__PURE__*/_jsx(ShowAca,{})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:initModal,children:\"Close\"})})]})})]})});}export default withRouter(AuditCageList);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/AuditCageList.js"],"names":["useState","useEffect","useMemo","Table","SelectColumnFilter","axios","format","withRouter","Link","Modal","Button","AuditCageList","data","setData","update","setUpdate","serverErrors","setServerErrors","search","setSearch","inputText","setInputText","desc","setDesc","descSearch","setDescSearch","loading","setLoading","acaList","setAcaList","showModal","setShowModal","modalHeading","setModalHeading","fetching","fetchData","get","then","response","console","log","catch","error","Error","viewAllowance","id","res","ShowAca","map","aca","index","do2","occurrenceCode","auditCage","fromDate","Date","toString","payCode","amount","columns","Header","Cell","row","original","accessor","cdaono","officerName","fromdate","todate","absentflag","deputationflag","effective","handleSubmit","event","preventDefault","handleKeyPress","keyCode","which","initModal","e","target","value"],"mappings":"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","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 18 April 2022\n *\n * Modified By : \n */\n\nimport { useState, useEffect, useMemo } from 'react';\nimport Table, { SelectColumnFilter } from '../utils/Table'  // \nimport axios from \"axios\";\nimport { format } from 'date-fns'\nimport { withRouter, Link } from \"react-router-dom\";\nimport {Modal,Button} from 'react-bootstrap';\n \nfunction AuditCageList() {\n\n\tconst [data, setData] = useState([]);\n\tconst [update, setUpdate] = useState(false);\n\tconst [serverErrors, setServerErrors] = useState([]);\n\tconst [search, setSearch] = useState(\"\");\n\tconst [inputText, setInputText] = useState('');\n\tconst [desc,setDesc]=useState('');\n\tconst [descSearch,setDescSearch]=useState('');\n\tconst [loading,setLoading]=useState(false);\n\tconst [acaList,setAcaList]=useState([]);\n\tconst [showModal, setShowModal] = useState(false);\n\t\tconst [modalHeading, setModalHeading] = useState('');\n\n\n\tuseEffect(() => {\n\t\t \n\t\tlet fetching = false;\n\t\tasync function fetchData() {\n\t\t\tif(!fetching)\n\t\t\tawait axios.get('/auditCages?search='+search+'&desc='+descSearch)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tconsole.log(response.data);\n\t\t\t\t\tsetData(response.data);\n\t\t\t\t\t//setLoading(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\t//console.log(error);\n\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\tif (error.response)\n\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\telse\n\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t})\n\t\t}\n\t\tfetchData();\n\t\treturn () => { fetching = true; }\n\n\t}, [update, search,descSearch]);\n\n\n\t async function viewAllowance(id) {\n\t\tawait axios.get(`/auditCages/auditCageAllowances/${id}`)\n\t\t\t.then((res) => {\n\t\t\t\tconsole.log(res.data);\n\t\t\t\tif(res.data){\n\t\t\t\t\tsetAcaList(res.data);\n\t\t\t\t\tsetShowModal(true);\n\t\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.log(error);\n\t\t\t\t//console.log(error.response.status);\n\t\t\t\t//console.log(error.response.headers);\n\t\t\t\tif (error.response)\n\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\telse\n\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t});\n\t}\n\n\tconst ShowAca=()=>{\n\t\t \n\n\t\treturn (\n\t\t \n\t\t\t \n\t\t\t\t<div className=\"-mt-2 max-h-0 py-0 ml-0\">\n\t\t\t\t\t<table className=\"table table-striped table-bordered\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t  \n\t\t\t\t\t<th>Desc</th>\n\t\t\t\t\t<th>From Date</th>\n\t\t\t\t\t<th>PayCode</th>\n\t\t\t\t\t<th>Amt</th>\n\t\t\t\t\t \n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t {acaList && acaList.map((aca,index) => (\n                               <tr key={aca.id}>\n                               \n                                 <td>{aca.do2.occurrenceCode}</td>\n                                  <td>{aca.auditCage && aca.auditCage.fromDate && format(new Date(aca.auditCage.fromDate.toString()),'dd/MM/yyyy')}</td>\n                                 <td>{aca.payCode.payCode}</td>\n                                 <td>{aca.amount}</td>\n                                  \n                                 \n                               </tr>\n                             ))}\n\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t \n\n\t\t \n\t\t);\n\t}\n\n\tconst columns = useMemo(() => [\n\t\t\n\t\t{\n\t\t\tHeader: 'Action',\n\t\t\t\n\t\t\tCell: ({ row }) => (\n\t\t\t\t<div>\n\t\t\t\t\t \n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"w-18 m-0 p-0 bg-red-500 hover:bg-red-700 \"\n\t\t\t\t\t\tonClick={() => viewAllowance(row.original.id)}\n\t\t\t\t\t>\tAllowance \t</button>\n\t\t\t\t</div>\n\t\t\t)\n\t\t},\n\t\t{\n\t\t\tHeader: \"Officer\",\n\t\t\taccessor: 'cdaono',\n\t\t\tCell: ({ row }) => (\n\t\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t{row.original.cdaono}<br/>\n\t\t\t\t{row.original.officerName}\n\t\t\t\t\t \n\t\t\t\t  \n\t\t\t\t </div>\n\t\t\t\t   \n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t)\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Do2\",\n\t\t\taccessor: 'occurrencecode',// Change this\n\t\t},\n\t\t{\n\t\t\tHeader: \"Qe\",\n\t\t\taccessor: 'qe',\n\t\t},\n\t\t{\n\t\t\tHeader: \"From Date\",\n\t\t\taccessor: 'fromdate',\n\t\t\tCell: ({ row }) => (\n\t\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t<label>{row.original.fromdate!==null && format(new Date(row.original.fromdate.toString()),'dd/MM/yyyy')}</label>\n\t\t\t\t </div>\n\t\t\t\t   \n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t)\n\t\t\t \n\t\t\t\n\t\t},\n\t\t{\n\t\t\tHeader: \"To Date\",\n\t\t\taccessor: 'todate',\n\t\t\tCell: ({ row }) => (\n\t\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t<label>{row.original.todate!==null && format(new Date(row.original.todate.toString()),'dd/MM/yyyy')}</label>\n\t\t\t\t </div>\n\t\t\t\t   \n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t)\n\t\t\t \n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Basic Pay\",\n\t\t\taccessor: 'basicpay',\n\t\t},\n\t\t{\n\t\t\tHeader: \"Pay Level\",\n\t\t\taccessor: 'paylevel',\n\t\t},\n\t\t{\n\t\t\tHeader: \"Dp\",\n\t\t\taccessor: 'dp',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Grade Pay\",\n\t\t\taccessor: 'gradepay',\n\t\t},\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t{\n\t\t\tHeader: \"Ms Pay\",\n\t\t\taccessor: 'mspay',\n\t\t},\n\t\t\n\t\t \n\t\t\n\t\t{\n\t\t\tHeader: \"Da\",\n\t\t\taccessor: 'da',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Transport\",\n\t\t\taccessor: 'tpta',\n\t\t},\n\t\t\n\t\t \n\t\t{\n\t\t\tHeader: \"Pay Stopped\",\n\t\t\taccessor: 'absentflag',\n\t\t\t\tCell: ({ row }) => (\n\t\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t{(row.original.absentflag && row.original.absentflag===true)? 'Y':'N'}\n\t\t\t\t </div>\n\t\t\t\t   \n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t)\n\t\t},\n\t\t{\n\t\t\tHeader: \"Deputation Flag\",\n\t\t\taccessor: 'deputationflag',\n\t\t\t\n\t\t\t\tCell: ({ row }) => (\n\t\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t{(row.original.deputationflag && row.original.deputationflag===true)? 'Y':'N'}\n\t\t\t\t </div>\n\t\t\t\t   \n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t)\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Old Basic Pay\",\n\t\t\taccessor: 'oldbasicpay',\n\t\t},\n\t\t\n\t\t \n\t\t\n\t\t\n\t\t{\n\t\t\tHeader: \"Record Status\",\n\t\t\taccessor: 'recordstatus',\n\t\t},\n\t\t\n\t\t \n\t\t\n\t\t \n\t\t\n\t\t \n\t\t{\n\t\t\tHeader: \"Effective\",\n\t\t\taccessor: 'effective',\n\t\t\t\n\t\t\t\tCell: ({ row }) => (\n\t\t\t\t<div>\n\t\t\t\t<div>\n\t\t\t\t{(row.original.effective && row.original.effective===true)? 'Y':'N'}\n\t\t\t\t </div>\n\t\t\t\t   \n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t)\n\t\t},\n\t\t \n\t\t\n\t\t{\n\t\t\tHeader: \"Old Grade Pay\",\n\t\t\taccessor: 'oldgradepay',\n\t\t},\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t/*\n\t\t{\n\t\t\tHeader: \"Login Name\",\n\t\t\taccessor: 'loginName',\n\t\t\tFilter: SelectColumnFilter,  // new\n\t\t\tfilter: 'includes',\n\t\t},\n\t\t*/\n\t], [data])\n\n\tconst handleSubmit = (event) => {\n\t\tevent.preventDefault();\n\t\tconsole.log(inputText);\n\t\tsetSearch(inputText);\n\t\tsetDescSearch(desc);\n\t}\n\n\tconst handleKeyPress = (event) => {\n\t\t// look for the `Enter` keyCode\n\t\tif (event.keyCode === 13 || event.which === 13) {\n\t\t\thandleSubmit(event)\n\t\t}\n\t}\n\tconst initModal=()=>{\n\t\t \n\t\t\tsetShowModal(false);\n\t\t \n\t}\n\n\treturn (\n\t\t<div className=\"min-h-screen bg-gray-100 text-gray-900\">\n\t\t<main className=\"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\">\n\t\t\t\t<div className=\"mt-2 ml-4\">\n\t\t\t\t\t<h1 className=\"text-xl font-semibold\">Audit Cages</h1>\n\t\t\t\t\t<div className=\"flexContainer\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input type=\"text\" name=\"search\" placeholder=\"army no\" \n\t\t\t\t\t\tonChange={e => setInputText(e.target.value)}\n\t\t\t\t\t\t\tonKeyPress={handleKeyPress}\n\t\t\t\t\t\t\tclassName=\"pl-2 -ml-2 inputField flex-initial\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t<input type=\"text\" name=\"descSearch\" placeholder=\"desc\" \n\t\t\t\t\t\tonChange={e => setDesc(e.target.value)}\n\t\t\t\t\t\t\tonKeyPress={handleKeyPress}\n\t\t\t\t\t\t\tclassName=\"pl-2 -ml-2 inputField flex-initial\" />\n\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t<button type=\"submit\" onClick={handleSubmit} className=\"w-16 m-0 p-0\">Search</button>\n\t\t\t\t\t\t \n\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div className=\"-mt-2 max-h-1 py-0\">\n\t\t\t\t {loading && <>\n\t\t\t\t\t\t \n\t\t\t\t\t\t <div className=\"flex justify-center items-center\">\n  <div className=\"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full\" role=\"status\">\n    <span className=\"visually-hidden\">Loading...</span>\n  </div>\n</div>\n\t\t\t\t\t\t</>\t\n\t\t\t\t\t\t}\n\t\t\t\t\t<Table columns={columns} data={data} className=\"table-auto\" />\n\t\t\t\t</div>\n\t\t\t\t <div className=\"flex flex-col justify-center items-center \">\n          {showModal && (\n            <Modal show={showModal}>\n            <Modal.Header closeButton onClick={initModal}>\n            <Modal.Title>Allowances</Modal.Title>\n            </Modal.Header>\n            <Modal.Body  className=\"modal-body\"><ShowAca/></Modal.Body>\n            <Modal.Footer><Button variant=\"danger\" onClick={initModal}>Close</Button></Modal.Footer>\n            \t\n            </Modal>\n          )}\n        </div>\n\t\t\t</main>\n\t\t</div>\n\t);\n}\n\nexport default withRouter(AuditCageList);\n\n"]},"metadata":{},"sourceType":"module"}