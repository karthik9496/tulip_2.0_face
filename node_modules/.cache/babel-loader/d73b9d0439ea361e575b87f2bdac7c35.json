{"ast":null,"code":"import _objectSpread from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By : \n */import{useState,useEffect}from\"react\";import{withRouter,useParams,useHistory}from\"react-router-dom\";import{useForm}from\"react-hook-form\";import axios from'axios';import*as yup from\"yup\";import{yupResolver}from'@hookform/resolvers/yup';import Tabs from'react-bootstrap/Tabs';import Tab from'react-bootstrap/Tab';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var schema=yup.object({currentPassword:yup.string().test('Current Password Given','Current Password is required',function(value){console.log(value);if(typeof value==='undefined')return true;//Field not displayed. So, valid.\nreturn value;}),password:yup.string().required('Password is required'),passwordConfirmation:yup.string().test('passwords-match','Passwords must match',function(value){//console.log(yup.ref('password'));\n//console.log(value);\n//console.log(this);\nreturn this.parent.password===value;})//recordStatus: yup.string().required('Required'),\n});var PasswordEdit=function PasswordEdit(){var _errors$currentPasswo,_errors$password,_errors$passwordConfi;var _useForm=useForm({resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,errors=_useForm.formState.errors,clearErrors=_useForm.clearErrors;var _useParams=useParams(),id=_useParams.id;console.log(id);var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),serverErrors=_useState2[0],setServerErrors=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),entity=_useState4[0],setEntity=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),state=_useState6[0],setState=_useState6[1];var _useState7=useState('page1'),_useState8=_slicedToArray(_useState7,2),key=_useState8[0],setKey=_useState8[1];var onSubmit=function onSubmit(data,event){event.preventDefault();console.log(data);//console.log(errors);\naxios.put(\"/usrs/\".concat(id,\"/password\"),data).then(function(response){if(response.status!==200){setServerErrors(response.data);history.push(\"/usrs\");}else if(response.status==200){setServerErrors(response.data);}}).catch(function(error){//console.log(error.response.data);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nsetServerErrors(error.response.data);});};var onError=function onError(errors,e){console.log(errors,e);};return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-xl mx-auto \",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full w-3/4  mx-auto \",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit,onError),children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Change Password \"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:serverErrors}),/*#__PURE__*/_jsxs(Tabs,{id:\"RolEdit\",activeKey:key,onSelect:function onSelect(k){return setKey(k);},className:\"mb-3\",children:[/*#__PURE__*/_jsx(Tab,{eventKey:\"page1\",title:\"Page 1\",className:\"h-120\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-0\",children:[id==='self'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-2 pb-0 \",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Current Password\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"password\",name:\"currentPassword\"},register(\"currentPassword\")),{},{className:\"form-control py-0 \"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$currentPasswo=errors.currentPassword)===null||_errors$currentPasswo===void 0?void 0:_errors$currentPasswo.message})]}),/*#__PURE__*/_jsx(\"div\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-2 pb-0 \",children:[/*#__PURE__*/_jsx(\"label\",{children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"password\",name:\"password\"},register(\"password\")),{},{className:\"form-control py-0 \"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Retype New Password\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"password\",name:\"passwordConfirmation\"},register(\"passwordConfirmation\")),{},{className:\"form-control py-0 \"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$passwordConfi=errors.passwordConfirmation)===null||_errors$passwordConfi===void 0?void 0:_errors$passwordConfi.message})]})]})}),/*#__PURE__*/_jsx(Tab,{eventKey:\"help\",title:\"Help\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Passwords should be strong - combination of upper case, lower case, digits and special characters.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Should be at least 8 characters \"}),/*#__PURE__*/_jsx(\"li\",{children:\"Passwords should be easy to remember but difficult to guess.\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save\"})})]})})});};export default withRouter(PasswordEdit);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/PasswordEdit.js"],"names":["useState","useEffect","withRouter","useParams","useHistory","useForm","axios","yup","yupResolver","Tabs","Tab","schema","object","currentPassword","string","test","value","console","log","password","required","passwordConfirmation","parent","PasswordEdit","resolver","register","handleSubmit","setValue","errors","formState","clearErrors","id","history","serverErrors","setServerErrors","entity","setEntity","state","setState","key","setKey","onSubmit","data","event","preventDefault","put","then","response","status","push","catch","error","onError","e","k","message"],"mappings":"mTAAA;AACA;AACA;AACA;AACA;AACA;AACA,GAEA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,UAAT,CAAqBC,SAArB,CAAgCC,UAAhC,KAAkD,kBAAlD,CACA,OAASC,OAAT,KAAwB,iBAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,KAArB,CAEA,OAASC,WAAT,KAA4B,yBAA5B,CAGA,MAAOC,CAAAA,IAAP,KAAiB,sBAAjB,CACA,MAAOC,CAAAA,GAAP,KAAgB,qBAAhB,C,6IAEA,GAAMC,CAAAA,MAAM,CAAGJ,GAAG,CAACK,MAAJ,CAAW,CAEzBC,eAAe,CAAEN,GAAG,CAACO,MAAJ,GAAaC,IAAb,CAAkB,wBAAlB,CAA4C,8BAA5C,CAA4E,SAASC,KAAT,CAAe,CAC3GC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACA,GAAG,MAAOA,CAAAA,KAAP,GAAiB,WAApB,CACC,MAAO,KAAP,CAAa;AACd,MAAOA,CAAAA,KAAP,CACA,CALgB,CAFQ,CASzBG,QAAQ,CAAEZ,GAAG,CAACO,MAAJ,GAAaM,QAAb,CAAsB,sBAAtB,CATe,CAUzBC,oBAAoB,CAAEd,GAAG,CAACO,MAAJ,GAAaC,IAAb,CAAkB,iBAAlB,CAAqC,sBAArC,CAA6D,SAASC,KAAT,CAAgB,CAClG;AACA;AACA;AACA,MAAO,MAAKM,MAAL,CAAYH,QAAZ,GAAyBH,KAAhC,CACA,CALqB,CAMtB;AAhByB,CAAX,CAAf,CAoBA,GAAMO,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,+EACuDlB,OAAO,CAAC,CACxFmB,QAAQ,CAAEhB,WAAW,CAACG,MAAD,CADmE,CAAD,CAD9D,CAClBc,QADkB,UAClBA,QADkB,CACRC,YADQ,UACRA,YADQ,CACMC,QADN,UACMA,QADN,CAC6BC,MAD7B,UACgBC,SADhB,CAC6BD,MAD7B,CACuCE,WADvC,UACuCA,WADvC,gBAKb3B,SAAS,EALI,CAKpB4B,EALoB,YAKpBA,EALoB,CAM1Bd,OAAO,CAACC,GAAR,CAAYa,EAAZ,EAEA,GAAIC,CAAAA,OAAO,CAAG5B,UAAU,EAAxB,CAR0B,cAScJ,QAAQ,CAAC,EAAD,CATtB,wCASnBiC,YATmB,eASLC,eATK,8BAUElC,QAAQ,CAAC,EAAD,CAVV,yCAUnBmC,MAVmB,eAUXC,SAVW,8BAWApC,QAAQ,CAAC,EAAD,CAXR,yCAWnBqC,KAXmB,eAWZC,QAXY,8BAYJtC,QAAQ,CAAC,OAAD,CAZJ,yCAYnBuC,GAZmB,eAYdC,MAZc,eAe1B,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,IAAD,CAAOC,KAAP,CAAiB,CACjCA,KAAK,CAACC,cAAN,GACA3B,OAAO,CAACC,GAAR,CAAYwB,IAAZ,EACA;AACApC,KAAK,CAACuC,GAAN,iBAAmBd,EAAnB,cAAkCW,IAAlC,EACEI,IADF,CACO,SAACC,QAAD,CAAc,CACnB,GAAGA,QAAQ,CAACC,MAAT,GAAoB,GAAvB,CAA2B,CAC1Bd,eAAe,CAACa,QAAQ,CAACL,IAAV,CAAf,CACAV,OAAO,CAACiB,IAAR,CAAa,OAAb,EACA,CAHD,IAGM,IAAGF,QAAQ,CAACC,MAAT,EAAiB,GAApB,CAAwB,CAC7Bd,eAAe,CAACa,QAAQ,CAACL,IAAV,CAAf,CACA,CACD,CARF,EASEQ,KATF,CASQ,SAACC,KAAD,CAAW,CACjB;AACA;AACA;AACAjB,eAAe,CAACiB,KAAK,CAACJ,QAAN,CAAeL,IAAhB,CAAf,CACA,CAdF,EAiBA,CArBD,CAuBA,GAAMU,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACxB,MAAD,CAASyB,CAAT,CAAe,CAC9BpC,OAAO,CAACC,GAAR,CAAYU,MAAZ,CAAoByB,CAApB,EACA,CAFD,CAMA,mBACC,YAAK,SAAS,CAAC,mBAAf,uBACC,YAAK,SAAS,CAAC,wBAAf,uBAEC,cAAM,QAAQ,CAAE3B,YAAY,CAACe,QAAD,CAAWW,OAAX,CAA5B,wBACC,wCADD,cAEC,YAAK,SAAS,CAAC,cAAf,UAA+BnB,YAA/B,EAFD,cAGC,MAAC,IAAD,EACC,EAAE,CAAC,SADJ,CAEC,SAAS,CAAEM,GAFZ,CAGC,QAAQ,CAAE,kBAACe,CAAD,QAAOd,CAAAA,MAAM,CAACc,CAAD,CAAb,EAHX,CAIC,SAAS,CAAC,MAJX,wBAMC,KAAC,GAAD,EAAK,QAAQ,CAAC,OAAd,CAAsB,KAAK,CAAC,QAA5B,CAAqC,SAAS,CAAC,OAA/C,uBACC,aAAK,SAAS,CAAC,wBAAf,WAEEvB,EAAE,GAAK,MAAP,eACA,wCACC,aAAK,SAAS,CAAC,YAAf,wBACC,2CADD,cAEC,0CAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,iBAA5B,EAAkDN,QAAQ,CAAC,iBAAD,CAA1D,MACC,SAAS,CAAC,oBADX,GAFD,cAKC,YAAK,SAAS,CAAC,cAAf,iCAA+BG,MAAM,CAACf,eAAtC,gDAA+B,sBAAwB0C,OAAvD,EALD,GADD,cAQC,cARD,GAHF,cAcC,aAAK,SAAS,CAAC,YAAf,wBACC,uCADD,cAEC,0CAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,UAA5B,EAA2C9B,QAAQ,CAAC,UAAD,CAAnD,MACC,SAAS,CAAC,oBADX,GAFD,cAKC,YAAK,SAAS,CAAC,cAAf,4BAA+BG,MAAM,CAACT,QAAtC,2CAA+B,iBAAiBoC,OAAhD,EALD,GAdD,cAsBC,oCACC,8CADD,cAEC,0CAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,sBAA5B,EAAuD9B,QAAQ,CAAC,sBAAD,CAA/D,MACC,SAAS,CAAC,oBADX,GAFD,cAKC,YAAK,SAAS,CAAC,cAAf,iCAA+BG,MAAM,CAACP,oBAAtC,gDAA+B,sBAA6BkC,OAA5D,EALD,GAtBD,GADD,EAND,cAyCC,KAAC,GAAD,EAAK,QAAQ,CAAC,MAAd,CAAqB,KAAK,CAAC,MAA3B,uBACC,YAAI,SAAS,CAAC,WAAd,wBACC,0HADD,cAEC,wDAFD,cAGC,oFAHD,GADD,EAzCD,GAHD,cAqDC,YAAK,SAAS,CAAC,MAAf,uBACC,eAAQ,IAAI,CAAC,QAAb,kBADD,EArDD,GAFD,EADD,EADD,CAiEA,CA7GD,CA+GA,cAAerD,CAAAA,UAAU,CAACqB,YAAD,CAAzB","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By : \n */\n\nimport { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from 'axios';\nimport * as yup from \"yup\";\n\nimport { yupResolver } from '@hookform/resolvers/yup';\n\n\nimport Tabs from 'react-bootstrap/Tabs'\nimport Tab from 'react-bootstrap/Tab'\n\nconst schema = yup.object({\n\t\n\tcurrentPassword: yup.string().test('Current Password Given', 'Current Password is required', function(value){\n\t\tconsole.log(value);\n\t\tif(typeof value === 'undefined')\n\t\t\treturn true; //Field not displayed. So, valid.\n\t\treturn value;\n\t}),\n\t\n\tpassword: yup.string().required('Password is required'),\n\tpasswordConfirmation: yup.string().test('passwords-match', 'Passwords must match', function(value) {\n\t\t//console.log(yup.ref('password'));\n\t\t//console.log(value);\n\t\t//console.log(this);\n\t\treturn this.parent.password === value;\n\t})\n\t//recordStatus: yup.string().required('Required'),\n});\n\n\nconst PasswordEdit = () => {\n\tconst { register, handleSubmit, setValue, formState: { errors }, clearErrors } = useForm({\n\t\tresolver: yupResolver(schema)\n\t});\n\n\tlet { id } = useParams();\n\tconsole.log(id);\n\n\tlet history = useHistory();\n\tconst [serverErrors, setServerErrors] = useState([]);\n\tconst [entity, setEntity] = useState({});\n\tconst [state, setState] = useState({});\n\tconst [key, setKey] = useState('page1');\n\n\n\tconst onSubmit = (data, event) => {\n\t\tevent.preventDefault();\n\t\tconsole.log(data);\n\t\t//console.log(errors);\n\t\taxios.put(`/usrs/${id}/password`, data)\n\t\t\t.then((response) => { \n\t\t\t\tif(response.status !== 200){\n\t\t\t\t\tsetServerErrors(response.data);\n\t\t\t\t\thistory.push(\"/usrs\");\n\t\t\t\t}else if(response.status==200){\n\t\t\t\t\tsetServerErrors(response.data)\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\t//console.log(error.response.data);\n\t\t\t\t//console.log(error.response.status);\n\t\t\t\t//console.log(error.response.headers);\n\t\t\t\tsetServerErrors(error.response.data)\n\t\t\t});\n\n\t\t\n\t}\n\n\tconst onError = (errors, e) => {\n\t\tconsole.log(errors, e);\n\t}\n\n\n\n\treturn (\n\t\t<div className=\"max-w-xl mx-auto \">\n\t\t\t<div className=\"w-full w-3/4  mx-auto \" >\n\n\t\t\t\t<form onSubmit={handleSubmit(onSubmit, onError)}>\n\t\t\t\t\t<h1 >Change Password </h1>\n\t\t\t\t\t<div className=\"text-red-500\">{serverErrors}</div>\n\t\t\t\t\t<Tabs\n\t\t\t\t\t\tid=\"RolEdit\"\n\t\t\t\t\t\tactiveKey={key}\n\t\t\t\t\t\tonSelect={(k) => setKey(k)}\n\t\t\t\t\t\tclassName=\"mb-3\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tab eventKey=\"page1\" title=\"Page 1\" className=\"h-120\">\n\t\t\t\t\t\t\t<div className=\"grid grid-cols-2 gap-0\">\n\n\t\t\t\t\t\t\t\t{id === 'self' &&\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<div className=\"px-2 pb-0 \">\n\t\t\t\t\t\t\t\t\t\t\t<label >Current Password</label>\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"password\" name=\"currentPassword\" {...register(\"currentPassword\")}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0 \"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.currentPassword?.message}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t<div className=\"px-2 pb-0 \">\n\t\t\t\t\t\t\t\t\t<label >New Password</label>\n\t\t\t\t\t\t\t\t\t<input type=\"password\" name=\"password\" {...register(\"password\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0 \"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.password?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div >\n\t\t\t\t\t\t\t\t\t<label >Retype New Password</label>\n\t\t\t\t\t\t\t\t\t<input type=\"password\" name=\"passwordConfirmation\" {...register(\"passwordConfirmation\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0 \"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.passwordConfirmation?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tab>\n\n\n\t\t\t\t\t\t<Tab eventKey=\"help\" title=\"Help\" >\n\t\t\t\t\t\t\t<ul className=\"list-disc\">\n\t\t\t\t\t\t\t\t<li>Passwords should be strong - combination of upper case, lower case, digits and special characters.</li>\n\t\t\t\t\t\t\t\t<li>Should be at least 8 characters </li>\n\t\t\t\t\t\t\t\t<li>Passwords should be easy to remember but difficult to guess.</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</Tab>\n\t\t\t\t\t</Tabs>\n\n\t\t\t\t\t<div className=\"px-4\">\n\t\t\t\t\t\t<button type=\"submit\" >Save</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default withRouter(PasswordEdit);\n\n\n"]},"metadata":{},"sourceType":"module"}