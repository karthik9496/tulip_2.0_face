{"ast":null,"code":"var _jsxFileName = \"/home/itsdcsec/falconReact/falcon_face/src/components/DisallowanceCodeEdit.js\",\n    _s = $RefreshSig$();\n\n/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By :\n */\nimport { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport * as yup from \"yup\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport LiveSearch from \"../utils/LiveSearch\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport addDays from \"date-fns/addDays\";\nimport Tabs from \"react-bootstrap/Tabs\";\nimport Tab from \"react-bootstrap/Tab\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object({\n  // section: yup.object().required('Required'),\n  disallowanceName: yup.string().required(\"Required\") //  module: yup.string().required('Required'),\n  // recordStatus: yup.string().required('Required'),\n  // remarks: yup.string().required('Required'),\n\n});\n\nconst DisallowanceCodeEdit = () => {\n  _s();\n\n  var _errors$disallowanceN, _errors$disallowanceH, _errors$subModule, _errors$remarks;\n\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    formState: {\n      errors\n    },\n    clearErrors\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  let {\n    id\n  } = useParams();\n  let history = useHistory();\n  const [serverErrors, setServerErrors] = useState([]);\n  const [entity, setEntity] = useState({});\n  const [state, setState] = useState({});\n  const [key, setKey] = useState(\"page1\");\n  useEffect(() => {\n    let isCancelled = false;\n    console.log(id);\n\n    if (id !== \"new\") {\n      async function fetchData() {\n        let record = \"\";\n        await axios.get(\"/disallowanceCodes/\" + id).then(response => {\n          record = response.data;\n        }).catch(error => {\n          //console.log(error);\n          //console.log(error.response.status);\n          //console.log(error.response.headers);\n          if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n        });\n        const fields = [\"id\", \"section\", \"disallowanceName\", \"disallowanceHindiName\", \"module\", \"recordStatus\", \"remarks\", \"subModule\"];\n        fields.forEach(field => setValue(field, record[field]));\n\n        if (!isCancelled) {\n          setEntity(record);\n          setState(prev => ({ ...prev,\n            state: record\n          }));\n        }\n      }\n\n      fetchData();\n      return () => {\n        isCancelled = true;\n      };\n    }\n  }, [id, setValue]);\n\n  const onSubmit = (data, event) => {\n    event.preventDefault();\n    console.log(data);\n\n    if (data.id) {\n      axios.put(\"/disallowanceCodes/\" + data.id, data).then(response => {}).catch(error => {\n        //console.log(error.response.data);\n        //console.log(error.response.status);\n        //console.log(error.response.headers);\n        setServerErrors(error.response.data);\n      });\n    } else {\n      axios.post(\"/disallowanceCodes\", data).then(response => {}).catch(error => {\n        //console.log(error.response.data);\n        //console.log(error.response.status);\n        //console.log(error.response.headers);\n        setServerErrors(error.response.data);\n      });\n    }\n\n    history.push(\"/disallowanceCodes\");\n  };\n\n  const onError = (errors, e) => console.log(errors, e); //All foreign keys.\n  // XXXXXX Add search fields and adjust the values as necessary\n\n\n  const parentData = {\n    section: {\n      title: \"Section\",\n      url: \"sections\",\n      searchList: [\"id\"],\n      //XXXXXXXXX Add search fields\n      fkEntity: \"section\",\n      preload: false //XXXXXX Set this to true for small tables like designations\n\n    }\n  }; //Callback for child components (Foreign Keys)\n\n  const callback = childData => {\n    //console.log(\"Parent Callback\");\n    setEntity(prev => ({ ...prev,\n      [childData.fk]: childData.entity\n    }));\n    setValue(childData.fk, childData.entity); //console.log(errors);\n\n    clearErrors(childData.fk);\n  };\n\n  const errorCallback = err => {\n    //console.log(err);\n    setServerErrors(err);\n  };\n\n  const returnToList = () => {\n    history.push(\"/disallowanceCodes\");\n  };\n\n  const handleInputChange = e => {//console.log(e.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-xl mx-auto \",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full w-3/4  mx-auto \",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(onSubmit, onError),\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [id === \"new\" ? \"Add\" : \"Edit\", \" Disallowance Code \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-red-500\",\n          children: serverErrors\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tabs, {\n          id: \"GrievanceEdit\",\n          activeKey: key,\n          onSelect: k => setKey(k),\n          className: \"mb-3\",\n          children: /*#__PURE__*/_jsxDEV(Tab, {\n            eventKey: \"page1\",\n            title: \"Page 1\",\n            className: \"h-120\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 gap-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Disallowance Description\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  type: \"text\",\n                  name: \"disallowanceName\",\n                  ...register(\"disallowanceName\"),\n                  className: \"form-control py-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-red-500\",\n                  children: (_errors$disallowanceN = errors.disallowanceName) === null || _errors$disallowanceN === void 0 ? void 0 : _errors$disallowanceN.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Disallowance Hindi Description\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  type: \"text\",\n                  name: \"disallowanceHindiName\",\n                  ...register(\"disallowanceHindiName\"),\n                  className: \"form-control py-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-red-500\",\n                  children: (_errors$disallowanceH = errors.disallowanceHindiName) === null || _errors$disallowanceH === void 0 ? void 0 : _errors$disallowanceH.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 5\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Disallowance Code\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"subModule\",\n                  ...register(\"subModule\"),\n                  className: \"form-control py-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-red-500\",\n                  children: (_errors$subModule = errors.subModule) === null || _errors$subModule === void 0 ? void 0 : _errors$subModule.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Remarks\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  type: \"text\",\n                  name: \"remarks\",\n                  ...register(\"remarks\"),\n                  className: \"form-control py-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-red-500\",\n                  children: (_errors$remarks = errors.remarks) === null || _errors$remarks === void 0 ? void 0 : _errors$remarks.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-2 gap-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: returnToList,\n            children: \"Done\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 5\n  }, this);\n};\n\n_s(DisallowanceCodeEdit, \"7qpulqYHBCyLPKNM6WpTYayKuiM=\", false, function () {\n  return [useForm, useParams, useHistory];\n});\n\n_c = DisallowanceCodeEdit;\nexport default _c2 = withRouter(DisallowanceCodeEdit);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"DisallowanceCodeEdit\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/itsdcsec/falconReact/falcon_face/src/components/DisallowanceCodeEdit.js"],"names":["useState","useEffect","withRouter","useParams","useHistory","useForm","axios","yup","yupResolver","LiveSearch","DatePicker","addDays","Tabs","Tab","schema","object","disallowanceName","string","required","DisallowanceCodeEdit","register","handleSubmit","setValue","formState","errors","clearErrors","resolver","id","history","serverErrors","setServerErrors","entity","setEntity","state","setState","key","setKey","isCancelled","console","log","fetchData","record","get","then","response","data","catch","error","Error","fields","forEach","field","prev","onSubmit","event","preventDefault","put","post","push","onError","e","parentData","section","title","url","searchList","fkEntity","preload","callback","childData","fk","errorCallback","err","returnToList","handleInputChange","k","message","disallowanceHindiName","subModule","remarks"],"mappings":"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","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By :\n */\n\nimport { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport * as yup from \"yup\";\n\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport LiveSearch from \"../utils/LiveSearch\";\n\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport addDays from \"date-fns/addDays\";\n\nimport Tabs from \"react-bootstrap/Tabs\";\nimport Tab from \"react-bootstrap/Tab\";\n\nconst schema = yup.object({\n  // section: yup.object().required('Required'),\n  disallowanceName: yup.string().required(\"Required\"),\n  //  module: yup.string().required('Required'),\n  // recordStatus: yup.string().required('Required'),\n  // remarks: yup.string().required('Required'),\n});\n\nconst DisallowanceCodeEdit = () => {\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    formState: { errors },\n    clearErrors,\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  let { id } = useParams();\n\n  let history = useHistory();\n  const [serverErrors, setServerErrors] = useState([]);\n  const [entity, setEntity] = useState({});\n  const [state, setState] = useState({});\n  const [key, setKey] = useState(\"page1\");\n\n  useEffect(() => {\n    let isCancelled = false;\n    console.log(id);\n    if (id !== \"new\") {\n      async function fetchData() {\n        let record = \"\";\n        await axios\n          .get(\"/disallowanceCodes/\" + id)\n          .then((response) => {\n            record = response.data;\n          })\n          .catch((error) => {\n            //console.log(error);\n            //console.log(error.response.status);\n            //console.log(error.response.headers);\n            if (error.response) setServerErrors(error.response.data.error);\n            else setServerErrors(error.Error);\n          });\n\n        const fields = [\n          \"id\",\n          \"section\",\n          \"disallowanceName\",\n\t\t  \"disallowanceHindiName\",\n          \"module\",\n          \"recordStatus\",\n          \"remarks\",\n          \"subModule\",\n        ];\n        fields.forEach((field) => setValue(field, record[field]));\n        if (!isCancelled) {\n          setEntity(record);\n          setState((prev) => ({ ...prev, state: record }));\n        }\n      }\n\n      fetchData();\n      return () => {\n        isCancelled = true;\n      };\n    }\n  }, [id, setValue]);\n\n  const onSubmit = (data, event) => {\n    event.preventDefault();\n    console.log(data);\n    if (data.id) {\n      axios\n        .put(\"/disallowanceCodes/\" + data.id, data)\n        .then((response) => {})\n        .catch((error) => {\n          //console.log(error.response.data);\n          //console.log(error.response.status);\n          //console.log(error.response.headers);\n          setServerErrors(error.response.data);\n        });\n    } else {\n      axios\n        .post(\"/disallowanceCodes\", data)\n        .then((response) => {})\n        .catch((error) => {\n          //console.log(error.response.data);\n          //console.log(error.response.status);\n          //console.log(error.response.headers);\n          setServerErrors(error.response.data);\n        });\n    }\n\n    history.push(\"/disallowanceCodes\");\n  };\n\n  const onError = (errors, e) => console.log(errors, e);\n\n  //All foreign keys.\n  // XXXXXX Add search fields and adjust the values as necessary\n  const parentData = {\n    section: {\n      title: \"Section\",\n      url: \"sections\",\n      searchList: [\"id\"], //XXXXXXXXX Add search fields\n      fkEntity: \"section\",\n      preload: false, //XXXXXX Set this to true for small tables like designations\n    },\n  };\n\n  //Callback for child components (Foreign Keys)\n  const callback = (childData) => {\n    //console.log(\"Parent Callback\");\n    setEntity((prev) => ({ ...prev, [childData.fk]: childData.entity }));\n    setValue(childData.fk, childData.entity);\n    //console.log(errors);\n    clearErrors(childData.fk);\n  };\n\n  const errorCallback = (err) => {\n    //console.log(err);\n    setServerErrors(err);\n  };\n  const returnToList = () => {\n    history.push(\"/disallowanceCodes\");\n  };\n\n  const handleInputChange = (e) => {\n    //console.log(e.target.value);\n  };\n\n  return (\n    <div className=\"max-w-xl mx-auto \">\n      <div className=\"w-full w-3/4  mx-auto \">\n        <form onSubmit={handleSubmit(onSubmit, onError)}>\n          <h1>{id === \"new\" ? \"Add\" : \"Edit\"} Disallowance Code </h1>\n          <div className=\"text-red-500\">{serverErrors}</div>\n          <Tabs\n            id=\"GrievanceEdit\"\n            activeKey={key}\n            onSelect={(k) => setKey(k)}\n            className=\"mb-3\"\n          >\n            <Tab eventKey=\"page1\" title=\"Page 1\" className=\"h-120\">\n              <div className=\"grid grid-cols-1 gap-0\">\n                <div>\n                  <label>Disallowance Description</label>\n                  <textarea\n                    type=\"text\"\n                    name=\"disallowanceName\"\n                    {...register(\"disallowanceName\")}\n                    className=\"form-control py-0\"\n                  />\n                  <div className=\"text-red-500\">\n                    {errors.disallowanceName?.message}\n                  </div>\n                </div>\n\n\t\t\t\t<div>\n                  <label>Disallowance Hindi Description</label>\n                  <textarea\n                    type=\"text\"\n                    name=\"disallowanceHindiName\"\n                    {...register(\"disallowanceHindiName\")}\n                    className=\"form-control py-0\"\n                  />\n                  <div className=\"text-red-500\">\n                    {errors.disallowanceHindiName?.message}\n                  </div>\n                </div>\n\n                <div>\n                  <label>Disallowance Code</label>\n                  <input\n                    type=\"text\"\n                    name=\"subModule\"\n                    {...register(\"subModule\")}\n                    className=\"form-control py-0\"\n                  />\n                  <div className=\"text-red-500\">\n                    {errors.subModule?.message}\n                  </div>\n                </div>\n\n                <div>\n                  <label>Remarks</label>\n                  <textarea\n                    type=\"text\"\n                    name=\"remarks\"\n                    {...register(\"remarks\")}\n                    className=\"form-control py-0\"\n                  />\n                  <div className=\"text-red-500\">{errors.remarks?.message}</div>\n                </div>\n              </div>\n            </Tab>\n          </Tabs>\n\n          <div className=\"grid grid-cols-2 gap-0\">\n            <button type=\"submit\">Save</button>\n            <button type=\"button\" onClick={returnToList}>\n              Done\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(DisallowanceCodeEdit);\n"]},"metadata":{},"sourceType":"module"}