{"ast":null,"code":"import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import{withRouter,useParams,useHistory}from\"react-router-dom\";import{useForm}from\"react-hook-form\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DtsVerification=function DtsVerification(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedFile=_useState2[0],setSelectedFile=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),lightTheme=_useState4[0],setLightTheme=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];useEffect(function(){console.log(selectedFile);},[selectedFile,setSelectedFile]);useEffect(function(){if(isLoading){document.getElementById(\"loadingDiv\").style.display=\"block\";document.getElementById(\"uploadFileBtn\").style.display=\"none\";}else{document.getElementById(\"loadingDiv\").style.display=\"none\";document.getElementById(\"uploadFileBtn\").style.display=\"block\";}},[isLoading]);var handleInputChange=function handleInputChange(e){e.preventDefault();console.log(\"abd\",e);setSelectedFile(e.target.files[0]);console.log(selectedFile);};var fileChangeHandler=function fileChangeHandler(){console.log(selectedFile);var formData=new FormData();formData.append(\"file\",selectedFile);setIsLoading(true);//ApiService.upload(formData)\naxios.post(\"/dtsverification/upload/dtsVerification\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"}}).then(function(response){console.log(response.data);setIsLoading(false);alert(\"File uploaded successfully.\");if(response.data[1])window.open(\"\".concat(process.env.REACT_APP_BASE_URL,\"/files/\").concat(response.data[1]));}).catch(function(error){console.log(error.response.data[0]);setIsLoading(false);alert(error.response.data[0]);});};return/*#__PURE__*/_jsx(\"div\",{className:lightTheme?\"theme-light\":\"theme-dark\",children:/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group files color\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Upload DTS csv File \"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control\",name:\"file\",onChange:handleInputChange})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-40\",id:\"uploadFileBtn\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:fileChangeHandler,children:\"Upload\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center\",id:\"loadingDiv\",style:{display:isLoading?\"block\":\"none\"},children:/*#__PURE__*/_jsx(\"div\",{class:\"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{class:\"visually-hidden\",children:\"Loading...\"})})})})]})})});};export default withRouter(DtsVerification);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/Dtsverification.js"],"names":["useState","useEffect","withRouter","useParams","useHistory","useForm","axios","DtsVerification","selectedFile","setSelectedFile","lightTheme","setLightTheme","isLoading","setIsLoading","console","log","document","getElementById","style","display","handleInputChange","e","preventDefault","target","files","fileChangeHandler","formData","FormData","append","post","headers","then","response","data","alert","window","open","process","env","REACT_APP_BASE_URL","catch","error"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\n\nconst DtsVerification = () => {\n  const [selectedFile, setSelectedFile] = useState();\n  const [lightTheme, setLightTheme] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n\n\n  useEffect(() => {\n    console.log(selectedFile);\n  }, [selectedFile, setSelectedFile]);\n\n  useEffect(() => {\n    if(isLoading){\n          document.getElementById(\"loadingDiv\").style.display=\"block\";\n          document.getElementById(\"uploadFileBtn\").style.display=\"none\";\n        }else{\n          document.getElementById(\"loadingDiv\").style.display=\"none\";\n          document.getElementById(\"uploadFileBtn\").style.display=\"block\";\n        }\n\n  },[isLoading])\n\n  const handleInputChange = (e) => {\n    e.preventDefault();\n    console.log(\"abd\", e);\n    setSelectedFile(e.target.files[0]);\n    console.log(selectedFile);\n  };\n\n  const fileChangeHandler = () => {\n    console.log(selectedFile);\n\n    const formData = new FormData();\n    formData.append(\"file\", selectedFile);\n    setIsLoading(true);\n\n    //ApiService.upload(formData)\n    axios\n      .post(\"/dtsverification/upload/dtsVerification\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      })\n      .then((response) => {\n        console.log(response.data);\n        setIsLoading(false);\n        alert(\"File uploaded successfully.\");\n        if(response.data[1])\n          window.open(`${process.env.REACT_APP_BASE_URL}/files/${response.data[1]}`);\n      })\n      .catch((error) => {\n        console.log(error.response.data[0]);\n        setIsLoading(false);\n        alert(error.response.data[0]);\n      });\n  };\n\n  return (\n    <div className={lightTheme ? \"theme-light\" : \"theme-dark\"}>\n      <form>\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-md-6\">\n              <div className=\"form-group files color\">\n                <label>Upload DTS csv File </label>\n                <input\n                  type=\"file\"\n                  className=\"form-control\"\n                  name=\"file\"\n                  onChange={handleInputChange}\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"w-40\" id=\"uploadFileBtn\">\n            <button type=\"button\" onClick={fileChangeHandler}>\n              Upload\n            </button>\n          </div>\n          <div className=\"flex justify-center items-center\" >\n              <div\n                className=\"flex justify-center items-center\" id=\"loadingDiv\"\n                style={{ display: isLoading ? \"block\" : \"none\" }}\n              >\n                <div\n                  class=\"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full\"\n                  role=\"status\"\n                >\n                  <span class=\"visually-hidden\">Loading...</span>\n                </div>\n              </div>\n            </div>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default withRouter(DtsVerification);\n"]},"metadata":{},"sourceType":"module"}