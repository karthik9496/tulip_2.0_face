{"ast":null,"code":"var _jsxFileName = \"/home/itsdcsec/falconReact/falcon_face/src/components/LicDemandTransactionEdit.js\",\n    _s = $RefreshSig$();\n\n/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By : \n */\nimport { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from 'axios';\nimport * as yup from \"yup\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport LiveSearch from '../utils/LiveSearch'; //import DatePicker  from 'react-datepicker';\n//import \"react-datepicker/dist/react-datepicker.css\";\n//import addDays from 'date-fns/addDays'\n\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object({});\n\nconst LicDemandTransactionEdit = () => {\n  _s();\n\n  var _errors$employee, _errors$policyNo, _errors$premiumAmount, _errors$gstOnPremiumA;\n\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    formState: {\n      errors\n    },\n    clearErrors\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  let {\n    id\n  } = useParams();\n  let history = useHistory();\n  const [serverErrors, setServerErrors] = useState([]);\n  const [entity, setEntity] = useState({});\n  const [state, setState] = useState({});\n  const [key, setKey] = useState('page1');\n  const [dakId, setDakId] = useState(0);\n  const [mesg, setMesg] = useState('');\n  const [me, setMe] = useState('');\n  const [dakidNo, setDakidNo] = useState('');\n  useEffect(() => {\n    let isCancelled = false;\n    console.log(id);\n\n    if (id !== 'new') {\n      async function fetchData() {\n        let record = '';\n        await axios.get('/licDemandTransactions/' + id).then(response => {\n          record = response.data;\n          const fields = ['id', 'dak', 'employee', 'cdaoNo', 'checkDigit', 'policyNo', 'premiumAmount', 'premiumDueMe', 'monthEnding', 'auditor', 'aao', 'ao', 'auditorDate', 'aaoDate', 'aoDate', 'approved', 'gstOnPremiumAmount', 'recordStatus', 'reason', 'remarks'];\n          setDakidNo(record.dak.dakidNo);\n          console.log(\">>>>---:\" + dakidNo);\n          fields.forEach(field => setValue(field, record[field]));\n        }).catch(error => {\n          //console.log(error);\n          //console.log(error.response.status);\n          //console.log(error.response.headers);\n          if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n        });\n\n        if (!isCancelled) {\n          setEntity(record);\n          setState(prev => ({ ...prev,\n            state: record\n          }));\n        }\n      }\n\n      fetchData();\n      return () => {\n        isCancelled = true;\n      };\n    }\n  }, []);\n  useEffect(() => {\n    let fetching = false;\n    let unmounted = false;\n\n    async function fetchMe() {\n      if (!fetching) await axios.get(`/licDemandTransactions/licDemand/getCurrentMe`).then(response => {\n        setMe(response.data);\n      }).catch(error => {\n        //console.log(error);\n        //console.log(error.response.status);\n        //console.log(error.response.headers);\n        if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n      });\n    }\n\n    fetchMe();\n    return () => {\n      fetching = true;\n      unmounted = true;\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const onSubmit = (data, event) => {\n    event.preventDefault();\n    console.log(data);\n\n    if (data.id) {\n      axios.put(\"/licDemandTransactions/\" + data.id, data).then(response => {\n        setMesg(response.data);\n      }).catch(error => {\n        console.log(error); //\tconsole.log(error.response.status);\n        //\tconsole.log(error.response.headers);\n\n        if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n      });\n    }\n  };\n\n  const onError = (errors, e) => console.log(errors, e); //All foreign keys. \n  // XXXXXX Add search fields and adjust the values as necessary\n\n\n  const parentData = {\n    dak: {\n      title: \"Dak\",\n      url: \"daks\",\n      searchList: ['id'],\n      //XXXXXXXXX Add search fields\n      fkEntity: \"dak\",\n      preload: false //XXXXXX Set this to true for small tables like designations\n\n    },\n    employee: {\n      title: \"Employee\",\n      url: \"employees/all/effective\",\n      searchList: ['cdaoNo', 'checkDigit', 'officerName'],\n      //XXXXXXXXX Add search fields\n      fkEntity: \"employee\",\n      preload: false //XXXXXX Set this to true for small tables like designations\n\n    }\n  }; //Callback for child components (Foreign Keys)\n\n  const callback = childData => {\n    //console.log(\"Parent Callback\");\n    setEntity(prev => ({ ...prev,\n      [childData.fk]: childData.entity\n    }));\n    setValue(childData.fk, childData.entity); //console.log(errors);\n\n    console.log(\">>>\" + childData.fk);\n    clearErrors(childData.fk);\n  };\n\n  const errorCallback = err => {\n    //console.log(err);\n    setServerErrors(err);\n  };\n\n  const handleInputChange = e => {//console.log(e.target.value);\n  };\n\n  const handleButtonClick = e => {\n    history.push(\"/licDemandTransactions\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 text-gray-900\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(onSubmit, onError),\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [id === 'new' ? 'Add' : 'Edit', \" Lic Demand Transaction \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: mesg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-red-500\",\n          children: serverErrors\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Tabs, {\n          id: \"LicDemandTransactionEdit\",\n          activeKey: key,\n          onSelect: k => setKey(k),\n          className: \"mb-3\",\n          children: /*#__PURE__*/_jsxDEV(Tab, {\n            eventKey: \"page1\",\n            title: \"Lic Demand\",\n            className: \"h-120\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Month\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 10\n                }, this), me]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 8\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \" Dak Id\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 8\n                }, this), dakidNo]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 8\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 8\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 8\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 8\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 8\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 8\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(LiveSearch, {\n                  name: \"employee\",\n                  onChange: handleInputChange,\n                  parentData: parentData.employee,\n                  parentCallback: callback,\n                  fkEntity: entity.employee,\n                  errCallback: errorCallback\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-red-500 \",\n                  children: (_errors$employee = errors.employee) === null || _errors$employee === void 0 ? void 0 : _errors$employee.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 8\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Policy Number\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"policyNo\",\n                  ...register(\"policyNo\"),\n                  className: \"form-control py-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-red-500\",\n                  children: (_errors$policyNo = errors.policyNo) === null || _errors$policyNo === void 0 ? void 0 : _errors$policyNo.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Premium Amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"premiumAmount\",\n                  ...register(\"premiumAmount\"),\n                  className: \"form-control py-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-red-500\",\n                  children: (_errors$premiumAmount = errors.premiumAmount) === null || _errors$premiumAmount === void 0 ? void 0 : _errors$premiumAmount.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 8\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Gst On Premium Amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"gstOnPremiumAmount\",\n                  ...register(\"gstOnPremiumAmount\"),\n                  className: \"form-control py-0\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 10\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-red-500\",\n                  children: (_errors$gstOnPremiumA = errors.gstOnPremiumAmount) === null || _errors$gstOnPremiumA === void 0 ? void 0 : _errors$gstOnPremiumA.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 10\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"px-2\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  children: \"Save\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 7\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 6\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"px-2\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: handleButtonClick,\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 6\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 6\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 6\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 3\n  }, this);\n};\n\n_s(LicDemandTransactionEdit, \"vKYqK5g0vllBS8tWOl9VG+3djTY=\", false, function () {\n  return [useForm, useParams, useHistory];\n});\n\n_c = LicDemandTransactionEdit;\nexport default _c2 = withRouter(LicDemandTransactionEdit);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"LicDemandTransactionEdit\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/itsdcsec/falconReact/falcon_face/src/components/LicDemandTransactionEdit.js"],"names":["useState","useEffect","withRouter","useParams","useHistory","useForm","axios","yup","yupResolver","LiveSearch","Tabs","Tab","schema","object","LicDemandTransactionEdit","register","handleSubmit","setValue","formState","errors","clearErrors","resolver","id","history","serverErrors","setServerErrors","entity","setEntity","state","setState","key","setKey","dakId","setDakId","mesg","setMesg","me","setMe","dakidNo","setDakidNo","isCancelled","console","log","fetchData","record","get","then","response","data","fields","dak","forEach","field","catch","error","Error","prev","fetching","unmounted","fetchMe","onSubmit","event","preventDefault","put","onError","e","parentData","title","url","searchList","fkEntity","preload","employee","callback","childData","fk","errorCallback","err","handleInputChange","handleButtonClick","push","k","message","policyNo","premiumAmount","gstOnPremiumAmount"],"mappings":"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","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By : \n */\n\nimport { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from 'axios';\nimport * as yup from \"yup\";\n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport LiveSearch from '../utils/LiveSearch';\n\n//import DatePicker  from 'react-datepicker';\n//import \"react-datepicker/dist/react-datepicker.css\";\n//import addDays from 'date-fns/addDays'\n\nimport Tabs from 'react-bootstrap/Tabs'\nimport Tab from 'react-bootstrap/Tab'\n\nconst schema = yup.object({\n\t \n\n});\n\n\n\nconst LicDemandTransactionEdit = () => {\n\tconst { register, handleSubmit, setValue, formState: { errors }, clearErrors } = useForm({\n\t\tresolver: yupResolver(schema)\n\t});\n\n\tlet { id } = useParams();\n\n\tlet history = useHistory();\n\tconst [serverErrors, setServerErrors] = useState([]);\n\tconst [entity, setEntity] = useState({});\n\tconst [state, setState] = useState({}); \n\tconst [key, setKey] = useState('page1');\n\t \n\tconst [dakId, setDakId] = useState(0);\n\t \n\tconst [mesg,setMesg]=useState('');\n\tconst [me,setMe]=useState('');\n\tconst [dakidNo,setDakidNo]=useState('');\n\t \n\n\n\n\tuseEffect(() => {\n\t\tlet isCancelled = false;\n\t\tconsole.log(id);\n\t\tif (id !== 'new') {\n\t\t\tasync function fetchData() {\n\t\t\t\tlet record = '';\n\t\t\t\tawait axios.get('/licDemandTransactions/' + id)\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\trecord = response.data;\n\t\t\t\t\t\tconst fields = [\n\t\t\t\t\t\t\t'id', 'dak', 'employee', 'cdaoNo', 'checkDigit', 'policyNo', \n\t\t\t\t\t\t\t'premiumAmount', 'premiumDueMe', 'monthEnding', 'auditor', 'aao','ao',\n\t\t\t\t\t\t\t'auditorDate', 'aaoDate', 'aoDate', 'approved', 'gstOnPremiumAmount' , \n\t\t\t\t\t\t\t 'recordStatus',   'reason', 'remarks'\n\t\t\t\t\t\t];\n\t\t\t\t\t\tsetDakidNo(record.dak.dakidNo);\n\t\t\t\t\t\tconsole.log(\">>>>---:\"+ dakidNo);\n\t\t\t\t\t\tfields.forEach(field => setValue(field, record[field]));\n\t\t\t\t\t\t \n\n\t\t\t\t\t})\n\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t//console.log(error);\n\t\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\t\tif (error.response)\n\t\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t\t});\n\n\n\t\t\t\tif (!isCancelled) {\n\t\t\t\t\tsetEntity(record);\n\t\t\t\t\tsetState(prev => ({ ...prev, state: record }));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfetchData();\n\t\t\treturn () => {\n\t\t\t\tisCancelled = true;\n\t\t\t};\n\t\t}\n\n\t}, []);\n\n \tuseEffect(() => {\n\t\tlet fetching = false;\n\t\tlet unmounted = false;\n\t\tasync function fetchMe() {\n\t\t\t \n\t\t\t \n\t\t\t\tif (!fetching)\n\t\t\t\t\tawait axios.get(`/licDemandTransactions/licDemand/getCurrentMe`)\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\tsetMe(response.data);\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\t//console.log(error);\n\t\t\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\t\t\tif (error.response)\n\t\t\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t\t\t})\n\t\t}\n\t\tfetchMe();\n\t\t \n\t\treturn () => { fetching = true; unmounted = true; }\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n \n\n\tconst onSubmit = (data, event) => {\n\t\tevent.preventDefault();\n\t\tconsole.log(data);\n\t\tif (data.id) {\n\t\t\taxios.put(\"/licDemandTransactions/\" + data.id, data)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetMesg(response.data);\n\t\t\t\t\t \n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t//\tconsole.log(error.response.status);\n\t\t\t\t\t//\tconsole.log(error.response.headers);\n\t\t\t\t\tif (error.response)\n\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\telse\n\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t})\n\t\t} \n\n\t\t \n\t}\n\n\tconst onError = (errors, e) => console.log(errors, e);\n\n\t//All foreign keys. \n\t// XXXXXX Add search fields and adjust the values as necessary\n\tconst parentData = {\n\n\t\tdak: {\n\t\t\ttitle: \"Dak\",\n\t\t\turl : \"daks\",\n\t\t\tsearchList : ['id'], //XXXXXXXXX Add search fields\n\t\t\tfkEntity: \"dak\",\n\t\t\tpreload: false, //XXXXXX Set this to true for small tables like designations\n\t\t},\n\t\t\temployee: {\n\t\t\ttitle: \"Employee\",\n\t\t\turl: \"employees/all/effective\",\n\t\t\tsearchList: ['cdaoNo', 'checkDigit', 'officerName'], //XXXXXXXXX Add search fields\n\t\t\tfkEntity: \"employee\",\n\t\t\tpreload: false, //XXXXXX Set this to true for small tables like designations\n\t\t},\n\t\t \n\t}\n\n\t//Callback for child components (Foreign Keys)\n\tconst callback = (childData) => {\n\t\t//console.log(\"Parent Callback\");\n\t\tsetEntity(prev => ({ ...prev, [childData.fk]: childData.entity }));\n\t\tsetValue(childData.fk, childData.entity);\n\t\t//console.log(errors);\n\t\tconsole.log(\">>>\"+childData.fk);\n\t\t \n\t\tclearErrors(childData.fk);\n\t};\n\n\tconst errorCallback = (err) => {\n\t\t//console.log(err);\n\t\tsetServerErrors(err);\n\t}\n\n\tconst handleInputChange = (e) => {\n\t\t//console.log(e.target.value);\n\t};\n\t \n\t \n\tconst handleButtonClick = (e) =>{\n\t\thistory.push(\"/licDemandTransactions\");\n\t}\n\n\treturn (\n\t\t<div className=\"min-h-screen bg-gray-100 text-gray-900\">\n\t\t\t<div className=\"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\">\n\t\t\t\t\n\t\t\t\t<form onSubmit={handleSubmit(onSubmit, onError)}>\n\t\t\t\t\t<h1 >{id === 'new' ? 'Add' : 'Edit'} Lic Demand Transaction </h1>\n\t\t\t\t\t<h2>{mesg}</h2>\n\t\t\t\t\t<div className=\"text-red-500\">{serverErrors}</div>\n\n\t\t\t\t\t<Tabs\n\t\t\t\t\t\tid=\"LicDemandTransactionEdit\"\n\t\t\t\t\t\tactiveKey={key}\n\t\t\t\t\t\tonSelect={(k) => setKey(k)}\n\t\t\t\t\t\tclassName=\"mb-3\">\n\t\t\t\t\t\t\n\t\t\t\t\t<Tab eventKey=\"page1\" title=\"Lic Demand\" className=\"h-120\">\n\t\t\t\t\t<div className=\"grid grid-cols-2 gap-0\">\n\t\t\t\t\t\t \n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Month</label>\n\t\t\t\t\t\t\t\t\t {me}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t <div>\n\t\t\t\t\t\t <label> Dak Id</label>\n\t\t\t\t\t\t {dakidNo}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t</div>\n\t \n\t\t\t\t\t\t\t<div >\n\t\t\t\t\t\t\t\t\t<LiveSearch name=\"employee\" onChange={handleInputChange}\n\t\t\t\t\t\t\t\t\t\tparentData={parentData.employee} parentCallback={callback}\n\t\t\t\t\t\t\t\t\t\tfkEntity={entity.employee} errCallback={errorCallback} />\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500 \">{errors.employee?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Policy Number</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"policyNo\" {...register(\"policyNo\")} \n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.policyNo?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Premium Amount</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"premiumAmount\" {...register(\"premiumAmount\")} \n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.premiumAmount?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Gst On Premium Amount</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"gstOnPremiumAmount\" {...register(\"gstOnPremiumAmount\")} \n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.gstOnPremiumAmount?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t \n\n\t\t\t\t\t<div className=\"px-2\">\n\t\t\t\t\t\t<button type=\"submit\" >Save</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"px-2\">\n\t\t\t\t\t<button type=\"button\" onClick={handleButtonClick} >Cancel</button>\n\t\t\t\t\t\t</div>\n</div>\n</Tab>\n \n\t\t\t\t\t\n</Tabs>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default withRouter(LicDemandTransactionEdit);"]},"metadata":{},"sourceType":"module"}