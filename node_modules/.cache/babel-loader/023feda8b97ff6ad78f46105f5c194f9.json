{"ast":null,"code":"import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import{withRouter,useParams,useHistory}from\"react-router-dom\";import{useForm}from\"react-hook-form\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UploadEtkt=function UploadEtkt(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedFile=_useState2[0],setSelectedFile=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),lightTheme=_useState4[0],setLightTheme=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),disabled=_useState6[0],setDisabled=_useState6[1];useEffect(function(){console.log(selectedFile);},[selectedFile,setSelectedFile]);var handleInputChange=function handleInputChange(e){e.preventDefault();console.log(e);setSelectedFile(e.target.files[0]);console.log(selectedFile);};var fileChangeHandler=function fileChangeHandler(){console.log(selectedFile);setDisabled(true);var formData=new FormData();formData.append(\"file\",selectedFile);//ApiService.upload(formData)\naxios.post(\"/dtsRailTransactions/upload/etkt\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"}}).then(function(res){console.log(res.data);alert(res.data[0]);if(res.data[1]!=null){var fileList=res.data[1];fileList.map(function(fileName){return window.open(\"\".concat(process.env.REACT_APP_BASE_URL,\"/files/\").concat(fileName));});}setDisabled(false);}).catch(function(error){alert(error.response.data.message);setDisabled(false);console.log(error.response.data.message);console.log(error.response.status);console.log(error.response.headers);/*\n\t\t\tif (error.response)\n\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\telse\n\t\t\t\tsetServerErrors(error.Error);\n\t\t\t*/});};return/*#__PURE__*/_jsx(\"div\",{className:lightTheme?\"theme-light\":\"theme-dark\",style:disabled?{pointerEvents:\"none\",opacity:\"0.4\"}:{},children:/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group files color\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Upload E-Ticketing Data \"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control\",name:\"file\",onChange:handleInputChange})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-40\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:fileChangeHandler,children:\"Upload\"})})]})})});};export default withRouter(UploadEtkt);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/UploadEtkt.js"],"names":["useState","useEffect","withRouter","useParams","useHistory","useForm","axios","UploadEtkt","selectedFile","setSelectedFile","lightTheme","setLightTheme","disabled","setDisabled","console","log","handleInputChange","e","preventDefault","target","files","fileChangeHandler","formData","FormData","append","post","headers","then","res","data","alert","fileList","map","fileName","window","open","process","env","REACT_APP_BASE_URL","catch","error","response","message","status","pointerEvents","opacity"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\n\nconst UploadEtkt = () => {\n  const [selectedFile, setSelectedFile] = useState();\n  const [lightTheme, setLightTheme] = useState(true);\n  const [disabled, setDisabled] = useState(false);\n\n  useEffect(() => {\n    console.log(selectedFile);\n  }, [selectedFile, setSelectedFile]);\n\n  const handleInputChange = (e) => {\n    e.preventDefault();\n    console.log(e);\n    setSelectedFile(e.target.files[0]);\n    console.log(selectedFile);\n  };\n\n  const fileChangeHandler = () => {\n    console.log(selectedFile);\n    setDisabled(true);\n    const formData = new FormData();\n    formData.append(\"file\", selectedFile);\n    //ApiService.upload(formData)\n    axios\n      .post(\"/dtsRailTransactions/upload/etkt\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      })\n      .then((res) => {\n        console.log(res.data);\n\t\talert(res.data[0]);\n\n        if (res.data[1] != null) {\n          const fileList = res.data[1];\n          fileList.map((fileName) =>\n            window.open(`${process.env.REACT_APP_BASE_URL}/files/${fileName}`)\n          );\n        }\n        \n        setDisabled(false);\n      })\n      .catch((error) => {\n        alert(error.response.data.message);\n        setDisabled(false);\n        console.log(error.response.data.message);\n        console.log(error.response.status);\n        console.log(error.response.headers);\n        /*\n\t\t\tif (error.response)\n\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\telse\n\t\t\t\tsetServerErrors(error.Error);\n\t\t\t*/\n      });\n  };\n\n  return (\n    <div\n      className={lightTheme ? \"theme-light\" : \"theme-dark\"}\n      style={disabled ? { pointerEvents: \"none\", opacity: \"0.4\" } : {}}\n    >\n      <form>\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-md-6\">\n              <div className=\"form-group files color\">\n                <label>Upload E-Ticketing Data </label>\n                <input\n                  type=\"file\"\n                  className=\"form-control\"\n                  name=\"file\"\n                  onChange={handleInputChange}\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"w-40\">\n            <button type=\"button\" onClick={fileChangeHandler}>\n              Upload\n            </button>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default withRouter(UploadEtkt);\n"]},"metadata":{},"sourceType":"module"}