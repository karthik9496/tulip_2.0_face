{"ast":null,"code":"var _jsxFileName = \"/home/rr/Workspace/Js/falcon_face/src/utils/LiveSearch.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { withRouter } from \"react-router-dom\"; //import styled from \"styled-components\";\n\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport * as yup from \"yup\";\n/**\n@author Raja Reddy\nOctober 2021\n*/\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object({\n  fkDisplay: yup.string().required('Required') //age: yup.number().positive().integer().required(),\n\n}).required();\n\nfunction LiveSearch({\n  parentData,\n  parentCallback,\n  fkEntity\n}) {\n  _s();\n\n  console.log(parentData); //console.log(parentCallback);\n  //console.log(fkEntity);\n  //const { register, handleSubmit, reset, setValue, getValues, formState: { errors } } = useForm({});\n\n  const {\n    register,\n    setValue,\n    formState: {\n      errors\n    }\n  } = useForm({});\n  const initialState = {\n    search: '',\n    list: '',\n    showList: false\n  };\n  const [state, setState] = useState(initialState);\n  /*\n  \tfunction reducer(state, { name, value }) {\n  \t\treturn {\n  \t\t\t...state,\n  \t\t\t[name]: value\n  \t\t}\n  \t}\n  */\n  //const [entity, setEntity] = useState(entity);\n  //console.log(parentData);\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function fetchData() {\n      if (!isCancelled && fkEntity) {\n        let row = '';\n\n        for (let field of parentData.searchList) {\n          row += fkEntity[field] + \" : \";\n        }\n\n        row = row.substring(0, row.length - 3); // Strip the last :\n        //console.log(row);\n\n        setValue('fkDisplay', row); //setValue(prev =>({...prev, parentData:parentData}));\n      }\n\n      if (parentData.preload) {\n        const result = await axios(`/${parentData.url}`);\n        ;\n        setState({\n          list: result.data\n        });\n      } else {//Incremental Fetch\n      }\n    }\n\n    fetchData();\n    return () => {\n      isCancelled = true;\n    };\n  }, []);\n\n  const handleInputChange = e => {\n    console.log(e);\n    console.log(state);\n    const search = e.target.value;\n    setState(prevState => ({ ...prevState,\n      search: search,\n      showList: true\n    }));\n  };\n\n  const sendDataToParent = foreignKeyEntity => {\n    parentCallback(foreignKeyEntity);\n  };\n\n  const setValueHandler = item => {\n    let row = \"\";\n\n    for (let field of parentData.searchList) {\n      row += item[field] + \" : \";\n    } //Strip the last ' : '\n\n\n    row = row.substring(0, row.length - 3); //row += item.id;\n\n    console.log(row);\n    setState(prev => ({ ...prev,\n      search: row,\n      showList: false\n    }));\n    setValue('fkDisplay', row);\n    let dataToParent = {\n      props: {\n        entity: item\n      }\n    };\n    console.log(\"ValueHandler\");\n    console.log(dataToParent);\n    sendDataToParent(dataToParent);\n  };\n\n  const dropDownRow = item => {\n    let row = \"\";\n\n    for (let field of parentData.searchList) {\n      row += item[field] + \" : \";\n    } //console.log(row);\n    //Strip the last ':'\n\n\n    row = row.substring(0, row.length - 3);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ml-4\",\n      children: row\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 10\n    }, this);\n  };\n\n  const dropDownList = item => {\n    /*\n    let displayItem = \"\";\n    for (let field of parentData.searchList) {\n    \tdisplayItem += item[field];\n    }\n    */\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      onClick: () => setValueHandler(item),\n      className: \"border rounded bg-green-500 hover:bg-green-700 text-white font-bold\",\n      children: dropDownRow(item)\n    }, item.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 4\n    }, this);\n  };\n\n  const sorter = (a, b) => {\n    //return a.name.toLowerCase().localeCompare(b.name.toLowerCase());\n    let aRow = \"\";\n    let bRow = \"\";\n\n    for (let field of parentData.searchList) {\n      aRow += a[field];\n      bRow += b[field];\n    }\n\n    return aRow.toLowerCase().localeCompare(bRow.toLowerCase());\n  };\n\n  const multiFieldFilter = item => {\n    let compositeField = \"\";\n\n    for (let field of parentData.searchList) {\n      compositeField += item[field];\n    }\n\n    return compositeField.toLowerCase().indexOf(state.search.toLowerCase()) >= 0;\n  };\n\n  const makeResult = list => {\n    if (!list) return /*#__PURE__*/_jsxDEV(\"li\", {\n      children: \"No results!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }, this);\n    const newList = list.filter(multiFieldFilter);\n    if (newList.length) return newList.slice(0, 10) //Get only 10 items\n    .sort((a, b) => sorter(a, b)) //Sort alphabetically\n    .map(dropDownList);\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      children: \"No results!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 10\n    }, this);\n  };\n\n  const handleFocus = event => event.target.select();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"text-sm block font-bold  py-0 \",\n      children: [parentData.title, \" : \", fkEntity ? fkEntity[parentData.searchList[0]] : '']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      className: \" form-control py-0\",\n      type: \"text\",\n      name: \"fkDisplay\",\n      ...register(\"fkDisplay\"),\n      onChange: handleInputChange,\n      onFocus: handleFocus,\n      placeholder: `Search`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 4\n    }, this), state.showList, state.search !== \"\" && state.showList ? /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: makeResult(state.list)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 5\n    }, this) : state.showList && /*#__PURE__*/_jsxDEV(\"span\", {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 8\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 3\n  }, this);\n}\n\n_s(LiveSearch, \"oD6mUo66/vOajP4Z2Tcew+7P7ow=\", false, function () {\n  return [useForm];\n});\n\n_c = LiveSearch;\nexport default _c2 = withRouter(LiveSearch);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"LiveSearch\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/rr/Workspace/Js/falcon_face/src/utils/LiveSearch.js"],"names":["useState","useEffect","withRouter","useForm","axios","yup","schema","object","fkDisplay","string","required","LiveSearch","parentData","parentCallback","fkEntity","console","log","register","setValue","formState","errors","initialState","search","list","showList","state","setState","isCancelled","fetchData","row","field","searchList","substring","length","preload","result","url","data","handleInputChange","e","target","value","prevState","sendDataToParent","foreignKeyEntity","setValueHandler","item","prev","dataToParent","props","entity","dropDownRow","dropDownList","id","sorter","a","b","aRow","bRow","toLowerCase","localeCompare","multiFieldFilter","compositeField","indexOf","makeResult","newList","filter","slice","sort","map","handleFocus","event","select","title"],"mappings":"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","sourcesContent":["import { useState, useEffect, } from \"react\";\nimport { withRouter } from \"react-router-dom\";\n//import styled from \"styled-components\";\n\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport * as yup from \"yup\";\n\n/**\n@author Raja Reddy\nOctober 2021\n*/\n\n\nconst schema = yup.object({\n\tfkDisplay: yup.string().required('Required'),\n\t//age: yup.number().positive().integer().required(),\n}).required();\n\nfunction LiveSearch({ parentData, parentCallback, fkEntity }) {\n\tconsole.log(parentData);\n\t//console.log(parentCallback);\n\t//console.log(fkEntity);\n\n\t//const { register, handleSubmit, reset, setValue, getValues, formState: { errors } } = useForm({});\n\tconst { register, setValue, formState: { errors } } = useForm({});\n\n\n\tconst initialState = {\n\t\tsearch: '',\n\t\tlist: '',\n\t\tshowList: false,\n\t}\n\tconst [state, setState] = useState(initialState);\n\t/*\n\t\tfunction reducer(state, { name, value }) {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[name]: value\n\t\t\t}\n\t\t}\n\t*/\n\n\t//const [entity, setEntity] = useState(entity);\n\t//console.log(parentData);\n\tuseEffect(() => {\n\t\tlet isCancelled = false;\n\t\tasync function fetchData() {\n\t\t\tif (!isCancelled && fkEntity) {\n\t\t\t\tlet row = '';\n\n\t\t\t\tfor (let field of parentData.searchList) {\n\t\t\t\t\trow += fkEntity[field] + \" : \";\n\t\t\t\t}\n\n\t\t\t\trow = row.substring(0, row.length - 3);// Strip the last :\n\t\t\t\t//console.log(row);\n\t\t\t\tsetValue('fkDisplay', row);\n\t\t\t\t//setValue(prev =>({...prev, parentData:parentData}));\n\t\t\t}\n\n\t\t\tif (parentData.preload) {\n\t\t\t\tconst result = await axios(`/${parentData.url}`);;\n\t\t\t\tsetState({ list: result.data });\n\t\t\t} else {\n\t\t\t\t//Incremental Fetch\n\t\t\t\t\n\t\t\t}\n\t\t}\n\n\t\tfetchData();\n\t\treturn () => {\n\t\t\tisCancelled = true;\n\t\t};\n\n\t}, []);\n\n\tconst handleInputChange = (e) => {\n\t\tconsole.log(e);\n\t\tconsole.log(state);\n\t\tconst search = e.target.value;\n\t\tsetState(prevState => ({\n\t\t\t...prevState,\n\t\t\tsearch: search,\n\t\t\tshowList: true,\n\t\t}));\n\t};\n\n\tconst sendDataToParent = (foreignKeyEntity) => {\n\t\tparentCallback(foreignKeyEntity);\n\t};\n\n\tconst setValueHandler = (item) => {\n\t\tlet row = \"\";\n\t\tfor (let field of parentData.searchList) {\n\t\t\trow += item[field] + \" : \";\n\t\t}\n\t\t//Strip the last ' : '\n\t\trow = row.substring(0, row.length - 3);\n\t\t//row += item.id;\n\t\tconsole.log(row);\n\t\tsetState(prev => ({\n\t\t\t...prev,\n\t\t\tsearch: row,\n\t\t\tshowList: false,\n\t\t}));\n\t\tsetValue('fkDisplay', row);\n\t\tlet dataToParent = { props: { entity: item } };\n\n\t\tconsole.log(\"ValueHandler\");\n\t\tconsole.log(dataToParent);\n\t\tsendDataToParent(dataToParent);\n\t};\n\n\tconst dropDownRow = (item) => {\n\t\tlet row = \"\";\n\t\tfor (let field of parentData.searchList) {\n\t\t\trow += item[field] + \" : \";\n\t\t}\n\t\t//console.log(row);\n\t\t//Strip the last ':'\n\t\trow = row.substring(0, row.length - 3);\n\t\treturn <div className=\"ml-4\">{row}</div>;\n\t};\n\n\n\tconst dropDownList = (item) => {\n\t\t/*\n\t\tlet displayItem = \"\";\n\t\tfor (let field of parentData.searchList) {\n\t\t\tdisplayItem += item[field];\n\t\t}\n\t\t*/\n\t\treturn (\n\t\t\t<li key={item.id} onClick={() => setValueHandler(item)}\n\t\t\t\tclassName=\"border rounded bg-green-500 hover:bg-green-700 text-white font-bold\">\n\t\t\t\t{dropDownRow(item)}\n\t\t\t</li>\n\t\t);\n\t};\n\n\tconst sorter = (a, b) => {\n\t\t//return a.name.toLowerCase().localeCompare(b.name.toLowerCase());\n\t\tlet aRow = \"\";\n\t\tlet bRow = \"\";\n\t\tfor (let field of parentData.searchList) {\n\t\t\taRow += a[field];\n\t\t\tbRow += b[field];\n\t\t}\n\t\treturn aRow.toLowerCase().localeCompare(bRow.toLowerCase());\n\t};\n\n\tconst multiFieldFilter = (item) => {\n\t\tlet compositeField = \"\";\n\t\tfor (let field of parentData.searchList) {\n\t\t\tcompositeField += item[field];\n\t\t}\n\t\treturn (\n\t\t\tcompositeField\n\t\t\t\t.toLowerCase()\n\t\t\t\t.indexOf(state.search.toLowerCase()) >= 0\n\t\t);\n\t};\n\n\tconst makeResult = (list) => {\n\t\tif (!list)\n\t\t\treturn <li>No results!</li>;\n\t\tconst newList = list.filter(multiFieldFilter);\n\t\tif (newList.length)\n\t\t\treturn newList\n\t\t\t\t.slice(0, 10) //Get only 10 items\n\t\t\t\t.sort((a, b) => sorter(a, b)) //Sort alphabetically\n\t\t\t\t.map(dropDownList);\n\t\treturn <li>No results!</li>;\n\t};\n\n\tconst handleFocus = (event) => event.target.select();\n\n\treturn (\n\t\t<div>\n\n\t\t\t<label className=\"text-sm block font-bold  py-0 \">{parentData.title} : {fkEntity ? fkEntity[parentData.searchList[0]] : ''}</label>\n\n\t\t\t<input\n\t\t\t\tclassName=\" form-control py-0\"\n\t\t\t\ttype=\"text\" name=\"fkDisplay\" {...register(\"fkDisplay\")}\n\t\t\t\tonChange={handleInputChange} onFocus={handleFocus}\n\t\t\t\tplaceholder={`Search`}\n\t\t\t/>\n\n\t\t\t{state.showList}\n\t\t\t{state.search !== \"\" && state.showList ? (\n\t\t\t\t<ul>{makeResult(state.list)}</ul>\n\t\t\t) : (\n\t\t\t\t\tstate.showList && (\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<br />{\" \"}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)\n\t\t\t\t)}\n\t\t</div>\n\t);\n\n}\n\nexport default withRouter(LiveSearch);\n"]},"metadata":{},"sourceType":"module"}