{"ast":null,"code":"var _jsxFileName = \"/home/itsdcsec/falconws/falcon_face/src/components/AtcorrGeneration.js\";\n\n/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 18 April 2022\n *\n * Modified By : \n */\nimport { useState, useEffect, useMemo } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from 'axios';\nimport * as yup from \"yup\";\nimport Table0Pagination from '../utils/Table0Pagination'; //\n\nimport Table from '../utils/Table'; // \n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport LiveSearch from '../utils/LiveSearch'; //import DatePicker  from 'react-datepicker';\n//import \"react-datepicker/dist/react-datepicker.css\";\n//import addDays from 'date-fns/addDays'\n\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object({});\n\nconst AtcorrGeneration = () => {\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    formState: {\n      errors\n    },\n    clearErrors\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  let {\n    id\n  } = useParams();\n  let history = useHistory();\n  const [serverErrors, setServerErrors] = useState([]);\n  const [entity, setEntity] = useState({});\n  const [state, setState] = useState({});\n  const [key, setKey] = useState('page1');\n  const [data, setData] = useState([]);\n  const [miscList, setMiscList] = useState([]);\n  const [isLoading, setLoading] = useState(true);\n  const [disabled, setDisabled] = useState(false);\n  const [status, setStatus] = useState('');\n  const [qe, setQe] = useState('');\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function fetchCurrentQe() {\n      let record = '';\n      await axios.get('/miscs/currentMe').then(response => {\n        record = response.data;\n        setQe(response.data);\n      }).catch(error => {\n        //console.log(error);\n        //console.log(error.response.status);\n        //console.log(error.response.headers);\n        if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n      });\n\n      if (!isCancelled) {\n        setEntity(record);\n        setState(prev => ({ ...prev,\n          state: record\n        }));\n      }\n    }\n\n    fetchCurrentQe();\n    return () => {\n      isCancelled = true;\n    };\n  }, []);\n\n  const onError = (errors, e) => console.log(errors, e); //Callback for child components (Foreign Keys)\n\n\n  const callback = childData => {\n    //console.log(\"Parent Callback\");\n    //setEntity(prev => ({ ...prev, [childData.fk]: childData.entity }));\n    setValue(childData.fk, childData.entity); //console.log(errors);\n\n    clearErrors(childData.fk);\n  };\n\n  const errorCallback = err => {\n    //console.log(err);\n    setServerErrors(err);\n  };\n\n  const handleInputChange = e => {//console.log(e.target.value);\n  };\n\n  async function startScheduler() {\n    setDisabled(true);\n    await axios.put(`/jobs/incr/startScheduler`).then(response => {\n      //console.log(data);\n      setDisabled(false);\n      setServerErrors(response.data);\n    }).catch(error => {\n      setDisabled(false);\n      console.log(error); //console.log(error.response.status);\n      //console.log(error.response.headers);\n\n      if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n    });\n  }\n\n  async function startIncrGeneration() {\n    setDisabled(true);\n    await axios.post(`/jobs/sysGen/atcorrGeneration/checkStatus`).then(response => {\n      //console.log(data);\n      setDisabled(false);\n      setServerErrors(response.data);\n    }).catch(error => {\n      setDisabled(false);\n      console.log(error); //console.log(error.response.status);\n      //console.log(error.response.headers);\n\n      if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n    });\n  }\n\n  const ShowMiscList = () => {\n    const columns = useMemo(() => [{\n      Header: \"Misc Id\",\n      accessor: 'id'\n    }, {\n      Header: \"Key1\",\n      accessor: 'key1'\n    }, {\n      Header: \"Value1\",\n      accessor: 'value1'\n    }, {\n      Header: \"Value2\",\n      accessor: 'value2'\n    }, {\n      Header: \"Int Number1\",\n      accessor: 'intNumber1'\n    }, {\n      Header: \"Start Id\",\n      accessor: 'number1'\n    }, {\n      Header: \"End Id\",\n      accessor: 'number2'\n    }], [miscList, setMiscList]);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"inline-flex\",\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"max-w-5xl mx-auto px-2 sm:px-6 lg:px-8 pt-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"-mt-2 max-h-0 py-0 ml-0\",\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            columns: columns,\n            data: miscList,\n            className: \"table-auto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 6\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 4\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 3\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 text-gray-900\",\n    children: /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \" Atcorr Generation \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red-500\",\n        children: serverErrors\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Month \", qe, \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 8\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 8\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 8\n      }, this), status && status.includes(\"Start\") && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inline-flex\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startIncrGeneration,\n          disabled: disabled,\n          children: [disabled && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"spinner-grow spinner-grow-sm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 7\n          }, this), \"Start Incr Generation\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 8\n      }, this), miscList && miscList.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inline-flex\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startScheduler,\n          disabled: disabled,\n          children: [disabled && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"spinner-grow spinner-grow-sm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 7\n          }, this), \"Restart Scheduler\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 8\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"-mt-2 max-h-1 py-0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 8\n      }, this), '    ', miscList.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(ShowMiscList, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 8\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 209,\n    columnNumber: 3\n  }, this);\n};\n\nexport default withRouter(AtcorrGeneration);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/AtcorrGeneration.js"],"names":["useState","useEffect","useMemo","withRouter","useParams","useHistory","useForm","axios","yup","Table0Pagination","Table","yupResolver","LiveSearch","Tabs","Tab","schema","object","AtcorrGeneration","register","handleSubmit","setValue","formState","errors","clearErrors","resolver","id","history","serverErrors","setServerErrors","entity","setEntity","state","setState","key","setKey","data","setData","miscList","setMiscList","isLoading","setLoading","disabled","setDisabled","status","setStatus","qe","setQe","isCancelled","fetchCurrentQe","record","get","then","response","catch","error","Error","prev","onError","e","console","log","callback","childData","fk","errorCallback","err","handleInputChange","startScheduler","put","startIncrGeneration","post","ShowMiscList","columns","Header","accessor","includes","length"],"mappings":"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","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 18 April 2022\n *\n * Modified By : \n */\n\nimport { useState, useEffect,useMemo } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from 'axios';\nimport * as yup from \"yup\";\nimport Table0Pagination  from '../utils/Table0Pagination'  //\nimport Table  from '../utils/Table'  // \n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport LiveSearch from '../utils/LiveSearch';\n\n//import DatePicker  from 'react-datepicker';\n//import \"react-datepicker/dist/react-datepicker.css\";\n//import addDays from 'date-fns/addDays'\n\nimport Tabs from 'react-bootstrap/Tabs'\nimport Tab from 'react-bootstrap/Tab'\n\nconst schema = yup.object({\n      \n});\n\n\nconst AtcorrGeneration = () => {\n\tconst { register, handleSubmit, setValue, formState: { errors }, clearErrors } = useForm({\n\t\tresolver: yupResolver(schema)\n\t});\n\n\tlet { id } = useParams();\n\n\tlet history = useHistory();\n\tconst [serverErrors, setServerErrors] = useState([]);\n\tconst [entity, setEntity] = useState({});\n\tconst [state, setState] = useState({});\n\tconst [key, setKey] = useState('page1');\n\tconst [data,setData]=useState([]);\n\tconst [miscList,setMiscList]=useState([]);\n\tconst [isLoading,setLoading]=useState(true);\n\tconst [disabled,setDisabled]=useState(false);\n\tconst [status,setStatus]=useState('');\n\tconst [qe,setQe]=useState('');\n\t \n\t \n\tuseEffect(() => {\n\t\tlet isCancelled = false;\n\t\t \n\t\t\tasync function fetchCurrentQe() {\n\t\t\t\tlet record = '';\n\t\t\t\tawait axios.get('/miscs/currentMe')\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\trecord = response.data;\n\t\t\t\t\t\tsetQe(response.data);\n\t\t\t\t\t\t \n\t\t\t\t\t\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t//console.log(error);\n\t\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\t\tif(error.response)\n\t\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t\t});\n\n\n\t\t\t\tif (!isCancelled) {\n\t\t\t\t\tsetEntity(record);\n\t\t\t\t\tsetState(prev => ({ ...prev, state: record }));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfetchCurrentQe();\n\t\t\treturn () => {\n\t\t\t\tisCancelled = true;\n\t\t\t};\n\t\t \n\n\t}, []);\n\t \n\t\n\t  \n\n \n\n\tconst onError = (errors, e) => console.log(errors, e);\n\n\t \n\n\t//Callback for child components (Foreign Keys)\n\tconst callback = (childData) => {\n\t\t//console.log(\"Parent Callback\");\n\t\t//setEntity(prev => ({ ...prev, [childData.fk]: childData.entity }));\n\t\tsetValue(childData.fk, childData.entity);\n\t\t//console.log(errors);\n\t\tclearErrors(childData.fk);\n\t};\n\n\tconst errorCallback = (err) => {\n\t\t//console.log(err);\n\t\tsetServerErrors(err);\n\t}\n\n\tconst handleInputChange = (e) => {\n\t\t//console.log(e.target.value);\n\t};\n\t\n\tasync function startScheduler() {\n\t\tsetDisabled(true);\n\t\tawait axios.put(`/jobs/incr/startScheduler`)\n\t\t\t.then((response) => {\n\t\t\t\t//console.log(data);\n\t\t\t\t setDisabled(false);\n\t\t\t\t setServerErrors(response.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tsetDisabled(false);\n\t\t\t\tconsole.log(error);\n\t\t\t\t//console.log(error.response.status);\n\t\t\t\t//console.log(error.response.headers);\n\t\t\t\tif (error.response)\n\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\telse\n\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t});\n\t}\n\tasync function startIncrGeneration() {\n\t\tsetDisabled(true);\n\t\tawait axios.post(`/jobs/sysGen/atcorrGeneration/checkStatus`)\n\t\t\t.then((response) => {\n\t\t\t\t//console.log(data);\n\t\t\t\t setDisabled(false);\n\t\t\t\t setServerErrors(response.data);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tsetDisabled(false);\n\t\t\t\tconsole.log(error);\n\t\t\t\t//console.log(error.response.status);\n\t\t\t\t//console.log(error.response.headers);\n\t\t\t\tif (error.response)\n\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\telse\n\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t});\n\t}\n\t\n\tconst ShowMiscList=() =>{\n\t\t \n\t\t\n\t\tconst columns = useMemo(() => [\n\n\t\t {\n\t\t\tHeader: \"Misc Id\",\n\t\t\taccessor: 'id',\n\t\t},\n\n\t\t{\n\t\t\tHeader: \"Key1\",\n\t\t\taccessor: 'key1',\n\t\t},\n\n\t\t {\n\t\t\tHeader: \"Value1\",\n\t\t\taccessor: 'value1',\n\t\t},\n\t\t{\n\t\t\tHeader: \"Value2\",\n\t\t\taccessor: 'value2',\n\t\t},\n\t\t{\n\t\t\tHeader: \"Int Number1\",\n\t\t\taccessor: 'intNumber1',\n\t\t},\n\t\t{\n\t\t\tHeader: \"Start Id\",\n\t\t\taccessor: 'number1',\n\t\t},\n\t\t{\n\t\t\tHeader: \"End Id\",\n\t\t\taccessor: 'number2',\n\t\t},\n\t\t \t\t\n\t], [miscList,setMiscList])\n\t\n\treturn (\n\t\t<div className=\"inline-flex\">\n\t\t\t<main className=\"max-w-5xl mx-auto px-2 sm:px-6 lg:px-8 pt-4\">\n\t\t\t\t \n\t\t\t\t<div className=\"-mt-2 max-h-0 py-0 ml-0\">\n\t\t\t\t\t<Table columns={columns} data={miscList} className=\"table-auto\" />\n\t\t\t\t</div>\n\t\t\t</main>\n\n\t\t</div>\n\t);\n\t}\n\t \n\n\treturn (\n\t\t \n\t\t<div className=\"min-h-screen bg-gray-100 text-gray-900\">\n\t\t\t<main className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\">\n\n\t\t\t\t \n\t\t\t\t\t<h1 > Atcorr Generation </h1>\n\t\t\t\t\t<div className=\"text-red-500\">{serverErrors}</div>\n\t\t\t\t\t \n\t\t\t\t\t\t <div><label>Month {qe} </label></div>\n\t\t\t\t\t\t \n\t\t\t\t\t\t <div>\n\t\t\t\t\t\t <br/>\n\t\t\t\t\t\t </div>\n\t\t\t\t\t\t {status && status.includes(\"Start\") && \n\t\t\t\t\t\t <div className=\"inline-flex\">\n\t\t\t\t\t<button onClick={startIncrGeneration} disabled={disabled} >\n\t\t\t\t\t  \n\t\t\t\t\t   {disabled && (\n\t\t\t\t\t\t<span className=\"spinner-grow spinner-grow-sm\"></span>\n\t\t\t\t\t)\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\tStart Incr Generation</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\t\t {miscList && miscList.length>0 && \n\t\t\t\t\t\t <div className=\"inline-flex\">\n\t\t\t\t\t<button onClick={startScheduler} disabled={disabled} >\n\t\t\t\t\t  \n\t\t\t\t\t   {disabled && (\n\t\t\t\t\t\t<span className=\"spinner-grow spinner-grow-sm\"></span>\n\t\t\t\t\t)\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\tRestart Scheduler</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t\t <div className=\"-mt-2 max-h-1 py-0\">\n\t\t\t\t\t \n\t\t\t\t\t \n\t\t\t\t\t</div>\n\t\t\t\t\t{'    '}\n\t\t\t\t\t\n\t\t\t\t\t{miscList.length>0 && \n\t\t\t\t \t\t\t\t\t<div>\n\t\t\t\t\t\t\t<ShowMiscList/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t \n\t\t\t\t\t\t\n\t\t\t\t\t \n\t\t\t\t \n\t\t\t</main>\n\t\t</div>\n\t);\n\t\n};\n\nexport default withRouter(AtcorrGeneration);"]},"metadata":{},"sourceType":"module"}