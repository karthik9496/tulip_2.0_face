{"ast":null,"code":"import _regeneratorRuntime from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect,useMemo}from\"react\";import Table,{SelectColumnFilter}from\"../utils/Table\";import axios from\"axios\";import{withRouter}from\"react-router-dom\";import Modal from\"../utils/Modal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function OutstandingAdvancesList(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),serverError=_useState4[0],setServerError=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setSearch=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),inputText=_useState8[0],setInputText=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),origin=_useState10[0],setOrigin=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),disabled=_useState12[0],setDisabled=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),openModal=_useState14[0],setOpenModal=_useState14[1];useEffect(function(){var fetching=false;function fetchOutstandingAdvances(){return _fetchOutstandingAdvances.apply(this,arguments);}function _fetchOutstandingAdvances(){_fetchOutstandingAdvances=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setDisabled(true);if(fetching){_context.next=4;break;}_context.next=4;return axios.get(\"/demandRegisters/outstandingAdvance?search=\"+search).then(function(response){setDisabled(false);if(response.data)setData(response.data);setServerError();}).catch(function(error){setData();setDisabled(false);setServerError(error.response);});case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchOutstandingAdvances.apply(this,arguments);}fetchOutstandingAdvances();},[search]);useEffect(function(){var fetching=false;function downloadCsv(){return _downloadCsv.apply(this,arguments);}function _downloadCsv(){_downloadCsv=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setDisabled(true);if(fetching){_context2.next=4;break;}_context2.next=4;return axios.get(\"/demandRegisters/downloadcsv/outstandingAdvance?origin=\".concat(origin,\"&search=\")).then(function(response){setDisabled(false);setServerError();if(response.data)window.open(\"\".concat(process.env.REACT_APP_BASE_URL,\"/files/\").concat(response.data));}).catch(function(error){setServerError(error.response);});case 4:setOrigin();case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _downloadCsv.apply(this,arguments);}if(origin!=null)downloadCsv();},[origin]);var columns=useMemo(function(){return[{Header:\"Dak-Id\",accessor:\"dakidNo\",Cell:function Cell(_ref){var row=_ref.row;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"label\",{children:row.original.dakidNo})});}},{Header:\"CdaoNo\",accessor:\"cdaoNo\",Cell:function Cell(_ref2){var row=_ref2.row;return/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[row.original.cdaoNo,row.original.checkDigit]});}},{Header:\"Advance Type\",accessor:\"demandType\",Filter:SelectColumnFilter,filter:\"demandType\"},{Header:\"Origin\",accessor:\"origin\",Filter:SelectColumnFilter,filter:function filter(rows,id,filterValue){return rows.filter(function(row){return filterValue===row.original[id];});}},{Header:\"Section Name\",accessor:\"sectionName\",Filter:SelectColumnFilter},{Header:\"Task\",accessor:\"taskNo\",Filter:SelectColumnFilter},{Header:\"Amount\",accessor:\"amount\",Cell:function Cell(_ref3){var row=_ref3.row;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"label\",{className:\"text-center text-red-500\",children:row.original.amount})});}},{Header:\"Demand Date\",accessor:\"demandDate\",Cell:function Cell(_ref4){var row=_ref4.row;return/*#__PURE__*/_jsx(\"label\",{children:row.original.demandDate});}},{Header:\"Journey Date\",Cell:function Cell(_ref5){var row=_ref5.row;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Journey Start Date: \",row.original.journeyStartDate]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Journey End Date: \",row.original.journeyEndDate]})})]});}},{Header:\"Journey Details\",Cell:function Cell(_ref6){var row=_ref6.row;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Journey Station From: \",row.original.stationFrom]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Journey Station To: \",row.original.stationTo]})})]});}}];},[data]);var handleSubmit=function handleSubmit(event){event.preventDefault();setSearch(inputText);};var handleKeyPress=function handleKeyPress(event){if(event.keyCode===13||event.which===13){handleSubmit(event);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 text-gray-900\",style:disabled?{pointerEvents:\"none\",opacity:\"0.4\"}:{},children:/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-10xl px-4 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 -ml-2\",children:serverError&&/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-semibold text-red-600\",children:[serverError.status,\" - \",serverError.statusText,\". Please Contact EDP.\"]})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-semibold text-yellow-800\",children:\"Outstanding Advances\"}),data&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"search\",placeholder:\"CDAO No\",onChange:function onChange(e){return setInputText(e.target.value);},onKeyPress:handleKeyPress,className:\"-ml-1 pl-2\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handleSubmit,className:\"w-24 mx-1 p-0\",children:\"Search\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-1\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col justify-center items-center\",children:openModal&&/*#__PURE__*/_jsxs(Modal,{setOpenModal:setOpenModal,heading:\"Note (Download Csv) :\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"IDAS Officers and TSS -\",\">\",\" All Sections Outstanding Advances will be downloaded.\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"SAO/AO/AAO -\",\">\",\" Concerned Sections Outstanding Advances will be downloaded.\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"TaskHolder -\",\">\",\" Concerned Task (1 - 5) Outstanding Advances will be downloaded.\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 font-bold mt-4\",children:\"Open CSV file with MS Excel:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Select Data \",\"->\",\" Text to Column \",\"->\",\" Select Delimited \",\"->\",\" Select Comma \",\"->\",\" Select Text \",\"->\",\" Click on Finish.\"]})]})})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:function onClick(e){return setOrigin(\"\");},className:\"w-36 mr-8 p-0\",children:\"Download Csv\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:function onClick(e){return setOrigin(\"DTS\");},className:\"w-36 mx-8 p-0\",children:\"Download DTS Csv\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:function onClick(e){return setOrigin(\"Non-DTS\");},className:\"w-48 mx-8 p-0\",children:\"Download Non-DTS Csv\"}),/*#__PURE__*/_jsx(\"button\",{className:\"w-32 h-8 my-4 bg-red-500 hover:bg-red-700 justify-end\",onClick:function onClick(){return setOpenModal(true);},children:\"View Note\"})]}),data&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 max-h-full\",children:/*#__PURE__*/_jsx(Table,{columns:columns,data:data,className:\"table-auto\"})})]})});}export default withRouter(OutstandingAdvancesList);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/OutstandingAdvancesList.js"],"names":["useState","useEffect","useMemo","Table","SelectColumnFilter","axios","withRouter","Modal","OutstandingAdvancesList","data","setData","serverError","setServerError","search","setSearch","inputText","setInputText","origin","setOrigin","disabled","setDisabled","openModal","setOpenModal","fetching","fetchOutstandingAdvances","get","then","response","catch","error","downloadCsv","window","open","process","env","REACT_APP_BASE_URL","columns","Header","accessor","Cell","row","original","dakidNo","cdaoNo","checkDigit","Filter","filter","rows","id","filterValue","amount","demandDate","journeyStartDate","journeyEndDate","stationFrom","stationTo","handleSubmit","event","preventDefault","handleKeyPress","keyCode","which","pointerEvents","opacity","status","statusText","e","target","value"],"mappings":"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","sourcesContent":["import { useState, useEffect, useMemo } from \"react\";\nimport Table, { SelectColumnFilter } from \"../utils/Table\";\nimport axios from \"axios\";\nimport { withRouter } from \"react-router-dom\";\nimport Modal from \"../utils/Modal\";\n\nfunction OutstandingAdvancesList() {\n  const [data, setData] = useState();\n  const [serverError, setServerError] = useState();\n  const [search, setSearch] = useState(\"\");\n  const [inputText, setInputText] = useState(\"\");\n  const [origin, setOrigin] = useState();\n  const [disabled, setDisabled] = useState(false);\n  const [openModal, setOpenModal] = useState(false);\n\n  useEffect(() => {\n    let fetching = false;\n    async function fetchOutstandingAdvances() {\n      setDisabled(true);\n      if (!fetching)\n        await axios\n          .get(`/demandRegisters/outstandingAdvance?search=` + search)\n          .then((response) => {\n            setDisabled(false);\n            if (response.data) setData(response.data);\n            setServerError();\n          })\n          .catch((error) => {\n            setData();\n            setDisabled(false);\n            setServerError(error.response);\n          });\n    }\n    fetchOutstandingAdvances();\n  }, [search]);\n\n  useEffect(() => {\n    let fetching = false;\n    async function downloadCsv() {\n      setDisabled(true);\n      if (!fetching)\n        await axios\n          .get(\n            `/demandRegisters/downloadcsv/outstandingAdvance?origin=${origin}&search=`\n          )\n          .then((response) => {\n            setDisabled(false);\n            setServerError();\n            if (response.data)\n              window.open(\n                `${process.env.REACT_APP_BASE_URL}/files/${response.data}`\n              );\n          })\n          .catch((error) => {\n            setServerError(error.response);\n          });\n      setOrigin();\n    }\n\n    if (origin != null) downloadCsv();\n  }, [origin]);\n\n  const columns = useMemo(\n    () => [\n      {\n        Header: \"Dak-Id\",\n        accessor: \"dakidNo\",\n        Cell: ({ row }) => (\n          <div>\n            <label>{row.original.dakidNo}</label>\n          </div>\n        ),\n      },\n\n      {\n        Header: \"CdaoNo\",\n        accessor: \"cdaoNo\",\n        Cell: ({ row }) => (\n          <div className=\"text-sm text-gray-500\">\n            {row.original.cdaoNo}\n            {row.original.checkDigit}\n          </div>\n        ),\n      },\n\n      {\n        Header: \"Advance Type\",\n        accessor: \"demandType\",\n        Filter: SelectColumnFilter,\n        filter: \"demandType\",\n      },\n\n      {\n        Header: \"Origin\",\n        accessor: \"origin\",\n        Filter: SelectColumnFilter,\n        filter: (rows, id, filterValue) =>\n          rows.filter((row) => filterValue === row.original[id]),\n      },\n\n      {\n        Header: \"Section Name\",\n        accessor: \"sectionName\",\n        Filter: SelectColumnFilter,\n      },\n\n      {\n        Header: \"Task\",\n        accessor: \"taskNo\",\n        Filter: SelectColumnFilter,\n      },\n\n      {\n        Header: \"Amount\",\n        accessor: \"amount\",\n        Cell: ({ row }) => (\n          <div>\n            <label className=\"text-center text-red-500\">\n              {row.original.amount}\n            </label>\n          </div>\n        ),\n      },\n\n      {\n        Header: \"Demand Date\",\n        accessor: \"demandDate\",\n        Cell: ({ row }) => <label>{row.original.demandDate}</label>,\n      },\n\n      {\n        Header: \"Journey Date\",\n        Cell: ({ row }) => (\n          <div>\n            <div>\n              <label>Journey Start Date: {row.original.journeyStartDate}</label>\n            </div>\n            <div>\n              <label>Journey End Date: {row.original.journeyEndDate}</label>\n            </div>\n          </div>\n        ),\n      },\n\n      {\n        Header: \"Journey Details\",\n        Cell: ({ row }) => (\n          <div>\n            <div>\n              <label>Journey Station From: {row.original.stationFrom}</label>\n            </div>\n            <div>\n              <label>Journey Station To: {row.original.stationTo}</label>\n            </div>\n          </div>\n        ),\n      },\n    ],\n    [data]\n  );\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    setSearch(inputText);\n  };\n\n  const handleKeyPress = (event) => {\n    if (event.keyCode === 13 || event.which === 13) {\n      handleSubmit(event);\n    }\n  };\n\n  return (\n    <div\n      className=\"min-h-screen bg-gray-100 text-gray-900\"\n      style={disabled ? { pointerEvents: \"none\", opacity: \"0.4\" } : {}}\n    >\n      <main className=\"max-w-10xl px-4 sm:px-6 lg:px-8\">\n        <div className=\"mt-2 -ml-2\">\n          {serverError && (\n            <h1 className=\"text-2xl font-semibold text-red-600\">\n              {serverError.status} - {serverError.statusText}. Please Contact\n              EDP.\n            </h1>\n          )}\n        </div>\n        <p className=\"text-3xl font-semibold text-yellow-800\">\n          Outstanding Advances\n        </p>\n        {data && (\n          <div>\n            <input\n              type=\"text\"\n              name=\"search\"\n              placeholder=\"CDAO No\"\n              onChange={(e) => setInputText(e.target.value)}\n              onKeyPress={handleKeyPress}\n              className=\"-ml-1 pl-2\"\n            />\n            <button\n              type=\"submit\"\n              onClick={handleSubmit}\n              className=\"w-24 mx-1 p-0\"\n            >\n              Search\n            </button>\n          </div>\n        )}\n\n        <div className=\"p-1\">\n          <div>\n            \n            <div className=\"flex flex-col justify-center items-center\">\n            {openModal && (\n              <Modal\n                setOpenModal={setOpenModal}\n                heading=\"Note (Download Csv) :\"\n              >\n                <li>\n                  IDAS Officers and TSS -{\">\"} All Sections Outstanding Advances\n                  will be downloaded.\n                </li>\n\n                <li>\n                  SAO/AO/AAO -{\">\"} Concerned Sections Outstanding Advances will\n                  be downloaded.\n                </li>\n                <li>\n                  TaskHolder -{\">\"} Concerned Task (1 - 5) Outstanding Advances\n                  will be downloaded.\n                </li>\n                <p className=\"text-red-500 font-bold mt-4\">\n                  Open CSV file with MS Excel:</p>\n                  <p>Select Data {\"->\"} Text to Column {\"->\"} Select Delimited {\"->\"} Select Comma {\"->\"} Select Text {\"->\"} Click on Finish.</p>\n                  \n              </Modal>\n            )}\n            </div>\n            \n          </div>\n          <button\n            type=\"submit\"\n            onClick={(e) => setOrigin(\"\")}\n            className=\"w-36 mr-8 p-0\"\n          >\n            Download Csv\n          </button>\n\n          <button\n            type=\"submit\"\n            onClick={(e) => setOrigin(\"DTS\")}\n            className=\"w-36 mx-8 p-0\"\n          >\n            Download DTS Csv\n          </button>\n\n          <button\n            type=\"submit\"\n            onClick={(e) => setOrigin(\"Non-DTS\")}\n            className=\"w-48 mx-8 p-0\"\n          >\n            Download Non-DTS Csv\n          </button>\n          \n          <button className=\"w-32 h-8 my-4 bg-red-500 hover:bg-red-700 justify-end\" onClick={() => setOpenModal(true)}>View Note</button>\n          \n          \n        </div>\n\n        {data && (\n          <div className=\"mt-1 max-h-full\">\n            <Table columns={columns} data={data} className=\"table-auto\" />\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n\nexport default withRouter(OutstandingAdvancesList);\n"]},"metadata":{},"sourceType":"module"}