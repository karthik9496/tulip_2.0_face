{"ast":null,"code":"import _defineProperty from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By : \n */import{useState,useEffect}from\"react\";import{withRouter,useParams,useHistory}from\"react-router-dom\";import{useForm}from\"react-hook-form\";import axios from'axios';import*as yup from\"yup\";import{yupResolver}from'@hookform/resolvers/yup';import LiveSearch from'../utils/LiveSearch';import DatePicker from'react-datepicker';import\"react-datepicker/dist/react-datepicker.css\";import addDays from'date-fns/addDays';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var schema=yup.object({//     dak: yup.object().required('Required'),\nemployee:yup.object().required('Required')//   fundPurpose: yup.object().required('Required'),\n//    unit: yup.object().required('Required'),\n//     cdaoNo: yup.string().required('Required'),\n//   checkDigit: yup.string().required('Required'),\n//   tempFinal: yup.string().required('Required'),\n//    totalInstalment: yup.number().integer().required('Required'),\n//   rate: yup.number().required('Required'),\n//   consolidatedAmount: yup.number().integer().required('Required'),\n//   approvalAmount: yup.number().integer().required('Required'),\n//  reason: yup.string().required('Required'),\n//    remarks: yup.string().required('Required'),\n//    specialSanction: yup.boolean().required('Required'),\n//    monthEnding: yup.string().required('Required'),\n//    recoveryStartDate: yup.string().required('Required'),\n//    recordStatus: yup.string().required('Required'),\n//   approved: yup.boolean().required('Required'),\n//   bulkApproval: yup.boolean().required('Required'),\n//    auditorDate: yup.string().required('Required'),\n//    aaoDate: yup.string().required('Required'),\n//  aoDate: yup.string().required('Required'),\n//     dvNo: yup.number().integer().required('Required'),\n//     dpSheetNo: yup.number().integer().required('Required'),\n// dpSheetDate: yup.string().required('Required'),\n//   cmpFileNo: yup.string().required('Required'),\n//     cmpDate: yup.string().required('Required'),\n});var CbillLoanEdit=function CbillLoanEdit(){var _errors$employee,_errors$loanCode,_errors$sanctionNo,_errors$sanctionDate,_errors$unit,_errors$contingentBil,_errors$contingentBil2,_errors$sanctionAmoun,_errors$consolidatedA,_errors$reason,_errors$recordStatus;var _useForm=useForm({resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,errors=_useForm.formState.errors,clearErrors=_useForm.clearErrors;var _useParams=useParams(),id=_useParams.id;//console.log(id);\nvar history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),serverErrors=_useState2[0],setServerErrors=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),entity=_useState4[0],setEntity=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),state=_useState6[0],setState=_useState6[1];var _useState7=useState(new Date()),_useState8=_slicedToArray(_useState7,2),recoveryStartDate=_useState8[0],setRecoveryStartDate=_useState8[1];var _useState9=useState(new Date()),_useState10=_slicedToArray(_useState9,2),auditorDate=_useState10[0],setAuditorDate=_useState10[1];var _useState11=useState(new Date()),_useState12=_slicedToArray(_useState11,2),aaoDate=_useState12[0],setAaoDate=_useState12[1];var _useState13=useState(new Date()),_useState14=_slicedToArray(_useState13,2),aoDate=_useState14[0],setAoDate=_useState14[1];var _useState15=useState(new Date()),_useState16=_slicedToArray(_useState15,2),dpSheetDate=_useState16[0],setDpSheetDate=_useState16[1];var _useState17=useState(new Date()),_useState18=_slicedToArray(_useState17,2),cmpDate=_useState18[0],setCmpDate=_useState18[1];var _useState19=useState(true),_useState20=_slicedToArray(_useState19,2),loading=_useState20[0],setLoading=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),dakidNo=_useState22[0],setDakidNo=_useState22[1];var _useState23=useState(''),_useState24=_slicedToArray(_useState23,2),monthEnding=_useState24[0],setMonthEnding=_useState24[1];var _useState25=useState(''),_useState26=_slicedToArray(_useState25,2),rankName=_useState26[0],setRankName=_useState26[1];var _useState27=useState(''),_useState28=_slicedToArray(_useState27,2),cdaoNo=_useState28[0],setCdaoNo=_useState28[1];var _useState29=useState(''),_useState30=_slicedToArray(_useState29,2),name=_useState30[0],setName=_useState30[1];var _useState31=useState(''),_useState32=_slicedToArray(_useState31,2),account=_useState32[0],setAccount=_useState32[1];var _useState33=useState(''),_useState34=_slicedToArray(_useState33,2),ifsc=_useState34[0],setIfsc=_useState34[1];var _useState35=useState(0),_useState36=_slicedToArray(_useState35,2),empId=_useState36[0],setEmpId=_useState36[1];var _useState37=useState(''),_useState38=_slicedToArray(_useState37,2),bankDetails=_useState38[0],setBankDetails=_useState38[1];useEffect(function(){var isCancelled=false;console.log(id);if(id!=='new'){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var record,fields;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:record='';_context.next=3;return axios.get('/cbillLoans/'+id).then(function(response){record=response.data;}).catch(function(error){//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 3:setDakidNo(record.dak.dakidNo);setMonthEnding(record.monthEnding);setRankName(record.employee.rank.rankName);fields=['id','dak','employee','unit','sanctionUnit','cdaoNo','checkDigit','monthEnding','sanctionNo','sanctionDate','sanctionAmount','approvalAmount','paymentInstalmentCount','totalInstalmentCount','recoveryRate','balancePrincipal','balanceInterest','loanCode','recoveryDate','folioNumber','recordStatus','reason','arrearsRecovery','progressiveAmount','originalSanction','agifPrincipalAmount','agifInterestAmount','acquisitionType','approved','auditorDate','aaoDate','aoDate','contingentBillNo','contingentBillDate'];fields.forEach(function(field){return setValue(field,record[field]);});if(!isCancelled){setEntity(record);setState(function(prev){return _objectSpread(_objectSpread({},prev),{},{state:record});});}case 9:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();return function(){isCancelled=true;};}},[id,setValue]);useEffect(function(){var fetching=false;var unmounted=false;function fetchBankDetailsData(){return _fetchBankDetailsData.apply(this,arguments);}function _fetchBankDetailsData(){_fetchBankDetailsData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(fetching){_context2.next=3;break;}_context2.next=3;return axios.get(\"/cbillLoans/\".concat(id,\"/bankDetails\")).then(function(response){//console.log(\"==========Bank Details====:\" + response.data);\nsetBankDetails(response.data);setAccount(response.data['bankAccountClearText']);setIfsc(response.data['ifsc']);if(!unmounted){setBankDetails(response.data.map(function(_ref){var cdaoNo=_ref.cdaoNo,bankAccountNo=_ref.bankAccountNo,ifsc=_ref.ifsc;return{label:cdaoNo,value:bankAccountNo,ifsc:ifsc};}));setLoading(false);}}).catch(function(error){if(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchBankDetailsData.apply(this,arguments);}fetchBankDetailsData();return function(){fetching=true;unmounted=true;};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[empId,setEmpId]);var onSubmit=function onSubmit(data,event){event.preventDefault();console.log(\"777777777:\"+data);if(data.id){axios.put(\"/cbillLoans/audSubmit/\"+data.id,data).then(function(response){history.push(\"/cbillLoans\");}).catch(function(error){//console.log(error.response.data);\n//console.log(\"response--------\"+error.response.status);\nsetServerErrors(error.response.data['reason']);});}else{axios.post(\"/cbillLoans/\",data).then(function(response){}).catch(function(error){//console.log(error.response.data);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nsetServerErrors(error.response.data);});}};var onError=function onError(errors,e){return console.log(errors,e);};//All foreign keys. \n// XXXXXX Add search fields and adjust the values as necessary\nvar parentData={dak:{title:\"Dak\",url:\"daks\",searchList:['id'],//XXXXXXXXX Add search fields\nfkEntity:\"dak\",preload:false//XXXXXX Set this to true for small tables like designations\n},employee:{title:\"Employee\",url:\"employees/all/effective\",searchList:['cdaoNo','checkDigit','officerName'],//XXXXXXXXX Add search fields\nfkEntity:\"employee\",preload:false//XXXXXX Set this to true for small tables like designations\n},loanCode:{title:\"Loan Code Description\",url:\"loanCodes\",searchList:['loanName'],//XXXXXXXXX Add search fields\nfkEntity:\"loanCode\",preload:false//XXXXXX Set this to true for small tables like designations\n},unit:{title:\"Sanction Unit\",url:\"units\",searchList:['unitName'],//XXXXXXXXX Add search fields\nfkEntity:\"unit\",preload:false//XXXXXX Set this to true for small tables like designations\n}};//Callback for child components (Foreign Keys)\nvar callback=function callback(childData){//console.log(\"Parent Callback\");\nsetEntity(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},childData.fk,childData.entity));});setValue(childData.fk,childData.entity);if(childData.fk==='employee')setEmpId(childData.entity.id);//console.log(errors);\nclearErrors(childData.fk);};var errorCallback=function errorCallback(err){//console.log(err);\nsetServerErrors(err);};var handleInputChange=function handleInputChange(e){//console.log(e.target.value);\n};var handleButtonClick=function handleButtonClick(e){history.push(\"/cbillLoans\");};return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-xl mx-auto \",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full w-3/4  mx-auto \",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit,onError),children:[/*#__PURE__*/_jsxs(\"h1\",{children:[id==='new'?'Add':'Edit',\" Cbill Loans \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:serverErrors}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-0\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"DakId\"}),\" \",dakidNo,\"  : \",monthEnding]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LiveSearch,{name:\"employee\",onChange:handleInputChange,parentData:parentData.employee,parentCallback:callback,fkEntity:entity.employee,errCallback:errorCallback}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 \",children:(_errors$employee=errors.employee)===null||_errors$employee===void 0?void 0:_errors$employee.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Rank\"}),rankName]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Bank Details\"}),account,\",\",ifsc]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LiveSearch,{name:\"loanCode\",onChange:handleInputChange,parentData:parentData.loanCode,parentCallback:callback,fkEntity:entity.loanCode,errCallback:errorCallback}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 \",children:(_errors$loanCode=errors.loanCode)===null||_errors$loanCode===void 0?void 0:_errors$loanCode.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Sanction No\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"sanctionNo\"},register(\"sanctionNo\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$sanctionNo=errors.sanctionNo)===null||_errors$sanctionNo===void 0?void 0:_errors$sanctionNo.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Sanction Date\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"date\",name:\"sanctionDate\"},register(\"sanctionDate\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$sanctionDate=errors.sanctionDate)===null||_errors$sanctionDate===void 0?void 0:_errors$sanctionDate.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LiveSearch,{name:\"unit\",onChange:handleInputChange,parentData:parentData.unit,parentCallback:callback,fkEntity:entity.unit,errCallback:errorCallback}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 \",children:(_errors$unit=errors.unit)===null||_errors$unit===void 0?void 0:_errors$unit.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Contingent Bill No\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"contingentBillNo\"},register(\"contingentBillNo\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$contingentBil=errors.contingentBillNo)===null||_errors$contingentBil===void 0?void 0:_errors$contingentBil.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Contingent Bill Date\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"date\",name:\"contingentBillDate\"},register(\"contingentBillDate\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$contingentBil2=errors.contingentBillDate)===null||_errors$contingentBil2===void 0?void 0:_errors$contingentBil2.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Sanction Amount\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"sanctionAmount\"},register(\"sanctionAmount\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$sanctionAmoun=errors.sanctionAmount)===null||_errors$sanctionAmoun===void 0?void 0:_errors$sanctionAmoun.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Approval Amount\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"consolidatedAmount\"},register(\"consolidatedAmount\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$consolidatedA=errors.consolidatedAmount)===null||_errors$consolidatedA===void 0?void 0:_errors$consolidatedA.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Reason\"}),/*#__PURE__*/_jsx(\"textarea\",_objectSpread(_objectSpread({type:\"text\",name:\"reason\"},register(\"reason\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$reason=errors.reason)===null||_errors$reason===void 0?void 0:_errors$reason.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Record Status\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"recordStatus\"},register(\"recordStatus\")),{},{readOnly:true,className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$recordStatus=errors.recordStatus)===null||_errors$recordStatus===void 0?void 0:_errors$recordStatus.message})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-2\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-2\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleButtonClick,children:\"Cancel\"})})]})})});};export default withRouter(CbillLoanEdit);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/CbillLoanEdit.js"],"names":["useState","useEffect","withRouter","useParams","useHistory","useForm","axios","yup","yupResolver","LiveSearch","DatePicker","addDays","schema","object","employee","required","CbillLoanEdit","resolver","register","handleSubmit","setValue","errors","formState","clearErrors","id","history","serverErrors","setServerErrors","entity","setEntity","state","setState","Date","recoveryStartDate","setRecoveryStartDate","auditorDate","setAuditorDate","aaoDate","setAaoDate","aoDate","setAoDate","dpSheetDate","setDpSheetDate","cmpDate","setCmpDate","loading","setLoading","dakidNo","setDakidNo","monthEnding","setMonthEnding","rankName","setRankName","cdaoNo","setCdaoNo","name","setName","account","setAccount","ifsc","setIfsc","empId","setEmpId","bankDetails","setBankDetails","isCancelled","console","log","fetchData","record","get","then","response","data","catch","error","Error","dak","rank","fields","forEach","field","prev","fetching","unmounted","fetchBankDetailsData","map","bankAccountNo","label","value","onSubmit","event","preventDefault","put","push","post","onError","e","parentData","title","url","searchList","fkEntity","preload","loanCode","unit","callback","childData","fk","errorCallback","err","handleInputChange","handleButtonClick","message","sanctionNo","sanctionDate","contingentBillNo","contingentBillDate","sanctionAmount","consolidatedAmount","reason","recordStatus"],"mappings":"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","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By : \n */\n\nimport { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from 'axios';\nimport * as yup from \"yup\";\n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport LiveSearch from '../utils/LiveSearch';\n\nimport DatePicker  from 'react-datepicker';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport addDays from 'date-fns/addDays'\n\n\nconst schema = yup.object({\n //     dak: yup.object().required('Required'),\n      employee: yup.object().required('Required'),\n   //   fundPurpose: yup.object().required('Required'),\n  //    unit: yup.object().required('Required'),\n //     cdaoNo: yup.string().required('Required'),\n   //   checkDigit: yup.string().required('Required'),\n   //   tempFinal: yup.string().required('Required'),\n  //    totalInstalment: yup.number().integer().required('Required'),\n   //   rate: yup.number().required('Required'),\n   //   consolidatedAmount: yup.number().integer().required('Required'),\n   //   approvalAmount: yup.number().integer().required('Required'),\n    //  reason: yup.string().required('Required'),\n  //    remarks: yup.string().required('Required'),\n  //    specialSanction: yup.boolean().required('Required'),\n  //    monthEnding: yup.string().required('Required'),\n  //    recoveryStartDate: yup.string().required('Required'),\n  //    recordStatus: yup.string().required('Required'),\n   //   approved: yup.boolean().required('Required'),\n   //   bulkApproval: yup.boolean().required('Required'),\n  //    auditorDate: yup.string().required('Required'),\n  //    aaoDate: yup.string().required('Required'),\n    //  aoDate: yup.string().required('Required'),\n //     dvNo: yup.number().integer().required('Required'),\n //     dpSheetNo: yup.number().integer().required('Required'),\n     // dpSheetDate: yup.string().required('Required'),\n   //   cmpFileNo: yup.string().required('Required'),\n //     cmpDate: yup.string().required('Required'),\n});\n\n\nconst CbillLoanEdit = () => {\n\tconst { register, handleSubmit, setValue, formState: { errors }, clearErrors } = useForm({\n\t\tresolver: yupResolver(schema)\n\t});\n\n\tlet { id } = useParams();\n\t//console.log(id);\n\n\tlet history = useHistory();\n\tconst [serverErrors, setServerErrors] = useState([]);\n\tconst [entity, setEntity] = useState({});\n\tconst [state, setState] = useState({});\n\t\n    const [ recoveryStartDate, setRecoveryStartDate] = useState(new Date());\n    const [ auditorDate, setAuditorDate] = useState(new Date());\n    const [ aaoDate, setAaoDate] = useState(new Date());\n    const [ aoDate, setAoDate] = useState(new Date());\n    const [ dpSheetDate, setDpSheetDate] = useState(new Date());\n    const [ cmpDate, setCmpDate] = useState(new Date());\n    \n    const [loading, setLoading] = useState(true);\n\tconst [dakidNo, setDakidNo] = useState('');\n    const [monthEnding, setMonthEnding] = useState('');\n    const [rankName, setRankName] = useState('');\n    const [cdaoNo, setCdaoNo] = useState('');\n    const [name, setName] = useState('');\n    \n    const [account, setAccount] = useState('');\n    const [ifsc, setIfsc] = useState('');\n    const [empId, setEmpId] = useState(0);\n    const [bankDetails, setBankDetails] = useState('');\n     \n\tuseEffect(() => {\n\t\tlet isCancelled = false;\n\t\tconsole.log(id);\n\t\tif (id !== 'new') {\n\t\t\tasync function fetchData() {\n\t\t\t\tlet record = '';\n\t\t\t\tawait axios.get('/cbillLoans/' + id)\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\trecord = response.data;\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t//console.log(error);\n\t\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\t\tif(error.response)\n\t\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t\t});\n\t\t \t\tsetDakidNo(record.dak.dakidNo);\n\t\t \t\tsetMonthEnding(record.monthEnding);\n\t\t \t\tsetRankName(record.employee.rank.rankName);\n\t\t \t\t \n\t\t \t\t\n\t\t\t\tconst fields = [\n\t\t\t\t'id', 'dak', 'employee', 'unit', 'sanctionUnit', 'cdaoNo', 'checkDigit', 'monthEnding', \n\t\t\t\t'sanctionNo', 'sanctionDate', 'sanctionAmount', 'approvalAmount', 'paymentInstalmentCount',\n\t\t\t\t 'totalInstalmentCount', 'recoveryRate', 'balancePrincipal', 'balanceInterest', 'loanCode', \n\t\t\t\t 'recoveryDate', 'folioNumber', 'recordStatus', 'reason', 'arrearsRecovery', 'progressiveAmount', \n\t\t\t\t 'originalSanction', 'agifPrincipalAmount', 'agifInterestAmount', 'acquisitionType', 'approved', \n\t\t\t\t 'auditorDate', 'aaoDate', 'aoDate'\t,'contingentBillNo','contingentBillDate'\t\t\t\n\t\t\t\t\t];\n\t\t\t\tfields.forEach(field => setValue(field, record[field]));\n\t\t\t\tif (!isCancelled) {\n\t\t\t\t\tsetEntity(record);\n\t\t\t\t\tsetState(prev => ({ ...prev, state: record }));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfetchData();\n\t\t\treturn () => {\n\t\t\t\tisCancelled = true;\n\t\t\t};\n\t\t}\n\n\t}, [id, setValue]);\n\n\t \n\t\n\tuseEffect(() => {\n\t\tlet fetching = false;\n\t\tlet unmounted = false;\n\t\tasync function fetchBankDetailsData() {\n\n\t\t\tif (!fetching )\n\t\t\t\tawait axios.get(`/cbillLoans/${id}/bankDetails`)\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t//console.log(\"==========Bank Details====:\" + response.data);\n\t\t\t\t\t\tsetBankDetails(response.data);\n\t\t\t\t\t\tsetAccount(response.data['bankAccountClearText']);\n\t\t\t\t\t\tsetIfsc(response.data['ifsc']);\n\t\t\t\t\t\tif (!unmounted) {\n\t\t\t\t\t\t\tsetBankDetails(\n\t\t\t\t\t\t\t\tresponse.data.map(({ cdaoNo, bankAccountNo, ifsc }) => ({ label: cdaoNo, value: bankAccountNo, ifsc: ifsc }))\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t \n\t\t\t\t\t\tif (error.response)\n\t\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t\t})\n\t\t}\n\t\tfetchBankDetailsData();\n\n\t\treturn () => { fetching = true; unmounted = true; }\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [empId, setEmpId]);\n\t\n \n\t \n\t\n\tconst onSubmit = (data, event,) => {\n\t\tevent.preventDefault();\n\t\tconsole.log(\"777777777:\"+data);\n\t\tif (data.id) {\n\t\t\taxios.put(\"/cbillLoans/audSubmit/\" + data.id, data)\n\t\t\t\t.then((response) => { \n\t\t\t\t\t history.push(\"/cbillLoans\");\n\t\t\t\t\t \n\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\t//console.log(error.response.data);\n\t\t\t\t\t//console.log(\"response--------\"+error.response.status);\n\t\t\t\t \n\t\t\t\t\tsetServerErrors(error.response.data['reason']);\n\t\t\t\t});\n\t \n\t\t}else {\n\t\t\taxios.post(\"/cbillLoans/\", data)\n\t\t\t\t.then((response) => { })\n\t\t\t\t.catch((error) => {\n\t\t\t\t\t//console.log(error.response.data);\n\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\tsetServerErrors(error.response.data)\n\t\t\t\t});\n\t\t}\n\n\t\t \n\t}\n\n\tconst onError = (errors, e) => console.log(errors, e);\n\n\t//All foreign keys. \n\t// XXXXXX Add search fields and adjust the values as necessary\n\tconst parentData = {\n\t\n\t\tdak: {\n\t\t\ttitle: \"Dak\",\n\t\t\turl : \"daks\",\n\t\t\tsearchList : ['id'], //XXXXXXXXX Add search fields\n\t\t\tfkEntity: \"dak\",\n\t\t\tpreload: false, //XXXXXX Set this to true for small tables like designations\n\t\t},\n\t\temployee: {\n\t\t\ttitle: \"Employee\",\n\t\t\turl: \"employees/all/effective\",\n\t\t\tsearchList: ['cdaoNo', 'checkDigit', 'officerName'], //XXXXXXXXX Add search fields\n\t\t\tfkEntity: \"employee\",\n\t\t\tpreload: false, //XXXXXX Set this to true for small tables like designations\n\t\t},\n\t\tloanCode: {\n\t\t\ttitle: \"Loan Code Description\",\n\t\t\turl : \"loanCodes\",\n\t\t\tsearchList : ['loanName'], //XXXXXXXXX Add search fields\n\t\t\tfkEntity: \"loanCode\",\n\t\t\tpreload: false, //XXXXXX Set this to true for small tables like designations\n\t\t},\n\t\tunit: {\n\t\t\ttitle: \"Sanction Unit\",\n\t\t\turl : \"units\",\n\t\t\tsearchList : ['unitName'], //XXXXXXXXX Add search fields\n\t\t\tfkEntity: \"unit\",\n\t\t\tpreload: false, //XXXXXX Set this to true for small tables like designations\n\t\t},\n}\n\n\t//Callback for child components (Foreign Keys)\n\tconst callback = (childData) => {\n\t\t//console.log(\"Parent Callback\");\n\t\tsetEntity(prev => ({ ...prev, [childData.fk]: childData.entity }));\n\t\tsetValue(childData.fk, childData.entity);\n\t\t\n\t\tif(childData.fk==='employee')\n\t\t\tsetEmpId(childData.entity.id)\n\t\t//console.log(errors);\n\t\tclearErrors(childData.fk);\n\t};\n\n\tconst errorCallback = (err) => {\n\t\t//console.log(err);\n\t\tsetServerErrors(err);\n\t}\n\n\tconst handleInputChange = (e) => {\n\t\t//console.log(e.target.value);\n\t};\n\t\n\t \n\tconst handleButtonClick = (e) =>{\n\t\thistory.push(\"/cbillLoans\");\n\t}\n\treturn (\n\t\t<div className=\"max-w-xl mx-auto \">\n\t\t\t<div className=\"w-full w-3/4  mx-auto \" >\n\n\t\t\t\t<form onSubmit={handleSubmit(onSubmit, onError)}>\n\t\t\t\t\t<h1 >{id === 'new' ? 'Add' : 'Edit'} Cbill Loans </h1>\n\t\t\t\t\t<div className=\"text-red-500\">{serverErrors}</div>\n\n\t\t\t\t\t<div className=\"grid grid-cols-2 gap-0\">\n\t\t\t\t\t\t <div >\n\t\t\t\t\t\t\t\t\t<label>DakId</label> {dakidNo}  : {monthEnding}\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t \n\t\t\t\t\t\t\t\t<div >\n\t\t\t\t\t\t\t\t\t<LiveSearch name=\"employee\" onChange={handleInputChange}\n\t\t\t\t\t\t\t\t\t\tparentData={parentData.employee} parentCallback={callback}\n\t\t\t\t\t\t\t\t\t\tfkEntity={entity.employee} errCallback={errorCallback} />\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500 \">{errors.employee?.message}</div>\n\t\t\t\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Rank</label>\n\t\t\t\t\t\t\t\t\t{rankName} \n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Bank Details</label>\n\t\t\t\t\t\t\t\t\t{account},{ifsc}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t<div >\n\t\t\t\t\t\t\t<LiveSearch name=\"loanCode\" onChange={handleInputChange}\n\t\t\t\t\t\t\t\tparentData={parentData.loanCode} parentCallback={callback} \n\t\t\t\t\t\t\t\tfkEntity={entity.loanCode} errCallback={errorCallback} />\n\t\t\t\t\t\t\t<div className=\"text-red-500 \">{errors.loanCode?.message}</div>\n\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label>Sanction No</label>\n\t\t\t\t\t\t\t<input type=\"text\" name=\"sanctionNo\" {...register(\"sanctionNo\")}\n\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.sanctionNo?.message}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t \n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Sanction Date</label>\n\t\t\t\t\t\t\t\t\t<input type=\"date\" name=\"sanctionDate\" {...register(\"sanctionDate\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.sanctionDate?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t \n\t\t\t\t\t\t<div >\n\t\t\t\t\t\t\t\t\t<LiveSearch name=\"unit\" onChange={handleInputChange}\n\t\t\t\t\t\t\t\t\t\tparentData={parentData.unit} parentCallback={callback}\n\t\t\t\t\t\t\t\t\t\tfkEntity={entity.unit} errCallback={errorCallback} />\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500 \">{errors.unit?.message}</div>\n\t\t\t\t\t\t\t\t</div>\t\n\t\t\t\t\t\t \n\t\t\t\t\t \n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label>Contingent Bill No</label>\n\t\t\t\t\t\t\t<input type=\"text\" name=\"contingentBillNo\" {...register(\"contingentBillNo\")}\n\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.contingentBillNo?.message}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Contingent Bill Date</label>\n\t\t\t\t\t\t\t\t\t<input type=\"date\" name=\"contingentBillDate\" {...register(\"contingentBillDate\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.contingentBillDate?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t \n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label>Sanction Amount</label>\n\t\t\t\t\t\t\t<input type=\"text\" name=\"sanctionAmount\" {...register(\"sanctionAmount\")}\n\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.sanctionAmount?.message}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label>Approval Amount</label>\n\t\t\t\t\t\t\t<input type=\"text\" name=\"consolidatedAmount\" {...register(\"consolidatedAmount\")}\n\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.consolidatedAmount?.message}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label>Reason</label>\n\t\t\t\t\t\t\t<textarea type=\"text\" name=\"reason\" {...register(\"reason\")}\n\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.reason?.message}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label>Record Status</label>\n\t\t\t\t\t\t\t<input type=\"text\" name=\"recordStatus\" {...register(\"recordStatus\")} readOnly\n\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.recordStatus?.message}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t \n\t\t\t\t\t\t\n\t\t\t\t\t\t \n\t\t\t\t\t\t\n\t\t\t\t \t\t\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"px-2\">\n\t\t\t\t\t\t<button type=\"submit\" >Save</button>   \n\t\t\t\t\t</div>\n\t\t\t\t\t\t \n\t\t\t\t<div className=\"px-2\">\n\t\t\t\t<button type=\"button\" onClick={handleButtonClick} >Cancel</button>\n\t\t\t\t</div>\n\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default withRouter(CbillLoanEdit);"]},"metadata":{},"sourceType":"module"}