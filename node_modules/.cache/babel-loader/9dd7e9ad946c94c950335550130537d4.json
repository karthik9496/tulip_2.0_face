{"ast":null,"code":"var _jsxFileName = \"/home/itsdc3/Imp Tulip files/falconws160424/falconws/falcon_face/src/components/ManualDtsSettlement.js\";\nimport { useState, useEffect, useMemo } from \"react\";\nimport Table, { SelectColumnFilter } from \"../utils/Table\";\nimport axios from \"axios\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport { BasicLoadingIcon } from \"../utils/Icons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ManualDtsSettlement() {\n  const [data, setData] = useState([]);\n  const [update, setUpdate] = useState(false);\n  const [serverErrors, setServerErrors] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [inputText, setInputText] = useState(\"\");\n  const [dtsData, setDtsData] = useState([]);\n  const [lightTheme, setLightTheme] = useState(true);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    let fetching = false;\n\n    async function fetchData() {\n      if (!fetching) setLoading(true);\n      await axios.get(\"/demandRegisters/manualDtsSettlement/showManualDts?search=\" + search).then(response => {\n        console.log(\">>>>>demand register----:\" + response.data);\n        setDtsData(response.data);\n        setLoading(false);\n      }).catch(error => {\n        setLoading(false); //console.log(error);\n        //console.log(error.response.status);\n        //console.log(error.response.headers);\n\n        if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n      });\n    }\n\n    fetchData();\n    return () => {\n      fetching = true;\n    };\n  }, [search, update]);\n\n  async function submit(id) {\n    console.log(\">>>>>Demand Register is----:\" + id);\n    await axios.put(`/demandRegisters/submit/${id}/manualDtsSettle`).then(response => {\n      //console.log(data);\n      let updatedRecords = [...data].filter(i => i.id !== id); //console.log(updatedRecords);\n\n      setData(updatedRecords);\n      setUpdate(!update); //pcdao\n    }).catch(error => {\n      console.log(error); //console.log(error.response.status);\n      //console.log(error.response.headers);\n\n      if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n    });\n  }\n\n  async function approve(id) {\n    await axios.put(`/demandRegisters/approveDts/${id}/manualDtsSettle`).then(response => {\n      let updatedRecords = [...data].filter(i => i.id !== id); //pcdao\n      //console.log(updatedRecords);\n\n      setData(updatedRecords);\n      setUpdate(!update); //setData([]);\n    }).catch(error => {\n      console.log(error); //console.log(error.response.status);\n      //console.log(error.response.headers);\n\n      if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n    });\n  }\n\n  const columns = useMemo(() => [{\n    Header: \"Action\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [row.original.status != null && row.original.status.includes(\"audSubmit\") && row.original.cancellationCharges === 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"w-16 m-0 p-0 bg-green-500 hover:bg-green-700 \",\n          onClick: () => submit(row.original.dtsIdForReference),\n          children: [\" \", \"Submit\", \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 19\n        }, this), row.original.status != null && row.original.status.includes(\"audSubmit\") && row.original.cancellationCharges !== 0 && /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/demandRegisters/\" + row.original.dtsIdForReference + \"/manualDtsSettlementOption\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"w-16 m-0 p-0 bg-red-500 hover:bg-green-700 \",\n            children: [\" \", \"Action\", \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [row.original.status != null && row.original.status === \"aaoSubmit\" && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"w-32 m-0 p-0 bg-red-500 hover:bg-gray-700 \",\n          onClick: () => submit(row.original.dtsIdForReference),\n          children: [\" \", \"Submit\", \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 19\n        }, this), \" \", row.original.status != null && row.original.status === \"aoSubmit\" && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"w-32 m-0 p-0 bg-red-500 hover:bg-red-700 \",\n          onClick: () => approve(row.original.dtsIdForReference),\n          children: [\" \", \"Approve\", \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }, this)\n  }, {\n    Header: \"CDAONo\",\n    accessor: \"cdaoNo\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: row.original.transCdaoNo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }, this)\n  }, {\n    Header: \"DakId No\",\n    accessor: \"dtsDakForReference\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"DakId of Reference Id:\", row.original.dtsDakForReference]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"DakId of Transaction Id:\", row.original.dtsDakForTransaction]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 11\n    }, this)\n  }, {\n    Header: \"Link Id\",\n    accessor: \"referenceId\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Reference Id:\", row.original.referenceId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Transaction Id:\", row.original.transactionId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 11\n    }, this)\n  }, {\n    Header: \"Journey Station\",\n    accessor: \"journeyStationFrom\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: row.original.journeyStationFrom\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: row.original.journeyStationTo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: row.original.transJourneyStationFrom\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: row.original.transJourneyStationTo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 11\n    }, this)\n  }, {\n    Header: \"Amount\",\n    accessor: \"refAmount\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: row.original.refAmount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: row.original.transAmount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 11\n    }, this)\n  }, {\n    Header: \"Cancellation Charges\",\n    accessor: \"cancellationCharges\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: row.original.cancellationCharges\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 11\n    }, this)\n  }, {\n    Header: \"Cancellation Ground\",\n    accessor: \"cancellationGround\",\n    Cell: ({\n      row\n    }) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          children: row.original.cancellationGround\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 11\n    }, this)\n  }], [dtsData]);\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    console.log(inputText);\n    setSearch(inputText);\n  };\n\n  const handleKeyPress = event => {\n    // look for the `Enter` keyCode\n    if (event.keyCode === 13 || event.which === 13) {\n      handleSubmit(event);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: lightTheme ? \"theme-light\" : \"theme-dark\",\n    style: loading ? {\n      pointerEvents: \"none\",\n      opacity: \"0.8\"\n    } : {},\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-100 text-gray-900\",\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 ml-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-xl font-semibold\",\n            children: \"Manual DTS Settlement\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flexContainer\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"search\",\n              onChange: e => setInputText(e.target.value),\n              onKeyPress: handleKeyPress,\n              className: \"pl-2 -ml-2 inputField flex-initial\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              onClick: handleSubmit,\n              className: \"w-16 m-0 p-0\",\n              children: \"Search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center items-center fixed top-1/4 w-full z-50\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mr-2 text-2xl text-green-600\",\n            children: \"Fetching Data\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(BasicLoadingIcon, {\n            className: \"ml-1 mt-1 h-10 w-10 animate-spin text-green-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"-mt-2 max-h-1 py-0\",\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            columns: columns,\n            data: dtsData,\n            className: \"table-auto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 276,\n    columnNumber: 5\n  }, this);\n}\n\nexport default withRouter(ManualDtsSettlement);","map":{"version":3,"sources":["/home/itsdc3/Imp Tulip files/falconws160424/falconws/falcon_face/src/components/ManualDtsSettlement.js"],"names":["useState","useEffect","useMemo","Table","SelectColumnFilter","axios","withRouter","Link","BasicLoadingIcon","ManualDtsSettlement","data","setData","update","setUpdate","serverErrors","setServerErrors","search","setSearch","inputText","setInputText","dtsData","setDtsData","lightTheme","setLightTheme","loading","setLoading","fetching","fetchData","get","then","response","console","log","catch","error","Error","submit","id","put","updatedRecords","filter","i","approve","columns","Header","Cell","row","original","status","includes","cancellationCharges","dtsIdForReference","accessor","transCdaoNo","dtsDakForReference","dtsDakForTransaction","referenceId","transactionId","journeyStationFrom","journeyStationTo","transJourneyStationFrom","transJourneyStationTo","refAmount","transAmount","cancellationGround","handleSubmit","event","preventDefault","handleKeyPress","keyCode","which","pointerEvents","opacity","e","target","value"],"mappings":";AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,OAA9B,QAA6C,OAA7C;AAEA,OAAOC,KAAP,IAAgBC,kBAAhB,QAA0C,gBAA1C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,IAArB,QAAiC,kBAAjC;AACA,SAASC,gBAAT,QAAiC,gBAAjC;;;AAEA,SAASC,mBAAT,GAA+B;AAC7B,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBX,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACY,MAAD,EAASC,SAAT,IAAsBb,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAACc,YAAD,EAAeC,eAAf,IAAkCf,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACgB,MAAD,EAASC,SAAT,IAAsBjB,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACkB,SAAD,EAAYC,YAAZ,IAA4BnB,QAAQ,CAAC,EAAD,CAA1C;AAEA,QAAM,CAACoB,OAAD,EAAUC,UAAV,IAAwBrB,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACsB,UAAD,EAAaC,aAAb,IAA8BvB,QAAQ,CAAC,IAAD,CAA5C;AACA,QAAM,CAACwB,OAAD,EAAUC,UAAV,IAAwBzB,QAAQ,CAAC,KAAD,CAAtC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIyB,QAAQ,GAAG,KAAf;;AAEA,mBAAeC,SAAf,GAA2B;AACzB,UAAI,CAACD,QAAL,EAAeD,UAAU,CAAC,IAAD,CAAV;AACf,YAAMpB,KAAK,CACRuB,GADG,CAEF,+DAA+DZ,MAF7D,EAIHa,IAJG,CAIGC,QAAD,IAAc;AAClBC,QAAAA,OAAO,CAACC,GAAR,CAAY,8BAA8BF,QAAQ,CAACpB,IAAnD;AAEAW,QAAAA,UAAU,CAACS,QAAQ,CAACpB,IAAV,CAAV;AACAe,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD,OATG,EAUHQ,KAVG,CAUIC,KAAD,IAAW;AAChBT,QAAAA,UAAU,CAAC,KAAD,CAAV,CADgB,CAEhB;AACA;AACA;;AACA,YAAIS,KAAK,CAACJ,QAAV,EAAoBf,eAAe,CAACmB,KAAK,CAACJ,QAAN,CAAepB,IAAf,CAAoBwB,KAArB,CAAf,CAApB,KACKnB,eAAe,CAACmB,KAAK,CAACC,KAAP,CAAf;AACN,OAjBG,CAAN;AAkBD;;AACDR,IAAAA,SAAS;AACT,WAAO,MAAM;AACXD,MAAAA,QAAQ,GAAG,IAAX;AACD,KAFD;AAGD,GA5BQ,EA4BN,CAACV,MAAD,EAASJ,MAAT,CA5BM,CAAT;;AA8BA,iBAAewB,MAAf,CAAsBC,EAAtB,EAA0B;AACxBN,IAAAA,OAAO,CAACC,GAAR,CAAY,iCAAiCK,EAA7C;AACA,UAAMhC,KAAK,CACRiC,GADG,CACE,2BAA0BD,EAAG,kBAD/B,EAEHR,IAFG,CAEGC,QAAD,IAAc;AAClB;AAEA,UAAIS,cAAc,GAAG,CAAC,GAAG7B,IAAJ,EAAU8B,MAAV,CAAkBC,CAAD,IAAOA,CAAC,CAACJ,EAAF,KAASA,EAAjC,CAArB,CAHkB,CAIlB;;AACA1B,MAAAA,OAAO,CAAC4B,cAAD,CAAP;AACA1B,MAAAA,SAAS,CAAC,CAACD,MAAF,CAAT,CANkB,CAME;AACrB,KATG,EAUHqB,KAVG,CAUIC,KAAD,IAAW;AAChBH,MAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ,EADgB,CAEhB;AACA;;AACA,UAAIA,KAAK,CAACJ,QAAV,EAAoBf,eAAe,CAACmB,KAAK,CAACJ,QAAN,CAAepB,IAAf,CAAoBwB,KAArB,CAAf,CAApB,KACKnB,eAAe,CAACmB,KAAK,CAACC,KAAP,CAAf;AACN,KAhBG,CAAN;AAiBD;;AAED,iBAAeO,OAAf,CAAuBL,EAAvB,EAA2B;AACzB,UAAMhC,KAAK,CACRiC,GADG,CACE,+BAA8BD,EAAG,kBADnC,EAEHR,IAFG,CAEGC,QAAD,IAAc;AAClB,UAAIS,cAAc,GAAG,CAAC,GAAG7B,IAAJ,EAAU8B,MAAV,CAAkBC,CAAD,IAAOA,CAAC,CAACJ,EAAF,KAASA,EAAjC,CAArB,CADkB,CACyC;AAC3D;;AACA1B,MAAAA,OAAO,CAAC4B,cAAD,CAAP;AACA1B,MAAAA,SAAS,CAAC,CAACD,MAAF,CAAT,CAJkB,CAMlB;AACD,KATG,EAUHqB,KAVG,CAUIC,KAAD,IAAW;AAChBH,MAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ,EADgB,CAEhB;AACA;;AACA,UAAIA,KAAK,CAACJ,QAAV,EAAoBf,eAAe,CAACmB,KAAK,CAACJ,QAAN,CAAepB,IAAf,CAAoBwB,KAArB,CAAf,CAApB,KACKnB,eAAe,CAACmB,KAAK,CAACC,KAAP,CAAf;AACN,KAhBG,CAAN;AAiBD;;AAED,QAAMQ,OAAO,GAAGzC,OAAO,CACrB,MAAM,CACJ;AACE0C,IAAAA,MAAM,EAAE,QADV;AAEEC,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA;AAAF,KAAD,kBACJ;AAAA,8BACE;AAAA,mBACGA,GAAG,CAACC,QAAJ,CAAaC,MAAb,IAAuB,IAAvB,IACCF,GAAG,CAACC,QAAJ,CAAaC,MAAb,CAAoBC,QAApB,CAA6B,WAA7B,CADD,IAECH,GAAG,CAACC,QAAJ,CAAaG,mBAAb,KAAqC,CAFtC,iBAGG;AACE,UAAA,SAAS,EAAC,+CADZ;AAEE,UAAA,OAAO,EAAE,MAAMd,MAAM,CAACU,GAAG,CAACC,QAAJ,CAAaI,iBAAd,CAFvB;AAAA,qBAIG,GAJH,YAKS,GALT;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJN,EAaGL,GAAG,CAACC,QAAJ,CAAaC,MAAb,IAAuB,IAAvB,IACCF,GAAG,CAACC,QAAJ,CAAaC,MAAb,CAAoBC,QAApB,CAA6B,WAA7B,CADD,IAECH,GAAG,CAACC,QAAJ,CAAaG,mBAAb,KAAqC,CAFtC,iBAGG,QAAC,IAAD;AACE,UAAA,EAAE,EACA,sBACAJ,GAAG,CAACC,QAAJ,CAAaI,iBADb,GAEA,4BAJJ;AAAA,iCAOE;AAAQ,YAAA,SAAS,EAAC,6CAAlB;AAAA,uBACG,GADH,YAES,GAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAPF;AAAA;AAAA;AAAA;AAAA,gBAhBN;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAgCE;AAAA,mBACGL,GAAG,CAACC,QAAJ,CAAaC,MAAb,IAAuB,IAAvB,IACCF,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwB,WADzB,iBAEG;AACE,UAAA,SAAS,EAAC,4CADZ;AAEE,UAAA,OAAO,EAAE,MAAMZ,MAAM,CAACU,GAAG,CAACC,QAAJ,CAAaI,iBAAd,CAFvB;AAAA,qBAIG,GAJH,YAKS,GALT;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHN,EAUO,GAVP,EAWGL,GAAG,CAACC,QAAJ,CAAaC,MAAb,IAAuB,IAAvB,IACCF,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwB,UADzB,iBAEG;AACE,UAAA,SAAS,EAAC,2CADZ;AAEE,UAAA,OAAO,EAAE,MAAMN,OAAO,CAACI,GAAG,CAACC,QAAJ,CAAaI,iBAAd,CAFxB;AAAA,qBAIG,GAJH,aAKU,GALV;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbN;AAAA;AAAA;AAAA;AAAA;AAAA,cAhCF;AAAA;AAAA;AAAA;AAAA;AAAA;AAHJ,GADI,EA8DJ;AACEP,IAAAA,MAAM,EAAE,QADV;AAEEQ,IAAAA,QAAQ,EAAE,QAFZ;AAGEP,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA;AAAF,KAAD,kBACJ;AAAA,6BACE;AAAA,+BACE;AAAA,oBAAQA,GAAG,CAACC,QAAJ,CAAaM;AAArB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAJJ,GA9DI,EA0EJ;AACET,IAAAA,MAAM,EAAE,UADV;AAEEQ,IAAAA,QAAQ,EAAE,oBAFZ;AAGEP,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA;AAAF,KAAD,kBACJ;AAAA,8BACE;AAAA,+BACE;AAAA,+CACyBA,GAAG,CAACC,QAAJ,CAAaO,kBADtC;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAME;AAAA,+BACE;AAAA,iDAC2BR,GAAG,CAACC,QAAJ,CAAaQ,oBADxC;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cANF;AAAA;AAAA;AAAA;AAAA;AAAA;AAJJ,GA1EI,EA6FJ;AACEX,IAAAA,MAAM,EAAE,SADV;AAEEQ,IAAAA,QAAQ,EAAE,aAFZ;AAGEP,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA;AAAF,KAAD,kBACJ;AAAA,8BACE;AAAA,+BACE;AAAA,sCAAqBA,GAAG,CAACC,QAAJ,CAAaS,WAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAIE;AAAA,+BACE;AAAA,wCAAuBV,GAAG,CAACC,QAAJ,CAAaU,aAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAJJ,GA7FI,EA4GJ;AACEb,IAAAA,MAAM,EAAE,iBADV;AAEEQ,IAAAA,QAAQ,EAAE,oBAFZ;AAGEP,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA;AAAF,KAAD,kBACJ;AAAA,8BACE;AAAA,+BACE;AAAA,oBAAQA,GAAG,CAACC,QAAJ,CAAaW;AAArB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAIE;AAAA,+BACE;AAAA,oBAAQZ,GAAG,CAACC,QAAJ,CAAaY;AAArB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAJF,eAOE;AAAA,+BACE;AAAA,oBAAQb,GAAG,CAACC,QAAJ,CAAaa;AAArB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAPF,eAUE;AAAA,+BACE;AAAA,oBAAQd,GAAG,CAACC,QAAJ,CAAac;AAArB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAVF;AAAA;AAAA;AAAA;AAAA;AAAA;AAJJ,GA5GI,EAiIJ;AACEjB,IAAAA,MAAM,EAAE,QADV;AAEEQ,IAAAA,QAAQ,EAAE,WAFZ;AAGEP,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA;AAAF,KAAD,kBACJ;AAAA,8BACE;AAAA,+BACE;AAAA,oBAAQA,GAAG,CAACC,QAAJ,CAAae;AAArB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAIE;AAAA,+BACE;AAAA,oBAAQhB,GAAG,CAACC,QAAJ,CAAagB;AAArB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAJJ,GAjII,EAgJJ;AACEnB,IAAAA,MAAM,EAAE,sBADV;AAEEQ,IAAAA,QAAQ,EAAE,qBAFZ;AAGEP,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA;AAAF,KAAD,kBACJ;AAAA,6BACE;AAAA,+BACE;AAAA,oBAAQA,GAAG,CAACC,QAAJ,CAAaG;AAArB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAJJ,GAhJI,EA4JJ;AACEN,IAAAA,MAAM,EAAE,qBADV;AAEEQ,IAAAA,QAAQ,EAAE,oBAFZ;AAGEP,IAAAA,IAAI,EAAE,CAAC;AAAEC,MAAAA;AAAF,KAAD,kBACJ;AAAA,6BACE;AAAA,+BACE;AAAA,oBAAQA,GAAG,CAACC,QAAJ,CAAaiB;AAArB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAJJ,GA5JI,CADe,EAyKrB,CAAC5C,OAAD,CAzKqB,CAAvB;;AA4KA,QAAM6C,YAAY,GAAIC,KAAD,IAAW;AAC9BA,IAAAA,KAAK,CAACC,cAAN;AACApC,IAAAA,OAAO,CAACC,GAAR,CAAYd,SAAZ;AACAD,IAAAA,SAAS,CAACC,SAAD,CAAT;AACD,GAJD;;AAMA,QAAMkD,cAAc,GAAIF,KAAD,IAAW;AAChC;AACA,QAAIA,KAAK,CAACG,OAAN,KAAkB,EAAlB,IAAwBH,KAAK,CAACI,KAAN,KAAgB,EAA5C,EAAgD;AAC9CL,MAAAA,YAAY,CAACC,KAAD,CAAZ;AACD;AACF,GALD;;AAOA,sBACE;AACE,IAAA,SAAS,EAAE5C,UAAU,GAAG,aAAH,GAAmB,YAD1C;AAEE,IAAA,KAAK,EAAEE,OAAO,GAAG;AAAE+C,MAAAA,aAAa,EAAE,MAAjB;AAAyBC,MAAAA,OAAO,EAAE;AAAlC,KAAH,GAA+C,EAF/D;AAAA,2BAIE;AAAK,MAAA,SAAS,EAAC,wCAAf;AAAA,6BACE;AAAM,QAAA,SAAS,EAAC,6CAAhB;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA,kCACE;AAAI,YAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAK,YAAA,SAAS,EAAC,eAAf;AAAA,oCACE;AACE,cAAA,IAAI,EAAC,MADP;AAEE,cAAA,IAAI,EAAC,QAFP;AAGE,cAAA,QAAQ,EAAGC,CAAD,IAAOtD,YAAY,CAACsD,CAAC,CAACC,MAAF,CAASC,KAAV,CAH/B;AAIE,cAAA,UAAU,EAAEP,cAJd;AAKE,cAAA,SAAS,EAAC;AALZ;AAAA;AAAA;AAAA;AAAA,oBADF,eAQE;AACE,cAAA,IAAI,EAAC,QADP;AAEE,cAAA,OAAO,EAAEH,YAFX;AAGE,cAAA,SAAS,EAAC,cAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBARF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAoBGzC,OAAO,gBACN;AAAK,UAAA,SAAS,EAAC,4DAAf;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC,8BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,gBAAD;AAAkB,YAAA,SAAS,EAAC;AAA5B;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADM,gBAMN;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAA,iCACE,QAAC,KAAD;AAAO,YAAA,OAAO,EAAEmB,OAAhB;AAAyB,YAAA,IAAI,EAAEvB,OAA/B;AAAwC,YAAA,SAAS,EAAC;AAAlD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBA1BJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA,UADF;AAwCD;;AAED,eAAed,UAAU,CAACG,mBAAD,CAAzB","sourcesContent":["import { useState, useEffect, useMemo } from \"react\";\n\nimport Table, { SelectColumnFilter } from \"../utils/Table\";\nimport axios from \"axios\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport { BasicLoadingIcon } from \"../utils/Icons\";\n\nfunction ManualDtsSettlement() {\n  const [data, setData] = useState([]);\n  const [update, setUpdate] = useState(false);\n  const [serverErrors, setServerErrors] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [inputText, setInputText] = useState(\"\");\n\n  const [dtsData, setDtsData] = useState([]);\n  const [lightTheme, setLightTheme] = useState(true);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    let fetching = false;\n\n    async function fetchData() {\n      if (!fetching) setLoading(true);\n      await axios\n        .get(\n          \"/demandRegisters/manualDtsSettlement/showManualDts?search=\" + search\n        )\n        .then((response) => {\n          console.log(\">>>>>demand register----:\" + response.data);\n\n          setDtsData(response.data);\n          setLoading(false);\n        })\n        .catch((error) => {\n          setLoading(false);\n          //console.log(error);\n          //console.log(error.response.status);\n          //console.log(error.response.headers);\n          if (error.response) setServerErrors(error.response.data.error);\n          else setServerErrors(error.Error);\n        });\n    }\n    fetchData();\n    return () => {\n      fetching = true;\n    };\n  }, [search, update]);\n\n  async function submit(id) {\n    console.log(\">>>>>Demand Register is----:\" + id);\n    await axios\n      .put(`/demandRegisters/submit/${id}/manualDtsSettle`)\n      .then((response) => {\n        //console.log(data);\n\n        let updatedRecords = [...data].filter((i) => i.id !== id);\n        //console.log(updatedRecords);\n        setData(updatedRecords);\n        setUpdate(!update); //pcdao\n      })\n      .catch((error) => {\n        console.log(error);\n        //console.log(error.response.status);\n        //console.log(error.response.headers);\n        if (error.response) setServerErrors(error.response.data.error);\n        else setServerErrors(error.Error);\n      });\n  }\n\n  async function approve(id) {\n    await axios\n      .put(`/demandRegisters/approveDts/${id}/manualDtsSettle`)\n      .then((response) => {\n        let updatedRecords = [...data].filter((i) => i.id !== id); //pcdao\n        //console.log(updatedRecords);\n        setData(updatedRecords);\n        setUpdate(!update);\n\n        //setData([]);\n      })\n      .catch((error) => {\n        console.log(error);\n        //console.log(error.response.status);\n        //console.log(error.response.headers);\n        if (error.response) setServerErrors(error.response.data.error);\n        else setServerErrors(error.Error);\n      });\n  }\n\n  const columns = useMemo(\n    () => [\n      {\n        Header: \"Action\",\n        Cell: ({ row }) => (\n          <div>\n            <div>\n              {row.original.status != null &&\n                row.original.status.includes(\"audSubmit\") &&\n                row.original.cancellationCharges === 0 && (\n                  <button\n                    className=\"w-16 m-0 p-0 bg-green-500 hover:bg-green-700 \"\n                    onClick={() => submit(row.original.dtsIdForReference)}\n                  >\n                    {\" \"}\n                    Submit{\" \"}\n                  </button>\n                )}\n\n              {row.original.status != null &&\n                row.original.status.includes(\"audSubmit\") &&\n                row.original.cancellationCharges !== 0 && (\n                  <Link\n                    to={\n                      \"/demandRegisters/\" +\n                      row.original.dtsIdForReference +\n                      \"/manualDtsSettlementOption\"\n                    }\n                  >\n                    <button className=\"w-16 m-0 p-0 bg-red-500 hover:bg-green-700 \">\n                      {\" \"}\n                      Action{\" \"}\n                    </button>\n                  </Link>\n                )}\n            </div>\n\n            <div>\n              {row.original.status != null &&\n                row.original.status === \"aaoSubmit\" && (\n                  <button\n                    className=\"w-32 m-0 p-0 bg-red-500 hover:bg-gray-700 \"\n                    onClick={() => submit(row.original.dtsIdForReference)}\n                  >\n                    {\" \"}\n                    Submit{\" \"}\n                  </button>\n                )}{\" \"}\n              {row.original.status != null &&\n                row.original.status === \"aoSubmit\" && (\n                  <button\n                    className=\"w-32 m-0 p-0 bg-red-500 hover:bg-red-700 \"\n                    onClick={() => approve(row.original.dtsIdForReference)}\n                  >\n                    {\" \"}\n                    Approve{\" \"}\n                  </button>\n                )}\n            </div>\n          </div>\n        ),\n      },\n\n      {\n        Header: \"CDAONo\",\n        accessor: \"cdaoNo\",\n        Cell: ({ row }) => (\n          <div>\n            <div>\n              <label>{row.original.transCdaoNo}</label>\n            </div>\n          </div>\n        ),\n      },\n\n      {\n        Header: \"DakId No\",\n        accessor: \"dtsDakForReference\",\n        Cell: ({ row }) => (\n          <div>\n            <div>\n              <label>\n                DakId of Reference Id:{row.original.dtsDakForReference}\n              </label>\n            </div>\n            <div>\n              <label>\n                DakId of Transaction Id:{row.original.dtsDakForTransaction}\n              </label>\n            </div>\n          </div>\n        ),\n      },\n\n      {\n        Header: \"Link Id\",\n        accessor: \"referenceId\",\n        Cell: ({ row }) => (\n          <div>\n            <div>\n              <label>Reference Id:{row.original.referenceId}</label>\n            </div>\n            <div>\n              <label>Transaction Id:{row.original.transactionId}</label>\n            </div>\n          </div>\n        ),\n      },\n\n      {\n        Header: \"Journey Station\",\n        accessor: \"journeyStationFrom\",\n        Cell: ({ row }) => (\n          <div>\n            <div>\n              <label>{row.original.journeyStationFrom}</label>\n            </div>\n            <div>\n              <label>{row.original.journeyStationTo}</label>\n            </div>\n            <div>\n              <label>{row.original.transJourneyStationFrom}</label>\n            </div>\n            <div>\n              <label>{row.original.transJourneyStationTo}</label>\n            </div>\n          </div>\n        ),\n      },\n\n      {\n        Header: \"Amount\",\n        accessor: \"refAmount\",\n        Cell: ({ row }) => (\n          <div>\n            <div>\n              <label>{row.original.refAmount}</label>\n            </div>\n            <div>\n              <label>{row.original.transAmount}</label>\n            </div>\n          </div>\n        ),\n      },\n\n      {\n        Header: \"Cancellation Charges\",\n        accessor: \"cancellationCharges\",\n        Cell: ({ row }) => (\n          <div>\n            <div>\n              <label>{row.original.cancellationCharges}</label>\n            </div>\n          </div>\n        ),\n      },\n\n      {\n        Header: \"Cancellation Ground\",\n        accessor: \"cancellationGround\",\n        Cell: ({ row }) => (\n          <div>\n            <div>\n              <label>{row.original.cancellationGround}</label>\n            </div>\n          </div>\n        ),\n      },\n    ],\n    [dtsData]\n  );\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    console.log(inputText);\n    setSearch(inputText);\n  };\n\n  const handleKeyPress = (event) => {\n    // look for the `Enter` keyCode\n    if (event.keyCode === 13 || event.which === 13) {\n      handleSubmit(event);\n    }\n  };\n\n  return (\n    <div\n      className={lightTheme ? \"theme-light\" : \"theme-dark\"}\n      style={loading ? { pointerEvents: \"none\", opacity: \"0.8\" } : {}}\n    >\n      <div className=\"min-h-screen bg-gray-100 text-gray-900\">\n        <main className=\"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\">\n          <div className=\"mt-2 ml-4\">\n            <h1 className=\"text-xl font-semibold\">Manual DTS Settlement</h1>\n            <div className=\"flexContainer\">\n              <input\n                type=\"text\"\n                name=\"search\"\n                onChange={(e) => setInputText(e.target.value)}\n                onKeyPress={handleKeyPress}\n                className=\"pl-2 -ml-2 inputField flex-initial\"\n              />\n              <button\n                type=\"submit\"\n                onClick={handleSubmit}\n                className=\"w-16 m-0 p-0\"\n              >\n                Search\n              </button>\n            </div>\n          </div>\n          {loading ? (\n            <div className=\"flex justify-center items-center fixed top-1/4 w-full z-50\">\n              <p className=\"mr-2 text-2xl text-green-600\">Fetching Data</p>\n              <BasicLoadingIcon className=\"ml-1 mt-1 h-10 w-10 animate-spin text-green-600\" />\n            </div>\n          ) : (\n            <div className=\"-mt-2 max-h-1 py-0\">\n              <Table columns={columns} data={dtsData} className=\"table-auto\" />\n            </div>\n          )}\n        </main>\n      </div>\n    </div>\n  );\n}\n\nexport default withRouter(ManualDtsSettlement);\n"]},"metadata":{},"sourceType":"module"}