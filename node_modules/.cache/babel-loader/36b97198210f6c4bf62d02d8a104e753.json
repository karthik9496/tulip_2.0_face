{"ast":null,"code":"import _toConsumableArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By :\n */import{useState,useEffect,useMemo}from\"react\";import Table,{SelectColumnFilter}from\"../utils/Table\";//\nimport axios from\"axios\";import{withRouter,Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UsrSectionList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),update=_useState4[0],setUpdate=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),serverErrors=_useState6[0],setServerErrors=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],setSearch=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),inputText=_useState10[0],setInputText=_useState10[1];useEffect(function(){var fetching=false;function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(fetching){_context.next=3;break;}_context.next=3;return axios.get(\"/usrSections?search=\"+search).then(function(response){setData(response.data);}).catch(function(error){//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 3:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();return function(){fetching=true;};},[update,search]);function remove(_x){return _remove.apply(this,arguments);}function _remove(){_remove=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.delete(\"/usrSections/\".concat(id)).then(function(){//console.log(data);\nvar updatedRecords=_toConsumableArray(data).filter(function(i){return i.id!==id;});console.log(updatedRecords);setData(updatedRecords);setUpdate(!update);}).catch(function(error){console.log(error);//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _remove.apply(this,arguments);}var columns=useMemo(function(){return[{Header:\"Action\",Cell:function Cell(_ref){var row=_ref.row;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/usrSections/\"+row.original.id,children:/*#__PURE__*/_jsx(\"button\",{className:\" w-16 m-0 p-0 \",children:\" Edit \"})}),\" \",/*#__PURE__*/_jsxs(\"button\",{className:\"w-16 m-0 p-0 bg-red-500 hover:bg-red-700 \",onClick:function onClick(){return remove(row.original.id);},children:[\" \",\"Delete\",\" \"]})]});}},{Header:\"User\",accessor:\"usr.usrName\"// Change this\n},{Header:\"Account No\",accessor:\"usr.accountNo\"// Change this\n},{Header:\"Section\",accessor:\"section.sectionName\",// Change this\nFilter:SelectColumnFilter},{Header:\"Designation\",accessor:\"usr.designation.abbr\",// Change this\nFilter:SelectColumnFilter},{Header:\"Boss\",Cell:function Cell(_ref2){var row=_ref2.row;return/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:row.original.usrBoss!=null?row.original.usrBoss.usrName:\"\"});},accessor:\"usrBoss.usrName\",// Change this\nFilter:SelectColumnFilter,filter:function filter(rows,id,filterValue){return rows.filter(function(row){return row.original.usrBoss!=null&&filterValue===row.original.usrBoss.usrName;});}},{Header:\"Boss Designation\",accessor:\"usrBoss.designation.abbr\",// Change this\nFilter:SelectColumnFilter},{Header:\"From Date\",accessor:\"fromDate\"},{Header:\"To Date\",accessor:\"toDate\"},{Header:\"Current Record\",accessor:\"currentRecord\"}/* {\n        Header: \"Created By\",\n        accessor: \"createdBy.id\", // Change this\n      }, */ /*\n\t\t{\n\t\t\tHeader: \"Login Name\",\n\t\t\taccessor: 'loginName',\n\t\t\tFilter: SelectColumnFilter,  // new\n\t\t\tfilter: 'includes',\n\t\t},\n\t\t*/];},[data]);var handleSubmit=function handleSubmit(event){event.preventDefault();console.log(inputText);setSearch(inputText);};var handleKeyPress=function handleKeyPress(event){// look for the `Enter` keyCode\nif(event.keyCode===13||event.which===13){handleSubmit(event);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 text-gray-900\",children:/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 ml-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold\",children:\"Usr Sections\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flexContainer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"search\",onChange:function onChange(e){return setInputText(e.target.value);},onKeyPress:handleKeyPress,className:\"pl-2 -ml-2 inputField flex-initial\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handleSubmit,className:\"w-16 m-0 p-0\",children:\"Search\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/usrSections/new\",children:/*#__PURE__*/_jsxs(\"button\",{className:\" w-32 ml-8 p-0 h-6 -mt-2\",children:[\" \",\"Add Usr Section\",\" \"]})})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"-mt-2 max-h-1 py-2\",children:/*#__PURE__*/_jsx(Table,{columns:columns,data:data,className:\"table-auto\"})})]})});}export default withRouter(UsrSectionList);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/UsrSectionList.js"],"names":["useState","useEffect","useMemo","Table","SelectColumnFilter","axios","withRouter","Link","UsrSectionList","data","setData","update","setUpdate","serverErrors","setServerErrors","search","setSearch","inputText","setInputText","fetching","fetchData","get","then","response","catch","error","Error","remove","id","delete","updatedRecords","filter","i","console","log","columns","Header","Cell","row","original","accessor","Filter","usrBoss","usrName","rows","filterValue","handleSubmit","event","preventDefault","handleKeyPress","keyCode","which","e","target","value"],"mappings":"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","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By :\n */\n\nimport { useState, useEffect, useMemo } from \"react\";\nimport Table, { SelectColumnFilter } from \"../utils/Table\"; //\nimport axios from \"axios\";\nimport { withRouter, Link } from \"react-router-dom\";\n\nfunction UsrSectionList() {\n  const [data, setData] = useState([]);\n  const [update, setUpdate] = useState(false);\n  const [serverErrors, setServerErrors] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [inputText, setInputText] = useState(\"\");\n\n  useEffect(() => {\n    let fetching = false;\n    async function fetchData() {\n      if (!fetching)\n        await axios\n          .get(\"/usrSections?search=\" + search)\n          .then((response) => {\n            setData(response.data);\n          })\n          .catch((error) => {\n            //console.log(error);\n            //console.log(error.response.status);\n            //console.log(error.response.headers);\n            if (error.response) setServerErrors(error.response.data.error);\n            else setServerErrors(error.Error);\n          });\n    }\n    fetchData();\n    return () => {\n      fetching = true;\n    };\n  }, [update, search]);\n\n  async function remove(id) {\n    await axios\n      .delete(`/usrSections/${id}`)\n      .then(() => {\n        //console.log(data);\n        let updatedRecords = [...data].filter((i) => i.id !== id);\n        console.log(updatedRecords);\n        setData(updatedRecords);\n        setUpdate(!update);\n      })\n      .catch((error) => {\n        console.log(error);\n        //console.log(error.response.status);\n        //console.log(error.response.headers);\n        if (error.response) setServerErrors(error.response.data.error);\n        else setServerErrors(error.Error);\n      });\n  }\n\n  const columns = useMemo(\n    () => [\n      {\n        Header: \"Action\",\n        Cell: ({ row }) => (\n          <div>\n            <Link to={\"/usrSections/\" + row.original.id}>\n              <button className=\" w-16 m-0 p-0 \"> Edit </button>\n            </Link>{\" \"}\n            <button\n              className=\"w-16 m-0 p-0 bg-red-500 hover:bg-red-700 \"\n              onClick={() => remove(row.original.id)}\n            >\n              {\" \"}\n              Delete{\" \"}\n            </button>\n          </div>\n        ),\n      },\n      {\n        Header: \"User\",\n        accessor: \"usr.usrName\", // Change this\n      },\n\n      {\n        Header: \"Account No\",\n        accessor: \"usr.accountNo\", // Change this\n      },\n\n      {\n        Header: \"Section\",\n        accessor: \"section.sectionName\", // Change this\n        Filter: SelectColumnFilter,\n      },\n\n      {\n        Header: \"Designation\",\n        accessor: \"usr.designation.abbr\", // Change this\n        Filter: SelectColumnFilter,\n      },\n\n      {\n        Header: \"Boss\",\n        Cell: ({ row }) => (\n          <div className=\"text-sm text-gray-500\">\n            {row.original.usrBoss != null ? row.original.usrBoss.usrName : \"\"}\n          </div>\n        ),\n        accessor: \"usrBoss.usrName\", // Change this\n        Filter: SelectColumnFilter,\n        filter: (rows, id, filterValue) =>\n          rows.filter(\n            (row) =>\n              row.original.usrBoss != null &&\n              filterValue === row.original.usrBoss.usrName\n          ),\n      },\n      {\n        Header: \"Boss Designation\",\n        accessor: \"usrBoss.designation.abbr\", // Change this\n\t\tFilter: SelectColumnFilter,\n      },\n\n      {\n        Header: \"From Date\",\n        accessor: \"fromDate\",\n      },\n\n      {\n        Header: \"To Date\",\n        accessor: \"toDate\",\n      },\n\n      {\n        Header: \"Current Record\",\n        accessor: \"currentRecord\",\n      },\n\n      /* {\n        Header: \"Created By\",\n        accessor: \"createdBy.id\", // Change this\n      }, */\n\n      /*\n\t\t{\n\t\t\tHeader: \"Login Name\",\n\t\t\taccessor: 'loginName',\n\t\t\tFilter: SelectColumnFilter,  // new\n\t\t\tfilter: 'includes',\n\t\t},\n\t\t*/\n    ],\n    [data]\n  );\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    console.log(inputText);\n    setSearch(inputText);\n  };\n\n  const handleKeyPress = (event) => {\n    // look for the `Enter` keyCode\n    if (event.keyCode === 13 || event.which === 13) {\n      handleSubmit(event);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 text-gray-900\">\n      <main className=\"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\">\n        <div className=\"mt-2 ml-4\">\n          <h1 className=\"text-xl font-semibold\">Usr Sections</h1>\n          <div className=\"flexContainer\">\n            <input\n              type=\"text\"\n              name=\"search\"\n              onChange={(e) => setInputText(e.target.value)}\n              onKeyPress={handleKeyPress}\n              className=\"pl-2 -ml-2 inputField flex-initial\"\n            />\n            <button\n              type=\"submit\"\n              onClick={handleSubmit}\n              className=\"w-16 m-0 p-0\"\n            >\n              Search\n            </button>\n            <div>\n              <Link to={\"/usrSections/new\"}>\n                <button className=\" w-32 ml-8 p-0 h-6 -mt-2\">\n                  {\" \"}\n                  Add Usr Section{\" \"}\n                </button>\n              </Link>\n            </div>\n          </div>\n        </div>\n        <div className=\"-mt-2 max-h-1 py-2\">\n          <Table columns={columns} data={data} className=\"table-auto\" />\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default withRouter(UsrSectionList);\n"]},"metadata":{},"sourceType":"module"}