{"ast":null,"code":"import _toConsumableArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect,useMemo}from'react';import Table,{SelectColumnFilter}from'../utils/Table';// \nimport axios from\"axios\";import{withRouter,Link,useParams,useHistory}from\"react-router-dom\";import LiveSearch from'../utils/LiveSearch';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UsrRolList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];//const [update, setUpdate] = useState(false);\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),serverErrors=_useState4[0],setServerErrors=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),usrId=_useState6[0],setUsrId=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),inputText=_useState8[0],setInputText=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),entity=_useState10[0],setEntity=_useState10[1];//const [state, setState] = useState({});\t\nvar _useParams=useParams(),id=_useParams.id;var history=useHistory();useEffect(function(){var fetching=false;console.log(id);function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(fetching){_context.next=3;break;}_context.next=3;return axios.get(\"/usrs/\".concat(id,\"/rols\")).then(function(response){setData(response.data);console.log(response.data);}).catch(function(error){//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 3:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();return function(){fetching=true;};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[id]);function remove(_x){return _remove.apply(this,arguments);}//const handleCheckbox = index => (e) => {\nfunction _remove(){_remove=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.delete(\"/rols/\".concat(id)).then(function(){//console.log(data);\nvar updatedRecords=_toConsumableArray(data).filter(function(i){return i.id!==id;});console.log(updatedRecords);setData(updatedRecords);//setUpdate(!update);\n}).catch(function(error){console.log(error);//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return _remove.apply(this,arguments);}var handleCheckbox=function handleCheckbox(index){return function(e){//console.log(checkedObj);\nconsole.log(index+e.target.value);//let key = index;\nvar item=data[index];var val=item['updated'];if(val===\"on\"||val===true){val=false;}else{val=true;}item['updated']=val;var newData=_toConsumableArray(data);newData[index]=item;setData(newData);console.log(data);};};//{checked[row.index]}\nvar columns=useMemo(function(){return[{Header:'Existing',accessor:'existing',Cell:function Cell(_ref){var row=_ref.row;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:row.values.existing,disabled:true})});}},{Header:'Updated',accessor:'updated',Cell:function Cell(_ref2){var row=_ref2.row;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onChange:handleCheckbox(row.index),checked:data[row.index]['updated']}),\"\\xA0\\xA0 \",data[row.index]['updated']===true?'Y':'N']});}},{Header:\"Role Name\",accessor:'rolName'},{Header:\"Section\",accessor:'sectionName'// Change this\n}/*\t\t\n\n\t\t{\n\t\t\tHeader: \"Activity Brief\",\n\t\t\taccessor: 'activityBrief',\n\t\t},\n\n\n\n\t\t{\n\t\t\tHeader: \"Record Status\",\n\t\t\taccessor: 'recordStatus',\n\t\t},\n\n\n\t\t\n\t\t{\n\t\t\tHeader: \"Login Name\",\n\t\t\taccessor: 'loginName',\n\t\t\tFilter: SelectColumnFilter,  // new\n\t\t\tfilter: 'includes',\n\t\t},\n\t\t*/];},[data]);/*\n\tconst handleSubmit = (event) => {\n\t\tevent.preventDefault();\n\t\tconsole.log(inputText);\n\t\tsetSearch(inputText);\n\t}\n\n\tconst handleKeyPress = (event) => {\n\t\t// look for the `Enter` keyCode\n\t\tif (event.keyCode === 13 || event.which === 13) {\n\t\t\thandleSubmit(event)\n\t\t}\n\t}\n\t\n\tconst rolList = () => {\n\t\tdata.map(item => {\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\titem.rolname\n\t\t\t\t\t<input type=\"checkbox\" />\n\t\t\t\t</div>\n\t\t\t);\n\t\t})\n\t}\n*/var onError=function onError(errors,e){return console.log(errors,e);};//All foreign keys\nvar parentData={usr:{title:\"Search Users - Account No or Name\",url:\"usrs\",searchList:[\"accountNo\",\"usrName\"],fkEntity:\"dummy\",//LiveSearch expects fk, so give a dummy\npreload:false}};//Callback for child components (Foreign Keys)\nvar callback=function callback(childData){console.log(childData);history.push('/usrs/'+childData.entity.id+'/rols');};var errorCallback=function errorCallback(err){//console.log(err);\nsetServerErrors(err);};//console.log(entity);\nvar handleInputChange=function handleInputChange(e){//console.log(e.target.value);\n};var saveRoles=function saveRoles(){console.log(data);var saving=false;console.log(id);function saveData(){return _saveData.apply(this,arguments);}function _saveData(){_saveData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(saving){_context2.next=3;break;}_context2.next=3;return axios.put(\"/usrs/\".concat(id,\"/rols\"),data).then(function(response){setData(response.data);}).catch(function(error){//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _saveData.apply(this,arguments);}saveData();return function(){saving=true;};};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 text-gray-900\",children:/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\" \",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold ml-4\",children:\"User Roles\"}),/*#__PURE__*/_jsxs(\"div\",{className:\" ml-2 flex flex-wrap content-start ...\",children:[/*#__PURE__*/_jsx(LiveSearch,{name:\"usr\",onChange:handleInputChange,parentData:parentData.usr,parentCallback:callback,fkEntity:entity.usr,classname:\" flex flex-wrap content-start \"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:saveRoles,className:\" mt-3  w-24  \",children:\"Save Roles\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"-mt-2 max-h-1 py-0 ml-0\",children:/*#__PURE__*/_jsx(Table,{columns:columns,data:data,className:\"table-auto\"})})]})});}export default withRouter(UsrRolList);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/UsrRolList.js"],"names":["useState","useEffect","useMemo","Table","SelectColumnFilter","axios","withRouter","Link","useParams","useHistory","LiveSearch","UsrRolList","data","setData","serverErrors","setServerErrors","usrId","setUsrId","inputText","setInputText","entity","setEntity","id","history","fetching","console","log","fetchData","get","then","response","catch","error","Error","remove","delete","updatedRecords","filter","i","handleCheckbox","index","e","target","value","item","val","newData","columns","Header","accessor","Cell","row","values","existing","onError","errors","parentData","usr","title","url","searchList","fkEntity","preload","callback","childData","push","errorCallback","err","handleInputChange","saveRoles","saving","saveData","put"],"mappings":"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","sourcesContent":["import { useState, useEffect, useMemo } from 'react';\nimport Table, { SelectColumnFilter } from '../utils/Table'  // \nimport axios from \"axios\";\nimport { withRouter, Link, useParams, useHistory } from \"react-router-dom\";\nimport LiveSearch from '../utils/LiveSearch';\n\nfunction UsrRolList() {\n\n\tconst [data, setData] = useState([]);\n\t//const [update, setUpdate] = useState(false);\n\tconst [serverErrors, setServerErrors] = useState([]);\n\tconst [usrId, setUsrId] = useState(\"\");\n\tconst [inputText, setInputText] = useState('');\n\tconst [entity, setEntity] = useState({});\n\t//const [state, setState] = useState({});\t\n\n\tlet { id } = useParams();\n\tlet history = useHistory();\n\n\n\tuseEffect(() => {\n\t\tlet fetching = false;\n\t\tconsole.log(id);\n\t\tasync function fetchData() {\n\t\t\tif (!fetching)\n\t\t\t\tawait axios.get(`/usrs/${id}/rols`)\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tsetData(response.data);\n\t\t\t\t\t\tconsole.log(response.data);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t//console.log(error);\n\t\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\t\tif (error.response)\n\t\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t\t})\n\t\t}\n\t\tfetchData();\n\n\t\treturn () => { fetching = true; }\n\n\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [id]);\n\n\n\tasync function remove(id) {\n\t\tawait axios.delete(`/rols/${id}`)\n\t\t\t.then(() => {\n\t\t\t\t//console.log(data);\n\t\t\t\tlet updatedRecords = [...data].filter((i) => i.id !== id);\n\t\t\t\tconsole.log(updatedRecords);\n\t\t\t\tsetData(updatedRecords);\n\t\t\t\t//setUpdate(!update);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.log(error);\n\t\t\t\t//console.log(error.response.status);\n\t\t\t\t//console.log(error.response.headers);\n\t\t\t\tif (error.response)\n\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\telse\n\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t});\n\t}\n\n\n\t//const handleCheckbox = index => (e) => {\n\tconst handleCheckbox = index => (e) => {\n\t\t\n\t\t//console.log(checkedObj);\n\t\tconsole.log(index + e.target.value);\n\n\t\t//let key = index;\n\t\tlet item = data[index];\n\t\tlet val = item['updated'];\n\t\tif (val === \"on\" || val === true) {\n\t\t\tval = false;\n\t\t} else {\n\t\t\tval = true;\n\t\t}\n\n\t\titem['updated'] = val;\n\t\tlet newData = [...data];\n\t\tnewData[index] = item;\n\t\tsetData(newData);\n\t\tconsole.log(data);\t\t\n\t}\n\n\t//{checked[row.index]}\n\tconst columns = useMemo(() => [\n\n\t\t{\n\t\t\tHeader: 'Existing',\n\t\t\taccessor: 'existing',\n\t\t\tCell: ({ row }) => (\n\t\t\t\t<div>\n\t\t\t\t\t<input type=\"checkbox\" checked={row.values.existing} disabled />\n\t\t\t\t</div>\n\t\t\t)\n\t\t},\n\t\t{\n\t\t\tHeader: 'Updated',\n\t\t\taccessor: 'updated',\n\t\t\tCell: ({ row }) => (\n\t\t\t\t<div>\n\t\t\t\t\t<input type=\"checkbox\" onChange={handleCheckbox(row.index)} checked={data[row.index]['updated']} />\n\t\t\t\t&nbsp;&nbsp; {data[row.index]['updated'] === true ? 'Y' : 'N'}\n\t\t\t\t</div>\n\t\t\t)\n\t\t},\n\n\t\t{\n\t\t\tHeader: \"Role Name\",\n\t\t\taccessor: 'rolName',\n\t\t},\n\n\t\t{\n\t\t\tHeader: \"Section\",\n\t\t\taccessor: 'sectionName',// Change this\n\t\t},\n\t\t\n/*\t\t\n\n\t\t{\n\t\t\tHeader: \"Activity Brief\",\n\t\t\taccessor: 'activityBrief',\n\t\t},\n\n\n\n\t\t{\n\t\t\tHeader: \"Record Status\",\n\t\t\taccessor: 'recordStatus',\n\t\t},\n\n\n\t\t\n\t\t{\n\t\t\tHeader: \"Login Name\",\n\t\t\taccessor: 'loginName',\n\t\t\tFilter: SelectColumnFilter,  // new\n\t\t\tfilter: 'includes',\n\t\t},\n\t\t*/\n\t], [data])\n\n\n\t/*\n\tconst handleSubmit = (event) => {\n\t\tevent.preventDefault();\n\t\tconsole.log(inputText);\n\t\tsetSearch(inputText);\n\t}\n\n\tconst handleKeyPress = (event) => {\n\t\t// look for the `Enter` keyCode\n\t\tif (event.keyCode === 13 || event.which === 13) {\n\t\t\thandleSubmit(event)\n\t\t}\n\t}\n\t\n\tconst rolList = () => {\n\t\tdata.map(item => {\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\titem.rolname\n\t\t\t\t\t<input type=\"checkbox\" />\n\t\t\t\t</div>\n\t\t\t);\n\t\t})\n\t}\n*/\n\tconst onError = (errors, e) => console.log(errors, e);\n\n\t//All foreign keys\n\tconst parentData = {\n\t\tusr: {\n\t\t\ttitle: \"Search Users - Account No or Name\",\n\t\t\turl: \"usrs\",\n\t\t\tsearchList: [\"accountNo\", \"usrName\"],\n\t\t\tfkEntity: \"dummy\", //LiveSearch expects fk, so give a dummy\n\t\t\tpreload: false,\n\t\t},\n\t}\n\n\n\t//Callback for child components (Foreign Keys)\n\tconst callback = (childData) => {\n\t\tconsole.log(childData);\n\t\thistory.push('/usrs/' + childData.entity.id + '/rols');\n\n\t};\n\n\tconst errorCallback = (err) => {\n\t\t//console.log(err);\n\t\tsetServerErrors(err);\n\t}\n\n\t//console.log(entity);\n\n\tconst handleInputChange = (e) => {\n\t\t//console.log(e.target.value);\n\t};\n\n\tconst saveRoles = () => {\n\t\tconsole.log(data);\n\t\tlet saving = false;\n\t\tconsole.log(id);\n\t\tasync function saveData() {\n\t\t\tif (!saving)\n\t\t\t\tawait axios.put(`/usrs/${id}/rols`, data)\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tsetData(response.data);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t//console.log(error);\n\t\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\t\tif (error.response)\n\t\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t\t})\n\t\t}\n\t\tsaveData();\n\n\t\treturn () => { saving = true; }\n\t}\n\n\n\treturn (\n\t\t<div className=\"min-h-screen bg-gray-100 text-gray-900\">\n\t\t\t<main className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\">\n\t\t\t\t<div className=\" \">\n\t\t\t\t\t{/*\n\t\t\t\t\t<h1 className=\"text-xl font-semibold\">User Roles</h1>\n\t\t\t\t\t\n\t\t\t\t\t<div className=\"flexContainer\">\n\t\t\t\t\t\t<input type=\"text\" name=\"search\" \n\t\t\t\t\t\tonChange={e => setInputText(e.target.value)} placeholder=\"Search Not Yet Implemented\"\n\t\t\t\t\t\t\tonKeyPress={handleKeyPress}\n\t\t\t\t\t\t\tclassName=\"pl-2 -ml-2 inputField flex-initial\" />\n\t\t\t\t\t\t<button type=\"submit\" onClick={handleSubmit} className=\"w-16 m-0 p-0\">Search</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t*/}\n\n\t\t\t\t\t<h1 className=\"text-xl font-semibold ml-4\">User Roles</h1>\n\n\t\t\t\t\t<div className=\" ml-2 flex flex-wrap content-start ...\">\n\t\t\t\t\t\t<LiveSearch name=\"usr\" onChange={handleInputChange}\n\t\t\t\t\t\t\tparentData={parentData.usr} parentCallback={callback}\n\t\t\t\t\t\t\tfkEntity={entity.usr} classname=\" flex flex-wrap content-start \" />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button type=\"submit\" onClick={saveRoles} className=\" mt-3  w-24  \" >Save Roles</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\n\t\t\t\t</div>\n\t\t\t\t<div className=\"-mt-2 max-h-1 py-0 ml-0\">\n\t\t\t\t\t<Table columns={columns} data={data} className=\"table-auto\" />\n\t\t\t\t</div>\n\t\t\t</main>\n\n\t\t</div>\n\t);\n}\n\nexport default withRouter(UsrRolList);\n\n"]},"metadata":{},"sourceType":"module"}