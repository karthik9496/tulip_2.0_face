{"ast":null,"code":"import _regeneratorRuntime from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 18 April 2022\n *\n * Modified By : \n */import{useState,useEffect}from\"react\";import{withRouter,useParams,useHistory}from\"react-router-dom\";import{useForm}from\"react-hook-form\";import axios from'axios';import*as yup from\"yup\";import{yupResolver}from'@hookform/resolvers/yup';import LiveSearch from'../utils/LiveSearch';//import DatePicker  from 'react-datepicker';\n//import \"react-datepicker/dist/react-datepicker.css\";\n//import addDays from 'date-fns/addDays'\nimport Tabs from'react-bootstrap/Tabs';import Tab from'react-bootstrap/Tab';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var schema=yup.object({fromDate:yup.string().required('Required'),subscription:yup.number().integer().required('Required'),refund:yup.number().integer().required('Required'),fundScheduleNo:yup.string().required('Required'),fundScheduleDate:yup.string().required('Required')});var FundSubscriptionDeputationEdit=function FundSubscriptionDeputationEdit(){var _errors$employee,_errors$fromDate,_errors$subscription,_errors$refund,_errors$fundScheduleN,_errors$fundScheduleD,_errors$reason;var _useForm=useForm({resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,errors=_useForm.formState.errors,clearErrors=_useForm.clearErrors;var _useParams=useParams(),id=_useParams.id;var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),serverErrors=_useState2[0],setServerErrors=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),entity=_useState4[0],setEntity=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),state=_useState6[0],setState=_useState6[1];var _useState7=useState('page1'),_useState8=_slicedToArray(_useState7,2),key=_useState8[0],setKey=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),me=_useState10[0],setMe=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),mesg=_useState12[0],setMesg=_useState12[1];useEffect(function(){var isCancelled=false;console.log(id);if(id!=='new'){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var record;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:record='';_context.next=3;return axios.get('/fundSubscriptionDeputations/'+id).then(function(response){record=response.data;var fields=['id','dak','employee','fromDate','toDate','subscription','refund','fundDebitAmount','fundDebitMonth','fundDebitYear','fundScheduleNo','fundScheduleDate','qe','so','recordStatus','reason','auditorDate','aaoDate','aoDate','cdaoNo','checkDigit','task','approved','fundUpdated'];fields.forEach(function(field){return setValue(field,record[field]);});}).catch(function(error){//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 3:if(!isCancelled){setEntity(record);setState(function(prev){return _objectSpread(_objectSpread({},prev),{},{state:record});});}case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();return function(){isCancelled=true;};}},[]);useEffect(function(){var fetching=false;var unmounted=false;function fetchCurrentMe(){return _fetchCurrentMe.apply(this,arguments);}function _fetchCurrentMe(){_fetchCurrentMe=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!fetching)axios.get(\"/miscs/currentMe\").then(function(response){setMe(response.data);}).catch(function(error){//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchCurrentMe.apply(this,arguments);}fetchCurrentMe();return function(){fetching=true;};},[]);var onSubmit=function onSubmit(data,event){event.preventDefault();console.log(data);if(data.id){axios.put(\"/fundSubscriptionDeputations/\"+data.id,data).then(function(response){setMesg(response.data);//\t\thistory.push(\"/fundSubscriptionDeputations\");\n}).catch(function(error){//console.log(error.response.data);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nsetServerErrors(error.response.data);});}else{axios.post(\"/fundSubscriptionDeputations\",data).then(function(response){setMesg(response.data);//\thistory.push(\"/fundSubscriptionDeputations\");\n}).catch(function(error){//console.log(error.response.data);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nsetServerErrors(error.response.data);});}};var onError=function onError(errors,e){return console.log(errors,e);};//All foreign keys. \n// XXXXXX Add search fields and adjust the values as necessary\nvar parentData={employee:{title:\"Employee\",url:\"employees/all/effective\",searchList:['cdaoNo','checkDigit','officerName'],//XXXXXXXXX Add search fields\nfkEntity:\"employee\",preload:false//XXXXXX Set this to true for small tables like designations\n}};//Callback for child components (Foreign Keys)\nvar callback=function callback(childData){//console.log(\"Parent Callback\");\n//setEntity(prev => ({ ...prev, [childData.fk]: childData.entity }));\nsetValue(childData.fk,childData.entity);//console.log(errors);\nclearErrors(childData.fk);};var errorCallback=function errorCallback(err){//console.log(err);\nsetServerErrors(err);};var handleInputChange=function handleInputChange(e){//console.log(e.target.value);\n};var returnToList=function returnToList(){history.push(\"/fundSubscriptionDeputations\");};return/*#__PURE__*/ (//<div className=\"max-w-xl mx-auto \">\n//<div className=\"w-full w-3/4  mx-auto \" >\n_jsx(\"div\",{className:\"min-h-screen bg-gray-100 text-gray-900\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit,onError),children:[/*#__PURE__*/_jsxs(\"h1\",{children:[id==='new'?'Add':'Edit',\" Fund Subscription Deputation \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:mesg}),/*#__PURE__*/_jsxs(Tabs,{id:\"FundSubscriptionDeputationEdit\",activeKey:key,onSelect:function onSelect(k){return setKey(k);},className:\"mb-3\",children:[/*#__PURE__*/_jsx(Tab,{eventKey:\"page1\",title:\"Page 1\",className:\"h-120\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-0\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Month\"}),me]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LiveSearch,{name:\"employee\",onChange:handleInputChange,parentData:parentData.employee,parentCallback:callback,fkEntity:entity.employee,errCallback:errorCallback}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 \",children:(_errors$employee=errors.employee)===null||_errors$employee===void 0?void 0:_errors$employee.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"From Date\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"date\",name:\"fromDate\"},register(\"fromDate\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$fromDate=errors.fromDate)===null||_errors$fromDate===void 0?void 0:_errors$fromDate.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Subscription\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"subscription\"},register(\"subscription\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$subscription=errors.subscription)===null||_errors$subscription===void 0?void 0:_errors$subscription.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Refund\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"refund\"},register(\"refund\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$refund=errors.refund)===null||_errors$refund===void 0?void 0:_errors$refund.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fund Schedule No\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"fundScheduleNo\"},register(\"fundScheduleNo\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$fundScheduleN=errors.fundScheduleNo)===null||_errors$fundScheduleN===void 0?void 0:_errors$fundScheduleN.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Fund Schedule Date\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"date\",name:\"fundScheduleDate\"},register(\"fundScheduleDate\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$fundScheduleD=errors.fundScheduleDate)===null||_errors$fundScheduleD===void 0?void 0:_errors$fundScheduleD.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Reason\"}),/*#__PURE__*/_jsx(\"textarea\",_objectSpread(_objectSpread({type:\"text\",name:\"reason\"},register(\"reason\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$reason=errors.reason)===null||_errors$reason===void 0?void 0:_errors$reason.message})]})]})}),/*#__PURE__*/_jsx(Tab,{eventKey:\"page2\",title:\"Page 2\",className:\"h-120\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-0\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Add some fields here or delete this tab.\"})})}),/*#__PURE__*/_jsxs(Tab,{eventKey:\"help\",title:\"Help\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Help\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"list-disc\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Point 1\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Point 2\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:returnToList,children:\"Cancel\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:returnToList,children:\"Done\"})})]})]})})}));};export default withRouter(FundSubscriptionDeputationEdit);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/FundSubscriptionDeputationEdit.js"],"names":["useState","useEffect","withRouter","useParams","useHistory","useForm","axios","yup","yupResolver","LiveSearch","Tabs","Tab","schema","object","fromDate","string","required","subscription","number","integer","refund","fundScheduleNo","fundScheduleDate","FundSubscriptionDeputationEdit","resolver","register","handleSubmit","setValue","errors","formState","clearErrors","id","history","serverErrors","setServerErrors","entity","setEntity","state","setState","key","setKey","me","setMe","mesg","setMesg","isCancelled","console","log","fetchData","record","get","then","response","data","fields","forEach","field","catch","error","Error","prev","fetching","unmounted","fetchCurrentMe","onSubmit","event","preventDefault","put","post","onError","e","parentData","employee","title","url","searchList","fkEntity","preload","callback","childData","fk","errorCallback","err","handleInputChange","returnToList","push","k","message","reason"],"mappings":"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","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 18 April 2022\n *\n * Modified By : \n */\n\nimport { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from 'axios';\nimport * as yup from \"yup\";\n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport LiveSearch from '../utils/LiveSearch';\n\n//import DatePicker  from 'react-datepicker';\n//import \"react-datepicker/dist/react-datepicker.css\";\n//import addDays from 'date-fns/addDays'\n\nimport Tabs from 'react-bootstrap/Tabs'\nimport Tab from 'react-bootstrap/Tab'\n\nconst schema = yup.object({\n       \n      \n      fromDate: yup.string().required('Required'),\n      \n      subscription: yup.number().integer().required('Required'),\n      refund: yup.number().integer().required('Required'),\n       \n      fundScheduleNo: yup.string().required('Required'),\n      fundScheduleDate: yup.string().required('Required'),\n   \n});\n\n\nconst FundSubscriptionDeputationEdit = () => {\n\tconst { register, handleSubmit, setValue, formState: { errors }, clearErrors } = useForm({\n\t\tresolver: yupResolver(schema)\n\t});\n\n\tlet { id } = useParams();\n\n\tlet history = useHistory();\n\tconst [serverErrors, setServerErrors] = useState([]);\n\tconst [entity, setEntity] = useState({});\n\tconst [state, setState] = useState({});\n\tconst [key, setKey] = useState('page1');\n\tconst [me,setMe]=useState('');\n\tconst [mesg,setMesg]=useState('');\n\t\n\t\n\tuseEffect(() => {\n\t\tlet isCancelled = false;\n\t\tconsole.log(id);\n\t\tif (id !== 'new') {\n\t\t\tasync function fetchData() {\n\t\t\t\tlet record = '';\n\t\t\t\tawait axios.get('/fundSubscriptionDeputations/' + id)\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\trecord = response.data;\n\t\t\t\t\t\tconst fields = [\n\t\t\t\t\t\t'id', 'dak', 'employee', 'fromDate', 'toDate', 'subscription', 'refund', 'fundDebitAmount',\n\t\t\t\t\t\t'fundDebitMonth', 'fundDebitYear', 'fundScheduleNo', 'fundScheduleDate', 'qe', 'so', 'recordStatus',\n\t\t\t\t\t\t'reason', 'auditorDate', 'aaoDate', 'aoDate', 'cdaoNo', 'checkDigit', 'task', 'approved', 'fundUpdated'\t\t\t\t\n\t\t\t\t\t];\n\t\t\t\t\tfields.forEach(field => setValue(field, record[field]));\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t//console.log(error);\n\t\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\t\tif(error.response)\n\t\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t\t});\n\n\n\t\t\t\tif (!isCancelled) {\n\t\t\t\t\tsetEntity(record);\n\t\t\t\t\tsetState(prev => ({ ...prev, state: record }));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfetchData();\n\t\t\treturn () => {\n\t\t\t\tisCancelled = true;\n\t\t\t};\n\t\t}\n\n\t}, []);\n\tuseEffect(() => {\n\t\t \n\t\tlet fetching = false;\n\t\tlet unmounted = false;\n\t\t \n\t\tasync function fetchCurrentMe() {\n\t\t \n\t\t\tif (!fetching)\n\t\t\t\taxios.get(`/miscs/currentMe`)\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t setMe(response.data);\n\t\t\t\t\t \t \n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t//console.log(error);\n\t\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\t\tif (error.response)\n\t\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t\t})\n\t\t}\n\t\tfetchCurrentMe();\n\n\t\treturn () => { fetching = true  }\n\t}, []);\n\n\tconst onSubmit = (data, event) => {\n\t\tevent.preventDefault();\n\t\tconsole.log(data);\n\t\tif (data.id) {\n\t\t\taxios.put(\"/fundSubscriptionDeputations/\" + data.id, data)\n\t\t\t\t.then((response) => { \n\t\t\t\t\tsetMesg(response.data);\n\t\t\t//\t\thistory.push(\"/fundSubscriptionDeputations\");\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\t//console.log(error.response.data);\n\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\tsetServerErrors(error.response.data)\n\t\t\t\t});\n\t\t} else {\n\t\t\taxios.post(\"/fundSubscriptionDeputations\", data)\n\t\t\t\t.then((response) => { \n\t\t\t\t\tsetMesg(response.data);\n\t\t\t\t//\thistory.push(\"/fundSubscriptionDeputations\");\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\t//console.log(error.response.data);\n\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\tsetServerErrors(error.response.data)\n\t\t\t\t});\n\t\t}\n\t}\n\n\tconst onError = (errors, e) => console.log(errors, e);\n\n\t//All foreign keys. \n\t// XXXXXX Add search fields and adjust the values as necessary\n\tconst parentData = {\n\t\n\t \n\t\temployee: {\n\t\t\ttitle: \"Employee\",\n\t\t\turl: \"employees/all/effective\",\n\t\t\tsearchList: ['cdaoNo', 'checkDigit', 'officerName'], //XXXXXXXXX Add search fields\n\t\t\tfkEntity: \"employee\",\n\t\t\tpreload: false, //XXXXXX Set this to true for small tables like designations\n\t\t},\n\t\t \n\t}\n\n\t//Callback for child components (Foreign Keys)\n\tconst callback = (childData) => {\n\t\t//console.log(\"Parent Callback\");\n\t\t//setEntity(prev => ({ ...prev, [childData.fk]: childData.entity }));\n\t\tsetValue(childData.fk, childData.entity);\n\t\t//console.log(errors);\n\t\tclearErrors(childData.fk);\n\t};\n\n\tconst errorCallback = (err) => {\n\t\t//console.log(err);\n\t\tsetServerErrors(err);\n\t}\n\n\tconst handleInputChange = (e) => {\n\t\t//console.log(e.target.value);\n\t};\n\t\tconst returnToList =() => {\n\t\thistory.push(\"/fundSubscriptionDeputations\");\n\t}\n\n\n\treturn (\n\t\t//<div className=\"max-w-xl mx-auto \">\n\t\t\t//<div className=\"w-full w-3/4  mx-auto \" >\n\t\t\t<div className=\"min-h-screen bg-gray-100 text-gray-900\">\n\t\t\t<div className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\">\n\n\t\t\t\t<form onSubmit={handleSubmit(onSubmit, onError)}>\n\t\t\t\t\t<h1 >{id === 'new' ? 'Add' : 'Edit'} Fund Subscription Deputation </h1>\n\t\t\t\t\t<div className=\"text-red-500\">{mesg}</div>\n\t\t\t\t\t<Tabs\n\t\t\t\t\t\tid=\"FundSubscriptionDeputationEdit\"\n\t\t\t\t\t\tactiveKey={key}\n\t\t\t\t\t\tonSelect={(k) => setKey(k)}\n\t\t\t\t\t\tclassName=\"mb-3\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tab eventKey=\"page1\" title=\"Page 1\" className=\"h-120\">\n\t\t\t\t\t\t\t<div className=\"grid grid-cols-2 gap-0\">\n\t\t\t\t\t\t\t\t \t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Month</label>\n\t\t\t\t\t\t\t\t\t {me}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div >\n\t\t\t\t\t\t\t\t\t<LiveSearch name=\"employee\" onChange={handleInputChange}\n\t\t\t\t\t\t\t\t\t\tparentData={parentData.employee} parentCallback={callback}\n\t\t\t\t\t\t\t\t\t\tfkEntity={entity.employee} errCallback={errorCallback} />\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500 \">{errors.employee?.message}</div>\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>From Date</label>\n\t\t\t\t\t\t\t\t\t<input type=\"date\" name=\"fromDate\" {...register(\"fromDate\")}\n\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\" />\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.fromDate?.message}</div>\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t \t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Subscription</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"subscription\" {...register(\"subscription\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.subscription?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Refund</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"refund\" {...register(\"refund\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.refund?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t   \n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Fund Schedule No</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"fundScheduleNo\" {...register(\"fundScheduleNo\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.fundScheduleNo?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Fund Schedule Date</label>\n\t\t\t\t\t\t\t\t\t<input type=\"date\" name=\"fundScheduleDate\" {...register(\"fundScheduleDate\")}\n\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\" />\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.fundScheduleDate?.message}</div>\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Reason</label>\n\t\t\t\t\t\t\t\t\t<textarea type=\"text\" name=\"reason\" {...register(\"reason\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.reason?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\n\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tab>\n\n\t\t\t\t\t\t<Tab eventKey=\"page2\" title=\"Page 2\" className=\"h-120\">\n\t\t\t\t\t\t\t<div className=\"grid grid-cols-2 gap-0\">\n\t\t\t\t\t\t\t<p>Add some fields here or delete this tab.</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<Tab eventKey=\"help\" title=\"Help\" >\n\t\t\t\t\t\t\t<h1>Help</h1>\n\t\t\t\t\t\t\t<ul className=\"list-disc\">\n\t\t\t\t\t\t\t\t<li>Point 1</li>\n\t\t\t\t\t\t\t\t<li>Point 2</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t</Tabs>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div className=\"grid grid-cols-3 gap-0\">\n\t\t\t\t\t<div className=\"px-4\">\n\t\t\t\t\t\t<button type=\"submit\" >Save</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"px-4\">\n\t\t\t\t\t\t<button type=\"submit\" onClick={returnToList} >Cancel</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"px-4\">\n\t\t\t\t\t\t<button type=\"submit\" onClick={returnToList} >Done</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default withRouter(FundSubscriptionDeputationEdit);"]},"metadata":{},"sourceType":"module"}