{"ast":null,"code":"var _jsxFileName = \"/home/itsdcsec/falconws/falcon_face/src/components/Do2ClearBatchForProcessing.js\";\n\n/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 18 April 2022\n *\n * Modified By : \n */\nimport { useState, useEffect, useMemo } from 'react';\nimport Table, { SelectColumnFilter } from '../utils/Table'; // \n\nimport axios from \"axios\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Do2ClearBatchForProcessing() {\n  const [data, setData] = useState([]);\n  const [update, setUpdate] = useState(false);\n  const [serverErrors, setServerErrors] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [inputText, setInputText] = useState('');\n  const [me, setMe] = useState('');\n  const [task, setTask] = useState('0');\n  const [batchNo, setBatchNo] = useState('');\n  const [batchSize, setBatchSize] = useState(0);\n  const [disabled, setDisabled] = useState(false);\n  const [requiredBatchSize, setRequiredBatchSize] = useState(0);\n  const [batchCounter, setBatchCounter] = useState(0);\n  const [usrLevel, setUsrLevel] = useState(0);\n  const [rejectedItems, setRejectedItems] = useState([]);\n  useEffect(() => {\n    let fetching = false;\n\n    async function fetchData() {\n      if (!fetching) await axios.get(`/do2Controls/verifyHc/pending?me=${me}&batchNo=${batchNo}`).then(response => {\n        setData(response.data);\n        console.log(response.data.length);\n      }).catch(error => {\n        //console.log(error);\n        //console.log(error.response.status);\n        //console.log(error.response.headers);\n        if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n      });\n    }\n\n    fetchData();\n    return () => {\n      fetching = true;\n    };\n  }, [update, me, batchNo]);\n  useEffect(() => {\n    let fetching = false;\n\n    async function fetchRejectedData() {\n      if (me && batchNo) if (!fetching) await axios.get(`/do2XmlRejectedItems/rejectedItems/fetchList?batchNo=${batchNo}&me=${me}`).then(response => {\n        setRejectedItems(response.data);\n        console.log(response.data.length);\n      }).catch(error => {\n        //console.log(error);\n        //console.log(error.response.status);\n        //console.log(error.response.headers);\n        if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n      });\n    }\n\n    fetchRejectedData();\n    return () => {\n      fetching = true;\n    };\n  }, [update, me, batchNo]);\n  useEffect(() => {\n    let fetching = false;\n\n    async function fetchUsrLevel() {\n      if (!fetching) await axios.get(`/miscs/usrLevel`).then(response => {\n        if (response.data) setUsrLevel(response.data);\n      }).catch(error => {\n        //console.log(error);\n        //console.log(error.response.status);\n        //console.log(error.response.headers);\n        if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n      });\n    }\n\n    fetchUsrLevel();\n    return () => {\n      fetching = true;\n    };\n  }, []);\n  useEffect(() => {\n    console.log(me);\n    let fetching = false;\n\n    async function fetchQe() {\n      if (me && me.length < 6 || !me) {\n        if (!fetching) await axios.get('/miscs/me/currentMe').then(response => {\n          setMe(response.data);\n          console.log(response.data);\n        }).catch(error => {\n          //console.log(error);\n          //console.log(error.response.status);\n          //console.log(error.response.headers);\n          if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n        });\n      }\n    }\n\n    fetchQe();\n    return () => {\n      fetching = true;\n    };\n  }, []);\n\n  const handleCheckBox = index => e => {\n    console.log(e.target.checked);\n    data[index].selected = e.target.checked;\n    updateBatchCounter();\n  };\n\n  const updateCheckBoxAll = e => {\n    let newData = [...data];\n\n    for (var k in newData) {\n      newData[k].selected = e.target.checked;\n    }\n\n    setData(newData);\n  };\n\n  function updateBatchCounter() {\n    if (data) {\n      let counter = batchCounter;\n\n      for (var i = 0; i < data.length; i++) {\n        if (data[i].selected == true) {\n          counter += data[i].totalItems;\n        }\n\n        setBatchCounter(counter);\n      }\n    }\n  }\n\n  async function clearBatch() {\n    console.log(batchNo);\n    let selected = false;\n    let noHcBatch = [];\n\n    if (!data || data != null && data.length == 0) {\n      alert(\"No batch available for submission\");\n      return;\n    }\n\n    if (batchNo.length < 2) {\n      alert(\"No batch selected.\");\n      return;\n    }\n\n    if (data && batchNo) {\n      for (var i = 0; i < data.length; i++) {\n        if (!batchNo.includes(data[i].batchNumber)) {\n          alert(\"Select a batch and submit. Multiple batch cannot be submitted at a time.\");\n          return;\n        }\n\n        if (data[i].selected === true) {\n          selected = true;\n        } else {\n          if (!noHcBatch.includes(data[i].batchNumber)) noHcBatch.push(data[i].batchNumber);\n        }\n      }\n\n      console.log(noHcBatch);\n    }\n\n    if (usrLevel > 30) return;\n    var proceed;\n\n    if (usrLevel < 30) {\n      if (noHcBatch !== null && noHcBatch.length > 0) proceed = window.confirm('You are about to submit batch  ' + batchNo + ' for approval by AAO. This contains cases with NO HC. Please confirm.');else proceed = window.confirm('You are about to submit this batch  ' + batchNo + ' for approval by AAO. Please confirm.');\n      console.log(proceed);\n      if (!proceed) return;\n      if (disabled) return;\n    }\n\n    if (usrLevel === 30) {\n      if (noHcBatch !== null && noHcBatch.length > 0) proceed = window.confirm('You are about to submit batch  ' + batchNo + ' for approval by SAO/AO. This contains cases with NO HC. Please confirm.');else proceed = window.confirm('You are about to submit this batch  ' + batchNo + ' for approval by SAO/AO. Please confirm.');\n      console.log(proceed);\n      if (!proceed) return;\n      if (disabled) return;\n    }\n\n    setDisabled(true);\n    axios.post(`/do2Controls/hcVerified/submit/${me}/${batchNo}`, data).then(response => {\n      console.log(response.data);\n      setDisabled(false);\n      if (response.data) setServerErrors(response.data);\n    });\n  }\n\n  async function remove(id) {\n    await axios.delete(`/do2Controls/${id}`).then(() => {\n      //console.log(data);\n      let updatedRecords = [...data].filter(i => i.id !== id);\n      console.log(updatedRecords);\n      setData(updatedRecords);\n      setUpdate(!update);\n    }).catch(error => {\n      console.log(error); //console.log(error.response.status);\n      //console.log(error.response.headers);\n\n      if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n    });\n  }\n\n  const ShowList = () => {\n    const cols = useMemo(() => [{\n      Header: \"Do2 Control\",\n      accessor: 'do2Control.id' // Change this\n\n    }, {\n      Header: \"Do2 Item No\",\n      accessor: 'do2ItemNo'\n    }, {\n      Header: \"Do2 Description\",\n      accessor: 'do2Description'\n    }, {\n      Header: \"Rejection Reason\",\n      accessor: 'rejectionReason'\n    }, {\n      Header: \"Army No\",\n      accessor: 'armyNo'\n    }, {\n      Header: \"Check Digit\",\n      accessor: 'checkDigit'\n    }, {\n      Header: \"Reviewed Imported\",\n      accessor: 'reviewedImported'\n    }], [rejectedItems]);\n    const columns = useMemo(() => [{\n      Header: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"flex items-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"flex items-left\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            onChange: updateCheckBoxAll\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 70\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 41\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"flex items-left\",\n          children: /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"HC-verified\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 4\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 12\n      }, this),\n      accessor: 'select',\n      Cell: ({\n        row\n      }) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          onChange: handleCheckBox(row.index),\n          checked: data[row.index]['selected']\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 5\n      }, this)\n    }, {\n      Header: \"Month Ending\",\n      accessor: 'monthEnding'\n    }, {\n      Header: \"Batch Number\",\n      accessor: 'batchNumber'\n    }, {\n      Header: \"Batch Dt\",\n      accessor: 'batchDt'\n    }, {\n      Header: \"Dt Of Receipt\",\n      accessor: 'dtOfReceipt'\n    }, {\n      Header: \"Unit Code\",\n      accessor: 'unitCode'\n    }, {\n      Header: \"Do2 Type\",\n      accessor: 'do2Type'\n    }, {\n      Header: \"Do2 No\",\n      accessor: 'do2No'\n    }, {\n      Header: \"Do2 Year\",\n      accessor: 'do2Year'\n    }, {\n      Header: \"Do2 Date\",\n      accessor: 'do2Date'\n    }, {\n      Header: \"Total Items\",\n      accessor: 'totalItems'\n    }, {\n      Header: \"Imported Items\",\n      accessor: 'importedItems'\n    }, {\n      Header: \"Task\",\n      accessor: 'task'\n    }, {\n      Header: \"Imported\",\n      accessor: 'imported'\n    }, {\n      Header: \"Input File Name\",\n      accessor: 'inputFileName'\n    }, {\n      Header: \"Batch File Name\",\n      accessor: 'batchFileName'\n    }, {\n      Header: \"Missing Do2\",\n      accessor: 'missingDo2'\n    }, {\n      Header: \"Core Validity\",\n      accessor: 'coreValidity'\n    }, {\n      Header: \"Input File Type\",\n      accessor: 'inputFileType'\n    }, {\n      Header: \"Auditor Date\",\n      accessor: 'auditorDate'\n    }, {\n      Header: \"Aao Date\",\n      accessor: 'aaoDate'\n    }, {\n      Header: \"Ao Date\",\n      accessor: 'aoDate'\n    }\n    /*\n    {\n    \tHeader: \"Login Name\",\n    \taccessor: 'loginName',\n    \tFilter: SelectColumnFilter,  // new\n    \tfilter: 'includes',\n    },\n    */\n    ], [data]);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-100 text-gray-900\",\n      children: /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"-mt-2 max-h-0 py-0 ml-0\",\n          children: [/*#__PURE__*/_jsxDEV(Table, {\n            columns: columns,\n            data: data,\n            className: \"table-auto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"flex flex-row ...\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: clearBatch,\n                className: \"w-32 m-0 p-0\",\n                children: \"Submit Batch\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 6\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 471,\n              columnNumber: 6\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 7\n          }, this), rejectedItems && rejectedItems.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Rejected Items\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 6\n            }, this), /*#__PURE__*/_jsxDEV(Table, {\n              columns: cols,\n              data: rejectedItems,\n              className: \"table-auto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 6\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 4\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 7\n    }, this);\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    console.log(inputText); //setSearch(inputText);\n  };\n\n  const handleKeyPress = event => {\n    // look for the `Enter` keyCode\n    if (event.keyCode === 13 || event.which === 13) {\n      handleSubmit(event);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 text-gray-900\",\n    children: /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 ml-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-red-500\",\n          children: serverErrors\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl font-semibold\",\n          children: \"Do2 Controls\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flexContainer\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"me\",\n              value: me,\n              placeholder: \"mmyyyy\",\n              onChange: e => setMe(e.target.value),\n              className: \"pl-2 -ml-2 inputField flex-initial\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 7\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"batchNo\",\n              placeholder: \"batchNo\",\n              onChange: e => setBatchNo(e.target.value),\n              className: \"pl-2 -ml-2 inputField flex-initial\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 520,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            onClick: handleSubmit,\n            className: \"w-16 m-0 p-0\",\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 7\n          }, this), \"\\xA0\\xA0\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/do2Controls/verifyHc/approval\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \" w-36 ml-8 p-0 h-6 -mt-2\",\n                children: \" Pending Approval \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 533,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 532,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"-mt-2 max-h-1 py-0\",\n        children: /*#__PURE__*/_jsxDEV(ShowList, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 508,\n    columnNumber: 3\n  }, this);\n}\n\nexport default withRouter(Do2ClearBatchForProcessing);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/Do2ClearBatchForProcessing.js"],"names":["useState","useEffect","useMemo","Table","SelectColumnFilter","axios","withRouter","Link","Do2ClearBatchForProcessing","data","setData","update","setUpdate","serverErrors","setServerErrors","search","setSearch","inputText","setInputText","me","setMe","task","setTask","batchNo","setBatchNo","batchSize","setBatchSize","disabled","setDisabled","requiredBatchSize","setRequiredBatchSize","batchCounter","setBatchCounter","usrLevel","setUsrLevel","rejectedItems","setRejectedItems","fetching","fetchData","get","then","response","console","log","length","catch","error","Error","fetchRejectedData","fetchUsrLevel","fetchQe","handleCheckBox","index","e","target","checked","selected","updateBatchCounter","updateCheckBoxAll","newData","k","counter","i","totalItems","clearBatch","noHcBatch","alert","includes","batchNumber","push","proceed","window","confirm","post","remove","id","delete","updatedRecords","filter","ShowList","cols","Header","accessor","columns","Cell","row","handleSubmit","event","preventDefault","handleKeyPress","keyCode","which","value"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,OAA9B,QAA6C,OAA7C;AACA,OAAOC,KAAP,IAAgBC,kBAAhB,QAA0C,gBAA1C,C,CAA4D;;AAC5D,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,IAArB,QAAiC,kBAAjC;;;;AAEA,SAASC,0BAAT,GAAsC;AAErC,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACW,MAAD,EAASC,SAAT,IAAsBZ,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAACa,YAAD,EAAeC,eAAf,IAAkCd,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACe,MAAD,EAASC,SAAT,IAAsBhB,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACiB,SAAD,EAAYC,YAAZ,IAA4BlB,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACmB,EAAD,EAAIC,KAAJ,IAAWpB,QAAQ,CAAC,EAAD,CAAzB;AACA,QAAM,CAACqB,IAAD,EAAMC,OAAN,IAAetB,QAAQ,CAAC,GAAD,CAA7B;AACA,QAAM,CAACuB,OAAD,EAASC,UAAT,IAAqBxB,QAAQ,CAAC,EAAD,CAAnC;AACA,QAAM,CAACyB,SAAD,EAAWC,YAAX,IAAyB1B,QAAQ,CAAC,CAAD,CAAvC;AACA,QAAM,CAAC2B,QAAD,EAAUC,WAAV,IAAuB5B,QAAQ,CAAC,KAAD,CAArC;AACA,QAAM,CAAC6B,iBAAD,EAAmBC,oBAAnB,IAAyC9B,QAAQ,CAAC,CAAD,CAAvD;AACA,QAAM,CAAC+B,YAAD,EAAcC,eAAd,IAA+BhC,QAAQ,CAAC,CAAD,CAA7C;AACA,QAAM,CAACiC,QAAD,EAAUC,WAAV,IAAuBlC,QAAQ,CAAC,CAAD,CAArC;AACA,QAAM,CAACmC,aAAD,EAAeC,gBAAf,IAAiCpC,QAAQ,CAAC,EAAD,CAA/C;AAIAC,EAAAA,SAAS,CAAC,MAAM;AACf,QAAIoC,QAAQ,GAAG,KAAf;;AACA,mBAAeC,SAAf,GAA2B;AAE1B,UAAG,CAACD,QAAJ,EACA,MAAMhC,KAAK,CAACkC,GAAN,CAAW,oCAAmCpB,EAAG,YAAWI,OAAQ,EAApE,EACJiB,IADI,CACEC,QAAD,IAAc;AACnB/B,QAAAA,OAAO,CAAC+B,QAAQ,CAAChC,IAAV,CAAP;AACAiC,QAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAAChC,IAAT,CAAcmC,MAA1B;AAGA,OANI,EAOJC,KAPI,CAOGC,KAAD,IAAW;AACjB;AACA;AACA;AACA,YAAIA,KAAK,CAACL,QAAV,EACC3B,eAAe,CAACgC,KAAK,CAACL,QAAN,CAAehC,IAAf,CAAoBqC,KAArB,CAAf,CADD,KAGChC,eAAe,CAACgC,KAAK,CAACC,KAAP,CAAf;AACD,OAfI,CAAN;AAgBA;;AACDT,IAAAA,SAAS;AACT,WAAO,MAAM;AAAED,MAAAA,QAAQ,GAAG,IAAX;AAAkB,KAAjC;AAEA,GAzBQ,EAyBN,CAAC1B,MAAD,EAASQ,EAAT,EAAYI,OAAZ,CAzBM,CAAT;AA2BAtB,EAAAA,SAAS,CAAC,MAAM;AACf,QAAIoC,QAAQ,GAAG,KAAf;;AACA,mBAAeW,iBAAf,GAAmC;AAClC,UAAG7B,EAAE,IAAII,OAAT,EACA,IAAG,CAACc,QAAJ,EACA,MAAMhC,KAAK,CAACkC,GAAN,CAAW,wDAAuDhB,OAAQ,OAAMJ,EAAG,EAAnF,EACJqB,IADI,CACEC,QAAD,IAAc;AACnBL,QAAAA,gBAAgB,CAACK,QAAQ,CAAChC,IAAV,CAAhB;AACAiC,QAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAAChC,IAAT,CAAcmC,MAA1B;AAGA,OANI,EAOJC,KAPI,CAOGC,KAAD,IAAW;AACjB;AACA;AACA;AACA,YAAIA,KAAK,CAACL,QAAV,EACC3B,eAAe,CAACgC,KAAK,CAACL,QAAN,CAAehC,IAAf,CAAoBqC,KAArB,CAAf,CADD,KAGChC,eAAe,CAACgC,KAAK,CAACC,KAAP,CAAf;AACD,OAfI,CAAN;AAgBA;;AACDC,IAAAA,iBAAiB;AACjB,WAAO,MAAM;AAAEX,MAAAA,QAAQ,GAAG,IAAX;AAAkB,KAAjC;AAEA,GAzBQ,EAyBN,CAAC1B,MAAD,EAASQ,EAAT,EAAYI,OAAZ,CAzBM,CAAT;AA4BAtB,EAAAA,SAAS,CAAC,MAAM;AACf,QAAIoC,QAAQ,GAAG,KAAf;;AACA,mBAAeY,aAAf,GAA+B;AAE9B,UAAG,CAACZ,QAAJ,EACA,MAAMhC,KAAK,CAACkC,GAAN,CAAW,iBAAX,EACJC,IADI,CACEC,QAAD,IAAc;AACnB,YAAGA,QAAQ,CAAChC,IAAZ,EACCyB,WAAW,CAACO,QAAQ,CAAChC,IAAV,CAAX;AAID,OAPI,EAQJoC,KARI,CAQGC,KAAD,IAAW;AACjB;AACA;AACA;AACA,YAAIA,KAAK,CAACL,QAAV,EACC3B,eAAe,CAACgC,KAAK,CAACL,QAAN,CAAehC,IAAf,CAAoBqC,KAArB,CAAf,CADD,KAGChC,eAAe,CAACgC,KAAK,CAACC,KAAP,CAAf;AACD,OAhBI,CAAN;AAiBA;;AACDE,IAAAA,aAAa;AACb,WAAO,MAAM;AAAEZ,MAAAA,QAAQ,GAAG,IAAX;AAAkB,KAAjC;AAEA,GA1BQ,EA0BN,EA1BM,CAAT;AA4BApC,EAAAA,SAAS,CAAC,MAAM;AAEfyC,IAAAA,OAAO,CAACC,GAAR,CAAYxB,EAAZ;AACA,QAAIkB,QAAQ,GAAG,KAAf;;AACA,mBAAea,OAAf,GAAyB;AACxB,UAAI/B,EAAE,IAAIA,EAAE,CAACyB,MAAH,GAAU,CAAjB,IAAuB,CAACzB,EAA3B,EAA8B;AAG9B,YAAI,CAACkB,QAAL,EACC,MAAMhC,KAAK,CAACkC,GAAN,CAAU,qBAAV,EACJC,IADI,CACEC,QAAD,IAAc;AACnBrB,UAAAA,KAAK,CAACqB,QAAQ,CAAChC,IAAV,CAAL;AACAiC,UAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAAChC,IAArB;AACA,SAJI,EAKJoC,KALI,CAKGC,KAAD,IAAW;AACjB;AACA;AACA;AACA,cAAIA,KAAK,CAACL,QAAV,EACC3B,eAAe,CAACgC,KAAK,CAACL,QAAN,CAAehC,IAAf,CAAoBqC,KAArB,CAAf,CADD,KAGChC,eAAe,CAACgC,KAAK,CAACC,KAAP,CAAf;AACD,SAbI,CAAN;AAcE;AACH;;AACDG,IAAAA,OAAO;AACP,WAAO,MAAM;AAAEb,MAAAA,QAAQ,GAAG,IAAX;AAAkB,KAAjC;AAEA,GA5BQ,EA4BN,EA5BM,CAAT;;AA+BD,QAAMc,cAAc,GAAEC,KAAK,IAAIC,CAAD,IAAM;AAC/BX,IAAAA,OAAO,CAACC,GAAR,CAAYU,CAAC,CAACC,MAAF,CAASC,OAArB;AACF9C,IAAAA,IAAI,CAAC2C,KAAD,CAAJ,CAAYI,QAAZ,GAAqBH,CAAC,CAACC,MAAF,CAASC,OAA9B;AACAE,IAAAA,kBAAkB;AAEnB,GALF;;AAOC,QAAMC,iBAAiB,GAAIL,CAAD,IAAM;AAG5B,QAAIM,OAAO,GAAC,CAAC,GAAGlD,IAAJ,CAAZ;;AACF,SAAI,IAAImD,CAAR,IAAaD,OAAb,EAAqB;AACpBA,MAAAA,OAAO,CAACC,CAAD,CAAP,CAAWJ,QAAX,GAAoBH,CAAC,CAACC,MAAF,CAASC,OAA7B;AACA;;AACD7C,IAAAA,OAAO,CAACiD,OAAD,CAAP;AAGD,GAVD;;AAYA,WAASF,kBAAT,GAA8B;AAC7B,QAAGhD,IAAH,EAAQ;AACP,UAAIoD,OAAO,GAAC9B,YAAZ;;AACA,WAAI,IAAI+B,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACrD,IAAI,CAACmC,MAAnB,EAA0BkB,CAAC,EAA3B,EAA8B;AAC9B,YAAGrD,IAAI,CAACqD,CAAD,CAAJ,CAAQN,QAAR,IAAkB,IAArB,EAA0B;AACzBK,UAAAA,OAAO,IAAEpD,IAAI,CAACqD,CAAD,CAAJ,CAAQC,UAAjB;AAEA;;AACD/B,QAAAA,eAAe,CAAC6B,OAAD,CAAf;AACA;AACA;AACD;;AAEF,iBAAeG,UAAf,GAA8B;AAC7BtB,IAAAA,OAAO,CAACC,GAAR,CAAYpB,OAAZ;AAGA,QAAIiC,QAAQ,GAAC,KAAb;AACA,QAAIS,SAAS,GAAC,EAAd;;AACA,QAAG,CAACxD,IAAD,IAAUA,IAAI,IAAE,IAAN,IAAcA,IAAI,CAACmC,MAAL,IAAa,CAAxC,EAA2C;AAC1CsB,MAAAA,KAAK,CAAC,mCAAD,CAAL;AACA;AACA;;AACD,QAAG3C,OAAO,CAACqB,MAAR,GAAe,CAAlB,EAAoB;AACnBsB,MAAAA,KAAK,CAAC,oBAAD,CAAL;AACA;AACA;;AAED,QAAGzD,IAAI,IAAIc,OAAX,EAAmB;AAClB,WAAI,IAAIuC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACrD,IAAI,CAACmC,MAAnB,EAA0BkB,CAAC,EAA3B,EAA8B;AAE7B,YAAG,CAACvC,OAAO,CAAC4C,QAAR,CAAiB1D,IAAI,CAACqD,CAAD,CAAJ,CAAQM,WAAzB,CAAJ,EAA0C;AACzCF,UAAAA,KAAK,CAAC,0EAAD,CAAL;AACA;AAEA;;AAED,YAAGzD,IAAI,CAACqD,CAAD,CAAJ,CAAQN,QAAR,KAAmB,IAAtB,EAA2B;AAC1BA,UAAAA,QAAQ,GAAC,IAAT;AAEA,SAHD,MAGK;AACJ,cAAG,CAACS,SAAS,CAACE,QAAV,CAAmB1D,IAAI,CAACqD,CAAD,CAAJ,CAAQM,WAA3B,CAAJ,EACAH,SAAS,CAACI,IAAV,CAAe5D,IAAI,CAACqD,CAAD,CAAJ,CAAQM,WAAvB;AAEA;AACD;;AACD1B,MAAAA,OAAO,CAACC,GAAR,CAAYsB,SAAZ;AAEA;;AAIA,QAAGhC,QAAQ,GAAC,EAAZ,EACC;AAEF,QAAIqC,OAAJ;;AACA,QAAGrC,QAAQ,GAAC,EAAZ,EAAe;AACd,UAAGgC,SAAS,KAAG,IAAZ,IAAoBA,SAAS,CAACrB,MAAV,GAAiB,CAAxC,EACC0B,OAAO,GAACC,MAAM,CAACC,OAAP,CAAe,oCAAkCjD,OAAlC,GAA0C,uEAAzD,CAAR,CADD,KAGA+C,OAAO,GAACC,MAAM,CAACC,OAAP,CAAe,yCAAuCjD,OAAvC,GAA+C,uCAA9D,CAAR;AACAmB,MAAAA,OAAO,CAACC,GAAR,CAAY2B,OAAZ;AACD,UAAG,CAACA,OAAJ,EACC;AACD,UAAG3C,QAAH,EACC;AAEA;;AAED,QAAGM,QAAQ,KAAG,EAAd,EAAiB;AAChB,UAAGgC,SAAS,KAAG,IAAZ,IAAoBA,SAAS,CAACrB,MAAV,GAAiB,CAAxC,EACC0B,OAAO,GAACC,MAAM,CAACC,OAAP,CAAe,oCAAkCjD,OAAlC,GAA0C,0EAAzD,CAAR,CADD,KAGA+C,OAAO,GAACC,MAAM,CAACC,OAAP,CAAe,yCAAuCjD,OAAvC,GAA+C,0CAA9D,CAAR;AACAmB,MAAAA,OAAO,CAACC,GAAR,CAAY2B,OAAZ;AACD,UAAG,CAACA,OAAJ,EACC;AACD,UAAG3C,QAAH,EACC;AAEA;;AAIAC,IAAAA,WAAW,CAAC,IAAD,CAAX;AAEAvB,IAAAA,KAAK,CAACoE,IAAN,CAAY,kCAAiCtD,EAAG,IAAGI,OAAQ,EAA3D,EAA6Dd,IAA7D,EACC+B,IADD,CACOC,QAAD,IAAc;AAClBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAAChC,IAArB;AACCmB,MAAAA,WAAW,CAAC,KAAD,CAAX;AACA,UAAGa,QAAQ,CAAChC,IAAZ,EACCK,eAAe,CAAC2B,QAAQ,CAAChC,IAAV,CAAf;AAGH,KARD;AASA;;AAED,iBAAeiE,MAAf,CAAsBC,EAAtB,EAA0B;AACzB,UAAMtE,KAAK,CAACuE,MAAN,CAAc,gBAAeD,EAAG,EAAhC,EACJnC,IADI,CACC,MAAM;AACX;AACA,UAAIqC,cAAc,GAAG,CAAC,GAAGpE,IAAJ,EAAUqE,MAAV,CAAkBhB,CAAD,IAAOA,CAAC,CAACa,EAAF,KAASA,EAAjC,CAArB;AACAjC,MAAAA,OAAO,CAACC,GAAR,CAAYkC,cAAZ;AACAnE,MAAAA,OAAO,CAACmE,cAAD,CAAP;AACAjE,MAAAA,SAAS,CAAC,CAACD,MAAF,CAAT;AACA,KAPI,EAQJkC,KARI,CAQGC,KAAD,IAAW;AACjBJ,MAAAA,OAAO,CAACC,GAAR,CAAYG,KAAZ,EADiB,CAEjB;AACA;;AACA,UAAIA,KAAK,CAACL,QAAV,EACC3B,eAAe,CAACgC,KAAK,CAACL,QAAN,CAAehC,IAAf,CAAoBqC,KAArB,CAAf,CADD,KAGChC,eAAe,CAACgC,KAAK,CAACC,KAAP,CAAf;AACD,KAhBI,CAAN;AAiBA;;AAEF,QAAMgC,QAAQ,GAAC,MAAI;AAElB,UAAMC,IAAI,GAAG9E,OAAO,CAAC,MAAM,CAE1B;AACC+E,MAAAA,MAAM,EAAE,aADT;AAECC,MAAAA,QAAQ,EAAE,eAFX,CAE2B;;AAF3B,KAF0B,EAO1B;AACCD,MAAAA,MAAM,EAAE,aADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KAP0B,EAY1B;AACCD,MAAAA,MAAM,EAAE,iBADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KAZ0B,EAiB1B;AACCD,MAAAA,MAAM,EAAE,kBADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KAjB0B,EAwB1B;AACCD,MAAAA,MAAM,EAAE,SADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KAxB0B,EA6B1B;AACCD,MAAAA,MAAM,EAAE,aADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KA7B0B,EAkC1B;AACCD,MAAAA,MAAM,EAAE,mBADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KAlC0B,CAAP,EAyCjB,CAAC/C,aAAD,CAzCiB,CAApB;AA2CA,UAAMgD,OAAO,GAAGjF,OAAO,CAAC,MAAM,CAC7B;AACC+E,MAAAA,MAAM,eAAE;AAAK,QAAA,KAAK,EAAC,iBAAX;AAAA,gCAA6B;AAAK,UAAA,KAAK,EAAC,iBAAX;AAAA,iCAA6B;AAAO,YAAA,IAAI,EAAC,UAAZ;AAAuB,YAAA,QAAQ,EAAEvB;AAAjC;AAAA;AAAA;AAAA;AAAA;AAA7B;AAAA;AAAA;AAAA;AAAA,gBAA7B,eACR;AAAK,UAAA,KAAK,EAAC,iBAAX;AAAA,iCAA6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA7B;AAAA;AAAA;AAAA;AAAA,gBADQ;AAAA;AAAA;AAAA;AAAA;AAAA,cADT;AAKCwB,MAAAA,QAAQ,EAAG,QALZ;AAMCE,MAAAA,IAAI,EAAE,CAAC;AAAEC,QAAAA;AAAF,OAAD,kBACL;AAAA,+BAEE;AAAO,UAAA,IAAI,EAAC,UAAZ;AAAuB,UAAA,QAAQ,EAAElC,cAAc,CAACkC,GAAG,CAACjC,KAAL,CAA/C;AAA6D,UAAA,OAAO,EAAE3C,IAAI,CAAC4E,GAAG,CAACjC,KAAL,CAAJ,CAAgB,UAAhB;AAAtE;AAAA;AAAA;AAAA;AAAA;AAFF;AAAA;AAAA;AAAA;AAAA;AAPF,KAD6B,EAsB7B;AACC6B,MAAAA,MAAM,EAAE,cADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KAtB6B,EA0B7B;AACCD,MAAAA,MAAM,EAAE,cADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KA1B6B,EA8B7B;AACCD,MAAAA,MAAM,EAAE,UADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KA9B6B,EAkC7B;AACCD,MAAAA,MAAM,EAAE,eADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KAlC6B,EAsC7B;AACCD,MAAAA,MAAM,EAAE,WADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KAtC6B,EA2C7B;AACCD,MAAAA,MAAM,EAAE,UADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KA3C6B,EA+C7B;AACCD,MAAAA,MAAM,EAAE,QADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KA/C6B,EAmD7B;AACCD,MAAAA,MAAM,EAAE,UADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KAnD6B,EAuD7B;AACCD,MAAAA,MAAM,EAAE,UADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KAvD6B,EA4D7B;AACCD,MAAAA,MAAM,EAAE,aADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KA5D6B,EAiE7B;AACCD,MAAAA,MAAM,EAAE,gBADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KAjE6B,EAyE7B;AACCD,MAAAA,MAAM,EAAE,MADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KAzE6B,EA8E7B;AACCD,MAAAA,MAAM,EAAE,UADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KA9E6B,EAmF7B;AACCD,MAAAA,MAAM,EAAE,iBADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KAnF6B,EAwF7B;AACCD,MAAAA,MAAM,EAAE,iBADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KAxF6B,EA+F7B;AACCD,MAAAA,MAAM,EAAE,aADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KA/F6B,EAuG7B;AACCD,MAAAA,MAAM,EAAE,eADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KAvG6B,EA4G7B;AACCD,MAAAA,MAAM,EAAE,iBADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KA5G6B,EAgH7B;AACCD,MAAAA,MAAM,EAAE,cADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KAhH6B,EAqH7B;AACCD,MAAAA,MAAM,EAAE,UADT;AAECC,MAAAA,QAAQ,EAAE;AAFX,KArH6B,EAyH7B;AACCD,MAAAA,MAAM,EAAE,SADT;AAECC,MAAAA,QAAQ,EAAE;AAFX;AAMA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AAtI+B,KAAP,EAuIpB,CAACzE,IAAD,CAvIoB,CAAvB;AAwIA,wBACK;AAAK,MAAA,SAAS,EAAC,wCAAf;AAAA,6BACH;AAAM,QAAA,SAAS,EAAC,6CAAhB;AAAA,gCAEC;AAAK,UAAA,SAAS,EAAC,yBAAf;AAAA,kCACC,QAAC,KAAD;AAAO,YAAA,OAAO,EAAE0E,OAAhB;AAAyB,YAAA,IAAI,EAAE1E,IAA/B;AAAqC,YAAA,SAAS,EAAC;AAA/C;AAAA;AAAA;AAAA;AAAA,kBADD,eAEE;AAAK,YAAA,KAAK,EAAC,mBAAX;AAAA,mCACD;AAAA,qCACA;AAAQ,gBAAA,IAAI,EAAC,QAAb;AAAsB,gBAAA,OAAO,EAAEuD,UAA/B;AAA2C,gBAAA,SAAS,EAAC,cAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADC;AAAA;AAAA;AAAA;AAAA,kBAFF,EASE7B,aAAa,IAAIA,aAAa,CAACS,MAAd,GAAqB,CAAtC,iBAA2C;AAAA,oCAC5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAD4C,eAE5C,QAAC,KAAD;AAAO,cAAA,OAAO,EAAEoC,IAAhB;AAAsB,cAAA,IAAI,EAAE7C,aAA5B;AAA2C,cAAA,SAAS,EAAC;AAArD;AAAA;AAAA;AAAA;AAAA,oBAF4C;AAAA,0BAT7C;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFD,eAmBC;AAAA;AAAA;AAAA;AAAA,gBAnBD;AAAA;AAAA;AAAA;AAAA;AAAA;AADG;AAAA;AAAA;AAAA;AAAA,YADL;AA4BC,GAjNF;;AAmNC,QAAMmD,YAAY,GAAIC,KAAD,IAAW;AAC/BA,IAAAA,KAAK,CAACC,cAAN;AACA9C,IAAAA,OAAO,CAACC,GAAR,CAAY1B,SAAZ,EAF+B,CAG/B;AACA,GAJD;;AAMA,QAAMwE,cAAc,GAAIF,KAAD,IAAW;AACjC;AACA,QAAIA,KAAK,CAACG,OAAN,KAAkB,EAAlB,IAAwBH,KAAK,CAACI,KAAN,KAAgB,EAA5C,EAAgD;AAC/CL,MAAAA,YAAY,CAACC,KAAD,CAAZ;AACA;AACD,GALD;;AAOA,sBACC;AAAK,IAAA,SAAS,EAAC,wCAAf;AAAA,2BACC;AAAM,MAAA,SAAS,EAAC,6CAAhB;AAAA,8BACC;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA,gCACA;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA,oBAA+B1E;AAA/B;AAAA;AAAA;AAAA;AAAA,gBADA,eAEC;AAAI,UAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFD,eAGC;AAAK,UAAA,SAAS,EAAC,eAAf;AAAA,kCACA;AAAA,mCACC;AAAO,cAAA,IAAI,EAAC,MAAZ;AAAmB,cAAA,IAAI,EAAC,IAAxB;AAA6B,cAAA,KAAK,EAAEM,EAApC;AAAwC,cAAA,WAAW,EAAC,QAApD;AACA,cAAA,QAAQ,EAAEkC,CAAC,IAAIjC,KAAK,CAACiC,CAAC,CAACC,MAAF,CAASsC,KAAV,CADpB;AAGC,cAAA,SAAS,EAAC;AAHX;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,kBADA,eAOE;AAAA,mCAEA;AAAO,cAAA,IAAI,EAAC,MAAZ;AAAmB,cAAA,IAAI,EAAC,SAAxB;AAAkC,cAAA,WAAW,EAAC,SAA9C;AACD,cAAA,QAAQ,EAAEvC,CAAC,IAAI7B,UAAU,CAAC6B,CAAC,CAACC,MAAF,CAASsC,KAAV,CADxB;AAGA,cAAA,SAAS,EAAC;AAHV;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA,kBAPF,eAgBC;AAAQ,YAAA,IAAI,EAAC,QAAb;AAAsB,YAAA,OAAO,EAAEN,YAA/B;AAA6C,YAAA,SAAS,EAAC,cAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAhBD,mCAkBE;AAAA,mCACA,QAAC,IAAD;AAAM,cAAA,EAAE,EAAE,gCAAV;AAAA,qCACC;AAAQ,gBAAA,SAAS,EAAC,0BAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,kBAlBF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHD;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,eA8BC;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA,+BACC,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,cA9BD;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,UADD;AA0CA;;AAED,eAAehF,UAAU,CAACE,0BAAD,CAAzB","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 18 April 2022\n *\n * Modified By : \n */\n\nimport { useState, useEffect, useMemo } from 'react';\nimport Table, { SelectColumnFilter } from '../utils/Table'  // \nimport axios from \"axios\";\nimport { withRouter, Link } from \"react-router-dom\";\n\nfunction Do2ClearBatchForProcessing() {\n\n\tconst [data, setData] = useState([]);\n\tconst [update, setUpdate] = useState(false);\n\tconst [serverErrors, setServerErrors] = useState([]);\n\tconst [search, setSearch] = useState(\"\");\n\tconst [inputText, setInputText] = useState('');\n\tconst [me,setMe]=useState('');\n\tconst [task,setTask]=useState('0');\n\tconst [batchNo,setBatchNo]=useState('');\n\tconst [batchSize,setBatchSize]=useState(0);\n\tconst [disabled,setDisabled]=useState(false);\n\tconst [requiredBatchSize,setRequiredBatchSize]=useState(0);\n\tconst [batchCounter,setBatchCounter]=useState(0);\n\tconst [usrLevel,setUsrLevel]=useState(0);\n\tconst [rejectedItems,setRejectedItems]=useState([]);\n\t\n\t\n\t\n\tuseEffect(() => {\n\t\tlet fetching = false;\n\t\tasync function fetchData() {\n\t\t\t \n\t\t\tif(!fetching)\n\t\t\tawait axios.get(`/do2Controls/verifyHc/pending?me=${me}&batchNo=${batchNo}`)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetData(response.data);\n\t\t\t\t\tconsole.log(response.data.length);\n\t\t\t\t\t \n\t\t\t\t\t \n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\t//console.log(error);\n\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\tif (error.response)\n\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\telse\n\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t})\n\t\t}\n\t\tfetchData();\n\t\treturn () => { fetching = true; }\n\n\t}, [update, me,batchNo]);\n\t\n\tuseEffect(() => {\n\t\tlet fetching = false;\n\t\tasync function fetchRejectedData() {\n\t\t\tif(me && batchNo)\n\t\t\tif(!fetching)\n\t\t\tawait axios.get(`/do2XmlRejectedItems/rejectedItems/fetchList?batchNo=${batchNo}&me=${me}`)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetRejectedItems(response.data);\n\t\t\t\t\tconsole.log(response.data.length);\n\t\t\t\t\t \n\t\t\t\t\t \n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\t//console.log(error);\n\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\tif (error.response)\n\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\telse\n\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t})\n\t\t}\n\t\tfetchRejectedData();\n\t\treturn () => { fetching = true; }\n\n\t}, [update, me,batchNo]);\n\t\n\t\n\tuseEffect(() => {\n\t\tlet fetching = false;\n\t\tasync function fetchUsrLevel() {\n\t\t\t \n\t\t\tif(!fetching)\n\t\t\tawait axios.get(`/miscs/usrLevel`)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif(response.data)\n\t\t\t\t\t\tsetUsrLevel(response.data);\n\t\t\t\t\t \n\t\t\t\t\t \n\t\t\t\t\t \n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\t//console.log(error);\n\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\tif (error.response)\n\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\telse\n\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t})\n\t\t}\n\t\tfetchUsrLevel();\n\t\treturn () => { fetching = true; }\n\n\t}, []);\n\t\n\tuseEffect(() => {\n\t\n\t\tconsole.log(me);\n\t\tlet fetching = false;\n\t\tasync function fetchQe() {\n\t\t\tif((me && me.length<6) || !me){\n\t\t\t\n\t\t\n\t\t\tif (!fetching)\n\t\t\t\tawait axios.get('/miscs/me/currentMe')\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\tsetMe(response.data);\n\t\t\t\t\t\tconsole.log(response.data);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t//console.log(error);\n\t\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\t\tif (error.response)\n\t\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t}\n\t\tfetchQe();\n\t\treturn () => { fetching = true; }\n\n\t}, []);\n\n\t\nconst handleCheckBox =index=> (e) =>{\n\t\t   console.log(e.target.checked);\n\t\t\tdata[index].selected=e.target.checked;\n\t\t\tupdateBatchCounter();\n\t\t \n\t}\n \n\tconst updateCheckBoxAll = (e) =>{\n\t\t   \n\t\t   \n\t\t\t  let newData=[...data];\n\t\t\tfor(var k in newData){\n\t\t\t\tnewData[k].selected=e.target.checked;\n\t\t\t}\n\t\t\tsetData(newData);\n\t\t \n\t\t \n\t}\n\t\n\tfunction updateBatchCounter (){\n\t\tif(data){\n\t\t\tlet counter=batchCounter;\n\t\t\tfor(var i=0;i<data.length;i++){\n\t\t\tif(data[i].selected==true){\n\t\t\t\tcounter+=data[i].totalItems\n\t\t\t\t\n\t\t\t}\n\t\t\tsetBatchCounter(counter);\n\t\t}\n\t\t}\n\t}\n\nasync function clearBatch  () {\n\tconsole.log(batchNo);\n\t\n\t\n\tlet selected=false;\n\tlet noHcBatch=[];\n\tif(!data || (data!=null && data.length==0)){\n\t\talert(\"No batch available for submission\");\n\t\treturn;\n\t}\n\tif(batchNo.length<2){\n\t\talert(\"No batch selected.\");\n\t\treturn;\n\t}\n\t\n\tif(data && batchNo){\n\t\tfor(var i=0;i<data.length;i++){\n\t\t\t\n\t\t\tif(!batchNo.includes(data[i].batchNumber)){\n\t\t\t\talert(\"Select a batch and submit. Multiple batch cannot be submitted at a time.\")\n\t\t\t\treturn;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif(data[i].selected===true){\n\t\t\t\tselected=true;\n\t\t\t\t \n\t\t\t}else{\n\t\t\t\tif(!noHcBatch.includes(data[i].batchNumber))\n\t\t\t\tnoHcBatch.push(data[i].batchNumber);\n\t\t\t \n\t\t\t}\n\t\t}\n\t\tconsole.log(noHcBatch);\n\t\t \n\t}\n\t\n\t\n\t\n\t if(usrLevel>30)\n\t \treturn;\n\t\n\tvar proceed;\n\tif(usrLevel<30){\n\t\tif(noHcBatch!==null && noHcBatch.length>0)\n\t\t\tproceed=window.confirm('You are about to submit batch  '+batchNo+' for approval by AAO. This contains cases with NO HC. Please confirm.');\n\t\telse\n\t\tproceed=window.confirm('You are about to submit this batch  '+batchNo+' for approval by AAO. Please confirm.');\n\t\tconsole.log(proceed);\n\tif(!proceed)\n\t\treturn;\n\tif(disabled)\n\t\treturn;\n\t\t\n\t}\n\t\n\tif(usrLevel===30){\n\t\tif(noHcBatch!==null && noHcBatch.length>0)\n\t\t\tproceed=window.confirm('You are about to submit batch  '+batchNo+' for approval by SAO/AO. This contains cases with NO HC. Please confirm.');\n\t\telse\n\t\tproceed=window.confirm('You are about to submit this batch  '+batchNo+' for approval by SAO/AO. Please confirm.');\n\t\tconsole.log(proceed);\n\tif(!proceed)\n\t\treturn;\n\tif(disabled)\n\t\treturn;\n\t\t\n\t}\n\t\n\t\n\t\t\n\t\tsetDisabled(true);\n\t\t \n\t\taxios.post(`/do2Controls/hcVerified/submit/${me}/${batchNo}`,data)\n\t\t.then((response) => {\t \n\t\t\t console.log(response.data);\n\t\t\t  setDisabled(false);\n\t\t\t  if(response.data)\n\t\t\t  \tsetServerErrors(response.data);\n\t\t\t \n       \n\t\t});\n\t}\n\t\n\tasync function remove(id) {\n\t\tawait axios.delete(`/do2Controls/${id}`)\n\t\t\t.then(() => {\n\t\t\t\t//console.log(data);\n\t\t\t\tlet updatedRecords = [...data].filter((i) => i.id !== id);\n\t\t\t\tconsole.log(updatedRecords);\n\t\t\t\tsetData(updatedRecords);\n\t\t\t\tsetUpdate(!update);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.log(error);\n\t\t\t\t//console.log(error.response.status);\n\t\t\t\t//console.log(error.response.headers);\n\t\t\t\tif (error.response)\n\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\telse\n\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t});\n\t}\n\nconst ShowList=()=>{\n\t\n\tconst cols = useMemo(() => [\n\t\t \n\t\t{\n\t\t\tHeader: \"Do2 Control\",\n\t\t\taccessor: 'do2Control.id',// Change this\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Do2 Item No\",\n\t\t\taccessor: 'do2ItemNo',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Do2 Description\",\n\t\t\taccessor: 'do2Description',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Rejection Reason\",\n\t\t\taccessor: 'rejectionReason',\n\t\t},\n\t\t\n\t\t \n\t\t\n\t\t{\n\t\t\tHeader: \"Army No\",\n\t\t\taccessor: 'armyNo',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Check Digit\",\n\t\t\taccessor: 'checkDigit',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Reviewed Imported\",\n\t\t\taccessor: 'reviewedImported',\n\t\t},\n\t\t\n\t\t\n\t\t \n\t], [rejectedItems])\n\t\n\tconst columns = useMemo(() => [\n\t\t{\n\t\t\tHeader: <div class=\"flex items-left\"><div class=\"flex items-left\"><input type=\"checkbox\" onChange={updateCheckBoxAll} /></div>\n\t\t\t<div class=\"flex items-left\"><label>HC-verified</label></div>\n\t\t\t</div>,\n\t\t\t \n\t\t\taccessor : 'select',\n\t\t\tCell: ({ row }) => (\n\t\t\t\t<div>\n\t\t\t\t\t \n\t\t\t\t\t\t<input type=\"checkbox\" onChange={handleCheckBox(row.index)}  checked={data[row.index]['selected']}  />\n\t\t\t\t\t\t \t\t \n\t\t\t\t\t\t \n\t\t\t\t\t \n\t\t\t\t</div>\n\t\t\t\t \n\t\t\t\t\n\t\t\t)\n\t\t\t \n\t\t},\n\t\t \n\t\t \n\t\t{\n\t\t\tHeader: \"Month Ending\",\n\t\t\taccessor: 'monthEnding',\n\t\t},\n\t\t{\n\t\t\tHeader: \"Batch Number\",\n\t\t\taccessor: 'batchNumber',\n\t\t},\n\t\t{\n\t\t\tHeader: \"Batch Dt\",\n\t\t\taccessor: 'batchDt',\n\t\t},\n\t\t{\n\t\t\tHeader: \"Dt Of Receipt\",\n\t\t\taccessor: 'dtOfReceipt',\n\t\t},\n\t\t{\n\t\t\tHeader: \"Unit Code\",\n\t\t\taccessor: 'unitCode',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Do2 Type\",\n\t\t\taccessor: 'do2Type',\n\t\t},\n\t\t{\n\t\t\tHeader: \"Do2 No\",\n\t\t\taccessor: 'do2No',\n\t\t},\n\t\t{\n\t\t\tHeader: \"Do2 Year\",\n\t\t\taccessor: 'do2Year',\n\t\t},\n\t\t{\n\t\t\tHeader: \"Do2 Date\",\n\t\t\taccessor: 'do2Date',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Total Items\",\n\t\t\taccessor: 'totalItems',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Imported Items\",\n\t\t\taccessor: 'importedItems',\n\t\t},\n\t\t\n\t\t\n\t\t \n\t\t\n\t\t{\n\t\t\tHeader: \"Task\",\n\t\t\taccessor: 'task',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Imported\",\n\t\t\taccessor: 'imported',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Input File Name\",\n\t\t\taccessor: 'inputFileName',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Batch File Name\",\n\t\t\taccessor: 'batchFileName',\n\t\t},\n\t\t\n\t\t\n\t\t\n\t\t{\n\t\t\tHeader: \"Missing Do2\",\n\t\t\taccessor: 'missingDo2',\n\t\t},\n\t\t\n\t\t \n\t\t\n\t\t \n\t\t{\n\t\t\tHeader: \"Core Validity\",\n\t\t\taccessor: 'coreValidity',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Input File Type\",\n\t\t\taccessor: 'inputFileType',\n\t\t},\n\t\t{\n\t\t\tHeader: \"Auditor Date\",\n\t\t\taccessor: 'auditorDate',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Aao Date\",\n\t\t\taccessor: 'aaoDate',\n\t\t},\n\t\t{\n\t\t\tHeader: \"Ao Date\",\n\t\t\taccessor: 'aoDate',\n\t\t},\n\t\t\n\t\t\n\t\t/*\n\t\t{\n\t\t\tHeader: \"Login Name\",\n\t\t\taccessor: 'loginName',\n\t\t\tFilter: SelectColumnFilter,  // new\n\t\t\tfilter: 'includes',\n\t\t},\n\t\t*/\n\t], [data])\n\treturn (\n\t\t \t\t <div className=\"min-h-screen bg-gray-100 text-gray-900\">\n\t\t\t<main className=\"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\">\n\t\t\n\t\t\t\t<div className=\"-mt-2 max-h-0 py-0 ml-0\">\n\t\t\t\t\t<Table columns={columns} data={data} className=\"table-auto\" />\n\t\t\t\t\t <div class=\"flex flex-row ...\">\n\t\t\t\t\t<div>\n\t\t\t\t\t<button type=\"button\" onClick={clearBatch} className=\"w-32 m-0 p-0\">Submit Batch</button>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t\t{rejectedItems && rejectedItems.length>0 && <>\n\t\t\t\t\t<label>Rejected Items</label>\n\t\t\t\t\t<Table columns={cols} data={rejectedItems} className=\"table-auto\" />\n\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t\t \n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t</main>\n\t\t\t\t</div>\n\t\t\t \n\t);\n\t}\n\n\tconst handleSubmit = (event) => {\n\t\tevent.preventDefault();\n\t\tconsole.log(inputText);\n\t\t//setSearch(inputText);\n\t}\n\n\tconst handleKeyPress = (event) => {\n\t\t// look for the `Enter` keyCode\n\t\tif (event.keyCode === 13 || event.which === 13) {\n\t\t\thandleSubmit(event)\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"min-h-screen bg-gray-100 text-gray-900\">\n\t\t\t<main className=\"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\">\n\t\t\t\t<div className=\"mt-2 ml-4\">\n\t\t\t\t<div className=\"text-red-500\">{serverErrors}</div>\n\t\t\t\t\t<h1 className=\"text-xl font-semibold\">Do2 Controls</h1>\n\t\t\t\t\t<div className=\"flexContainer\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input type=\"text\" name=\"me\" value={me} placeholder=\"mmyyyy\" \n\t\t\t\t\t\tonChange={e => setMe(e.target.value)}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tclassName=\"pl-2 -ml-2 inputField flex-initial\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<input type=\"text\" name=\"batchNo\" placeholder=\"batchNo\" \n\t\t\t\t\t\tonChange={e => setBatchNo(e.target.value)}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tclassName=\"pl-2 -ml-2 inputField flex-initial\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t<button type=\"submit\" onClick={handleSubmit} className=\"w-16 m-0 p-0\">Search</button>\n\t\t\t\t\t\t &nbsp;&nbsp;&nbsp;&nbsp;\n\t\t\t\t\t\t <div>\n\t\t\t\t\t\t\t<Link to={\"/do2Controls/verifyHc/approval\"}>\n\t\t\t\t\t\t\t\t<button className=\" w-36 ml-8 p-0 h-6 -mt-2\" > Pending Approval </button>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t \n\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div className=\"-mt-2 max-h-1 py-0\">\n\t\t\t\t\t<ShowList/>\n\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t</main>\n\t\t\t\n\t\t</div>\n\t);\n}\n\nexport default withRouter(Do2ClearBatchForProcessing);\n\n"]},"metadata":{},"sourceType":"module"}