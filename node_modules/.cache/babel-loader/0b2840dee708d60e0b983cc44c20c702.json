{"ast":null,"code":"import _toConsumableArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect,useMemo}from\"react\";import Table from\"../utils/Table\";import axios from\"axios\";import{withRouter}from\"react-router-dom\";import Modal from\"../utils/Modal\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function PrioritizeBillList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),serverError=_useState4[0],setServerError=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setSearch=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),inputText=_useState8[0],setInputText=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),mesg=_useState10[0],setMesg=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),openModal=_useState12[0],setOpenModal=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),modalHeading=_useState14[0],setModalHeading=_useState14[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/cbillTadaLtcs/billsForPriority?search=\"+search).then(function(response){console.log(response.data);setData(response.data);}).catch(function(error){console.log(error.response.data);setServerError(error.response);setModalHeading(error.response.data);setOpenModal(true);});case 2:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}if(search!=null&&search!=\"\")fetchData();},[search]);var prioritizeBill=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(id);if(!(id!=null)){_context2.next=5;break;}console.log(id);_context2.next=5;return axios.put(\"/cbillTadaLtcs/prioritizeBill/\".concat(id)).then(function(response){setMesg(response.data);console.log(response.data);var updatedRecords=_toConsumableArray(data).filter(function(i){return i.id!==id;});setData(updatedRecords);setOpenModal(true);setModalHeading(response.data);}).catch(function(error){setServerError(error.response);setOpenModal(true);setModalHeading(error.response.data);});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function prioritizeBill(_x){return _ref.apply(this,arguments);};}();var handleSubmit=function handleSubmit(event){event.preventDefault();console.log(inputText);setSearch(inputText);};var handleKeyPress=function handleKeyPress(event){// look for the `Enter` keyCode\nif(event.keyCode===13||event.which===13){handleSubmit(event);}};var columns=useMemo(function(){return[{Header:\"Action\",Cell:function Cell(_ref2){var row=_ref2.row;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{className:\"w-20 m-0 p-0 bg-red-500 hover:bg-red-700 \",onClick:function onClick(){return prioritizeBill(row.original.id);},children:[\" \",\"Prioritize\",\" \"]})});}},{Header:\"Section\",accessor:\"section.sectionName\"},{Header:\"Dak Id\",accessor:\"dak.dakidNo\"},{Header:\"Dak Type\",accessor:\"dak.dakType.description\"},/* {\n        Header: \"Rank\",\n        accessor: \"employee.rank.rankName\",\n      }, */{Header:\"Officer Name\",accessor:\"employee.officerName\",Cell:function Cell(_ref3){var row=_ref3.row;return/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[row.original.employee.rank.rankName,\" \",row.original.employee.officerName]});}},{Header:\"CDAO No\",accessor:\"employee.cdaoNo\",Cell:function Cell(_ref4){var row=_ref4.row;return/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[row.original.employee.cdaoNo,row.original.employee.checkDigit]});}},/* {\n        Header: \"Check Digit\",\n        accessor: \"employee.checkDigit\",\n      }, */{Header:\"Amount\",accessor:\"amountClaimed\"}];},[data]);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen max-h-full  text-gray-900 p-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\",style:openModal?{pointerEvents:\"none\",opacity:\"0.2\"}:{},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 ml-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl mb-2 font-semibold\",children:\"Prioritize Bill\"}),mesg!=null&&mesg!=\"\"&&/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl my-2 font-semibold text-gray-600\",children:mesg}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"search\",onChange:function onChange(e){return setInputText(e.target.value);},onKeyPress:handleKeyPress,className:\"p-2 -ml-2 inputField flex-initial\",placeholder:\"CDAO No / DakId No\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handleSubmit,className:\"w-16 p-2 my-auto\",children:\"Search\"})]})]}),data.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\" -mt-2 max-h-1 py-0\",children:/*#__PURE__*/_jsx(Table,{columns:columns,data:data,className:\"table-auto\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col justify-center items-center \",children:openModal&&/*#__PURE__*/_jsx(Modal,{setOpenModal:setOpenModal,heading:modalHeading})})]});}export default withRouter(PrioritizeBillList);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/PrioritizeBillList.js"],"names":["useState","useEffect","useMemo","Table","axios","withRouter","Modal","PrioritizeBillList","data","setData","serverError","setServerError","search","setSearch","inputText","setInputText","mesg","setMesg","openModal","setOpenModal","modalHeading","setModalHeading","fetchData","get","then","response","console","log","catch","error","prioritizeBill","id","put","updatedRecords","filter","i","handleSubmit","event","preventDefault","handleKeyPress","keyCode","which","columns","Header","Cell","row","original","accessor","employee","rank","rankName","officerName","cdaoNo","checkDigit","pointerEvents","opacity","e","target","value","length"],"mappings":"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","sourcesContent":["import { useState, useEffect, useMemo } from \"react\";\nimport Table from \"../utils/Table\";\nimport axios from \"axios\";\nimport { withRouter } from \"react-router-dom\";\nimport Modal from \"../utils/Modal\";\n\nfunction PrioritizeBillList() {\n  const [data, setData] = useState([]);\n  const [serverError, setServerError] = useState();\n  const [search, setSearch] = useState(\"\");\n  const [inputText, setInputText] = useState(\"\");\n  const [mesg, setMesg] = useState();\n  const [openModal, setOpenModal] = useState(false);\n  const [modalHeading, setModalHeading] = useState();\n\n  useEffect(() => {\n    async function fetchData() {\n      await axios\n        .get(\"/cbillTadaLtcs/billsForPriority?search=\" + search)\n        .then((response) => {\n          console.log(response.data);\n          setData(response.data);\n        })\n        .catch((error) => {\n          console.log(error.response.data);\n          setServerError(error.response);\n          setModalHeading(error.response.data);\n          setOpenModal(true);\n        });\n    }\n    if (search != null && search != \"\") fetchData();\n  }, [search]);\n\n  const prioritizeBill = async (id) => {\n    console.log(id);\n    if (id != null) {\n      console.log(id);\n      await axios\n        .put(`/cbillTadaLtcs/prioritizeBill/${id}`)\n        .then((response) => {\n          setMesg(response.data);\n          console.log(response.data);\n          let updatedRecords = [...data].filter((i) => i.id !== id);\n          setData(updatedRecords);\n\n          setOpenModal(true);\n          setModalHeading(response.data);\n        })\n        .catch((error) => {\n          setServerError(error.response);\n          setOpenModal(true);\n          setModalHeading(error.response.data);\n        });\n    }\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    console.log(inputText);\n    setSearch(inputText);\n  };\n\n  const handleKeyPress = (event) => {\n    // look for the `Enter` keyCode\n    if (event.keyCode === 13 || event.which === 13) {\n      handleSubmit(event);\n    }\n  };\n\n  const columns = useMemo(\n    () => [\n      {\n        Header: \"Action\",\n        Cell: ({ row }) => (\n          <div>\n            <button\n              className=\"w-20 m-0 p-0 bg-red-500 hover:bg-red-700 \"\n              onClick={() => prioritizeBill(row.original.id)}\n            >\n              {\" \"}\n              Prioritize{\" \"}\n            </button>\n          </div>\n        ),\n      },\n      {\n        Header: \"Section\",\n        accessor: \"section.sectionName\",\n      },\n      {\n        Header: \"Dak Id\",\n        accessor: \"dak.dakidNo\",\n      },\n\n      {\n        Header: \"Dak Type\",\n        accessor: \"dak.dakType.description\",\n      },\n      /* {\n        Header: \"Rank\",\n        accessor: \"employee.rank.rankName\",\n      }, */\n      {\n        Header: \"Officer Name\",\n        accessor: \"employee.officerName\",\n        Cell: ({ row }) => (\n          <div className=\"text-sm text-gray-500\">\n            {row.original.employee.rank.rankName}{\" \"}\n            {row.original.employee.officerName}\n          </div>\n        ),\n      },\n\n      {\n        Header: \"CDAO No\",\n        accessor: \"employee.cdaoNo\",\n        Cell: ({ row }) => (\n          <div className=\"text-sm text-gray-500\">\n            {row.original.employee.cdaoNo}\n            {row.original.employee.checkDigit}\n          </div>\n        ),\n      },\n      /* {\n        Header: \"Check Digit\",\n        accessor: \"employee.checkDigit\",\n      }, */\n\n      {\n        Header: \"Amount\",\n        accessor: \"amountClaimed\",\n      },\n    ],\n    [data]\n  );\n\n  return (\n    <div className=\"min-h-screen max-h-full  text-gray-900 p-0\">\n      <div\n        className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\"\n        style={openModal ? { pointerEvents: \"none\", opacity: \"0.2\" } : {}}\n      >\n        <div className=\"mt-2 ml-4\">\n          {/* {serverError && (\n            <h1 className=\"text-2xl font-semibold text-red-600\">\n              {serverError.status} - {serverError.statusText}. Please Contact\n              EDP.\n            </h1>\n          )} */}\n\n          <h1 className=\"text-2xl mb-2 font-semibold\">Prioritize Bill</h1>\n          {mesg != null && mesg != \"\" && (\n            <h1 className=\"text-xl my-2 font-semibold text-gray-600\">{mesg}</h1>\n          )}\n          <div className=\"flex gap-2\">\n            <input\n              type=\"text\"\n              name=\"search\"\n              onChange={(e) => setInputText(e.target.value)}\n              onKeyPress={handleKeyPress}\n              className=\"p-2 -ml-2 inputField flex-initial\"\n              placeholder=\"CDAO No / DakId No\"\n            />\n            <button\n              type=\"submit\"\n              onClick={handleSubmit}\n              className=\"w-16 p-2 my-auto\"\n            >\n              Search\n            </button>\n          </div>\n        </div>\n        {data.length > 0 && (\n          <div className=\" -mt-2 max-h-1 py-0\">\n            <Table columns={columns} data={data} className=\"table-auto\" />\n          </div>\n        )}\n        \n      </div>\n      {/* pcdao 29092022 for ndc popup message */}\n      <div className=\"flex flex-col justify-center items-center \">\n          {openModal && (\n            <Modal setOpenModal={setOpenModal} heading={modalHeading}></Modal>\n          )}\n        </div>\n        {/* ------------ */}\n    </div>\n  );\n}\n\nexport default withRouter(PrioritizeBillList);\n"]},"metadata":{},"sourceType":"module"}