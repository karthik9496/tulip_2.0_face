{"ast":null,"code":"var _jsxFileName = \"/home/itsdcsec/falconws/falcon_face/src/components/PliEdit.js\";\nimport { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PliEdit = () => {\n  var _data$2, _data$3;\n\n  let {\n    id\n  } = useParams();\n  let history = useHistory();\n  const [ic, setIc] = useState([]);\n  const [serverErrors, setServerErrors] = useState([]);\n  const [submitErr, setSubmitErr] = useState(false);\n  const [errLetter, setErrLetter] = useState(\"\");\n  const [errIndex, setErrIndex] = useState(\"\");\n  const [action, setAction] = useState(\"\");\n  const [disabled, setDisabled] = useState(false);\n  let obj = {\n    letterNo: \"\",\n    letterDate: \"\",\n    icNo: \"\",\n    employee: {\n      cdaoNo: \"\"\n    },\n    policyNo: \"\",\n    premiumRate: \"\",\n    policyDate: \"\",\n    maturityDate: \"\"\n  };\n  const [data, setData] = useState([obj]);\n  useEffect(() => {\n    if (id !== \"new\") {\n      console.log(id);\n\n      async function FetchData() {\n        await axios.get(`/plis/${id}`).then(response => {\n          setData(response.data);\n          console.log(response.data['action']);\n          if (response.data['action'] !== null) setAction(response.data['action']);\n          console.log(\"pli list data>>\", response.data);\n        }).catch(error => {\n          if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n        });\n      }\n\n      FetchData();\n    }\n  }, [id]);\n\n  const goToListPage = e => {\n    history.push(\"/plis\");\n  };\n\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setData(data.map((item, index) => {\n      let newItem = { ...item,\n        [name]: value\n      };\n      item = newItem;\n      return item;\n    }));\n  };\n\n  const handleIcNoInput = (e, index) => {\n    const {\n      name,\n      value\n    } = e.target;\n    let newData = [...data];\n    newData = data.map((itm, indx) => {\n      if (indx === index) {\n        let newItem = { ...itm,\n          [name]: value,\n          employee: {\n            cdaoNo: \"\"\n          }\n        };\n        itm = newItem;\n        return itm;\n      }\n\n      return itm;\n    });\n    setData(newData);\n    let icNumber = e.target.value.toUpperCase();\n\n    if (icNumber.length === 7) {\n      console.log(\"icNumber >>>> \", icNumber);\n\n      async function FetchEmployee() {\n        await axios.get(`/employees/byIcNo/${icNumber}`).then(response => {\n          console.log(\"employee details>>>>\", response.data);\n\n          if (response.data.length === 0) {\n            let newIc = [...ic];\n            newIc[index] = \"please enter correct IC No\";\n            setIc(newIc);\n          } else {\n            let newIc = [...ic];\n            newIc[index] = \"\";\n            setIc(newIc);\n          }\n\n          setData(data.map((it, ind) => {\n            if (index === ind) {\n              let newItem = { ...it,\n                employee: response.data ? response.data : {\n                  cdaoNo: \"\"\n                }\n              };\n              it = newItem;\n              return it;\n            }\n\n            return it;\n          }));\n        });\n      }\n\n      FetchEmployee();\n    }\n  };\n\n  const handleChange = (e, index) => {\n    const {\n      name,\n      value\n    } = e.target;\n    setData(data.map((itm, indx) => {\n      if (indx === index) {\n        let newItem = { ...itm,\n          [name]: value\n        };\n        itm = newItem;\n        return itm;\n      }\n\n      return itm;\n    }));\n  };\n\n  async function submissionByAao() {\n    if (disabled) return;\n    setDisabled(true);\n    axios.put(`/plis/submissionByAao`, data).then(response => {\n      console.log(response.data);\n\n      if (response.data) {\n        setServerErrors(response.data);\n      }\n\n      setDisabled(false);\n    });\n  }\n\n  async function approvalBySao() {\n    if (disabled) return;\n    setDisabled(true);\n    axios.put(`/plis/approvalBySao`, data).then(response => {\n      console.log(response.data);\n\n      if (response.data) {\n        setServerErrors(response.data);\n      }\n\n      setDisabled(false);\n    });\n  }\n\n  const onsubmit = async () => {\n    var _data$;\n\n    let validity = false;\n    console.log(\"letter \" + data[0].letterNo);\n    validity = ((_data$ = data[0]) === null || _data$ === void 0 ? void 0 : _data$.letterNo.length) > 0 ? true : false;\n    let valid = false;\n\n    if (validity) {\n      for (let i = 0; i < data.length; i++) {\n        if (data[i].employee.cdaoNo.length > 0) {\n          console.log(\"data[i]\", i);\n          valid = true;\n        } else {\n          valid = false;\n          console.log(\"data[i]\", i);\n          setErrIndex(i + 1);\n          break;\n        }\n      }\n    } else {\n      setErrLetter(\"Letter No and Letter Date\");\n    }\n\n    if (valid) {\n      console.log(\"happy\");\n      await axios.post(\"/plis\", data).then(response => {\n        console.log(response.data);\n        setServerErrors(response.data);\n      }).catch(error => {\n        if (error.response) setServerErrors(error.response.data.error);else setServerErrors(error.Error);\n      });\n    } else {\n      setSubmitErr(true);\n    }\n  };\n\n  const myStyle = {\n    upperDiv: {\n      margin: \"4px\",\n      padding: \"10px 0px\"\n    },\n    label: {\n      fontSize: \"15px\"\n    },\n    innerInput: {\n      fontSize: \"18px\",\n      padding: \"2px 14px\",\n      width: \"250px\"\n    }\n  };\n  useEffect(() => {\n    console.log(\"ic set ic>>> \", ic);\n  }, [ic]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-green-100\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-red-500\",\n      children: serverErrors\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 1\n    }, this), submitErr && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed top-0 left-0 w-full h-full flex justify-center items-center z-20\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-0 left-0 w-full h-full bg-black opacity-50\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-96 h-60 bg-white m-0 p-0  z-30\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end m-0 p-0\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-3 cursor-pointer font-bold m-0\",\n            onClick: () => {\n              setSubmitErr(false);\n              setErrIndex(\"\");\n              setErrLetter(\"\");\n            },\n            children: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center items-center text-red-500\",\n          style: {\n            fontSize: \"22px\"\n          },\n          children: [errLetter && /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Please fill the details properly in \", errLetter]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 39\n          }, this), errIndex && /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Please fill the details properly in Row. \", errIndex, \".\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 38\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 27\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex p-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: myStyle.upperDiv,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: myStyle.label,\n          children: \"Letter No\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: myStyle.innerInput,\n          name: \"letterNo\",\n          value: (_data$2 = data[0]) === null || _data$2 === void 0 ? void 0 : _data$2.letterNo,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: myStyle.upperDiv,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: myStyle.label,\n          children: \"Letter Date\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: myStyle.innerInput,\n          name: \"letterDate\",\n          value: (_data$3 = data[0]) === null || _data$3 === void 0 ? void 0 : _data$3.letterDate,\n          type: \"date\",\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 13\n    }, this), data.map((item, index) => {\n      var _item$employee, _item$employee2, _item$employee3;\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex justify-between hover:bg-green-200 ${index % 2 === 0 ? \"bg-gray-300\" : \"bg-gray-200\"}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-bold mt-3\",\n            children: [index + 1, \".\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap py-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: myStyle.upperDiv,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: myStyle.label,\n                children: \"IC No\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                style: myStyle.innerInput,\n                name: \"icNo\",\n                value: (_item$employee = item.employee) === null || _item$employee === void 0 ? void 0 : _item$employee.icNo,\n                onChange: e => handleIcNoInput(e, index)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                style: myStyle.label,\n                className: \"text-red-500\",\n                children: ic[index]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: myStyle.upperDiv,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: myStyle.label,\n                children: \"CDAO No\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                style: myStyle.innerInput,\n                readOnly: true,\n                value: (_item$employee2 = item.employee) === null || _item$employee2 === void 0 ? void 0 : _item$employee2.cdaoNo\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: myStyle.upperDiv,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: myStyle.label,\n                children: \"Officer Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                style: myStyle.innerInput,\n                readOnly: true,\n                value: (_item$employee3 = item.employee) === null || _item$employee3 === void 0 ? void 0 : _item$employee3.officerName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: myStyle.upperDiv,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: myStyle.label,\n                children: \"Policy No\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                style: myStyle.innerInput,\n                name: \"policyNo\",\n                value: item.policyNo,\n                onChange: e => handleChange(e, index)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: myStyle.upperDiv,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: myStyle.label,\n                children: \"Premium\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                style: myStyle.innerInput,\n                name: \"premiumRate\",\n                value: item.premium,\n                onChange: e => handleChange(e, index)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: myStyle.upperDiv,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: myStyle.label,\n                children: \"Date of Commencement\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                style: myStyle.innerInput,\n                name: \"policyDate\",\n                type: \"date\",\n                value: item.policyDate,\n                onChange: e => handleChange(e, index)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: myStyle.upperDiv,\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: myStyle.label,\n                children: \"Recovery Upto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                style: myStyle.innerInput,\n                name: \"maturityDate\",\n                type: \"date\",\n                value: item.maturityDate,\n                onChange: e => handleChange(e, index)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"self-center\",\n          children: index !== 0 ? /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"w-32 h-10\",\n            onClick: () => {\n              setIc(ic.filter((i, ind) => {\n                if (index !== ind) {\n                  return i;\n                }\n              }));\n              setData(data.filter((i, ind) => {\n                if (index !== ind) {\n                  return i;\n                }\n              }));\n            },\n            children: \"Delete Row\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 40\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"w-32 h-10 bg-red-500 hover:bg-red-700\",\n            style: {\n              cursor: \"not-allowed\"\n            },\n            children: \"Can't Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 21\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }, this);\n    }), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"w-32\",\n        onClick: () => {\n          let addedData = [...data, obj];\n          setData(addedData);\n        },\n        children: \"Add Row\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [action && action === 'edit' && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"w-32\",\n        onClick: onsubmit,\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 17\n      }, this), action && action === 'submit' && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"w-32\",\n        onClick: submissionByAao,\n        children: \"Submission By AAO\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 17\n      }, this), action && action === 'approve' && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"w-32\",\n        onClick: approvalBySao,\n        children: \"Approve\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"w-32\",\n        onClick: goToListPage,\n        children: \"Done\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 14\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 235,\n    columnNumber: 9\n  }, this);\n};\n\nexport default withRouter(PliEdit);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/PliEdit.js"],"names":["useState","useEffect","withRouter","useParams","useHistory","axios","PliEdit","id","history","ic","setIc","serverErrors","setServerErrors","submitErr","setSubmitErr","errLetter","setErrLetter","errIndex","setErrIndex","action","setAction","disabled","setDisabled","obj","letterNo","letterDate","icNo","employee","cdaoNo","policyNo","premiumRate","policyDate","maturityDate","data","setData","console","log","FetchData","get","then","response","catch","error","Error","goToListPage","e","push","handleInputChange","name","value","target","map","item","index","newItem","handleIcNoInput","newData","itm","indx","icNumber","toUpperCase","length","FetchEmployee","newIc","it","ind","handleChange","submissionByAao","put","approvalBySao","onsubmit","validity","valid","i","post","myStyle","upperDiv","margin","padding","label","fontSize","innerInput","width","officerName","premium","filter","cursor","addedData"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { withRouter, useParams , useHistory} from \"react-router-dom\";\nimport axios from 'axios';\n\n\n\nconst PliEdit = () => {\n\n\n    let { id } = useParams();\n     let history = useHistory();\n    const [ic, setIc] = useState([]);\n    const [serverErrors, setServerErrors] = useState([]);\n    const [submitErr, setSubmitErr] = useState(false);\n    const [errLetter, setErrLetter] = useState(\"\");\n    const [errIndex, setErrIndex] = useState(\"\");\n    const [action,setAction]=useState(\"\");\n    const [disabled,setDisabled]=useState(false);\n\n    let obj = {\n        letterNo: \"\",\n        letterDate: \"\",\n        icNo: \"\",\n        employee: { cdaoNo: \"\" },\n        policyNo: \"\",\n        premiumRate: \"\",\n        policyDate: \"\",\n        maturityDate: \"\",\n         \n    }\n\n    const [data, setData] = useState([obj]);\n\n    useEffect(() => {\n        if (id !== \"new\") {\n            console.log(id);\n            async function FetchData() {\n                await axios.get(`/plis/${id}`)\n                    .then((response) => {\n                        setData(response.data);\n                        console.log(response.data['action']);\n                        if(response.data['action']!==null)\n                        \tsetAction(response.data['action'])\n                        console.log(\"pli list data>>\", response.data);\n                    })\n                    .catch((error) => {\n                        if (error.response)\n                            setServerErrors(error.response.data.error);\n                        else\n                            setServerErrors(error.Error);\n                    })\n            }\n            FetchData();\n        }\n    }, [id])\n\nconst goToListPage = (e) => {\n    history.push(\"/plis\");\n  };\n    const handleInputChange = (e) => {\n        const { name, value } = e.target;\n        setData(\n            data.map((item, index) => {\n                let newItem = { ...item, [name]: value };\n                item = newItem;\n                return item;\n            })\n        )\n    }\n\n    const handleIcNoInput = (e, index) => {\n        const { name, value } = e.target;\n        let newData = [...data];\n        newData = data.map((itm, indx) => {\n            if (indx === index) {\n                let newItem = { ...itm, [name]: value, employee: { cdaoNo: \"\" } };\n                itm = newItem;\n                return itm;\n            }\n            return itm;\n        })\n        setData(newData);\n\n        let icNumber = e.target.value.toUpperCase();\n        if (icNumber.length === 7) {\n            console.log(\"icNumber >>>> \", icNumber);\n            async function FetchEmployee() {\n                await axios.get(`/employees/byIcNo/${icNumber}`)\n                    .then((response) => {\n                        console.log(\"employee details>>>>\", response.data);\n                        if (response.data.length === 0) {\n                            let newIc = [...ic];\n                            newIc[index] = \"please enter correct IC No\";\n                            setIc(newIc);\n                        } else {\n                            let newIc = [...ic];\n                            newIc[index] = \"\";\n                            setIc(newIc);\n                        }\n                        setData(\n                            data.map((it, ind) => {\n                                if (index === ind) {\n                                    let newItem = { ...it, employee: response.data ? response.data : { cdaoNo: \"\" } };\n                                    it = newItem;\n                                    return it;\n                                }\n                                return it;\n                            })\n                        )\n                    })\n            }\n            FetchEmployee();\n        }\n    }\n\n    const handleChange = (e, index) => {\n        const { name, value } = e.target;\n        setData(\n            data.map((itm, indx) => {\n                if (indx === index) {\n                    let newItem = { ...itm, [name]: value };\n                    itm = newItem;\n                    return itm;\n                }\n                return itm;\n            })\n        )\n    }\n\n\t\n\tasync function submissionByAao() {\n\t \n\tif(disabled)\n\t\treturn;\n\t\t  \n\t\tsetDisabled(true);\n\t\t \n\t\taxios.put(`/plis/submissionByAao`,data)\n\t\t.then((response) => {\t \n\t\t\t console.log(response.data);\n\t\t\t   if(response.data){\n\t\t\t  \tsetServerErrors(response.data);\n\t\t\t  \t \n\t\t\t  \t}\n\t\t\t   \n\t\t\t setDisabled(false)\n       \n\t\t});\n\t}\n\tasync function approvalBySao() {\n\t \n\tif(disabled)\n\t\treturn;\n\t\t  \n\t\tsetDisabled(true);\n\t\t \n\t\taxios.put(`/plis/approvalBySao`,data)\n\t\t.then((response) => {\t \n\t\t\t console.log(response.data);\n\t\t\t   if(response.data){\n\t\t\t  \tsetServerErrors(response.data);\n\t\t\t  \t \n\t\t\t  \t}\n\t\t\t   \n\t\t\t setDisabled(false)\n       \n\t\t});\n\t}\n\t\n    const onsubmit = async () => {\n        let validity = false;\n\t\tconsole.log(\"letter \"+data[0].letterNo);\n\t\t\n        validity = data[0]?.letterNo.length > 0 ? true : false;\n\n        let valid = false;\n\n        if (validity) {\n            for (let i = 0; i < data.length; i++) {\n                if (data[i].employee.cdaoNo.length > 0) {\n                    console.log(\"data[i]\", i)\n                    valid = true;\n                }\n                else {\n                    valid = false;\n                    console.log(\"data[i]\", i)\n                    setErrIndex(i + 1);\n                    break;\n                }\n            }\n        }\n        else {\n            setErrLetter(\"Letter No and Letter Date\");\n        }\n        if (valid) {\n\n            console.log(\"happy\");\n\n             await axios.post(\"/plis\", data)\n                .then((response) => {\n\t\t\t\t\tconsole.log(response.data)\n\t\t\t\t\tsetServerErrors(response.data);\n\t\t\t\t\t})\n                 .catch((error) => {\n                     if (error.response)\n                        setServerErrors(error.response.data.error);\n                    else\n                        setServerErrors(error.Error);\n                })\n        } else {\n            setSubmitErr(true);\n        }\n    }\n\n    const myStyle = {\n        upperDiv: {\n            margin: \"4px\",\n            padding: \"10px 0px\",\n        },\n        label: {\n            fontSize: \"15px\",\n        },\n        innerInput: {\n            fontSize: \"18px\",\n            padding: \"2px 14px\",\n            width: \"250px\"\n        },\n    }\n\n    useEffect(() => {\n        console.log(\"ic set ic>>> \", ic);\n    }, [ic])\n\n    return (\n        <div className=\"bg-green-100\">\n<div className=\"text-red-500\">{serverErrors}</div>\n            {submitErr && <div className=\"fixed top-0 left-0 w-full h-full flex justify-center items-center z-20\">\n                <div className=\"absolute top-0 left-0 w-full h-full bg-black opacity-50\"></div>\n                <div className=\"w-96 h-60 bg-white m-0 p-0  z-30\">\n                    <div className=\"flex justify-end m-0 p-0\">\n                        <div className=\"p-3 cursor-pointer font-bold m-0\" onClick={() => {\n                            setSubmitErr(false);\n                            setErrIndex(\"\");\n                            setErrLetter(\"\");\n                        }}>X</div>\n                    </div>\n                    <div className=\"flex justify-center items-center text-red-500\" style={{ fontSize: \"22px\" }}>\n                        {errLetter && <span>Please fill the details properly in {errLetter}</span>}\n                        {errIndex && <span>Please fill the details properly in Row. {errIndex}.</span>}\n                    </div>\n                </div>\n            </div>}\n\n            <div className=\"flex p-3\">\n                <div style={myStyle.upperDiv}>\n                    <label style={myStyle.label}>Letter No</label>\n                    <input style={myStyle.innerInput} name=\"letterNo\" value={data[0]?.letterNo} onChange={handleInputChange} />\n                </div>\n                <div style={myStyle.upperDiv}>\n                    <label style={myStyle.label}>Letter Date</label>\n                    <input style={myStyle.innerInput} name=\"letterDate\" value={data[0]?.letterDate} type=\"date\" onChange={handleInputChange} />\n                </div>\n            </div>\n\n\n            {data.map((item, index) => (\n                <div key={index} className={`flex justify-between hover:bg-green-200 ${index % 2 === 0 ? \"bg-gray-300\" : \"bg-gray-200\"}`}>\n                    <div className=\"flex\">\n                        <span className='font-bold mt-3'>{index + 1}.</span>\n                        <div className=\"flex flex-wrap py-2\">\n                            <div style={myStyle.upperDiv}>\n                                <label style={myStyle.label}>IC No</label>\n                                <input style={myStyle.innerInput} name=\"icNo\" value={item.employee?.icNo} onChange={(e) => handleIcNoInput(e, index)} />\n                                <label style={myStyle.label} className=\"text-red-500\">{ic[index]}</label>\n                            </div>\n                            <div style={myStyle.upperDiv}>\n                                <label style={myStyle.label}>CDAO No</label>\n                                <input style={myStyle.innerInput} readOnly value={item.employee?.cdaoNo} />\n                            </div>\n                            <div style={myStyle.upperDiv}>\n                                <label style={myStyle.label}>Officer Name</label>\n                                <input style={myStyle.innerInput} readOnly value={item.employee?.officerName} />\n                            </div>\n                            <div style={myStyle.upperDiv}>\n                                <label style={myStyle.label}>Policy No</label>\n                                <input style={myStyle.innerInput} name=\"policyNo\" value={item.policyNo} onChange={(e) => handleChange(e, index)} />\n                            </div>\n                            <div style={myStyle.upperDiv}>\n                                <label style={myStyle.label}>Premium</label>\n                                <input style={myStyle.innerInput} name=\"premiumRate\" value={item.premium} onChange={(e) => handleChange(e, index)} />\n                            </div>\n                            <div style={myStyle.upperDiv}>\n                                <label style={myStyle.label}>Date of Commencement</label>\n                                <input style={myStyle.innerInput} name=\"policyDate\" type=\"date\" value={item.policyDate} onChange={(e) => handleChange(e, index)} />\n                            </div>\n                            \n                            <div style={myStyle.upperDiv}>\n                                <label style={myStyle.label}>Recovery Upto</label>\n                                <input style={myStyle.innerInput} name=\"maturityDate\" type=\"date\" value={item.maturityDate} onChange={(e) => handleChange(e, index)} />\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"self-center\">\n                        {index !== 0 ? <button className=\"w-32 h-10\" onClick={() => {\n                            setIc(\n                                ic.filter((i, ind) => {\n                                    if (index !== ind) {\n                                        return i;\n                                    }\n                                })\n                            )\n                            setData(\n                                data.filter((i, ind) => {\n                                    if (index !== ind) {\n                                        return i;\n                                    }\n                                })\n                            )\n                        }}>\n                            Delete Row\n                        </button> : <button className=\"w-32 h-10 bg-red-500 hover:bg-red-700\" style={{ cursor: \"not-allowed\" }}>\n                            Can't Delete\n                        </button>}\n                    </div>\n                </div>\n            ))}\n\n            <div>\n                <button\n                    className=\"w-32\"\n                    onClick={() => {\n                        let addedData = [...data, obj];\n                        setData(addedData);\n                    }}>\n                    Add Row\n                </button>\n            </div>\n             \n            <div>\n            {action && action==='edit' && \n                <button\n                    className=\"w-32\"\n                    onClick={onsubmit}>\n                    Submit\n                </button>\n                }\n                {action && action==='submit' && \n                <button\n                    className=\"w-32\"\n                    onClick={submissionByAao}>\n                    Submission By AAO\n                </button>\n                }\n                 {action && action==='approve' && \n                <button\n                    className=\"w-32\"\n                    onClick={approvalBySao}>\n                    Approve\n                </button>\n                }\n            </div>\n             <div>\n                <button\n                    className=\"w-32\"\n                    onClick={goToListPage}>\n                    Done\n                </button>\n            </div>\n\n        </div>\n    );\n};\n\nexport default withRouter(PliEdit);\n"]},"metadata":{},"sourceType":"module"}