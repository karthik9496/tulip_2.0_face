{"ast":null,"code":"var _jsxFileName = \"/home/itsdc3/Imp Tulip files/falconws160424/falconws/falcon_face/src/components/UploadDo2Batch.js\";\n\n/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By : \n */\nimport { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from 'axios';\nimport * as yup from \"yup\";\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport LiveSearch from '../utils/LiveSearch'; //import DatePicker  from 'react-datepicker';\n//import \"react-datepicker/dist/react-datepicker.css\";\n//import addDays from 'date-fns/addDays'\n\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst schema = yup.object({//dakType: yup.object().required('Required'),\n  //description: yup.string().required('Required'),\n});\n\nconst UploadDo2Batch = () => {\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    formState: {\n      errors\n    },\n    clearErrors\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  let {\n    id\n  } = useParams();\n  let history = useHistory();\n  const [serverErrors, setServerErrors] = useState([]);\n  const [files, setFiles] = useState({});\n  const [fileList, setFileList] = useState([]);\n  const [lightTheme, setLightTheme] = useState(true);\n  const [disabled, setDisabled] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const applicationTypeRegex = /application\\/(zip|xml|pdf)/gm;\n  const textTypeRegex = /text\\/(zip|xml|pdf)/gm;\n\n  const removeFromList = e => {\n    console.log(e);\n    let newData = [...fileList];\n    newData.splice(e, 1);\n    setFileList(newData);\n  };\n\n  const changeHandler = e => {\n    console.log(e.target.files[0]);\n    const f = e.target.files[0];\n    let newFd = e.target.files;\n    let newFdName = [];\n    let i = 0;\n\n    for (i = 0; i < newFd.length; i++) {\n      newFdName.push(newFd[i].name);\n    }\n\n    console.log(newFdName);\n    let fd = [...fileList];\n\n    for (i = 0; i < fd.length; i++) {\n      console.log(fd[i].name);\n\n      if (newFdName.includes(fd[i].name)) {\n        return;\n      }\n    }\n\n    console.log(f.type);\n\n    if (f.type.match(applicationTypeRegex) || f.type.match(textTypeRegex)) {} else alert(\"Selected file is not a zip file\");\n\n    let newData = [...fileList];\n\n    for (i = 0; i < newFd.length; i++) {\n      newData.push(newFd[i]);\n    }\n\n    setFileList(newData);\n    console.log(fileList);\n  };\n\n  function checkFileName(value) {}\n\n  const fileChangeHandler = () => {\n    if (fileList.length === 0) {\n      alert(\"No file selected.\");\n      return;\n    }\n\n    if (disabled) return;\n    setLoading(true);\n    setDisabled(true);\n    const formData = new FormData();\n    fileList.forEach((i, index) => {\n      console.log(index + '---' + fileList[index]);\n      formData.append('file', fileList[index]);\n    }); //formData.append('file', fileList);\n    //ApiService.upload(formData)\n\n    axios.post(`/do2Controls/uploadDo2/xml`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(res => {\n      console.log(res.data); //alert(\"File uploaded successfully.\")\n\n      if (res.data && res.data.length > 0) setServerErrors(res.data);\n      setLoading(false);\n      setDisabled(false);\n      setFileList([]);\n    }).catch(error => {\n      //alert(error.response.data.message)\n      console.log(error.data);\n      console.log(error.status); //console.log(erroronse.headers);\n\n      /*\n      if (error.response)\n      \tsetServerErrors(error.response.data.error);\n      else\n      \tsetServerErrors(error.Error);\n      */\n    });\n  };\n\n  const onSubmit = (data, event) => {\n    event.preventDefault();\n\n    if (data.id) {\n      axios.put(\"/billTypes/\" + data.id, data).then(response => {\n        history.push(\"/billTypes\");\n      }).catch(error => {\n        console.log(error.response.data);\n        console.log(error.response.status);\n        console.log(error.response.headers);\n        setServerErrors(error.response.data);\n      });\n    } else {\n      axios.post(\"/billTypes\", data).then(response => {\n        history.push(\"/billTypes\");\n      }).catch(error => {\n        //console.log(error.response.data);\n        //console.log(error.response.status);\n        //console.log(error.response.headers);\n        setServerErrors(error.response.data);\n      });\n    }\n  };\n\n  const onError = (errors, e) => console.log(errors, e); //All foreign keys. \n  // XXXXXX Add search fields and adjust the values as necessary\n\n\n  const errorCallback = err => {\n    //console.log(err);\n    setServerErrors(err);\n  };\n\n  const handleInputChange = e => {//console.log(e.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 text-gray-900\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(onSubmit, onError),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [loading && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"flex justify-center items-center\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full\",\n                role: \"status\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  class: \"visually-hidden\",\n                  children: \"Loading...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 5\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 3\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 8\n            }, this)\n          }, void 0, false), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 4\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \" Upload Do2 Batch \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-red-500\",\n            children: serverErrors\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-0\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Select and add files\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 8\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 43\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                className: \"form-control\",\n                id: \"file\",\n                onChange: changeHandler,\n                accept: \"application/pdf, text/xml, application/zip\",\n                multiple: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 8\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 7\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 6\n          }, this), fileList.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: fileList.map((item, idx) => {\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"flex\",\n                children: /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex flex-wrap\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-400\",\n                      children: [\" \", item.name]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 241,\n                      columnNumber: 14\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-40\",\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"button\",\n                        onClick: () => removeFromList(idx),\n                        children: \"Remove\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 243,\n                        columnNumber: 17\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 242,\n                      columnNumber: 14\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 14\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 14\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 24\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-40\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: fileChangeHandler,\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 7\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 6\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 200,\n    columnNumber: 4\n  }, this);\n};\n\nexport default withRouter(UploadDo2Batch);","map":{"version":3,"sources":["/home/itsdc3/Imp Tulip files/falconws160424/falconws/falcon_face/src/components/UploadDo2Batch.js"],"names":["useState","useEffect","withRouter","useParams","useHistory","useForm","axios","yup","yupResolver","LiveSearch","Tabs","Tab","schema","object","UploadDo2Batch","register","handleSubmit","setValue","formState","errors","clearErrors","resolver","id","history","serverErrors","setServerErrors","files","setFiles","fileList","setFileList","lightTheme","setLightTheme","disabled","setDisabled","loading","setLoading","applicationTypeRegex","textTypeRegex","removeFromList","e","console","log","newData","splice","changeHandler","target","f","newFd","newFdName","i","length","push","name","fd","includes","type","match","alert","checkFileName","value","fileChangeHandler","formData","FormData","forEach","index","append","post","headers","then","res","data","catch","error","status","onSubmit","event","preventDefault","put","response","onError","errorCallback","err","handleInputChange","map","item","idx"],"mappings":"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","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By : \n */\n\nimport { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from 'axios';\nimport * as yup from \"yup\";\n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport LiveSearch from '../utils/LiveSearch';\n\n//import DatePicker  from 'react-datepicker';\n//import \"react-datepicker/dist/react-datepicker.css\";\n//import addDays from 'date-fns/addDays'\n\nimport Tabs from 'react-bootstrap/Tabs'\nimport Tab from 'react-bootstrap/Tab'\n\nconst schema = yup.object({\n\t//dakType: yup.object().required('Required'),\n\t//description: yup.string().required('Required'),\n});\n\n\nconst UploadDo2Batch = () => {\n\tconst { register, handleSubmit, setValue, formState: { errors }, clearErrors } = useForm({\n\t\tresolver: yupResolver(schema)\n\t});\n\n\tlet { id } = useParams();\n\n\tlet history = useHistory();\n\tconst [serverErrors, setServerErrors] = useState([]);\n\t const [files,setFiles]=useState({});\n\t const [fileList,setFileList]=useState([]);\n\t const [lightTheme, setLightTheme] = useState(true);\n\tconst [disabled,setDisabled]=useState(false);\n\tconst [loading,setLoading]=useState(false);\n\t const applicationTypeRegex = /application\\/(zip|xml|pdf)/gm;\n\t \t const textTypeRegex = /text\\/(zip|xml|pdf)/gm;\n\t  \n\t  const removeFromList=(e)=>{\n\t\tconsole.log(e);\n\t\t let newData=[...fileList];\n\t\t newData.splice(e,1);\n\t\t  setFileList(newData);\n\t}\n\n const changeHandler = (e) => {\n\t\tconsole.log(e.target.files[0]);\n    const f = e.target.files[0];\n    \n    let newFd=e.target.files;\n    let newFdName=[];\n    let i=0\n    for(i=0;i<newFd.length;i++){\n\t\tnewFdName.push(newFd[i].name);\n\t\t\n\t}\n\tconsole.log(newFdName);\n\t\n\t let fd=[...fileList];\n    \n    for(i=0;i<fd.length;i++){\n\t\tconsole.log(fd[i].name);\n\t\tif(newFdName.includes(fd[i].name)){\n\t\t\treturn;\n\t\t}\n\t}\n\t\n\t \n    \n    console.log(f.type);\n     if (f.type.match(applicationTypeRegex) || f.type.match(textTypeRegex)) {\n\t\t \n      }else\n   \t alert(\"Selected file is not a zip file\");\n   \t \n   \t let newData=[...fileList];\n    \n      for(i=0;i<newFd.length;i++){\n\t\tnewData.push(newFd[i]);\n\t\t\n\t}\n\tsetFileList(newData);\n   \t console.log(fileList);\n\t };\n\t \n     \n    \n     function checkFileName(value){\n\t\n}\n\t \n const fileChangeHandler = () => {\n\t\t \n\t\t if(fileList.length===0){\n\t\t \talert(\"No file selected.\")\n\t\t \treturn;\n\t\t }\n\t\t \n\t\t if(disabled)\n\t\t \treturn;\n\t\t \t\n\t\tsetLoading(true);\n\t\tsetDisabled(true);\n\t\tconst formData = new FormData();\n\t\t \n\t\t fileList.forEach((i,index)=>{\n\t\t\tconsole.log(index+'---'+fileList[index]);\n\t\t\tformData.append('file',fileList[index]);\n\t\t})\n\t \n\t\t\t\n\t\t \n\t\t//formData.append('file', fileList);\n\t\t//ApiService.upload(formData)\n\t\taxios.post(`/do2Controls/uploadDo2/xml`, formData, {\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'multipart/form-data'\n\t\t\t}\n\t\t}).then(res => {\n\t\t\tconsole.log(res.data);\n\t\t\t//alert(\"File uploaded successfully.\")\n\t\t\tif(res.data && res.data.length>0)\n\t\t\t\tsetServerErrors(res.data);\n\t\t\tsetLoading(false);\n\t\t\tsetDisabled(false);\n\t\t\tsetFileList([]);\n\t\t}).catch((error) => {\n\t\t\t//alert(error.response.data.message)\n\t\t\tconsole.log(error.data);\n\t\t\tconsole.log(error.status);\n\t\t\t//console.log(erroronse.headers);\n\t\t\t/*\n\t\t\tif (error.response)\n\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\telse\n\t\t\t\tsetServerErrors(error.Error);\n\t\t\t*/\n\t\t})\n\t};\n\t\n\n\n\tconst onSubmit = (data, event) => {\n\t\tevent.preventDefault();\n\t\tif (data.id) {\n\t\t\taxios.put(\"/billTypes/\" + data.id, data)\n\t\t\t\t.then((response) => { \n\t\t\t\t\thistory.push(\"/billTypes\");\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.log(error.response.data);\n\t\t\t\t\tconsole.log(error.response.status);\n\t\t\t\t\tconsole.log(error.response.headers);\n\t\t\t\t\tsetServerErrors(error.response.data)\n\t\t\t\t});\n\t\t} else {\n\t\t\taxios.post(\"/billTypes\", data)\n\t\t\t\t.then((response) => {\n\t\t\t\t\thistory.push(\"/billTypes\");\n\t\t\t\t })\n\t\t\t\t.catch((error) => {\n\t\t\t\t\t//console.log(error.response.data);\n\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\tsetServerErrors(error.response.data)\n\t\t\t\t});\n\t\t}\n\n\t\t\n\t}\n\n\tconst onError = (errors, e) => console.log(errors, e);\n\n\t//All foreign keys. \n\t// XXXXXX Add search fields and adjust the values as necessary\n\t \n\t \n\tconst errorCallback = (err) => {\n\t\t//console.log(err);\n\t\tsetServerErrors(err);\n\t}\n\n\tconst handleInputChange = (e) => {\n\t\t//console.log(e.target.value);\n\t};\n\n\t \n\n\t \n\treturn (\n\t\t\t<div className=\"min-h-screen bg-gray-100 text-gray-900\">\n\t\t\t<div className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\">\t \n\n\t\t\t\t<form onSubmit={handleSubmit(onSubmit, onError)}>\n\t\t\t\t<div className=\"container\">\n\t\t\t\t {loading && <>\n\t\t\t\t\t\t \n\t\t\t\t\t\t <div class=\"flex justify-center items-center\">\n  <div class=\"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full\" role=\"status\">\n    <span class=\"visually-hidden\">Loading...</span>\n  </div>\n</div>\n\t\t\t\t\t\t</>\t\n\t\t\t\t\t\t}\n\t\t\t<br/><br/>\n\t\t\t\t\t<h1 > Upload Do2 Batch </h1>\n\t\t\t\t\t<div className=\"text-red-500\">{serverErrors}</div>\n\n\t\t\t\t\t<div className=\"grid grid-cols-2 gap-0\">\n\n\t\t\t\t\t\t \n\n\t\t\t\t\t\t \n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<label>Select and add files</label><br/>\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t<input type=\"file\" className=\"form-control\" id=\"file\" onChange={changeHandler}\n            accept=\"application/pdf, text/xml, application/zip\"    multiple/>\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t{\t\t\t \n        fileList.length>0 &&\n          <div>\n            {\n              fileList.map((item,idx) => {\n                return <div class=\"flex\"> \n             <li> \n             <div className=\"flex flex-wrap\">\n             <div className=\"w-400\"> {item.name}</div>\n             <div className=\"w-40\">\n                <button type=\"button\" onClick={()=>removeFromList(idx)}>Remove</button>\n                </div>\n                </div></li>\n              </div>\n              })\n            }\n          </div>  \n      }\n\n\t\t\t\t\t<div className=\"w-40\">\n\t\t\t\t\t\t<button type=\"button\" onClick={fileChangeHandler} >Save</button>\n\t\t\t\t\t</div><br/><br/>\n</div>\n\t\t\t\t</form>\n\t\t\t\t\n\t\t\t </div>\n\t\t</div>\n\t);\n};\n\nexport default withRouter(UploadDo2Batch);"]},"metadata":{},"sourceType":"module"}