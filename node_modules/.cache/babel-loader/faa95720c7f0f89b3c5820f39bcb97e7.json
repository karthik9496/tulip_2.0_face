{"ast":null,"code":"import _toConsumableArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 18 April 2022\n *\n * Modified By : \n */import{useState,useEffect,useMemo}from'react';import Table,{SelectColumnFilter}from'../utils/Table';// \nimport axios from\"axios\";import{withRouter,Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function FundSubscriptionDeputationList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),update=_useState4[0],setUpdate=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),serverErrors=_useState6[0],setServerErrors=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],setSearch=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),inputText=_useState10[0],setInputText=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),usrLevel=_useState12[0],setUsrLevel=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),mesg=_useState14[0],setMesg=_useState14[1];useEffect(function(){var fetching=false;function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(fetching){_context.next=3;break;}_context.next=3;return axios.get('/fundSubscriptionDeputations?search='+search).then(function(response){setData(response.data);//\tsetUsrLevel(response.data[0].usrLevel);\n}).catch(function(error){//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 3:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();return function(){fetching=true;};},[update,search]);useEffect(function(){var fetching=false;function fetchUsrData(){return _fetchUsrData.apply(this,arguments);}function _fetchUsrData(){_fetchUsrData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!fetching)console.log(\">>>>Usr Level is -----:\"+usrLevel);_context2.next=3;return axios.get(\"/fundSubscriptionDeputations/userDesg\").then(function(response){console.log(\">>>>Usr Level is----:\"+response.data);setUsrLevel(response.data);}).catch(function(error){//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchUsrData.apply(this,arguments);}fetchUsrData();return function(){fetching=true;};},[]);function submit(_x){return _submit.apply(this,arguments);}function _submit(){_submit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.put(\"/fundSubscriptionDeputations/submitFundSubDepuDetails/\".concat(id)).then(function(response){//console.log(data);\nsetMesg(response.data);var updatedRecords=_toConsumableArray(data).filter(function(i){return i.id!==id;});//console.log(updatedRecords);\nsetData(updatedRecords);}).catch(function(error){console.log(error);//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return _submit.apply(this,arguments);}function approve(_x2){return _approve.apply(this,arguments);}function _approve(){_approve=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.put(\"/fundSubscriptionDeputations/approveFundSubDepuDetails/\".concat(id)).then(function(response){//console.log(data);\nsetMesg(response.data);var updatedRecords=_toConsumableArray(data).filter(function(i){return i.id!==id;});console.log(updatedRecords);setData(updatedRecords);setUpdate(!update);}).catch(function(error){console.log(error);//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return _approve.apply(this,arguments);}var columns=useMemo(function(){return[{Header:'Action',Cell:function Cell(_ref){var row=_ref.row;return/*#__PURE__*/_jsxs(\"div\",{children:[row.original.action!=null&&row.original.action.includes(\"edit\")&&/*#__PURE__*/_jsx(Link,{to:\"/fundSubscriptionDeputations/\"+row.original.id,children:/*#__PURE__*/_jsx(\"button\",{className:\" w-16 m-0 p-0 \",children:\" Edit \"})}),' ',row.original.action!=null&&!row.original.action.includes(\"appro\")&&!row.original.action.includes(\"edit\")&&/*#__PURE__*/_jsx(\"button\",{className:\"w-16 m-0 p-0 bg-red-500 hover:bg-red-700 \",onClick:function onClick(){return submit(row.original.id);},children:\" Submit  \"}),' ',row.original.action!=null&&row.original.action.includes(\"appro\")&&/*#__PURE__*/_jsx(\"button\",{className:\"w-16 m-0 p-0 bg-red-500 hover:bg-red-700 \",onClick:function onClick(){return approve(row.original.id);},children:\" Approve  \"})]});}},{Header:\"Dak\",accessor:'dak.id'// Change this\n},{Header:\"Cdao No\",accessor:'employee.cdaoNo'// Change this\n},{Header:\"Check Digit\",accessor:'employee.checkDigit'// Change this\n},{Header:\"From Date\",accessor:'fromDate'},{Header:\"To Date\",accessor:'toDate'},{Header:\"Subscription\",accessor:'subscription'},{Header:\"Refund\",accessor:'refund'},{Header:\"Fund Debit Amount\",accessor:'fundDebitAmount'},{Header:\"Fund Debit Month\",accessor:'fundDebitMonth'},{Header:\"Fund Debit Year\",accessor:'fundDebitYear'},{Header:\"Fund Schedule No\",accessor:'fundScheduleNo'},{Header:\"Fund Schedule Date\",accessor:'fundScheduleDate'},{Header:\"Qe\",accessor:'qe'},{Header:\"Record Status\",accessor:'recordStatus'},{Header:\"Reason\",accessor:'reason'},{Header:\"Auditor Date\",accessor:'auditorDate'},{Header:\"Aao Date\",accessor:'aaoDate'},{Header:\"Ao Date\",accessor:'aoDate'},{Header:\"Approved\",accessor:'approved'}];},[data]);var handleSubmit=function handleSubmit(event){event.preventDefault();console.log(inputText);setSearch(inputText);};var handleKeyPress=function handleKeyPress(event){// look for the `Enter` keyCode\nif(event.keyCode===13||event.which===13){handleSubmit(event);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 text-gray-900\",children:/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 ml-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold\",children:\"Fund Subscription Deputations\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:mesg}),/*#__PURE__*/_jsxs(\"div\",{className:\"flexContainer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"search\",onChange:function onChange(e){return setInputText(e.target.value);},onKeyPress:handleKeyPress,className:\"pl-2 -ml-2 inputField flex-initial\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handleSubmit,className:\"w-16 m-0 p-0\",children:\"Search\"}),usrLevel<30&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/fundSubscriptionDeputations/new\",children:/*#__PURE__*/_jsx(\"button\",{className:\" w-46 ml-8 p-0 h-6 -mt-2\",children:\" Add Fund Subscription Deputation \"})})})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"-mt-2 max-h-1 py-0\",children:/*#__PURE__*/_jsx(Table,{columns:columns,data:data,className:\"table-auto\"})})]})});}export default withRouter(FundSubscriptionDeputationList);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/FundSubscriptionDeputationList.js"],"names":["useState","useEffect","useMemo","Table","SelectColumnFilter","axios","withRouter","Link","FundSubscriptionDeputationList","data","setData","update","setUpdate","serverErrors","setServerErrors","search","setSearch","inputText","setInputText","usrLevel","setUsrLevel","mesg","setMesg","fetching","fetchData","get","then","response","catch","error","Error","fetchUsrData","console","log","submit","id","put","updatedRecords","filter","i","approve","columns","Header","Cell","row","original","action","includes","accessor","handleSubmit","event","preventDefault","handleKeyPress","keyCode","which","e","target","value"],"mappings":"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","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 18 April 2022\n *\n * Modified By : \n */\n\nimport { useState, useEffect, useMemo } from 'react';\nimport Table, { SelectColumnFilter } from '../utils/Table'  // \nimport axios from \"axios\";\nimport { withRouter, Link } from \"react-router-dom\";\n\nfunction FundSubscriptionDeputationList() {\n\n\tconst [data, setData] = useState([]);\n\tconst [update, setUpdate] = useState(false);\n\tconst [serverErrors, setServerErrors] = useState([]);\n\tconst [search, setSearch] = useState(\"\");\n\tconst [inputText, setInputText] = useState('');\n\t\n\tconst [usrLevel, setUsrLevel]=useState('');\n\tconst [mesg,setMesg]=useState('');\n\n\tuseEffect(() => {\n\t\tlet fetching = false;\n\t\tasync function fetchData() {\n\t\t\tif(!fetching)\n\t\t\tawait axios.get('/fundSubscriptionDeputations?search='+search)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetData(response.data);\n\t\t\t\t//\tsetUsrLevel(response.data[0].usrLevel);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\t//console.log(error);\n\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\tif (error.response)\n\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\telse\n\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t})\n\t\t}\n\t\tfetchData();\n\t\treturn () => { fetching = true; }\n\n\t}, [update, search]);\n\t\n\tuseEffect(() => {\n\t\tlet fetching = false;\n\t\tasync function fetchUsrData() {\n\t\t\tif(!fetching)\n\t\t\tconsole.log(\">>>>Usr Level is -----:\" + usrLevel);\n\t\t\tawait axios.get(`/fundSubscriptionDeputations/userDesg`)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tconsole.log(\">>>>Usr Level is----:\" + response.data);\n\t\t\t\t\tsetUsrLevel(response.data);\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\t//console.log(error);\n\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\tif (error.response)\n\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\telse\n\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t})\n\t\t}\n\t\tfetchUsrData();\n\t\treturn () => { fetching = true; }\n\n\t}, []);\n\t \n\n\t async function submit(id) {\n\t\tawait axios.put(`/fundSubscriptionDeputations/submitFundSubDepuDetails/${id}`)\n\t\t\t.then((response) => {\n\t\t\t\t//console.log(data);\n\t\t\t\tsetMesg(response.data);\n\t\t\t\tlet updatedRecords = [...data].filter((i) => i.id !== id);\n\t\t\t\t//console.log(updatedRecords);\n\t\t\t\tsetData(updatedRecords);\n\t\t\t\t \n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.log(error);\n\t\t\t\t//console.log(error.response.status);\n\t\t\t\t//console.log(error.response.headers);\n\t\t\t\tif (error.response)\n\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\telse\n\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t});\n\t}\n\t\n\t\n\tasync function approve(id) {\n\t\tawait axios.put(`/fundSubscriptionDeputations/approveFundSubDepuDetails/${id}`)\n\t\t\t.then((response) => {\n\t\t\t\t//console.log(data);\n\t\t\t\tsetMesg(response.data);\n\t\t\t\tlet updatedRecords = [...data].filter((i) => i.id !== id);\n\t\t\t\tconsole.log(updatedRecords);\n\t\t\t\tsetData(updatedRecords);\n\t\t\t\tsetUpdate(!update);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.log(error);\n\t\t\t\t//console.log(error.response.status);\n\t\t\t\t//console.log(error.response.headers);\n\t\t\t\tif (error.response)\n\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\telse\n\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t});\n\t}\n\n\n\tconst columns = useMemo(() => [\n\t\t{\n\t\t\tHeader: 'Action',\n\t\t\tCell: ({ row }) => (\n\t\t\t\t\t<div>\n\t\t\t\t\t {row.original.action!=null && row.original.action.includes(\"edit\") &&\n\t\t\t\t\t<Link to={\"/fundSubscriptionDeputations/\" + row.original.id}>\n\t\t\t\t\t\t<button className=\" w-16 m-0 p-0 \" > Edit </button>\n\t\t\t\t\t</Link>\n\t\t\t\t\t}\n\t\t\t\t\t \n\t\t\t\t\t {' '}\n\t\t\t\t\t{row.original.action!=null && !row.original.action.includes(\"appro\") && !row.original.action.includes(\"edit\") &&\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"w-16 m-0 p-0 bg-red-500 hover:bg-red-700 \"\n\t\t\t\t\t\tonClick={() => submit(row.original.id)}\n\t\t\t\t\t>\tSubmit \t</button>\n\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t{' '}\n\t\t\t\t\t{row.original.action!=null && row.original.action.includes(\"appro\") &&\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName=\"w-16 m-0 p-0 bg-red-500 hover:bg-red-700 \"\n\t\t\t\t\t\tonClick={() => approve(row.original.id)}\n\t\t\t\t\t>\tApprove \t</button>\n\t\t\t\t\t}\n\t\t\t\t\t </div>\n\t\t\t)\n\t\t},\n\t\t{\n\t\t\tHeader: \"Dak\",\n\t\t\taccessor: 'dak.id',// Change this\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Cdao No\",\n\t\t\taccessor: 'employee.cdaoNo',// Change this\n\t\t},\n\t\t{\n\t\t\tHeader: \"Check Digit\",\n\t\t\taccessor: 'employee.checkDigit',// Change this\n\t\t},\n\t\t{\n\t\t\tHeader: \"From Date\",\n\t\t\taccessor: 'fromDate',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"To Date\",\n\t\t\taccessor: 'toDate',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Subscription\",\n\t\t\taccessor: 'subscription',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Refund\",\n\t\t\taccessor: 'refund',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Fund Debit Amount\",\n\t\t\taccessor: 'fundDebitAmount',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Fund Debit Month\",\n\t\t\taccessor: 'fundDebitMonth',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Fund Debit Year\",\n\t\t\taccessor: 'fundDebitYear',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Fund Schedule No\",\n\t\t\taccessor: 'fundScheduleNo',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Fund Schedule Date\",\n\t\t\taccessor: 'fundScheduleDate',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Qe\",\n\t\t\taccessor: 'qe',\n\t\t},\n\t\t\n\t \n\t\t\n\t\t{\n\t\t\tHeader: \"Record Status\",\n\t\t\taccessor: 'recordStatus',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Reason\",\n\t\t\taccessor: 'reason',\n\t\t}, \n\t\t\n\t\t{\n\t\t\tHeader: \"Auditor Date\",\n\t\t\taccessor: 'auditorDate',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Aao Date\",\n\t\t\taccessor: 'aaoDate',\n\t\t},\n\t\t\n\t\t{\n\t\t\tHeader: \"Ao Date\",\n\t\t\taccessor: 'aoDate',\n\t\t},\n\t\t\n\t\t \n\t\t\n\t\t{\n\t\t\tHeader: \"Approved\",\n\t\t\taccessor: 'approved',\n\t\t},\n\t\t\n\t\t \n\t], [data])\n\n\tconst handleSubmit = (event) => {\n\t\tevent.preventDefault();\n\t\tconsole.log(inputText);\n\t\tsetSearch(inputText);\n\t}\n\n\tconst handleKeyPress = (event) => {\n\t\t// look for the `Enter` keyCode\n\t\tif (event.keyCode === 13 || event.which === 13) {\n\t\t\thandleSubmit(event)\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"min-h-screen bg-gray-100 text-gray-900\">\n\t\t\t<main className=\"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\">\n\t\t\t\t<div className=\"mt-2 ml-4\">\n\t\t\t\t\t<h1 className=\"text-xl font-semibold\">Fund Subscription Deputations</h1>\n\t\t\t\t\t<div className=\"text-red-500\">{mesg}</div>\n\t\t\t\t\t<div className=\"flexContainer\">\n\t\t\t\t\t\t<input type=\"text\" name=\"search\" \n\t\t\t\t\t\tonChange={e => setInputText(e.target.value)}\n\t\t\t\t\t\t\tonKeyPress={handleKeyPress}\n\t\t\t\t\t\t\tclassName=\"pl-2 -ml-2 inputField flex-initial\" />\n\t\t\t\t\t\t<button type=\"submit\" onClick={handleSubmit} className=\"w-16 m-0 p-0\">Search</button>\n\t\t\t\t\t\t\n\t\t\t\t\t\t{usrLevel<30 &&\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Link to={\"/fundSubscriptionDeputations/new\"}>\n\t\t\t\t\t\t\t\t<button className=\" w-46 ml-8 p-0 h-6 -mt-2\" > Add Fund Subscription Deputation </button>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div className=\"-mt-2 max-h-1 py-0\">\n\t\t\t\t\t<Table columns={columns} data={data} className=\"table-auto\" />\n\t\t\t\t</div>\n\t\t\t</main>\n\t\t</div>\n\t);\n}\n\nexport default withRouter(FundSubscriptionDeputationList);\n\n"]},"metadata":{},"sourceType":"module"}