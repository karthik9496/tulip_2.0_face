{"ast":null,"code":"import _defineProperty from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By : \n */import{useState,useEffect}from\"react\";import{withRouter,useParams,useHistory,useLocation}from\"react-router-dom\";import{useForm}from\"react-hook-form\";import axios from'axios';import*as yup from\"yup\";import{yupResolver}from'@hookform/resolvers/yup';import LiveSearch from'../utils/LiveSearch';//import DatePicker  from 'react-datepicker';\n//import \"react-datepicker/dist/react-datepicker.css\";\n//import addDays from 'date-fns/addDays'\nimport Tabs from'react-bootstrap/Tabs';import Tab from'react-bootstrap/Tab';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var schema=yup.object({bankName:yup.string().required('Required'),bankBranch:yup.string().required('Required'),bankStation:yup.string().required('Required'),ifsc:yup.string().required('Required')});var BankEdit=function BankEdit(){var _errors$bankName,_errors$bankBranch,_errors$bankStation,_errors$ifsc,_errors$treasuryCode,_errors$micr;var _useForm=useForm({resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,errors=_useForm.formState.errors,clearErrors=_useForm.clearErrors;var _useParams=useParams(),id=_useParams.id;var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),serverErrors=_useState2[0],setServerErrors=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),entity=_useState4[0],setEntity=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),state=_useState6[0],setState=_useState6[1];var _useState7=useState('page1'),_useState8=_slicedToArray(_useState7,2),key=_useState8[0],setKey=_useState8[1];useEffect(function(){var isCancelled=false;console.log(id);if(id!=='new'){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var record;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:record='';_context.next=3;return axios.get('/banks/'+id).then(function(response){record=response.data;var fields=['id','treasuryBank','auditorDate','aaoDate','aoDate','approved','bankName','bankBranch','bankStation','recordStatus','treasuryCode','micr','ifsc','oldIfsc','rtgsCode'];fields.forEach(function(field){return setValue(field,record[field]);});}).catch(function(error){//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 3:if(!isCancelled){setEntity(record);setState(function(prev){return _objectSpread(_objectSpread({},prev),{},{state:record});});}case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();return function(){isCancelled=true;};}},[id,setValue]);var onSubmit=function onSubmit(data,event){event.preventDefault();console.log(data);if(data.id){axios.put(\"/banks/\"+data.id,data).then(function(response){if(response.status===200)history.push(\"/banks\");}).catch(function(error){//console.log(error.response.data);\nconsole.log(error.response.status);//console.log(error.response.headers);\nsetServerErrors(error.response.data);});}else{axios.post(\"/banks\",data).then(function(response){console.log(response.data);if(response.status===200)history.push({pathname:'/banks',state:response.data});}).catch(function(error){//console.log(error.response.data);\nconsole.log(error.response.status);//console.log(error.response.headers);\nsetServerErrors(error.response.data);});}};var onError=function onError(errors,e){return console.log(errors,e);};//All foreign keys. \n// XXXXXX Add search fields and adjust the values as necessary\nvar parentData={treasuryBank:{title:\"Treasury Bank\",url:\"treasuryBanks\",searchList:['id'],//XXXXXXXXX Add search fields here and also in the corresponding repository\nfkEntity:\"treasuryBank\"}};//Callback for child components (Foreign Keys)\nvar callback=function callback(childData){//console.log(\"Parent Callback\");\nsetEntity(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},childData.fk,childData.entity));});setValue(childData.fk,childData.entity);//console.log(errors);\nclearErrors(childData.fk);};var errorCallback=function errorCallback(err){//console.log(err);\nsetServerErrors(err);};var handleInputChange=function handleInputChange(e){//console.log(e.target.value);\n};return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-xl mx-auto \",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full w-3/4  mx-auto \",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit,onError),children:[/*#__PURE__*/_jsxs(\"h1\",{children:[id==='new'?'Add':'Edit',\" Bank \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:serverErrors}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-0\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Bank Name\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"bankName\"},register(\"bankName\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$bankName=errors.bankName)===null||_errors$bankName===void 0?void 0:_errors$bankName.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Bank Branch\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"bankBranch\"},register(\"bankBranch\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$bankBranch=errors.bankBranch)===null||_errors$bankBranch===void 0?void 0:_errors$bankBranch.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Bank Station\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"bankStation\"},register(\"bankStation\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$bankStation=errors.bankStation)===null||_errors$bankStation===void 0?void 0:_errors$bankStation.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Ifsc\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"ifsc\"},register(\"ifsc\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$ifsc=errors.ifsc)===null||_errors$ifsc===void 0?void 0:_errors$ifsc.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Treasury Code\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"treasuryCode\"},register(\"treasuryCode\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$treasuryCode=errors.treasuryCode)===null||_errors$treasuryCode===void 0?void 0:_errors$treasuryCode.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Micr\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\",name:\"micr\"},register(\"micr\")),{},{className:\"form-control py-0\"})),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:(_errors$micr=errors.micr)===null||_errors$micr===void 0?void 0:_errors$micr.message})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-8\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save\"})})]})})});};export default withRouter(BankEdit);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/BankEdit.js"],"names":["useState","useEffect","withRouter","useParams","useHistory","useLocation","useForm","axios","yup","yupResolver","LiveSearch","Tabs","Tab","schema","object","bankName","string","required","bankBranch","bankStation","ifsc","BankEdit","resolver","register","handleSubmit","setValue","errors","formState","clearErrors","id","history","serverErrors","setServerErrors","entity","setEntity","state","setState","key","setKey","isCancelled","console","log","fetchData","record","get","then","response","data","fields","forEach","field","catch","error","Error","prev","onSubmit","event","preventDefault","put","status","push","post","pathname","onError","e","parentData","treasuryBank","title","url","searchList","fkEntity","callback","childData","fk","errorCallback","err","handleInputChange","message","treasuryCode","micr"],"mappings":"gwBAAA;AACA;AACA;AACA;AACA;AACA;AACA,GAEA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,UAAT,CAAqBC,SAArB,CAAgCC,UAAhC,CAA2CC,WAA3C,KAA8D,kBAA9D,CACA,OAASC,OAAT,KAAwB,iBAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,KAArB,CAEA,OAASC,WAAT,KAA4B,yBAA5B,CACA,MAAOC,CAAAA,UAAP,KAAuB,qBAAvB,CAEA;AACA;AACA;AAEA,MAAOC,CAAAA,IAAP,KAAiB,sBAAjB,CACA,MAAOC,CAAAA,GAAP,KAAgB,qBAAhB,C,wFAEA,GAAMC,CAAAA,MAAM,CAAGL,GAAG,CAACM,MAAJ,CAAW,CAEpBC,QAAQ,CAAEP,GAAG,CAACQ,MAAJ,GAAaC,QAAb,CAAsB,UAAtB,CAFU,CAGpBC,UAAU,CAAEV,GAAG,CAACQ,MAAJ,GAAaC,QAAb,CAAsB,UAAtB,CAHQ,CAIpBE,WAAW,CAAEX,GAAG,CAACQ,MAAJ,GAAaC,QAAb,CAAsB,UAAtB,CAJO,CAMpBG,IAAI,CAAEZ,GAAG,CAACQ,MAAJ,GAAaC,QAAb,CAAsB,UAAtB,CANc,CAAX,CAAf,CAWA,GAAMI,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,yHAC2Df,OAAO,CAAC,CACxFgB,QAAQ,CAAEb,WAAW,CAACI,MAAD,CADmE,CAAD,CADlE,CACdU,QADc,UACdA,QADc,CACJC,YADI,UACJA,YADI,CACUC,QADV,UACUA,QADV,CACiCC,MADjC,UACoBC,SADpB,CACiCD,MADjC,CAC2CE,WAD3C,UAC2CA,WAD3C,gBAKTzB,SAAS,EALA,CAKhB0B,EALgB,YAKhBA,EALgB,CAOtB,GAAIC,CAAAA,OAAO,CAAG1B,UAAU,EAAxB,CAPsB,cAQkBJ,QAAQ,CAAC,EAAD,CAR1B,wCAQf+B,YARe,eAQDC,eARC,8BASMhC,QAAQ,CAAC,EAAD,CATd,yCASfiC,MATe,eASPC,SATO,8BAUIlC,QAAQ,CAAC,EAAD,CAVZ,yCAUfmC,KAVe,eAURC,QAVQ,8BAWApC,QAAQ,CAAC,OAAD,CAXR,yCAWfqC,GAXe,eAWVC,MAXU,eAetBrC,SAAS,CAAC,UAAM,CACf,GAAIsC,CAAAA,WAAW,CAAG,KAAlB,CACAC,OAAO,CAACC,GAAR,CAAYZ,EAAZ,EACA,GAAIA,EAAE,GAAK,KAAX,CAAkB,SACFa,CAAAA,SADE,qIACjB,8IACKC,MADL,CACc,EADd,uBAEOpC,CAAAA,KAAK,CAACqC,GAAN,CAAU,UAAYf,EAAtB,EACJgB,IADI,CACC,SAACC,QAAD,CAAc,CACnBH,MAAM,CAAGG,QAAQ,CAACC,IAAlB,CACA,GAAMC,CAAAA,MAAM,CAAG,CACf,IADe,CAEnB,cAFmB,CAEH,aAFG,CAEY,SAFZ,CAEuB,QAFvB,CAEiC,UAFjC,CAE6C,UAF7C,CAEyD,YAFzD,CAEuE,aAFvE,CAEsF,cAFtF,CAEsG,cAFtG,CAEsH,MAFtH,CAE8H,MAF9H,CAEsI,SAFtI,CAEiJ,UAFjJ,CAAf,CAIDA,MAAM,CAACC,OAAP,CAAe,SAAAC,KAAK,QAAIzB,CAAAA,QAAQ,CAACyB,KAAD,CAAQP,MAAM,CAACO,KAAD,CAAd,CAAZ,EAApB,EACC,CARI,EASJC,KATI,CASE,SAACC,KAAD,CAAW,CACjB;AACA;AACA;AACA,GAAGA,KAAK,CAACN,QAAT,CACCd,eAAe,CAACoB,KAAK,CAACN,QAAN,CAAeC,IAAf,CAAoBK,KAArB,CAAf,CADD,IAGCpB,CAAAA,eAAe,CAACoB,KAAK,CAACC,KAAP,CAAf,CACD,CAjBI,CAFP,QAsBC,GAAI,CAACd,WAAL,CAAkB,CACjBL,SAAS,CAACS,MAAD,CAAT,CACAP,QAAQ,CAAC,SAAAkB,IAAI,wCAAUA,IAAV,MAAgBnB,KAAK,CAAEQ,MAAvB,IAAL,CAAR,CACA,CAzBF,sDADiB,4CA6BjBD,SAAS,GACT,MAAO,WAAM,CACZH,WAAW,CAAG,IAAd,CACA,CAFD,CAGA,CAED,CAtCQ,CAsCN,CAACV,EAAD,CAAKJ,QAAL,CAtCM,CAAT,CAyCA,GAAM8B,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACR,IAAD,CAAOS,KAAP,CAAiB,CACjCA,KAAK,CAACC,cAAN,GACAjB,OAAO,CAACC,GAAR,CAAYM,IAAZ,EACA,GAAIA,IAAI,CAAClB,EAAT,CAAa,CACZtB,KAAK,CAACmD,GAAN,CAAU,UAAYX,IAAI,CAAClB,EAA3B,CAA+BkB,IAA/B,EACEF,IADF,CACO,SAACC,QAAD,CAAc,CACnB,GAAGA,QAAQ,CAACa,MAAT,GAAkB,GAArB,CACC7B,OAAO,CAAC8B,IAAR,CAAa,QAAb,EACA,CAJH,EAKET,KALF,CAKQ,SAACC,KAAD,CAAW,CACjB;AACAZ,OAAO,CAACC,GAAR,CAAYW,KAAK,CAACN,QAAN,CAAea,MAA3B,EACA;AACA3B,eAAe,CAACoB,KAAK,CAACN,QAAN,CAAeC,IAAhB,CAAf,CACA,CAVF,EAWA,CAZD,IAYO,CACNxC,KAAK,CAACsD,IAAN,CAAW,QAAX,CAAqBd,IAArB,EACEF,IADF,CACO,SAACC,QAAD,CAAc,CACnBN,OAAO,CAACC,GAAR,CAAYK,QAAQ,CAACC,IAArB,EACA,GAAGD,QAAQ,CAACa,MAAT,GAAkB,GAArB,CACC7B,OAAO,CAAC8B,IAAR,CAAa,CAACE,QAAQ,CAAG,QAAZ,CAAqB3B,KAAK,CAAEW,QAAQ,CAACC,IAArC,CAAb,EACA,CALH,EAMEI,KANF,CAMQ,SAACC,KAAD,CAAW,CAEjB;AAEAZ,OAAO,CAACC,GAAR,CAAYW,KAAK,CAACN,QAAN,CAAea,MAA3B,EACA;AACA3B,eAAe,CAACoB,KAAK,CAACN,QAAN,CAAeC,IAAhB,CAAf,CACA,CAbF,EAcA,CAGD,CAjCD,CAmCA,GAAMgB,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACrC,MAAD,CAASsC,CAAT,QAAexB,CAAAA,OAAO,CAACC,GAAR,CAAYf,MAAZ,CAAoBsC,CAApB,CAAf,EAAhB,CAEA;AACA;AACA,GAAMC,CAAAA,UAAU,CAAG,CAElBC,YAAY,CAAE,CACbC,KAAK,CAAE,eADM,CAEbC,GAAG,CAAG,eAFO,CAGbC,UAAU,CAAG,CAAC,IAAD,CAHA,CAGQ;AACrBC,QAAQ,CAAE,cAJG,CAFI,CAAnB,CAUA;AACA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,SAAD,CAAe,CAC/B;AACAtC,SAAS,CAAC,SAAAoB,IAAI,wCAAUA,IAAV,wBAAiBkB,SAAS,CAACC,EAA3B,CAAgCD,SAAS,CAACvC,MAA1C,IAAL,CAAT,CACAR,QAAQ,CAAC+C,SAAS,CAACC,EAAX,CAAeD,SAAS,CAACvC,MAAzB,CAAR,CACA;AACAL,WAAW,CAAC4C,SAAS,CAACC,EAAX,CAAX,CACA,CAND,CAQA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,GAAD,CAAS,CAC9B;AACA3C,eAAe,CAAC2C,GAAD,CAAf,CACA,CAHD,CAKA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACZ,CAAD,CAAO,CAChC;AACA,CAFD,CAIA,mBACC,YAAK,SAAS,CAAC,mBAAf,uBACC,YAAK,SAAS,CAAC,wBAAf,uBAEC,cAAM,QAAQ,CAAExC,YAAY,CAAC+B,QAAD,CAAWQ,OAAX,CAA5B,wBACC,sBAAMlC,EAAE,GAAK,KAAP,CAAe,KAAf,CAAuB,MAA7B,YADD,cAEC,YAAK,SAAS,CAAC,cAAf,UAA+BE,YAA/B,EAFD,cAKG,aAAK,SAAS,CAAC,wBAAf,wBAGC,oCACC,oCADD,cAEC,0CAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,UAAxB,EAAuCR,QAAQ,CAAC,UAAD,CAA/C,MACC,SAAS,CAAC,mBADX,GAFD,cAKC,YAAK,SAAS,CAAC,cAAf,4BAA+BG,MAAM,CAACX,QAAtC,2CAA+B,iBAAiB8D,OAAhD,EALD,GAHD,cAYC,oCACC,sCADD,cAEC,0CAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,YAAxB,EAAyCtD,QAAQ,CAAC,YAAD,CAAjD,MACC,SAAS,CAAC,mBADX,GAFD,cAKC,YAAK,SAAS,CAAC,cAAf,8BAA+BG,MAAM,CAACR,UAAtC,6CAA+B,mBAAmB2D,OAAlD,EALD,GAZD,cAqBC,oCACC,uCADD,cAEC,0CAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,aAAxB,EAA0CtD,QAAQ,CAAC,aAAD,CAAlD,MACC,SAAS,CAAC,mBADX,GAFD,cAKC,YAAK,SAAS,CAAC,cAAf,+BAA+BG,MAAM,CAACP,WAAtC,8CAA+B,oBAAoB0D,OAAnD,EALD,GArBD,cA6BC,oCACC,+BADD,cAEC,0CAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,MAAxB,EAAmCtD,QAAQ,CAAC,MAAD,CAA3C,MACC,SAAS,CAAC,mBADX,GAFD,cAKC,YAAK,SAAS,CAAC,cAAf,wBAA+BG,MAAM,CAACN,IAAtC,uCAA+B,aAAayD,OAA5C,EALD,GA7BD,cAuCC,oCACC,wCADD,cAEC,0CAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,cAAxB,EAA2CtD,QAAQ,CAAC,cAAD,CAAnD,MACC,SAAS,CAAC,mBADX,GAFD,cAKC,YAAK,SAAS,CAAC,cAAf,gCAA+BG,MAAM,CAACoD,YAAtC,+CAA+B,qBAAqBD,OAApD,EALD,GAvCD,cAgDC,oCACC,+BADD,cAEC,0CAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,MAAxB,EAAmCtD,QAAQ,CAAC,MAAD,CAA3C,MACC,SAAS,CAAC,mBADX,GAFD,cAKC,YAAK,SAAS,CAAC,cAAf,wBAA+BG,MAAM,CAACqD,IAAtC,uCAA+B,aAAaF,OAA5C,EALD,GAhDD,GALH,cA6EC,YAAK,SAAS,CAAC,MAAf,uBACC,eAAQ,IAAI,CAAC,QAAb,kBADD,EA7ED,GAFD,EADD,EADD,CAyFA,CApND,CAsNA,cAAe3E,CAAAA,UAAU,CAACmB,QAAD,CAAzB","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By : \n */\n\nimport { useState, useEffect } from \"react\";\nimport { withRouter, useParams, useHistory,useLocation } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from 'axios';\nimport * as yup from \"yup\";\n\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport LiveSearch from '../utils/LiveSearch';\n\n//import DatePicker  from 'react-datepicker';\n//import \"react-datepicker/dist/react-datepicker.css\";\n//import addDays from 'date-fns/addDays'\n\nimport Tabs from 'react-bootstrap/Tabs'\nimport Tab from 'react-bootstrap/Tab'\n\nconst schema = yup.object({\n      \n      bankName: yup.string().required('Required'),\n      bankBranch: yup.string().required('Required'),\n      bankStation: yup.string().required('Required'),\n      \n      ifsc: yup.string().required('Required'),\n       \n});\n\n\nconst BankEdit = () => {\n\tconst { register, handleSubmit, setValue, formState: { errors }, clearErrors } = useForm({\n\t\tresolver: yupResolver(schema)\n\t});\n\n\tlet { id } = useParams();\n\n\tlet history = useHistory();\n\tconst [serverErrors, setServerErrors] = useState([]);\n\tconst [entity, setEntity] = useState({});\n\tconst [state, setState] = useState({});\n\tconst [key, setKey] = useState('page1');\n\t\n\t\n\t\n\tuseEffect(() => {\n\t\tlet isCancelled = false;\n\t\tconsole.log(id);\n\t\tif (id !== 'new') {\n\t\t\tasync function fetchData() {\n\t\t\t\tlet record = '';\n\t\t\t\tawait axios.get('/banks/' + id)\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\trecord = response.data;\n\t\t\t\t\t\tconst fields = [\n\t\t\t\t\t\t'id'\n, 'treasuryBank', 'auditorDate', 'aaoDate', 'aoDate', 'approved', 'bankName', 'bankBranch', 'bankStation', 'recordStatus', 'treasuryCode', 'micr', 'ifsc', 'oldIfsc', 'rtgsCode'\t\t\t\t\n\t\t\t\t\t];\n\t\t\t\t\tfields.forEach(field => setValue(field, record[field]));\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t//console.log(error);\n\t\t\t\t\t\t//console.log(error.response.status);\n\t\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\t\tif(error.response)\n\t\t\t\t\t\t\tsetServerErrors(error.response.data.error);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tsetServerErrors(error.Error);\n\t\t\t\t\t});\n\n\n\t\t\t\tif (!isCancelled) {\n\t\t\t\t\tsetEntity(record);\n\t\t\t\t\tsetState(prev => ({ ...prev, state: record }));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfetchData();\n\t\t\treturn () => {\n\t\t\t\tisCancelled = true;\n\t\t\t};\n\t\t}\n\n\t}, [id, setValue]);\n\n\n\tconst onSubmit = (data, event) => {\n\t\tevent.preventDefault();\n\t\tconsole.log(data);\n\t\tif (data.id) {\n\t\t\taxios.put(\"/banks/\" + data.id, data)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif(response.status===200)\n\t\t\t\t\t\thistory.push(\"/banks\");\n\t\t\t\t })\n\t\t\t\t.catch((error) => {\n\t\t\t\t\t//console.log(error.response.data);\n\t\t\t\t\tconsole.log(error.response.status);\n\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\tsetServerErrors(error.response.data)\n\t\t\t\t});\n\t\t} else {\n\t\t\taxios.post(\"/banks\", data)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tconsole.log(response.data);\n\t\t\t\t\tif(response.status===200)\n\t\t\t\t\t\thistory.push({pathname : '/banks',state: response.data});\n\t\t\t\t })\n\t\t\t\t.catch((error) => {\n\t\t\t\t\t\n\t\t\t\t\t//console.log(error.response.data);\n\t\t\t\t\t\n\t\t\t\t\tconsole.log(error.response.status);\n\t\t\t\t\t//console.log(error.response.headers);\n\t\t\t\t\tsetServerErrors(error.response.data)\n\t\t\t\t});\n\t\t}\n\n\t\t \n\t}\n\n\tconst onError = (errors, e) => console.log(errors, e);\n\n\t//All foreign keys. \n\t// XXXXXX Add search fields and adjust the values as necessary\n\tconst parentData = {\n\t\n\t\ttreasuryBank: {\n\t\t\ttitle: \"Treasury Bank\",\n\t\t\turl : \"treasuryBanks\",\n\t\t\tsearchList : ['id'], //XXXXXXXXX Add search fields here and also in the corresponding repository\n\t\t\tfkEntity: \"treasuryBank\",\n\t\t},\n\t}\n\n\t//Callback for child components (Foreign Keys)\n\tconst callback = (childData) => {\n\t\t//console.log(\"Parent Callback\");\n\t\tsetEntity(prev => ({ ...prev, [childData.fk]: childData.entity }));\n\t\tsetValue(childData.fk, childData.entity);\n\t\t//console.log(errors);\n\t\tclearErrors(childData.fk);\n\t};\n\n\tconst errorCallback = (err) => {\n\t\t//console.log(err);\n\t\tsetServerErrors(err);\n\t}\n\n\tconst handleInputChange = (e) => {\n\t\t//console.log(e.target.value);\n\t};\n\n\treturn (\n\t\t<div className=\"max-w-xl mx-auto \">\n\t\t\t<div className=\"w-full w-3/4  mx-auto \" >\n\t\t\t\t\t \n\t\t\t\t<form onSubmit={handleSubmit(onSubmit, onError)}>\n\t\t\t\t\t<h1 >{id === 'new' ? 'Add' : 'Edit'} Bank </h1>\n\t\t\t\t\t<div className=\"text-red-500\">{serverErrors}</div>\n\t\t\t\t\t \n\t\t\t\t\t\t \n\t\t\t\t\t\t\t<div className=\"grid grid-cols-2 gap-0\">\n\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t   \n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Bank Name</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"bankName\" {...register(\"bankName\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.bankName?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Bank Branch</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"bankBranch\" {...register(\"bankBranch\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.bankBranch?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Bank Station</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"bankStation\" {...register(\"bankStation\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.bankStation?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Ifsc</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"ifsc\" {...register(\"ifsc\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.ifsc?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Treasury Code</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"treasuryCode\" {...register(\"treasuryCode\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.treasuryCode?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label>Micr</label>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"micr\" {...register(\"micr\")}\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-0\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"text-red-500\">{errors.micr?.message}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\n\t\t\t\t\t\n\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t \n\n\t\t\t\t\t\t \n\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t \n\t\t\t\t\t\t\n\t\t\t\t\t<div className=\"px-8\">\n\t\t\t\t\t\t<button type=\"submit\" >Save</button>\n\t\t\t\t\t</div>\n\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default withRouter(BankEdit);"]},"metadata":{},"sourceType":"module"}