{"ast":null,"code":"import _toConsumableArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/itsdcsec/falconws/falcon_face/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By :\n */import{useState,useEffect,useRef,useMemo}from\"react\";import{withRouter,useParams,useHistory}from\"react-router-dom\";import{useForm}from\"react-hook-form\";import axios from\"axios\";import*as yup from\"yup\";import{yupResolver}from\"@hookform/resolvers/yup\";import LiveSearch from\"../utils/LiveSearch\";import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";import addDays from\"date-fns/addDays\";import Tabs from\"react-bootstrap/Tabs\";import Tab from\"react-bootstrap/Tab\";//import TablePage from '../utils/TablePage';\nimport TablePage from\"../utils/TablePage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var schema=yup.object({});var TaskReallocation=function TaskReallocation(){var _useForm=useForm({resolver:yupResolver(schema)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setValue=_useForm.setValue,errors=_useForm.formState.errors,clearErrors=_useForm.clearErrors;var _useParams=useParams(),id=_useParams.id;//console.log(id);\nvar history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),serverErrors=_useState2[0],setServerErrors=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),entity=_useState4[0],setEntity=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),state=_useState6[0],setState=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),secList=_useState8[0],setSecList=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),pendingList=_useState10[0],setPendingList=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),secItem=_useState12[0],setSecItem=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),secCodeItems=_useState14[0],setSecCodeItems=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),secItems=_useState16[0],setSecItems=_useState16[1];var _useState17=useState(true),_useState18=_slicedToArray(_useState17,2),loading=_useState18[0],setLoading=_useState18[1];var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),mesg=_useState20[0],setMesg=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),taskList=_useState22[0],setTaskList=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),reallotList=_useState24[0],setReallotList=_useState24[1];var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),taskNo=_useState26[0],setTaskNo=_useState26[1];var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),reallocateTaskNo=_useState28[0],setReallocateTaskNo=_useState28[1];var _useState29=useState(),_useState30=_slicedToArray(_useState29,2),secCode=_useState30[0],setSecCode=_useState30[1];var _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),disabled=_useState32[0],setDisabled=_useState32[1];var _useState33=useState(\"Page1\"),_useState34=_slicedToArray(_useState33,2),key=_useState34[0],setKey=_useState34[1];var _useState35=useState(0),_useState36=_slicedToArray(_useState35,2),page=_useState36[0],setPage=_useState36[1];//pcdao -- for TablePage\nvar _useState37=useState(0),_useState38=_slicedToArray(_useState37,2),pageSize=_useState38[0],setPageSize=_useState38[1];useEffect(function(){var fetching=false;var unmounted=false;function fetchUsrSectionData(){return _fetchUsrSectionData.apply(this,arguments);}function _fetchUsrSectionData(){_fetchUsrSectionData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(fetching){_context.next=3;break;}_context.next=3;return axios.get(\"/usrs/0/loggedInUsrSections\").then(function(response){console.log(\"response>>\"+response.data);setSecList(response.data);if(!unmounted){setSecItems(response.data.map(function(_ref){var id=_ref.id,sectionName=_ref.sectionName;return{id:id,label:sectionName};}));setLoading(false);}}).catch(function(error){//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 3:case\"end\":return _context.stop();}}},_callee);}));return _fetchUsrSectionData.apply(this,arguments);}fetchUsrSectionData();return function(){fetching=true;unmounted=true;};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(function(){var fetching=false;var unmounted=false;function fetchTaskData(){return _fetchTaskData.apply(this,arguments);}function _fetchTaskData(){_fetchTaskData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(secItem);if(!(!fetching&&secItem)){_context2.next=4;break;}_context2.next=4;return axios.get(\"/tasks/\".concat(secItem,\"/taskList\")).then(function(response){console.log(\"response section codce >>\"+response.data);setTaskList(response.data);setReallotList(response.data);if(!unmounted){setLoading(false);}}).catch(function(error){//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _fetchTaskData.apply(this,arguments);}fetchTaskData();return function(){fetching=true;unmounted=true;};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[secItem]);useEffect(function(){var fetching=false;var unmounted=false;function fetchPendingBillsForTask(){return _fetchPendingBillsForTask.apply(this,arguments);}function _fetchPendingBillsForTask(){_fetchPendingBillsForTask=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(secItem+\"-\"+taskNo);if(!(!fetching&&taskNo&&secItem)){_context3.next=4;break;}_context3.next=4;return axios.get(\"/tasks/\".concat(secItem,\"/taskNo/\").concat(taskNo)).then(function(response){//console.log(\"response cs list >>\" + response.data);\nsetPendingList(response.data);if(!unmounted){setLoading(false);}}).catch(function(error){//console.log(error);\n//console.log(error.response.status);\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data.error);else setServerErrors(error.Error);});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _fetchPendingBillsForTask.apply(this,arguments);}fetchPendingBillsForTask();return function(){fetching=true;unmounted=true;};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[secCode,taskNo]);var reallocateTask=function reallocateTask(){if(disabled)return;//\tconsole.log(data);\nconsole.log(\"data id--------------\"+reallocateTaskNo);setDisabled(true);axios.put(\"/tasks/\".concat(secItem,\"/reallotedTask/\").concat(reallocateTaskNo,\"/reallocate\"),pendingList).then(function(response){console.log(\"reponse status--------------\"+response.status+\"--\"+response.statusText+\"----\"+\"-h--\"+response.headers+\"--\"+response.data);if(response.status===200){setMesg(response.data);setPendingList([]);}}).catch(function(error){//console.log(error.response.data);\n//console.log(\"response--------\"+error.response.status);\n//if(error.response.status!==200)\n//history.push(\"/chequeSlips/dpsList\");\n//console.log(error.response.headers);\nif(error.response)setServerErrors(error.response.data);else setServerErrors(error);});//history.push(\"/daks\");\n};var onError=function onError(errors,e){return console.log(errors,e);};//All foreign keys.\n// XXXXXX Add search fields and adjust the values as necessary\nvar errorCallback=function errorCallback(err){//console.log(err);\nsetServerErrors(err);};var handleCheckBox=function handleCheckBox(index){return function(e){//console.log(Table.page)\nconsole.log(e.target.checked+\"--\"+index);//csList[index].select=e.target.checked;\nconsole.log(e.target.checked);var item=pendingList[index];item[\"select\"]=e.target.checked;var newData=_toConsumableArray(pendingList);newData[index]=item;setPendingList(newData);//console.log(csList);\n};};var handleSectionChange=function handleSectionChange(e){console.log(e.target.selectedIndex+\"--\"+e.target.value);setSecItem(e.target.value);};var handleSectionCodeChange=function handleSectionCodeChange(e){console.log(e.target.selectedIndex+\"-->>\"+e.target.value);setTaskNo(e.target.value);};var handleReallot=function handleReallot(e){setReallocateTaskNo(e.target.value);};var updateCheckBoxAll=function updateCheckBoxAll(e){// console.log(\"...\"+e.target.checked+\"--\"+index);\nvar newData=_toConsumableArray(pendingList);for(var k in newData){newData[k].select=e.target.checked;}setPendingList(newData);};//\tconst handlePage = (pp)=>{\n//\tconsole.log(pp);\n//\tsetPage(pp);\n//\t}\nvar handleInputChange=function handleInputChange(e){console.log(e.target.value);//\tconsole.log(\"handle input change\");\n};var callback=function callback(e){console.log(e);};var ShowDps=function ShowDps(){var handleP=function handleP(pp){console.log(pp);setPage(pp);};//pcdao added below method for TablePage\nvar handlePageSize=function handlePageSize(pp){console.log(pp);setPageSize(pp);};var columns=useMemo(function(){return[{Header:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onChange:updateCheckBoxAll}),accessor:\"select\",Cell:function Cell(_ref2){var row=_ref2.row;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onChange:handleCheckBox(row.index),checked:pendingList[row.index][\"select\"]})});}},{Header:\"Dak Id\",accessor:\"dak\",Cell:function Cell(_ref3){var row=_ref3.row;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"label\",{children:row.original.dak.dakidNo})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\" \",row.original.dak.dakType.description]})})]});}},{Header:\"CDAONo\",//pcdao commented out below accessor\n//accessor: \"cdaoNo\",\nCell:function Cell(_ref4){var row=_ref4.row;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"label\",{children:row.original.dak.cdaoNo})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\" \",row.original.employee.officerName]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\" \",row.original.employee.rank.rankName]})})]});}},{Header:\"Section\",accessor:\"section\",Cell:function Cell(_ref5){var row=_ref5.row;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"label\",{children:row.original.section.sectionName})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Task : \",row.original.taskNo]})})]});}},{Header:\"Amount\",accessor:\"dak.amount\"}];},[pendingList,page,setPage]);return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-green-100 text-gray-700\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-5xl mx-auto px-2 sm:px-6 lg:px-8 pt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"-mt-2 max-h-1 py-0 ml-0\",children:[/*#__PURE__*/_jsx(TablePage,{columns:columns,data:pendingList,newpage:page,parentCallback:handleP//pcdao added below two attributes for TablePage\n,newPageSize:pageSize,parentCallbackPageSize:handlePageSize,className:\"table-auto\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 ml-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:reallocateTask,className:\"w-24 mb-24 p-0\",children:\"Re-allocate Task\"})})]})})});};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 text-gray-900\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:serverErrors}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold ml-4\",children:\"Task Reallocation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 ml-4\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Section\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"w-22 m-0 p-0\",disabled:loading,value:secItem,onChange:handleSectionChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"--select section--\"},\"0\"),secItems.map(function(_ref6){var id=_ref6.id,label=_ref6.label;return/*#__PURE__*/_jsxs(\"option\",{value:id,children:[\" \",label,\" \"]},id);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 ml-4\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Task\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"w-22 m-0 p-0\",disabled:loading,value:taskNo,onChange:handleSectionCodeChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"--select task No--\"},\"0\"),taskList.map(function(item,index){return/*#__PURE__*/_jsxs(\"option\",{value:item.toString(),children:[\" \",item.toString(),\" \"]},index);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 ml-4\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Reallocate to \"}),/*#__PURE__*/_jsxs(\"select\",{className:\"w-22 m-0 p-0\",disabled:loading,value:reallocateTaskNo,onChange:handleReallot,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"--Reallocate task--\"},\"0\"),reallotList.map(function(item,index){return/*#__PURE__*/_jsxs(\"option\",{value:item.toString(),children:[\" \",item.toString(),\" \"]},index);})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 max-h-1 py-0 ml-0\",children:/*#__PURE__*/_jsx(ShowDps,{})})]})});};export default withRouter(TaskReallocation);","map":{"version":3,"sources":["/home/itsdcsec/falconws/falcon_face/src/components/TaskReallocation.js"],"names":["useState","useEffect","useRef","useMemo","withRouter","useParams","useHistory","useForm","axios","yup","yupResolver","LiveSearch","DatePicker","addDays","Tabs","Tab","TablePage","schema","object","TaskReallocation","resolver","register","handleSubmit","setValue","errors","formState","clearErrors","id","history","serverErrors","setServerErrors","entity","setEntity","state","setState","secList","setSecList","pendingList","setPendingList","secItem","setSecItem","secCodeItems","setSecCodeItems","secItems","setSecItems","loading","setLoading","mesg","setMesg","taskList","setTaskList","reallotList","setReallotList","taskNo","setTaskNo","reallocateTaskNo","setReallocateTaskNo","secCode","setSecCode","disabled","setDisabled","key","setKey","page","setPage","pageSize","setPageSize","fetching","unmounted","fetchUsrSectionData","get","then","response","console","log","data","map","sectionName","label","catch","error","Error","fetchTaskData","fetchPendingBillsForTask","reallocateTask","put","status","statusText","headers","onError","e","errorCallback","err","handleCheckBox","index","target","checked","item","newData","handleSectionChange","selectedIndex","value","handleSectionCodeChange","handleReallot","updateCheckBoxAll","k","select","handleInputChange","callback","ShowDps","handleP","pp","handlePageSize","columns","Header","accessor","Cell","row","original","dak","dakidNo","dakType","description","cdaoNo","employee","officerName","rank","rankName","section","toString"],"mappings":"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","sourcesContent":["/**\n * Code generated using Python\n * @author Raja Reddy\n * Date : 17 Oct 2021\n *\n * Modified By :\n */\n\nimport { useState, useEffect, useRef, useMemo } from \"react\";\nimport { withRouter, useParams, useHistory } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport * as yup from \"yup\";\n\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport LiveSearch from \"../utils/LiveSearch\";\n\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport addDays from \"date-fns/addDays\";\n\nimport Tabs from \"react-bootstrap/Tabs\";\nimport Tab from \"react-bootstrap/Tab\";\n//import TablePage from '../utils/TablePage';\n\nimport TablePage from \"../utils/TablePage\";\n\nconst schema = yup.object({});\n\nconst TaskReallocation = () => {\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    formState: { errors },\n    clearErrors,\n  } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  let { id } = useParams();\n  //console.log(id);\n\n  let history = useHistory();\n\n  const [serverErrors, setServerErrors] = useState([]);\n  const [entity, setEntity] = useState({});\n  const [state, setState] = useState({});\n\n  const [secList, setSecList] = useState([]);\n  const [pendingList, setPendingList] = useState([]);\n  const [secItem, setSecItem] = useState();\n  const [secCodeItems, setSecCodeItems] = useState([]);\n  const [secItems, setSecItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [mesg, setMesg] = useState();\n  const [taskList, setTaskList] = useState([]);\n  const [reallotList, setReallotList] = useState([]);\n  const [taskNo, setTaskNo] = useState(\"\");\n  const [reallocateTaskNo, setReallocateTaskNo] = useState(\"\");\n  const [secCode, setSecCode] = useState();\n  const [disabled, setDisabled] = useState(false);\n\n  const [key, setKey] = useState(\"Page1\");\n\n  const [page, setPage] = useState(0);\n\n  //pcdao -- for TablePage\n  const [pageSize, setPageSize] = useState(0);\n\n  useEffect(() => {\n    let fetching = false;\n    let unmounted = false;\n\n    async function fetchUsrSectionData() {\n      if (!fetching)\n        //console.log(secId);\n        await axios\n          .get(`/usrs/0/loggedInUsrSections`)\n          .then((response) => {\n            console.log(\"response>>\" + response.data);\n            setSecList(response.data);\n\n            if (!unmounted) {\n              setSecItems(\n                response.data.map(({ id, sectionName }) => ({\n                  id: id,\n                  label: sectionName,\n                }))\n              );\n              setLoading(false);\n            }\n          })\n          .catch((error) => {\n            //console.log(error);\n            //console.log(error.response.status);\n            //console.log(error.response.headers);\n            if (error.response) setServerErrors(error.response.data.error);\n            else setServerErrors(error.Error);\n          });\n    }\n    fetchUsrSectionData();\n\n    return () => {\n      fetching = true;\n      unmounted = true;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    let fetching = false;\n    let unmounted = false;\n\n    async function fetchTaskData() {\n      console.log(secItem);\n      if (!fetching && secItem)\n        //console.log(secId);\n        await axios\n          .get(`/tasks/${secItem}/taskList`)\n          .then((response) => {\n            console.log(\"response section codce >>\" + response.data);\n            setTaskList(response.data);\n            setReallotList(response.data);\n\n            if (!unmounted) {\n              setLoading(false);\n            }\n          })\n          .catch((error) => {\n            //console.log(error);\n            //console.log(error.response.status);\n            //console.log(error.response.headers);\n            if (error.response) setServerErrors(error.response.data.error);\n            else setServerErrors(error.Error);\n          });\n    }\n    fetchTaskData();\n\n    return () => {\n      fetching = true;\n      unmounted = true;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [secItem]);\n\n  useEffect(() => {\n    let fetching = false;\n    let unmounted = false;\n\n    async function fetchPendingBillsForTask() {\n      console.log(secItem + \"-\" + taskNo);\n      if (!fetching && taskNo && secItem) {\n        await axios\n          .get(`/tasks/${secItem}/taskNo/${taskNo}`)\n          .then((response) => {\n            //console.log(\"response cs list >>\" + response.data);\n            setPendingList(response.data);\n\n            if (!unmounted) {\n              setLoading(false);\n            }\n          })\n          .catch((error) => {\n            //console.log(error);\n            //console.log(error.response.status);\n            //console.log(error.response.headers);\n            if (error.response) setServerErrors(error.response.data.error);\n            else setServerErrors(error.Error);\n          });\n      }\n    }\n    fetchPendingBillsForTask();\n\n    return () => {\n      fetching = true;\n      unmounted = true;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [secCode, taskNo]);\n\n  const reallocateTask = () => {\n    if (disabled) return;\n    //\tconsole.log(data);\n    console.log(\"data id--------------\" + reallocateTaskNo);\n    setDisabled(true);\n    axios\n      .put(\n        `/tasks/${secItem}/reallotedTask/${reallocateTaskNo}/reallocate`,\n        pendingList\n      )\n      .then((response) => {\n        console.log(\n          \"reponse status--------------\" +\n            response.status +\n            \"--\" +\n            response.statusText +\n            \"----\" +\n            \"-h--\" +\n            response.headers +\n            \"--\" +\n            response.data\n        );\n        if (response.status === 200) {\n          setMesg(response.data);\n          setPendingList([]);\n        }\n      })\n      .catch((error) => {\n        //console.log(error.response.data);\n        //console.log(\"response--------\"+error.response.status);\n        //if(error.response.status!==200)\n        //history.push(\"/chequeSlips/dpsList\");\n        //console.log(error.response.headers);\n        if (error.response) setServerErrors(error.response.data);\n        else setServerErrors(error);\n      });\n\n    //history.push(\"/daks\");\n  };\n\n  const onError = (errors, e) => console.log(errors, e);\n\n  //All foreign keys.\n  // XXXXXX Add search fields and adjust the values as necessary\n\n  const errorCallback = (err) => {\n    //console.log(err);\n    setServerErrors(err);\n  };\n\n  const handleCheckBox = (index) => (e) => {\n    //console.log(Table.page)\n    console.log(e.target.checked + \"--\" + index);\n    //csList[index].select=e.target.checked;\n\n    console.log(e.target.checked);\n    let item = pendingList[index];\n\n    item[\"select\"] = e.target.checked;\n    let newData = [...pendingList];\n    newData[index] = item;\n    setPendingList(newData);\n    //console.log(csList);\n  };\n\n  const handleSectionChange = (e) => {\n    console.log(e.target.selectedIndex + \"--\" + e.target.value);\n    setSecItem(e.target.value);\n  };\n\n  const handleSectionCodeChange = (e) => {\n    console.log(e.target.selectedIndex + \"-->>\" + e.target.value);\n    setTaskNo(e.target.value);\n  };\n\n  const handleReallot = (e) => {\n    setReallocateTaskNo(e.target.value);\n  };\n\n  const updateCheckBoxAll = (e) => {\n    // console.log(\"...\"+e.target.checked+\"--\"+index);\n\n    let newData = [...pendingList];\n    for (var k in newData) {\n      newData[k].select = e.target.checked;\n    }\n    setPendingList(newData);\n  };\n  //\tconst handlePage = (pp)=>{\n  //\tconsole.log(pp);\n  //\tsetPage(pp);\n  //\t}\n\n  const handleInputChange = (e) => {\n    console.log(e.target.value);\n    //\tconsole.log(\"handle input change\");\n  };\n\n  const callback = (e) => {\n    console.log(e);\n  };\n\n  const ShowDps = () => {\n    const handleP = (pp) => {\n      console.log(pp);\n      setPage(pp);\n    };\n\n    //pcdao added below method for TablePage\n    const handlePageSize = (pp) => {\n      console.log(pp);\n      setPageSize(pp);\n    };\n\n    const columns = useMemo(\n      () => [\n        {\n          Header: <input type=\"checkbox\" onChange={updateCheckBoxAll} />,\n          accessor: \"select\",\n          Cell: ({ row }) => (\n            <div>\n              <input\n                type=\"checkbox\"\n                onChange={handleCheckBox(row.index)}\n                checked={pendingList[row.index][\"select\"]}\n              />\n            </div>\n          ),\n        },\n        {\n          Header: \"Dak Id\",\n          accessor: \"dak\",\n          Cell: ({ row }) => (\n            <div>\n              <div>\n                <label>{row.original.dak.dakidNo}</label>\n              </div>\n              <div>\n                <label> {row.original.dak.dakType.description}</label>\n              </div>\n            </div>\n          ),\n        },\n        {\n          Header: \"CDAONo\",\n          //pcdao commented out below accessor\n          //accessor: \"cdaoNo\",\n          Cell: ({ row }) => (\n            <div>\n              <div>\n                {/* pcdao -- modified below so that cdao no is picked from dak instead of cbill */}\n                <label>{row.original.dak.cdaoNo}</label>\n              </div>\n              <div>\n                <label> {row.original.employee.officerName}</label>\n              </div>\n              <div>\n                <label> {row.original.employee.rank.rankName}</label>\n              </div>\n            </div>\n          ),\n        },\n        {\n          Header: \"Section\",\n          accessor: \"section\",\n          Cell: ({ row }) => (\n            <div>\n              <div>\n                <label>{row.original.section.sectionName}</label>\n              </div>\n              <div>\n                <label>Task : {row.original.taskNo}</label>\n              </div>\n            </div>\n          ),\n        },\n\n        {\n          Header: \"Amount\",\n          accessor: \"dak.amount\",\n        },\n      ],\n      [pendingList, page, setPage]\n    );\n\n    return (\n      <div className=\"min-h-screen bg-green-100 text-gray-700\">\n        <div className=\"max-w-5xl mx-auto px-2 sm:px-6 lg:px-8 pt-4\">\n          <div className=\"-mt-2 max-h-1 py-0 ml-0\">\n            <TablePage\n              columns={columns}\n              data={pendingList}\n              newpage={page}\n              parentCallback={handleP}\n              //pcdao added below two attributes for TablePage\n              newPageSize={pageSize}\n              parentCallbackPageSize={handlePageSize}\n              className=\"table-auto\"\n            />\n\n            <div className=\"mt-2 ml-4\">\n              <button\n                type=\"button\"\n                onClick={reallocateTask}\n                className=\"w-24 mb-24 p-0\"\n              >\n                Re-allocate Task\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 text-gray-900\">\n      <div className=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-4\">\n        <div className=\"text-red-500\">{serverErrors}</div>\n\n        <h1 className=\"text-xl font-semibold ml-4\">Task Reallocation</h1>\n\n        <div className=\"mt-2 ml-4\">\n          <b>Section</b>\n\n          <select\n            className=\"w-22 m-0 p-0\"\n            disabled={loading}\n            value={secItem}\n            onChange={handleSectionChange}\n          >\n            <option key=\"0\" value={\"\"}>\n              --select section--\n            </option>\n            {secItems.map(({ id, label }) => (\n              <option key={id} value={id}>\n                {\" \"}\n                {label}{\" \"}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"mt-2 ml-4\">\n          <b>Task</b>\n          <select\n            className=\"w-22 m-0 p-0\"\n            disabled={loading}\n            value={taskNo}\n            onChange={handleSectionCodeChange}\n          >\n            <option key=\"0\" value={\"\"}>\n              --select task No--\n            </option>\n            {taskList.map((item, index) => (\n              <option key={index} value={item.toString()}>\n                {\" \"}\n                {item.toString()}{\" \"}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"mt-2 ml-4\">\n          <b>Reallocate to </b>\n          <select\n            className=\"w-22 m-0 p-0\"\n            disabled={loading}\n            value={reallocateTaskNo}\n            onChange={handleReallot}\n          >\n            <option key=\"0\" value={\"\"}>\n              --Reallocate task--\n            </option>\n            {reallotList.map((item, index) => (\n              <option key={index} value={item.toString()}>\n                {\" \"}\n                {item.toString()}{\" \"}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        <div className=\"mt-2 max-h-1 py-0 ml-0\">\n          <ShowDps />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(TaskReallocation);\n"]},"metadata":{},"sourceType":"module"}